<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Fitzeng</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://fitzeng.org/"/>
  <updated>2018-02-24T11:24:48.353Z</updated>
  <id>http://fitzeng.org/</id>
  
  <author>
    <name>fitzeng</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>æœºå™¨å­¦ä¹ åŸºæœ¬ç®—æ³•ä¹‹ç¥ç»ç½‘ç»œ</title>
    <link href="http://fitzeng.org/2018/02/19/MLNeuralNetwork/"/>
    <id>http://fitzeng.org/2018/02/19/MLNeuralNetwork/</id>
    <published>2018-02-19T03:27:00.000Z</published>
    <updated>2018-02-24T11:24:48.353Z</updated>
    
    <content type="html"><![CDATA[<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script>

<blockquote>
<p>å†™åœ¨å‰é¢ï¼šæˆ‘å°†ä»ä¸€ä¸ªå…¥é—¨è€…çš„è§†è§’ï¼ˆæ°´å¹³ï¼‰å°†æœºå™¨å­¦ä¹ ä¸­çš„å¸¸ç”¨ç®—æ³•å¨“å¨“é“æ¥ã€‚è‡ªèº«æ°´å¹³ç¡®å®æœ‰é™ï¼Œå¦‚æœå…¶ä¸­æœ‰ä»€ä¹ˆé”™è¯¯çš„è¯å¸Œæœ›å¤§å®¶æŒ‡å‡ºï¼Œé¿å…è¯¯å¯¼å¤§å®¶ã€‚</p>
<p>è¿™ä¸ªç³»åˆ—å·²ç»æœ‰ä¸¤ç¯‡å‰ä½œäº†ï¼ˆè·³ç¥¨äº†ä¸€ç¯‡<a href="http://fitzeng.org/2018/02/18/MLDecisionTree/">å†³ç­–æ ‘</a>ğŸ˜‚ğŸ˜‚ğŸ˜‚ï¼‰ï¼Œæ¬¢è¿æ„Ÿå…´è¶£çš„è¯»è€…å»é˜…è¯»ï¼š</p>
<ul>
<li><a href="http://fitzeng.org/2018/02/11/MLLinearRegression/">æœºå™¨å­¦ä¹ åŸºæœ¬ç®—æ³•ä¹‹çº¿æ€§å›å½’</a></li>
<li><a href="http://fitzeng.org/2018/02/16/MLLogisticRegression/">æœºå™¨å­¦ä¹ åŸºæœ¬ç®—æ³•ä¹‹é€»è¾‘å›å½’</a></li>
</ul>
<p><a href="https://github.com/mk43/machine-learning/tree/master/algorithm/neural-network" target="_blank" rel="external">å®éªŒä»£ç </a>-<a href="https://github.com/mk43/machine-learning/tree/master/reference" target="_blank" rel="external">å‚è€ƒä¹¦ç±</a>-[å‚è€ƒåšå®¢è¯¦è§æœ€å]</p>
</blockquote>
<a id="more"></a>
<h2 id="0-åŸºæœ¬ä»‹ç»"><a href="#0-åŸºæœ¬ä»‹ç»" class="headerlink" title="0 åŸºæœ¬ä»‹ç»"></a>0 åŸºæœ¬ä»‹ç»</h2><h3 id="0-1-ä¸ºä»€ä¹ˆä¼šäº§ç”Ÿç¥ç»ç½‘ç»œ"><a href="#0-1-ä¸ºä»€ä¹ˆä¼šäº§ç”Ÿç¥ç»ç½‘ç»œ" class="headerlink" title="0.1 ä¸ºä»€ä¹ˆä¼šäº§ç”Ÿç¥ç»ç½‘ç»œ"></a>0.1 ä¸ºä»€ä¹ˆä¼šäº§ç”Ÿç¥ç»ç½‘ç»œ</h3><p>è‡³äºå†å²ä¸Šæ˜¯å¦‚ä½•çš„å¤§å®¶å¯ä»¥ç½‘ä¸ŠæŸ¥é˜…ï¼Œè¿™é‡Œè®²è®²æˆ‘å¯¹äºç¥ç»ç½‘ç»œäº§ç”Ÿçš„å¿…ç„¶æ€§çš„ä¸€äº›çœ‹æ³•ã€‚å…ˆå›åˆ°ä¸Šä¸€ç¯‡æ–‡ç« ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœè¦æ‰¾ä¸€ä¸ªç®€å•çš„èƒ½ç”¨ç°æœ‰å‡½æ•°è§„åˆ™æè¿°çš„ç‰¹å¾è¾¹ç•Œï¼ˆæ¯”å¦‚ç›´çº¿ï¼Œåœ†ï¼Œæ¤­åœ†ï¼Œçƒé¢â€¦â€¦ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥é€‰å–å®ƒçš„ç‰¹å¾é‡ï¼Œç„¶åå¯¹è¿™ä¸ªæ¨¡å‹è¿›è¡Œè®­ç»ƒï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºæŸç§é—®é¢˜æœ‰å®ƒçš„æŸç§ç‰¹å®šçš„æ¨¡å‹è¿›è¡Œå°±ç®—ï¼Œä½†æ˜¯å¦‚æœç¨å¾®å¤æ‚ä¸€ç‚¹çš„å‘¢ï¼Ÿæˆ‘ä»¬è¯¥å¦‚ä½•åšï¼Ÿå›åˆ°æˆ‘ä»¬å¯¹æœºå™¨å­¦ä¹ ä»€ä¹ˆéƒ½ä¸çŸ¥é“çš„æ—¶å€™ï¼Œåœ¨å¼€ç¯‡çº¿æ€§å›å½’ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›çš„æ˜¯æœ‰è¿™æ ·ä¸€ä¸ªé»‘ç›’ï¼ŒæŠŠæ•°æ®è¾“å…¥è¿›å»ï¼Œå®ƒèƒ½æŠŠç»“æœç»™æˆ‘åé¦ˆå‡ºæ¥ï¼Œæˆ‘ä¸éœ€è¦çŸ¥é“è¿™ä¸ªé»‘ç›’å†…éƒ¨çš„ç»“æ„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘å¹¶ä¸éœ€è¦å»ç‰¹å®šçš„è§„åˆ’å¦‚ä½•æ„å»ºç‰¹å¾é‡ï¼Œè€Œæ˜¯ç›´æ¥åŸå§‹æ•°æ®è¾“è¿›å»å°±å¥½ï¼Œè¾“å‡ºç»“æœç¬¦åˆæˆ‘ä»¬çš„é¢„æœŸå°±ä»£è¡¨è¿™ä¸ªæ¨¡å‹å¯ä»¥ä¸ºæˆ‘ä»¬æ‰€ç”¨ã€‚é‚£ä¹ˆï¼Œé—®é¢˜æ¥äº†ï¼Œæˆ‘ä»¬çš„é¢„æœŸæ˜¯æ€ä¹ˆäº§ä»€ä¹ˆçš„å‘¢ï¼Ÿæˆ‘ä¹Ÿä¸çŸ¥é“ï¼Œä½†æ˜¯æˆ‘çŸ¥é“ï¼Œå¦‚æœç»™äººä¸€å¼ å›¾ç‰‡ï¼Œäººèƒ½å¤Ÿè¯†åˆ«è¿™æ˜¯çŒ«è¿˜æ˜¯ç‹—ï¼Œé‚£è¿™ä¸ªäººçš„æ€ç»´è¿‡ç¨‹ä¸å°±æ˜¯ç±»ä¼¼ä¸€ä¸ªé»‘ç›’å—ï¼Ÿè™½ç„¶é‡Œé¢çš„è¿è¡Œæœºåˆ¶è‚¯å®šéƒ½æ˜¯ç¡®å®šçš„ã€‚é‚£æˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥æ¨¡ä»¿è¿™ä¸ªè¿‡ç¨‹ï¼ŒæŠŠç±»ä¼¼äºè¿™ç§è¯†åˆ«é—®é¢˜éƒ½é€šè¿‡è¿™ä¸€æ¡æµæ°´çº¿å¤„ç†ä¸‹æ¥ï¼Œå¾—å‡ºçš„ç»“æœåº”è¯¥æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œè‡³äºå‡†ç¡®åº¦ï¼Œé‚£å°±æ˜¯ä¹‹å‰è¯´çš„å°å­©å’Œå¤§äººçš„åŒºåˆ«äº†ï¼Œæ‰€ä»¥è¯´åå¤©ä¹ å¾—ï¼ˆè®­ç»ƒæ¨¡å‹ï¼‰æ˜¯äººæˆé•¿çš„å…³é”®ä¸€æ­¥ã€‚</p>
<h3 id="0-2-ä»€ä¹ˆæ˜¯ç¥ç»ç½‘ç»œ"><a href="#0-2-ä»€ä¹ˆæ˜¯ç¥ç»ç½‘ç»œ" class="headerlink" title="0.2 ä»€ä¹ˆæ˜¯ç¥ç»ç½‘ç»œ"></a>0.2 ä»€ä¹ˆæ˜¯ç¥ç»ç½‘ç»œ</h3><p>æˆ‘è¿˜ä¸å¤ªäº†è§£ï¼Œæ‰€ä»¥å¯ä»¥çœ‹çœ‹åˆ«äººçš„çœ‹æ³•ï¼š<a href="https://www.zhihu.com/question/22553761/answer/36429105" target="_blank" rel="external">å¦‚ä½•ç®€å•å½¢è±¡åˆæœ‰è¶£åœ°è®²è§£ç¥ç»ç½‘ç»œæ˜¯ä»€ä¹ˆï¼Ÿ</a> </p>
<h3 id="0-3-ç¥ç»ç½‘ç»œèƒ½è§£å†³ä»€ä¹ˆé—®é¢˜"><a href="#0-3-ç¥ç»ç½‘ç»œèƒ½è§£å†³ä»€ä¹ˆé—®é¢˜" class="headerlink" title="0.3 ç¥ç»ç½‘ç»œèƒ½è§£å†³ä»€ä¹ˆé—®é¢˜"></a>0.3 ç¥ç»ç½‘ç»œèƒ½è§£å†³ä»€ä¹ˆé—®é¢˜</h3><p><a href="http://www.ruanyifeng.com/blog/2017/07/neural-network.html" target="_blank" rel="external">ç¥ç»ç½‘ç»œå…¥é—¨</a><br><a href="https://deeplearning4j.org/cn/neuralnet-overview" target="_blank" rel="external">æ·±åº¦ç¥ç»ç½‘ç»œç®€ä»‹</a></p>
<h2 id="1-åˆè¯†ç¥ç»ç½‘ç»œ"><a href="#1-åˆè¯†ç¥ç»ç½‘ç»œ" class="headerlink" title="1 åˆè¯†ç¥ç»ç½‘ç»œ"></a>1 åˆè¯†ç¥ç»ç½‘ç»œ</h2><p>å‰é¢å·²ç»å¯¹ä»çº¿æ€§å›å½’åˆ°é€»è¾‘å›å½’æ—¶æˆ‘ä»¬èƒ½å¤„ç†é—®é¢˜çš„å±€é™æ€§è¿›è¡Œåˆ†æï¼Œä¸ªäººå€¾å‘äºè®¤ä¸ºçº¿æ€§å›å½’æ›´å¤šçš„æ˜¯ä¸€ç§è¿ç»­æ€§çš„å€¼é¢„æµ‹ï¼Œé€»è¾‘å›å½’æ›´å¤šçš„æ˜¯ä¸€ç§çº¿æ€§å¯åˆ†çš„ç±»å‹åˆ’åˆ†ã€‚è€Œå¯¹äºéçº¿æ€§å¯åˆ†çš„é—®é¢˜æˆ‘ä»¬å°±å¿…é¡»å€ŸåŠ©å…¶å®ƒçš„æ‰‹æ®µäº†ã€‚</p>
<h3 id="1-1-ä»é€»è¾‘è¿ç®—çœ‹ç¥ç»ç½‘ç»œ"><a href="#1-1-ä»é€»è¾‘è¿ç®—çœ‹ç¥ç»ç½‘ç»œ" class="headerlink" title="1.1 ä»é€»è¾‘è¿ç®—çœ‹ç¥ç»ç½‘ç»œ"></a>1.1 ä»é€»è¾‘è¿ç®—çœ‹ç¥ç»ç½‘ç»œ</h3><p>å¾ˆå¤šå¾ˆå¤šåŸºç¡€çš„ä¾‹å­æ•™å­¦å°±æ˜¯ä»é€»è¾‘è¿ç®—å¼€å§‹çš„ã€‚ç›¸ä¿¡çœ‹äº†å‰é¢çš„ä¸€äº›å¯¹ç¥ç»ç½‘ç»œçš„ä»‹ç»æ€§æ–‡ç« ï¼Œä½ å¯¹ç¥ç»ç½‘ç»œåº”è¯¥æœ‰ä¸€å®šçš„æ„ŸçŸ¥ã€‚</p>
<p><img src="/2018/02/19/MLNeuralNetwork/1_1_01.png" alt=""><br><img src="/2018/02/19/MLNeuralNetwork/1_1_02.png" alt=""><br><img src="/2018/02/19/MLNeuralNetwork/1_1_03.png" alt=""></p>
<p>ä»¥ä¸Šæ˜¯ä¸æˆ–éçš„å›¾ï¼Œçº¢è‰²åœ†åœˆä»£è¡¨æ­£ä¾‹ï¼ˆ1ï¼‰ï¼Œé»‘è‰²ä¸‰è§’ä»£è¡¨åä¾‹ï¼ˆ0ï¼‰ã€‚ä¸‹é¢æˆ‘ä»¬æ¥æŠŠè¿™ä¸ªè½¬æ¢æˆç¥ç»ç½‘ç»œçš„å›¾ã€‚</p>
<p><img src="/2018/02/19/MLNeuralNetwork/1_1_04.png" alt=""></p>
<p>æ ¹æ®çœŸå€¼è¡¨ï¼Œç”±ä¸Šé¢çš„æƒé‡æ„é€ çš„ç¥ç»ç½‘ç»œæ˜¯èƒ½å¤Ÿå®ç°ä¸æˆ–éé€»è¾‘è¿ç®—çš„ã€‚å…¶å®å¯ä»¥çœ‹å‡ºç¥ç»ç½‘ç»œæœ€ç®€å•çš„ä¸€ç§å¤„ç†å¯¹è±¡å¯ä»¥æ˜¯çº¿æ€§å¯åˆ†çš„ï¼Œä¹Ÿå°±æ˜¯ç®€å•çš„åšä¸€æ¬¡æ˜ å°„ï¼ˆæ¿€æ´»ï¼‰ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸‹å¼‚æˆ–è¿ç®—å¦‚ä½•å¤„ç†ï¼š</p>
<p><img src="/2018/02/19/MLNeuralNetwork/1_1_05.png" alt=""></p>
<p>é€šè¿‡è§‚å¯Ÿä½ ä¼šå‘ä¸‹è¿™å›¾æ˜¯çº¿æ€§ä¸å¯åˆ†çš„ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æƒ³è¦é€šè¿‡ç»˜åˆ¶å‰é¢çš„ç±»ä¼¼äºä¸æˆ–éçš„æ“ä½œçš„ç¥ç»ç½‘ç»œç°åœ¨æ˜¯ç»˜åˆ¶ä¸å‡ºæ¥çš„ã€‚å› ä¸ºè¿™ä¸ªåˆ†å¸ƒä¸æ˜¯çº¿æ€§å¯åˆ†ï¼Œæ²¡åŠæ³•é€šè¿‡ä¸€ä¸ª \( W \) å˜æ¢æŠŠ \( X \) å˜æˆå•è°ƒçš„ï¼Œæ‰€ä»¥ä»…ä»…é€šè¿‡ä¸€æ¬¡å•è°ƒå‡½æ•° \( f \) çš„æ¿€æ´»æ˜¯ä¸å¯èƒ½å®ç°ç±»çš„åˆ’åˆ†çš„ã€‚</p>
<p>ä½†æ˜¯æˆ‘ä»¬å¯ä»¥è½¬å˜ä¸€ä¸‹æ€è·¯ï¼Œæ—¢ç„¶ä¸æˆ–éæ˜¯çº¿æ€§å¯åˆ†çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°½åŠ›æŠŠå½“å‰çš„å¼‚æˆ–è¿ç®—è½¬åŒ–æˆä¸æˆ–éå°±è§£å†³äº†ã€‚</p>
<p>$$<br>A\ XOR\ B=(A\land \lnot B) \lor (\lnot A\land B)<br>$$</p>
<p>æœ‰äº†ä¸Šé¢çš„å…¬å¼å°±å¥½åŠäº†ï¼Œæˆ‘ä»¬ç›´æ¥é€šè¿‡ \( X \) æ„é€ ä¸¤ä¸ªç¥ç»å…ƒ \( (A\land \lnot B), (\lnot A\land B) \)ï¼Œç„¶åå¤šè¿™ä¸¤ä¸ªç¥ç»å…ƒè¿›è¡Œæ¿€æ´»ï¼Œä¹‹åå°±æŠŠè¿™ä¸¤ä¸ªç¥ç»å…ƒè¿›è¡Œæˆ–æ“ä½œï¼Œæ¿€æ´»åæ‰€å¾—åˆ°çš„ç»“æœå°±æ˜¯ \( A\ XOR\ B \)ã€‚</p>
<p><img src="/2018/02/19/MLNeuralNetwork/1_1_06.png" alt=""></p>
<p>æ³¨æ„è¿™é‡Œå¯¹äºä¸‹æ ‡çš„è§„å®šæˆ‘ä»¬ä¸åšçº¦æŸï¼Œåœ¨ä¸‹ä¸€èŠ‚å…·ä½“è®²è§£çš„æ—¶å€™è¿›è¡Œè§„èŒƒåŒ–ä»‹ç»ã€‚</p>
<p>æ—¢ç„¶çœ‹æ ·å­æˆ‘ä»¬çš„ç¥ç»ç½‘ç»œå¯ä»¥è¿›è¡Œå¼‚æˆ–æ“ä½œäº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å†™ä¸€æ®µä»£ç éªŒè¯ä¸€ä¸‹å§ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># coding: utf-8</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"></div><div class="line">x1 = np.asarray([<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>])</div><div class="line">x2 = np.asarray([<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>])</div><div class="line">X = np.row_stack((np.ones(shape=(<span class="number">1</span>, <span class="number">4</span>)), x1, x2))</div><div class="line">print(<span class="string">"X:\n%s"</span> % X)</div><div class="line">y = np.asarray([<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>])</div><div class="line">W1 = np.asarray([[<span class="number">-1</span>, <span class="number">2</span>, <span class="number">-2</span>],</div><div class="line">                 [<span class="number">-1</span>, <span class="number">-2</span>, <span class="number">2</span>]])</div><div class="line">W2 = np.asarray([<span class="number">-1</span>, <span class="number">2</span>, <span class="number">2</span>])</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">sigmoid</span><span class="params">(input)</span>:</span></div><div class="line">    <span class="keyword">return</span> <span class="number">1</span> / (<span class="number">1</span> + np.power(np.e, <span class="number">-10</span> * (input)))</div><div class="line"></div><div class="line"></div><div class="line">np.set_printoptions(precision=<span class="number">6</span>, suppress=<span class="keyword">True</span>)</div><div class="line">z1 = np.matmul(W1, X)</div><div class="line">print(<span class="string">"W1*X = z1:\n%s"</span> % z1)</div><div class="line">a1 = np.row_stack((np.ones(shape=(<span class="number">1</span>, <span class="number">4</span>)), sigmoid(z1)))</div><div class="line">print(<span class="string">"sigmoid(z1) = a1:\n%s"</span> % a1)</div><div class="line">z2 = np.matmul(W2, a1)</div><div class="line">print(<span class="string">"W2*a1 = z2:\n%s"</span> % z2)</div><div class="line">a2 = sigmoid(z2)</div><div class="line">print(<span class="string">"------------------------"</span>)</div><div class="line">print(<span class="string">"prediction: %s"</span> % a2)</div><div class="line">print(<span class="string">"target: %s"</span> % y)</div><div class="line">print(<span class="string">"------------------------"</span>)</div><div class="line"></div><div class="line"><span class="comment"># output:</span></div><div class="line"><span class="comment"># X:</span></div><div class="line"><span class="comment"># [[1. 1. 1. 1.]</span></div><div class="line"><span class="comment">#  [0. 0. 1. 1.]</span></div><div class="line"><span class="comment">#  [0. 1. 0. 1.]]</span></div><div class="line"><span class="comment"># W1*X = z1:</span></div><div class="line"><span class="comment"># [[-1. -3.  1. -1.]</span></div><div class="line"><span class="comment">#  [-1.  1. -3. -1.]]</span></div><div class="line"><span class="comment"># sigmoid(z1) = a1:</span></div><div class="line"><span class="comment"># [[1.       1.       1.       1.      ]</span></div><div class="line"><span class="comment">#  [0.000045 0.       0.999955 0.000045]</span></div><div class="line"><span class="comment">#  [0.000045 0.999955 0.       0.000045]]</span></div><div class="line"><span class="comment"># W2*a1 = z2:</span></div><div class="line"><span class="comment"># [-0.999818  0.999909  0.999909 -0.999818]</span></div><div class="line"><span class="comment"># ------------------------</span></div><div class="line"><span class="comment"># prediction: [0.000045 0.999955 0.999955 0.000045]</span></div><div class="line"><span class="comment"># target: [0 1 1 0]</span></div><div class="line"><span class="comment"># ------------------------</span></div></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œé¢„æµ‹å€¼å’Œç›®æ ‡å€¼ä¸€è‡´ã€‚é‚£ä¹ˆè¿™é‡Œé¢åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</p>
<p>ä¸€å¼€å§‹ï¼Œæˆ‘ä»¬çš„ç‰¹å¾æ˜¯ \( [x1; x2] \)ã€‚<br>ç„¶åç»è¿‡ç¬¬ä¸€å±‚ï¼Œæ¿€æ´»ä¹‹åçš„ \( a1 \) å°±æ˜¯æˆ‘ä»¬è½¬åŒ–åçš„ç‰¹å¾ \( [a_1^{(1)}; a_2^{(1)}]=sigmoid(W_1X) \) å‰é¢æˆ‘ä»¬çœ‹åˆ°äº† \( [x1; x2] \) çš„å›¾çº¿æ€§ä¸å¯åˆ†ï¼Œé‚£ä¹ˆä»¥ \( [a_1^{(1)}; a_2^{(1)}] \) ä½œä¸ºç‰¹å¾æ˜¯å¦çº¿æ€§å¯åˆ†ï¼Ÿçœ‹æ•°æ®å’Œå›¾å§ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># sigmoid(z1) = a1:</span></div><div class="line"><span class="comment"># [[1.       1.       1.       1.      ]</span></div><div class="line"><span class="comment">#  [0.000045 0.       0.999955 0.000045]</span></div><div class="line"><span class="comment">#  [0.000045 0.999955 0.       0.000045]]</span></div><div class="line"><span class="comment"># target: [0 1 1 0]</span></div></pre></td></tr></table></figure>
<p><img src="/2018/02/19/MLNeuralNetwork/1_1_07.png" alt=""></p>
<p>å’¦ï¼Ÿçº¿æ€§å¯åˆ†å•¦ï¼ç„¶åå°±ç›´æ¥è¿›è¡Œç±»ä¼¼çº¿æ€§å›å½’çš„æ–¹æ³•ç›´æ¥æ±‚å¾—ç»“æœï¼Œæ²¡å¿…è¦åœ¨å¯»æ‰¾å…¶å®ƒçš„è½¬æ¢ç‰¹å¾ã€‚</p>
<p>é‚£ä¹ˆè¿™é‡Œç¥å¥‡ä¹‹å¤„å°±åœ¨äºçŸ©é˜µ \( W_1 \)ï¼Œå®ƒèƒ½æŠŠåŸæ¥çš„ç‰¹å¾è½¬æ¢æˆå¦ä¸€ç±»ç‰¹å¾ï¼Œè¿™é‡Œéœ€è¦å¯¹çŸ©é˜µç†è§£æ¯”è¾ƒæ·±åˆ»ï¼Œæˆ‘ä¸å¤ªæ‡‚å°±ä¸çè¯´äº†ã€‚ã€‚ã€‚å¯ä»¥çœ‹çœ‹<a href="https://www.bilibili.com/video/av6731067/" target="_blank" rel="external">ã€å®˜æ–¹åŒè¯­/åˆé›†ã€‘çº¿æ€§ä»£æ•°çš„æœ¬è´¨ - ç³»åˆ—åˆé›†</a> PS: è¯´å®è¯ï¼Œæˆ‘è¿˜æ˜¯å¥½ä¹…ä¹‹å‰çœ‹äº†ä¸€ç‚¹ç‚¹ï¼Œçœ‹æ¥å¾—æŠ½ç‚¹æ—¶é—´ä»”ç»†çœ‹ä¸€éï¼Œæ¯•ç«Ÿæœºå™¨å­¦ä¹ ä¸­å……æ»¡ç€çŸ©é˜µã€‚</p>
<p>æ‰€ä»¥ï¼Œé€šè¿‡ç‰¹å¾è½¬æ¢ï¼Œå¯ä»¥æŠŠçº¿æ€§ä¸å¯åˆ†çš„é—®é¢˜åœ¨å¦å¤–çš„ç‰¹å¾ä¸Šçº¿æ€§å¯åˆ†ã€‚ç„¶åé€šè¿‡æ¿€æ´»å‡½æ•°ä½¿æ•°æ®åœ¨ä¸‹ä¸€æ¬¡è¾“å…¥æ—¶ç¬¦åˆè§„èŒƒåŒ–ï¼Œè¿™å°±æ˜¯ç¥ç»ç½‘ç»œçš„ç¥å¥‡ä¹‹å¤„ã€‚</p>
<h2 id="2-è®­ç»ƒç¥ç»ç½‘ç»œ"><a href="#2-è®­ç»ƒç¥ç»ç½‘ç»œ" class="headerlink" title="2 è®­ç»ƒç¥ç»ç½‘ç»œ"></a>2 è®­ç»ƒç¥ç»ç½‘ç»œ</h2><p>å‰é¢ä¸ºäº†å¯¹ç¥ç»ç½‘ç»œâ€œå¨åŠ›â€çš„äº†è§£ï¼Œç›´æ¥ç»™å‡ºäº† \( W \)ã€‚è€Œæˆ‘ä»¬è®­ç»ƒæ•°æ®å°±æ˜¯ä¸ºäº†æ‰¾åˆ°åˆé€‚çš„ \( W \) å»è¿›è¡Œé¢„æµ‹ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥æˆ‘ä»¬æ ¹æ®å‰é¢é€»è¾‘å›å½’çš„æœºå™¨å­¦ä¹ åˆ†ææ–¹å¼å¯¹ç¥ç»ç½‘ç»œè¿›è¡Œä¸€ä¸€åˆ†æã€‚</p>
<h3 id="2-1-æŸå¤±å‡½æ•°"><a href="#2-1-æŸå¤±å‡½æ•°" class="headerlink" title="2.1 æŸå¤±å‡½æ•°"></a>2.1 æŸå¤±å‡½æ•°</h3><p>è¿™é‡Œæˆ‘ä»¬å®Œå…¨å¯ä»¥æŠŠè¿™ä¸ªæ¨¡å‹å®šä¹‰ä¸ºä¸€ä¸ªé»‘ç›’ï¼Œåªè¦çœ‹è¾“å‡ºå’Œæˆ‘ä»¬çš„ç›®æ ‡å€¼æ˜¯å¦åŒ¹é…ï¼Œé‚£ä¹ˆè¿™é‡Œçš„æŸå¤±å‡½æ•°å’Œé€»è¾‘å›å½’å°±æ˜¯åŸºæœ¬ä¸€æ ·äº†ã€‚</p>
<p>ç†è§£å¯ä»¥ä½œä¸ºé»‘ç›’ç†è§£ï¼Œè®¡ç®—å¯å°±ä¸è¡Œäº†ï¼Œå› ä¸ºæ¯ä¸€ä¸ªå‚æ•°éƒ½å¾—æä¾›ç¡®åˆ‡çš„è®¡ç®—è¿‡ç¨‹ã€‚æ¥ä¸‹æ¥å°±å¼€å§‹å§ï¼š</p>
<p><img src="/2018/02/19/MLNeuralNetwork/2_1_01.png" alt=""></p>
<p>å…ˆä»‹ç»ä¸€ä¸‹å‘½åï¼šä¸€èˆ¬å¤§å†™ä»£è¡¨çŸ©é˜µï¼Œä¸Šæ ‡ä»£è¡¨å±‚æ•°ï¼Œå°å†™åªå¸¦ä¸Šæ ‡ä»£è¡¨åˆ—å‘é‡ï¼Œå¦‚æœä¸‹æ ‡é½å…¨ä»£è¡¨æŸä¸ªæ•°å€¼ã€‚</p>
<p><img src="/2018/02/19/MLNeuralNetwork/2_1_02.png" alt=""></p>
<p>\( W^{(i)} \)ï¼šç¬¬ \( i \) ä¸ªæƒé‡çŸ©é˜µ</p>
<p>$$<br>W^{(1)} =<br>\begin{bmatrix}<br>w_{1,0}^{(1)} &amp; w_{1,1}^{(1)} &amp; \ldots \\<br>w_{2,0}^{(1)} &amp; w_{2,1}^{(1)} &amp; \ldots \\<br>\vdots &amp; \vdots &amp; \ddots<br>\end{bmatrix}<br>bias^{(i)} =<br>\begin{bmatrix}<br>w_{1,0}^{(i)} \\<br>w_{2,0}^{(i)} \\<br>\vdots<br>\end{bmatrix}<br>$$</p>
<p>\( X^{(0)} \)ï¼šè¾“å…¥ï¼Œå¹¶ä¸”æ·»åŠ ä¸€ä¸ªæ’ä¸º\( 1 \)çš„ç¥ç»å…ƒï¼Œæ¯ä¸€åˆ—ä»£è¡¨ä¸€ç»„æ•°æ®</p>
<p>$$<br>X^{(0)} =<br>\begin{bmatrix}<br>1 &amp; 1 &amp; 1 &amp; \ldots \\<br>x_{1}^{(1)} &amp; x_{1}^{(2)} &amp; x_{1}^{(3)} &amp;\ldots \\<br>x_{2}^{(1)} &amp; x_{2}^{(2)} &amp; x_{2}^{(3)} &amp; \ldots \\<br>\vdots &amp; \vdots &amp; \vdots &amp; \ddots<br>\end{bmatrix}<br>x^{(i)} =<br>\begin{bmatrix}<br>1 \\<br>x_{1}^{(i)} \\<br>x_{2}^{(i)} \\<br>\vdots<br>\end{bmatrix}<br>$$</p>
<p>\( z^{(i)} \)ï¼šè®­ç»ƒå€¼ï¼Œå¯ä»¥æŠŠ \( x \) çœ‹åš \( a^{(0)} \)</p>
<p>$$<br>W^{(1)}x =<br>\begin{bmatrix}<br>w_{1,0}^{(1)} &amp; w_{1,1}^{(1)} &amp; w_{1,2}^{(1)} \\<br>w_{2,0}^{(1)} &amp; w_{2,1}^{(1)} &amp; w_{2,2}^{(1)} \\<br>\end{bmatrix}<br>\begin{bmatrix}<br>1 \\<br>x_{1} \\<br>x_{2}<br>\end{bmatrix}<br> =<br>\begin{bmatrix}<br>z_{1}^{(1)} \\<br>z_{2}^{(1)}<br>\end{bmatrix}<br> = z^{(1)} \\<br>W^{(i + 1)}a^{(i)} =<br>\begin{bmatrix}<br>w_{1,0}^{(i + 1)} &amp; w_{1,1}^{(i + 1)} &amp; w_{1,2}^{(i + 1)} \\<br>w_{2,0}^{(i + 1)} &amp; w_{2,1}^{(i + 1)} &amp; w_{2,2}^{(i + 1)} \\<br>\end{bmatrix}<br>\begin{bmatrix}<br>1 \\<br>a_{1}^{(i)} \\<br>a_{2}^{(i)}<br>\end{bmatrix}<br> =<br>\begin{bmatrix}<br>z_{1}^{(i + 1)} \\<br>z_{2}^{(i + 1)}<br>\end{bmatrix}<br> = z^{(i + 1)}<br>$$</p>
<p>\( a^{(i)} \)ï¼šæ¿€æ´»å€¼ï¼Œæ³¨æ„åœ¨è¿™é‡Œæ¿€æ´»å‡½æ•°é‡‡ç”¨ \( f=sigmoid \)</p>
<p>$$<br>a^{(i)} =<br>\begin{bmatrix}<br>1 \\<br>a_{1}^{(i)} \\<br>a_{2}^{(i)}<br>\end{bmatrix}<br> =<br>\begin{bmatrix}<br>1 \\<br>f(z_{1}^{(i)}) \\<br>f(z_{2}^{(i)})<br>\end{bmatrix}<br>$$</p>
<p>é‚£åœ¨ä¹‹å‰é‚£ä¸ªå¼‚æˆ–çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºï¼š</p>
<p>$$<br>\begin{aligned}<br>z^{(1)} &amp;= W^{(1)}x \\<br>a^{(1)} &amp;= f(z^{(1)})\ (add\ a_{0}^{(i)}=1) \\<br>z^{(2)} &amp;= W^{(2)}a^{(1)} \\<br>a^{(2)} &amp;= f(z^{(2)}) \\<br>\end{aligned}<br>$$</p>
<p>æŸå¤±å‡½æ•° \( J \)ï¼š</p>
<p>$$<br>J(W) = - y * log(a^{(2)}) - (1 - y) * log(1 - a^{(2)})<br>$$</p>
<p>æˆ‘ä»¬å¯¹äºä¸€ä¸ªè¾“å…¥ \( x_1, x_2 \) çš„æŸå¤±å€¼æ˜¯ \( J(W) \)ã€‚æ³¨æ„è¿™é‡Œ \( W \) çœ‹åšæ˜¯ä¸€ä¸ªé»‘ç›’çš„ \( W \)ï¼Œä¸ºäº†ç®€å•è¿™é‡Œåªé‡‡ç”¨ä¸€ç»´æ•°æ®</p>
<h3 id="2-2-å‚æ•°æ›´æ–°ï¼šåå‘ä¼ æ’­ç®—æ³•"><a href="#2-2-å‚æ•°æ›´æ–°ï¼šåå‘ä¼ æ’­ç®—æ³•" class="headerlink" title="2.2 å‚æ•°æ›´æ–°ï¼šåå‘ä¼ æ’­ç®—æ³•"></a>2.2 å‚æ•°æ›´æ–°ï¼šåå‘ä¼ æ’­ç®—æ³•</h3><p>å¦‚æœä½ ä¹‹å‰ä»æ¥æ²¡æœ‰æ¥è§¦è¿‡åå‘ä¼ æ’­ç®—æ³•ï¼Œå¯ä»¥è¿™æ ·æ€è€ƒï¼šæˆ‘ä»¬è¿™é‡Œçš„ç›®çš„æ˜¯æ›´æ–° \( W^{(i)} \)ï¼Œè€Œæˆ‘ä»¬ç›®å‰ç†Ÿæ‚‰çš„æœ€ä¼˜åŒ–ç®—æ³•å°±åªæœ‰æ¢¯åº¦ä¸‹é™ç®—æ³•ï¼ˆPSï¼šçœ‹æ¥è¦å»å¤ä¹ ä¸€éæ•°å€¼è®¡ç®—äº†ğŸ˜‚ğŸ˜‚ğŸ˜‚ï¼‰ï¼Œé‚£ä¹ˆè‡ªç„¶å°±æœ‰ï¼š</p>
<p>$$<br>W^{(i)} = W^{(i)} - \alpha\frac{\partial\ J}{\partial\ W^{(i)}}<br>$$</p>
<p>é‚£ä¹ˆ</p>
<p>$$<br>W^{(2)} = W^{(2)} - \alpha\frac{\partial\ J}{\partial\ W^{(2)}} \\<br>W^{(1)} = W^{(1)} - \alpha\frac{\partial\ J}{\partial\ W^{(1)}}<br>$$</p>
<p>æ¥ä¸‹æ¥è¦ç”¨åˆ°ä¸€å¤§æ³¢çŸ©é˜µæ±‚å¯¼çš„çŸ¥è¯†ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘å‡†å¤‡æœ€ä¹…çš„åœ°æ–¹ï¼Œå› ä¸ºè¦æ‰‹å†™ä»£ç å¿…éœ€æ¯ä¸€ä¸ªç»†èŠ‚éƒ½å¾—çŸ¥é“ï¼Œç”±äºè¿™é‡Œé‡ç‚¹æ˜¯æœºå™¨å­¦ä¹ ï¼Œæ‰€ä»¥æˆ‘ä¼šç»™å‡ºè®¡ç®—çš„æ¨å¯¼è¿‡ç¨‹ï¼Œä½†æ˜¯çŸ©é˜µæ±‚å¯¼çš„åŸç†å¤§å®¶å°±çœ‹å‚è€ƒèµ„æ–™å§ã€‚</p>
<p><a href="https://en.wikipedia.org/wiki/Matrix_calculus" target="_blank" rel="external">Matrix calculus</a>ï¼šä¸»è¦æ˜¯äº†è§£ <code>Numerator-layout notation</code> ã€<code>Denominator-layout notation</code> çš„è¡¨ç¤ºæ–¹æ³•å’Œ <code>Scalar-by-matrix identities</code>ï¼Œå…¶å®ƒçš„ä¹Ÿæ¨èçŸä¸€çŸã€‚<br><a href="https://zhuanlan.zhihu.com/p/24709748" target="_blank" rel="external">çŸ©é˜µæ±‚å¯¼æœ¯ï¼ˆä¸Šï¼‰</a><a href="https://zhuanlan.zhihu.com/p/24863977" target="_blank" rel="external">çŸ©é˜µæ±‚å¯¼æœ¯ï¼ˆä¸‹ï¼‰</a>çœ‹çœ‹åŸç†ä¸å®æ“ã€‚ç„¶å<a href="https://zhuanlan.zhihu.com/p/22473137" target="_blank" rel="external">ç¥ç»ç½‘ç»œåå‘ä¼ æ’­çš„æ•°å­¦åŸç†</a>ä¹Ÿå¯ä»¥çœ‹ä¸‹ï¼Œé‡Œé¢å¯¹é€»è¾‘æ¨ç†éƒ¨åˆ†å¯èƒ½ä¸æ˜¯å¾ˆä¸¥è°¨ï¼Œä½†æ˜¯æ•´ä½“æ€è·¯å¾ˆé€‚åˆé˜…è¯»ï¼Œå¯¹äºæˆ‘ä»¬æ¥è¯´å¯èƒ½ä¸éœ€è¦è¿™ä¹ˆç¼œå¯†çš„é€»è¾‘æ¨ç†è¿‡ç¨‹ï¼Œä¸è¿‡æˆ‘åœ¨ä¸‹é¢ä¼šæŠŠè®¡ç®—è¿‡ç¨‹åˆ—å‡ºæ¥çš„ï¼Œæœ‰å…´è¶£çš„å¯ä»¥é˜…è¯»ã€‚</p>
<p>å¥½äº†ï¼Œåˆ°è¿™é‡Œå°±å½“å¤§å®¶æœ‰ä¸€å®šæ±‚å¯¼åŸºç¡€äº†ã€‚è¿™é‡Œçš„ \( \frac{\partial\ J}{\partial\ W^{(i)}} \) å¾ˆæ˜æ˜¾æ˜¯ä¸€ä¸ª <code>scalar-by-matrix</code> é‚£ä¹ˆæˆ‘ä»¬é‡‡ç”¨è¿¹çš„å½¢å¼æ±‚è§£ã€‚</p>
<p>$$<br>\frac{\partial\ J}{\partial\ W^{(i)}} = \frac{\partial\ J}{\partial\ z^{(i)}}\frac{\partial\ z^{(i)}}{\partial\ W^{(i)}} \\<br>$$</p>
<p>å…¶ä¸­</p>
<p>$$<br>\frac{\partial\ z^{(i)}}{\partial\ W^{(i)}} = {a^{(i - 1)}}^T \\<br>\frac{\partial\ J}{\partial\ z^{(i)}} = \frac{\partial\ J}{\partial\ z^{(i + 1)}}\frac{\partial\ z^{(i + 1)}}{\partial\ a^{(i)}}\frac{\partial\ a^{(i)}}{\partial\ z^{(i)}} = {W^{(i + 1)}}^T\frac{\partial\ J}{\partial\ z^{(i + 1)}}.*fâ€™(z^{(i)})<br>$$</p>
<p>å¦‚æœä½ å·²ç»çŸ¥é“è®¡ç®—ï¼Œæˆ–è€…ä¸éœ€è¦è®¤ä¸ºä¸éœ€è¦è®¡ç®—é‚£ä¹ˆå°±å¯ä»¥ç›´æ¥è·³è¿‡è¯æ˜è¿‡ç¨‹äº†ã€‚</p>
<p>è¯æ˜ï¼š<br>å·²çŸ¥</p>
<p>$$<br>\sum_{i,\ j}A_{ij}B_{ij} = tr(A^TB) \\<br>df = \sum_{i,\ j}\frac{\partial f}{\partial X_{ij}}dX_{ij} = tr(\frac{\partial f}{\partial X}^TdX) \\<br>tr(AB) = tr(BA) \\<br>tr(A^T(B .* C)) = tr((A .* B)^TC) \\<br>df(X) = fâ€™(X) .* X<br>$$</p>
<p>å¯¹ä»¥ä¸Šå…¬å¼çš„è¯æ˜æ„Ÿå…´è¶£çš„å¯ä»¥åœ¨ç½‘ä¸ŠæŸ¥è¯¢ï¼Œå› ä¸ºâ€¦â€¦å› ä¸ºæˆ‘ä¹Ÿåªæ˜¯æ„Ÿè§‰å…¬å¼å¯¹ï¼ˆä½¿ç”¨æµ‹è¯•ç”¨ä¾‹ï¼‰ï¼Œä¸¥è°¨è¯æ˜æˆ‘ä¹Ÿä¸å¤ªä¼šğŸ˜‚ğŸ˜‚ğŸ˜‚</p>
<p>é‚£ä¹ˆå¯¹ \( z^{(i)} = W^{(i)}a^{(i - 1)} \) å¾®åˆ†ï¼š</p>
<p>$$<br>\begin{aligned}<br>dz^{(i)} &amp; = dW^{(i)}a^{(i - 1)} \\<br>&amp; = tr(a^{(i - 1)}dW^{(i)}) \\<br>&amp; = tr(({a^{(i - 1)}}^T)^TdW^{(i)}) \\<br>&amp; \Rightarrow \frac{\partial\ z^{(i)}}{\partial\ W^{(i)}} = {a^{(i - 1)}}^T \\<br>\end{aligned}<br>$$</p>
<p>å¾ˆç®€å•ï¼Œç¬¬ä¸€ä¸ªè¯æ˜å®Œæˆï¼Œæ¥ç€è¯æ˜ç¬¬äºŒä¸ªï¼š</p>
<p>$$<br>\begin{aligned}<br>dJ &amp; = tr({\frac{\partial\ J}{\partial\ z^{(i + 1)}}}^Tdz^{(i + 1)}) \\<br>&amp; = tr({\frac{\partial\ J}{\partial\ z^{(i + 1)}}}^TW^{(i + 1)}da^{(i)}) \\<br>&amp; = tr({\frac{\partial\ J}{\partial\ z^{(i + 1)}}}^TW^{(i + 1)}fâ€™(z^{(i)}) .* dz^{(i)}) \\<br>&amp; = tr([{W^{(i + 1)}}^T{\frac{\partial\ J}{\partial\ z^{(i + 1)}}}]^Tfâ€™(z^{(i)}) .* dz^{(i)})  \\<br>&amp; = tr([{W^{(i + 1)}}^T{\frac{\partial\ J}{\partial\ z^{(i + 1)}}} .* fâ€™(z^{(i)})]^T dz^{(i)})  \\<br>&amp; \Rightarrow \frac{\partial\ J}{\partial\ z^{(i)}} = {W^{(i + 1)}}^T{\frac{\partial\ J}{\partial\ z^{(i + 1)}}} .* fâ€™(z^{(i)})<br>\end{aligned}<br>$$</p>
<p>è¿™å°±æ˜¯æ‰€æœ‰è¯æ˜è¿‡ç¨‹äº†ã€‚å…¶ä¸­åªæœ‰ \( \frac{\partial\ J}{\partial\ z^{(i + 1)}} \) æ˜¯æœªçŸ¥çš„ï¼Œè¿™ä¸ªæ˜¯ç”± \( J \)çš„å®šä¹‰å†³å®šçš„ã€‚</p>
<p>ç”±å‰é¢åˆ†æï¼Œæˆ‘ä»¬é‡‡ç”¨çš„æå¤§ä¼¼ç„¶ä¼°è®¡è®¡ç®—è¯¯å·®ï¼Œæ‰€ä»¥ï¼š</p>
<p>$$<br>\begin{aligned}<br>\frac{\partial\ J}{\partial\ z^{(i + 1)}} &amp; = \frac{\partial\ J}{\partial\ a^{(i + 1)}}\frac{\partial\ a^{(i + 1)}}{\partial\ z^{(i + 1)}} \\<br>&amp; = \frac{\partial\ J}{\partial\ a^{(i + 1)}}fâ€™(z^{(i + 1)}) \\<br>&amp; = \frac{\partial\ (- y * log(a^{(i + 1)}) - (1 - y) * log(1 - a^{(i + 1)}))}{\partial\ a^{(i + 1)}}fâ€™(z^{(i + 1)}) \\<br>&amp; = \frac{k(1 - y(1+e^{-kz^{(i + 1)}}))}{e^{-kz^{(i + 1)}}}<br>\end{aligned}<br>$$</p>
<p>å…¶ä¸­ \( f(x) = \frac{1}{1 + e^{-kx}} \)ï¼Œåœ¨è°ƒè¯•ä»£ç æ—¶å¯ä»¥æŠŠ \( k \) å€¼è°ƒå¾—åˆé€‚å¤§ï¼Œä½¿å¾— \( sigmoid \) å‡½æ•°æ›´åƒé˜¶è·ƒå‡½æ•°ï¼Œè·å¾—æ¿€æ´»ä¹‹åçš„å€¼åœ¨ \( 0 \) é™„è¿‘çš„é‚»åŸŸå†…çš„è·¨åº¦æ›´å¤§ï¼Œè®­ç»ƒæ•ˆæœæ›´å¥½ï¼ˆæ­£ä¾‹æ›´é è¿‘ \( 1 \)ï¼Œåä¾‹æ›´é è¿‘ \( 0 \)ï¼‰ã€‚ç„¶åè¿™é‡Œçš„æ¨ç†å·æ‡’äº†ç›´æ¥ä½¿ç”¨å‰é¢åšæ–‡çš„â€œç»´æ•°ç›¸å®¹åŸç†â€ï¼Œå› ä¸ºè¿™ä¸ªçœ‹èµ·æ¥è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ã€‚</p>
<h2 id="3-ä»£ç å®ç°"><a href="#3-ä»£ç å®ç°" class="headerlink" title="3 ä»£ç å®ç°"></a>3 ä»£ç å®ç°</h2><p>è¿™é‡Œæˆ‘ä¼šç”¨æ‰‹å†™ä»£ç å®ç°å’Œä½¿ç”¨ \( TensorFlow \)å®ç°ä¸¤ç§æ–¹å¼ã€‚</p>
<h3 id="3-1-æ‰‹å†™ä»£ç å®ç°"><a href="#3-1-æ‰‹å†™ä»£ç å®ç°" class="headerlink" title="3.1 æ‰‹å†™ä»£ç å®ç°"></a>3.1 æ‰‹å†™ä»£ç å®ç°</h3><p>è¿™é‡Œæˆ‘æŒ‰ç…§å†™ä»£ç çš„æ€è·¯ä»‹ç»å§ï¼Œå› ä¸ºä¸€å¼€å§‹ä¸ç†Ÿæ‚‰ç›´æ¥æŒ‘ä¸€å—ä»£ç è®²æ ¹æœ¬ä¸çŸ¥é“ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Œæ²¡æœ‰ä¸€ä¸ªå¾ªåºæ¸è¿›çš„æ¦‚å¿µã€‚</p>
<ul>
<li>é¦–è¦ç›®çš„å°±æ˜¯è®­ç»ƒï¼š</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">train</span><span class="params">()</span>:</span></div><div class="line">    np.set_printoptions(precision=<span class="number">4</span>, suppress=<span class="keyword">True</span>)</div><div class="line">    x1 = np.asarray([<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>])</div><div class="line">    x2 = np.asarray([<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>])</div><div class="line">    X = np.row_stack((x1, x2))</div><div class="line">    y = np.asarray([<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>])</div><div class="line">    shape = [<span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>]</div><div class="line">    Learning_Rate = <span class="number">0.1</span></div><div class="line">    Training_Times = <span class="number">4000</span></div><div class="line">    W = gradientDescent(X, y, shape, learningrate=Learning_Rate, trainingtimes=Training_Times)</div></pre></td></tr></table></figure>
<p>å‚æ•°ä»€ä¹ˆçš„å…ˆä¸ç”¨ç®¡ï¼Œè¦ä»€ä¹ˆå°±ä¼ ä»€ä¹ˆã€‚å‚æ•°è®¾ç½®ç°åœ¨ä¹Ÿä¸ç”¨å¤ªåœ¨æ„ï¼Œå…³é”®ç‚¹åœ¨äºç”¨ \( shape \) æ¥æ§åˆ¶ç¥ç»ç½‘ç»œçš„å½¢çŠ¶ï¼Œå’Œå‰é¢é€»è¾‘å›å½’ç¡®å®šæ‹Ÿåˆå‡½æ•°æœ‰ç‚¹ç±»ä¼¼çš„æ„Ÿè§‰ã€‚</p>
<ul>
<li>æ¥ç€å°±æ˜¯æ¢¯åº¦ä¸‹é™çš„å…·ä½“å®ç°ï¼š</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">gradientDescent</span><span class="params">(X, y, shape, learningrate=<span class="number">0.001</span>, trainingtimes=<span class="number">500</span>)</span>:</span></div><div class="line">    W, z, a = [], [], []</div><div class="line">    <span class="keyword">for</span> layer <span class="keyword">in</span> range(len(shape) - <span class="number">1</span>):</div><div class="line">        row = shape[layer + <span class="number">1</span>]</div><div class="line">        col = shape[layer] + <span class="number">1</span></div><div class="line">        W.append(np.random.normal(<span class="number">0</span>, <span class="number">1</span>, row * col).reshape(row, col))</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(trainingtimes):</div><div class="line">        <span class="keyword">for</span> x, j <span class="keyword">in</span> zip(X.T, range(len(X[<span class="number">0</span>]))):</div><div class="line">            z, a = forward(W, np.asarray([x]).T)</div><div class="line">            W = backward(y[j], W, z, a, learningrate)</div><div class="line">    <span class="keyword">return</span> W</div></pre></td></tr></table></figure>
<p>ä¸»è¦å°±æ˜¯åˆå§‹åŒ– \( W \)ï¼Œç„¶åå°±å¯¹æ•°æ®è¿›è¡Œè®­ç»ƒï¼Œå…ˆå‰å‘ä¼ æ’­ï¼Œç„¶ååå‘ä¼ æ’­æ ¹æ›´æ–° \( W \)</p>
<ul>
<li>ç„¶åå°±æ˜¯å®šä¹‰ \( sigmoid \) å’Œæ¿€æ´»å‡½æ•°ï¼Œæ¥ç€è¿›è¡Œå‰å‘ä¼ æ’­ï¼š</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">k = <span class="number">2</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">sigmoid</span><span class="params">(x)</span>:</span></div><div class="line">    <span class="keyword">return</span> <span class="number">1</span> / (<span class="number">1</span> + np.power(np.e, -k * (x)))</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">actication</span><span class="params">(data)</span>:</span></div><div class="line">    <span class="keyword">return</span> sigmoid(data)</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(W, data)</span>:</span></div><div class="line">    z, a = [], []</div><div class="line">    a.append(data)</div><div class="line">    data = np.row_stack(([<span class="number">1</span>], data))</div><div class="line">    <span class="keyword">for</span> w <span class="keyword">in</span> W:</div><div class="line">        z.append(np.matmul(w, data))</div><div class="line">        a.append(actication(z[<span class="number">-1</span>]))</div><div class="line">        data = np.row_stack(([<span class="number">1</span>], a[<span class="number">-1</span>]))</div><div class="line">    <span class="keyword">return</span> z, a</div></pre></td></tr></table></figure>
<p>è¿™é‡Œä¸æ¶‰åŠä»€ä¹ˆæ•°å­¦çŸ¥è¯†å¾ˆç®€å•ã€‚</p>
<ul>
<li>æœ€ååå‘ä¼ æ’­ï¼Œç²¾é«“å…¨åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä¹‹å‰çš„è®¡ç®—ç»“æœå…¨åº”ç”¨åœ¨è¿™ï¼š</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">backward</span><span class="params">(y, W, z, a, learningrate)</span>:</span></div><div class="line">    length = len(z) + <span class="number">1</span></div><div class="line">    Jtoz = k * (<span class="number">1</span> - y * (<span class="number">1</span> + np.power(np.e, -(k * z[<span class="number">-1</span>])))) / np.power(np.e, -(k * z[<span class="number">-1</span>]))</div><div class="line">    <span class="comment"># print("loss = %s" % (-y * np.log(a[-1]) - (1 - y) * np.log(1 - a[-1])))</span></div><div class="line">    <span class="keyword">for</span> layer <span class="keyword">in</span> range(length - <span class="number">1</span>, <span class="number">0</span>, <span class="number">-1</span>):</div><div class="line">        i = layer - length</div><div class="line">        <span class="keyword">if</span> (i != <span class="number">-1</span>):</div><div class="line">            Jtoz = np.matmul(W[i + <span class="number">1</span>][:, <span class="number">1</span>:].T, Jtoz) * k * np.power(np.e, -(k * z[i])) / np.power(</div><div class="line">                <span class="number">1</span> + np.power(np.e, -(k * z[i])), <span class="number">2</span>)</div><div class="line">        W[i] = W[i] - learningrate * np.matmul(Jtoz, np.row_stack(([<span class="number">1</span>], a[i - <span class="number">1</span>])).T)</div><div class="line">    <span class="keyword">return</span> W</div></pre></td></tr></table></figure>
<p>ä»£ç å†™å®Œï¼Œä¸‹é¢æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">train</span><span class="params">()</span>:</span></div><div class="line">    np.set_printoptions(precision=<span class="number">4</span>, suppress=<span class="keyword">True</span>)</div><div class="line">    x1 = np.asarray([<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>])</div><div class="line">    x2 = np.asarray([<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>])</div><div class="line">    X = np.row_stack((x1, x2))</div><div class="line">    y = np.asarray([<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>])</div><div class="line">    shape = [<span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>]</div><div class="line">    Learning_Rate = <span class="number">0.1</span></div><div class="line">    Training_Times = <span class="number">4000</span></div><div class="line">    W = gradientDescent(X, y, shape, learningrate=Learning_Rate, trainingtimes=Training_Times)</div><div class="line"></div><div class="line">    print(W)</div><div class="line">    testData = np.row_stack((np.ones(shape=(<span class="number">1</span>, <span class="number">4</span>)), X))</div><div class="line">    <span class="keyword">for</span> w <span class="keyword">in</span> W:</div><div class="line">        testData = np.matmul(w, testData)</div><div class="line">        testData = np.row_stack((np.ones(shape=(<span class="number">1</span>, <span class="number">4</span>)), actication(testData)))</div><div class="line">    print(testData[<span class="number">1</span>])</div></pre></td></tr></table></figure>
<p>çœ‹ä¸‹è¾“å‡ºï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># output1:</span></div><div class="line"><span class="comment"># [array([[-8.3273,  5.5208,  5.4758],</span></div><div class="line"><span class="comment">#        [ 2.7417, -5.944 , -5.9745]]), array([[ 18.5644, -22.4426, -22.4217]])]</span></div><div class="line"><span class="comment"># [0.0005 1.     1.     0.0005]</span></div><div class="line"><span class="comment"># [array([[ 3.0903, -6.3961,  6.928 ],</span></div><div class="line"><span class="comment">#        [ 3.0355,  6.7901, -6.2563]]), array([[ 41.2259, -22.2455, -22.0939]])]</span></div><div class="line"><span class="comment"># [0.0024 1.     1.     0.0021]</span></div><div class="line"><span class="comment"># [array([[ 5.3893,  4.913 , -7.0756],</span></div><div class="line"><span class="comment">#        [ 6.2289, -1.3519, -4.7387]]), array([[  9.8004, -20.0023,  10.2014]])]</span></div><div class="line"><span class="comment"># [0.5    1.     0.4995 0.0002]</span></div></pre></td></tr></table></figure>
<p>æœ‰æ—¶å€™è®­ç»ƒç»“æœéå¸¸å¥½ï¼Œæœ‰æ—¶å€™ç»“æœä¸å¦‚äººæ„ï¼Œå½“æˆ‘æŠŠ \( W \) çš„åˆå§‹å€¼ä¸éšæœºç”Ÿæˆæ—¶ï¼Œæƒ…å†µå°±æœ‰æ‰€å¥½è½¬ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">    W.append(np.asarray([[<span class="number">-1</span>, <span class="number">1</span>, <span class="number">-1</span>], [<span class="number">-1</span>, <span class="number">-1</span>, <span class="number">1</span>]]))</div><div class="line">    W.append(np.asarray([[<span class="number">-1</span>, <span class="number">1</span>, <span class="number">1</span>]]))</div><div class="line"></div><div class="line"><span class="comment"># output2:</span></div><div class="line"><span class="comment"># [array([[-2.8868,  5.6614, -5.9766],</span></div><div class="line"><span class="comment">#        [-2.9168, -5.9789,  5.6363]]), array([[-2.1866, 21.2065, 21.1815]])]</span></div><div class="line"><span class="comment"># [0.016  1.     1.     0.0142]</span></div><div class="line"><span class="comment"># [array([[-2.9942,  5.7925, -6.0901],</span></div><div class="line"><span class="comment">#        [-3.0228, -6.0924,  5.7687]]), array([[-3.6425, 22.3914, 22.3658]])]</span></div><div class="line"><span class="comment"># [0.0009 1.     1.     0.0008]</span></div></pre></td></tr></table></figure>
<p>è‡³äºä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Œç”±äºæˆ‘å­¦è¯†å°šæµ…ï¼Œæ‰€ä»¥åªèƒ½çŒœæµ‹ï¼Œå¯¹äºä¹‹å‰è®²è¿‡çš„æ¢¯åº¦ä¸‹é™ç®—æ³•å…¶å®ä¾èµ–äºåˆå§‹å€¼ï¼Œå¦‚æœåˆå§‹å€¼ç¦»å…¨å±€æœ€ä¼˜æ¯”è¾ƒè¿œï¼Œé‚£ä¹ˆä¸ä»…æ”¶æ•›æ—¶ä¼šæ¯”è¾ƒæ…¢ï¼Œè€Œä¸”å¾ˆå¯èƒ½æ”¶æ•›åˆ°å±€éƒ¨æœ€ä¼˜ã€‚å…¶æ¬¡ï¼Œæˆ‘ä»¬è®¾ç½®çš„æ¿€æ´»å‡½æ•° \( k \) å€¼ä¸èƒ½å¤ªå¤§ï¼Œä¸ç„¶ä¼šæŒ‡æ•°å¢é•¿å½±å“ç²¾åº¦ï¼Œåˆå› ä¸º \( k \) å€¼æ¯”è¾ƒå°ï¼Œæ‰€ä»¥åœ¨ \( [-1, 1] \) åŒºé—´å¹¶éåƒæˆ‘ä»¬ç†æƒ³ä¸­çš„é˜¶è·ƒå‡½æ•°ï¼Œæ‰€ä»¥é€ æˆåœ¨æœ‰é™æ¬¡è®­ç»ƒä¸‹æ—¶çš„æ•°æ®é›†ä¸­äº \( 0.5 \) è€Œä¸æ˜¯åˆ†æ•£åœ¨ \( [0, 1] \) åŒºé—´çš„ç«¯ç‚¹å¤„ã€‚å½“ç„¶è¿™åªæ˜¯çŒœæµ‹ï¼Œå…·ä½“åŸå› å¦‚æœæœ‰çŸ¥é“çš„å°ä¼™ä¼´æ¬¢è¿å‘ŠçŸ¥ã€‚</p>
<h3 id="3-2-TensorFlow-å®ç°"><a href="#3-2-TensorFlow-å®ç°" class="headerlink" title="3.2 TensorFlow å®ç°"></a>3.2 TensorFlow å®ç°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># coding: utf-8</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">sigmoid</span><span class="params">(x)</span>:</span></div><div class="line">    <span class="keyword">return</span> <span class="number">1</span> / (<span class="number">1</span> + np.power(np.e, <span class="number">-2</span> * (x)))</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">add_layer</span><span class="params">(inputs, in_size, out_size, activation_function=None, )</span>:</span></div><div class="line">    Weights = tf.Variable(tf.random_normal([in_size, out_size]))</div><div class="line">    biases = tf.Variable(tf.zeros([<span class="number">1</span>, out_size]) + <span class="number">0.1</span>)</div><div class="line">    Wx_plus_b = tf.matmul(inputs, Weights) + biases</div><div class="line">    <span class="keyword">if</span> activation_function <span class="keyword">is</span> <span class="keyword">None</span>:</div><div class="line">        outputs = Wx_plus_b</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        outputs = activation_function(Wx_plus_b)</div><div class="line">    <span class="keyword">return</span> outputs</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</div><div class="line">    x1 = np.asarray([<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>])</div><div class="line">    x2 = np.asarray([<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>])</div><div class="line">    X = np.row_stack((x1, x2))</div><div class="line">    y = np.asarray([<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>]).reshape(<span class="number">1</span>, <span class="number">4</span>)</div><div class="line">    data_X = tf.placeholder(tf.float32, [<span class="keyword">None</span>, <span class="number">2</span>])</div><div class="line">    data_y = tf.placeholder(tf.float32, [<span class="keyword">None</span>, <span class="number">1</span>])</div><div class="line"></div><div class="line">    layer_one = add_layer(data_X, <span class="number">2</span>, <span class="number">2</span>, activation_function=sigmoid)</div><div class="line">    prediction = add_layer(layer_one, <span class="number">2</span>, <span class="number">1</span>, activation_function=sigmoid)</div><div class="line"></div><div class="line">    loss = tf.reduce_mean(tf.reduce_sum(- data_y * tf.log(prediction) - (<span class="number">1</span> - data_y) * tf.log(<span class="number">1</span> - prediction)))</div><div class="line">    train = tf.train.GradientDescentOptimizer(<span class="number">0.1</span>).minimize(loss)</div><div class="line"></div><div class="line">    <span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</div><div class="line">        sess.run(tf.global_variables_initializer())</div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">4000</span>):</div><div class="line">            sess.run(train, feed_dict=&#123;data_X: X.T, data_y: y.T&#125;)</div><div class="line">        print(sess.run(prediction, feed_dict=&#123;data_X: X.T, data_y: y.T&#125;))</div><div class="line"></div><div class="line"><span class="comment"># output:</span></div><div class="line"><span class="comment"># [[0.00200064]</span></div><div class="line"><span class="comment">#  [0.9985947 ]</span></div><div class="line"><span class="comment">#  [0.9985983 ]</span></div><div class="line"><span class="comment">#  [0.00144795]]</span></div><div class="line"><span class="comment"># --------------</span></div><div class="line"><span class="comment"># [[0.01765717]</span></div><div class="line"><span class="comment">#  [0.98598236]</span></div><div class="line"><span class="comment">#  [0.98598194]</span></div><div class="line"><span class="comment">#  [0.0207849 ]]</span></div><div class="line"><span class="comment"># --------------</span></div><div class="line"><span class="comment"># [[0.00104381]</span></div><div class="line"><span class="comment">#  [0.9991435 ]</span></div><div class="line"><span class="comment">#  [0.49951136]</span></div><div class="line"><span class="comment">#  [0.5003463 ]]</span></div></pre></td></tr></table></figure>
<p>è¿™é‡Œå¾ˆç®€å•ï¼Œå°±æ˜¯ä½¿ç”¨ \( add\_layer \) ä¸€å±‚ä¸€å±‚æ·»åŠ ï¼Œå¹¶ä¸”ç›´æ¥ä½¿ç”¨ \( TensorFlow \) ç»™æˆ‘ä»¬æä¾›çš„ä¼˜åŒ–ç®—æ³•ã€‚ç»“æœä¹Ÿæ˜¯ååˆ†è¯¡å¼‚ï¼Œæ—¶å¥½æ—¶åçš„è®­ç»ƒç»“æœã€‚ã€‚ã€‚å¯èƒ½ï¼Œè¿™ä¸ªä¾‹å­å°±æ˜¯å¯¹åˆå§‹åŒ–å€¼è¦æ±‚é«˜å§â€¦â€¦å½“ç„¶ä¸æ’é™¤æˆ‘çš„è¿‡ç¨‹æœ‰é”™è¯¯ğŸ˜‚</p>
<p>è¿™æ˜¯<a href="https://github.com/mk43/machine-learning/tree/master/algorithm/neural-network" target="_blank" rel="external">å®éªŒä»£ç </a>ï¼Œæ„Ÿå…´è¶£æ¬¢è¿ Star ^_^</p>
<h2 id="4-æ€»ç»“"><a href="#4-æ€»ç»“" class="headerlink" title="4 æ€»ç»“"></a>4 æ€»ç»“</h2><p>è¯´å®è¯ï¼Œå‡†å¤‡è¿™ç¯‡æ–‡ç« èŠ±äº†å¾ˆå¤šæ—¶é—´ï¼Œè€Œä¸”è¿˜æ˜¯æœ‰äº›åœ°æ–¹ç†è§£ä¸å¤Ÿæ·±åˆ»ï¼Œæ¯•ç«Ÿè¿™æ˜¯ç¥ç»ç½‘ç»œå¼€ç¯‡ï¼Œä»¥åäº†è§£æ›´å¤šä¼šå†™æ›´å¤šçš„æ–‡ç« ï¼Œæœ‰æ—¶é—´å°±ä¼šè¡¥å……å®è·µä»£ç ã€‚ç„¶åå°±æ˜¯å‘ç°æ•°å­¦æ˜¯è¶Šæ¥è¶Šæ¥è¶Šæ¥è¶Šæ¥è¶Šé‡è¦ï¼Œå‘ç°è‡ªå·±æ‡‚å¾—ä¸œè¥¿å¤ªå°‘äº†ï¼Œè¿˜æœ‰å¥½å¤šå¥½å¤šè¦å­¦ä¹ ã€‚æœ€åï¼Œåˆšæ¥è§¦æœºå™¨å­¦ä¹ ä¸ä¹…ï¼Œè¿™ç¯‡æ–‡ç« éš¾å…ä¼šæœ‰é”™è¯¯çš„åœ°æ–¹ï¼Œæ¬¢è¿å¤§å®¶æ‰¹è¯„æŒ‡æ­£ã€‚</p>
<h2 id="5-å‚è€ƒ"><a href="#5-å‚è€ƒ" class="headerlink" title="5 å‚è€ƒ"></a>5 å‚è€ƒ</h2><ul>
<li><a href="https://www.zhihu.com/question/22553761/answer/36429105" target="_blank" rel="external">å¦‚ä½•ç®€å•å½¢è±¡åˆæœ‰è¶£åœ°è®²è§£ç¥ç»ç½‘ç»œæ˜¯ä»€ä¹ˆï¼Ÿ</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2017/07/neural-network.html" target="_blank" rel="external">ç¥ç»ç½‘ç»œå…¥é—¨</a></li>
<li><a href="https://deeplearning4j.org/cn/neuralnet-overview" target="_blank" rel="external">æ·±åº¦ç¥ç»ç½‘ç»œç®€ä»‹</a></li>
<li><a href="https://www.bilibili.com/video/av6731067/" target="_blank" rel="external">ã€å®˜æ–¹åŒè¯­/åˆé›†ã€‘çº¿æ€§ä»£æ•°çš„æœ¬è´¨ - ç³»åˆ—åˆé›†</a></li>
<li><a href="https://en.wikipedia.org/wiki/Matrix_calculus" target="_blank" rel="external">Matrix calculus</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/24709748" target="_blank" rel="external">çŸ©é˜µæ±‚å¯¼æœ¯ï¼ˆä¸Šï¼‰</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/24863977" target="_blank" rel="external">çŸ©é˜µæ±‚å¯¼æœ¯ï¼ˆä¸‹ï¼‰</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/22473137" target="_blank" rel="external">ç¥ç»ç½‘ç»œåå‘ä¼ æ’­çš„æ•°å­¦åŸç†</a></li>
</ul>
<p>æ³¨æ„ï¼šå…¶ä¸­è¿˜é›¶é›¶æ˜Ÿæ˜Ÿå‚è€ƒäº†å…¶å®ƒçš„åšå®¢ï¼Œä¸æ˜¯ä¸»è¦çš„å°±æ²¡æ‰¾é“¾æ¥è´´ä¸Šæ¥äº†ï¼Œæ„Ÿè°¢ä»–ä»¬çš„åˆ†äº«ï¼Œè¿˜æœ‰çŸ¥ä¹æŸäº›é—®é¢˜ä¸‹çš„å›ç­”å¯¹æˆ‘å¾ˆæœ‰å¯å‘ä¹Ÿä¸ä¸€ä¸€ç»™é“¾æ¥äº†ã€‚å…¶ä¸­ç©¿æ’çš„éƒ¨åˆ†çŸ¥è¯†åœ¨å‰é¢ä¸¤ç¯‡æ–‡ç« ä¸­ç»™å‡ºäº†å‚è€ƒï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;script type=&quot;text/javascript&quot; src=&quot;http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default&quot;&gt;&lt;/script&gt;

&lt;blockquote&gt;
&lt;p&gt;å†™åœ¨å‰é¢ï¼šæˆ‘å°†ä»ä¸€ä¸ªå…¥é—¨è€…çš„è§†è§’ï¼ˆæ°´å¹³ï¼‰å°†æœºå™¨å­¦ä¹ ä¸­çš„å¸¸ç”¨ç®—æ³•å¨“å¨“é“æ¥ã€‚è‡ªèº«æ°´å¹³ç¡®å®æœ‰é™ï¼Œå¦‚æœå…¶ä¸­æœ‰ä»€ä¹ˆé”™è¯¯çš„è¯å¸Œæœ›å¤§å®¶æŒ‡å‡ºï¼Œé¿å…è¯¯å¯¼å¤§å®¶ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªç³»åˆ—å·²ç»æœ‰ä¸¤ç¯‡å‰ä½œäº†ï¼ˆè·³ç¥¨äº†ä¸€ç¯‡&lt;a href=&quot;http://fitzeng.org/2018/02/18/MLDecisionTree/&quot;&gt;å†³ç­–æ ‘&lt;/a&gt;ğŸ˜‚ğŸ˜‚ğŸ˜‚ï¼‰ï¼Œæ¬¢è¿æ„Ÿå…´è¶£çš„è¯»è€…å»é˜…è¯»ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://fitzeng.org/2018/02/11/MLLinearRegression/&quot;&gt;æœºå™¨å­¦ä¹ åŸºæœ¬ç®—æ³•ä¹‹çº¿æ€§å›å½’&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://fitzeng.org/2018/02/16/MLLogisticRegression/&quot;&gt;æœºå™¨å­¦ä¹ åŸºæœ¬ç®—æ³•ä¹‹é€»è¾‘å›å½’&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/mk43/machine-learning/tree/master/algorithm/neural-network&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å®éªŒä»£ç &lt;/a&gt;-&lt;a href=&quot;https://github.com/mk43/machine-learning/tree/master/reference&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å‚è€ƒä¹¦ç±&lt;/a&gt;-[å‚è€ƒåšå®¢è¯¦è§æœ€å]&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="Math" scheme="http://fitzeng.org/tags/Math/"/>
    
      <category term="MachineLearning" scheme="http://fitzeng.org/tags/MachineLearning/"/>
    
      <category term="Python" scheme="http://fitzeng.org/tags/Python/"/>
    
      <category term="NumPy" scheme="http://fitzeng.org/tags/NumPy/"/>
    
      <category term="Matplotlib" scheme="http://fitzeng.org/tags/Matplotlib/"/>
    
      <category term="NeuralNetwork" scheme="http://fitzeng.org/tags/NeuralNetwork/"/>
    
  </entry>
  
  <entry>
    <title>æœºå™¨å­¦ä¹ åŸºæœ¬ç®—æ³•ä¹‹å†³ç­–æ ‘</title>
    <link href="http://fitzeng.org/2018/02/18/MLDecisionTree/"/>
    <id>http://fitzeng.org/2018/02/18/MLDecisionTree/</id>
    <published>2018-02-18T03:27:00.000Z</published>
    <updated>2018-02-19T03:17:09.831Z</updated>
    
    <content type="html"><![CDATA[<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script>

<blockquote>
<p>å†™åœ¨å‰é¢ï¼šæˆ‘å°†ä»ä¸€ä¸ªå…¥é—¨è€…çš„è§†è§’ï¼ˆæ°´å¹³ï¼‰å°†æœºå™¨å­¦ä¹ ä¸­çš„å¸¸ç”¨ç®—æ³•å¨“å¨“é“æ¥ã€‚è‡ªèº«æ°´å¹³ç¡®å®æœ‰é™ï¼Œå¦‚æœå…¶ä¸­æœ‰ä»€ä¹ˆé”™è¯¯çš„è¯å¸Œæœ›å¤§å®¶æŒ‡å‡ºï¼Œé¿å…è¯¯å¯¼å¤§å®¶ã€‚</p>
<p>è¿™ä¸ªç³»åˆ—å·²ç»æœ‰ä¸¤ç¯‡å‰ä½œäº†ï¼Œæ¬¢è¿æ„Ÿå…´è¶£çš„è¯»è€…å»é˜…è¯»ï¼š</p>
<ul>
<li><a href="http://fitzeng.org/2018/02/11/MLLinearRegression/">æœºå™¨å­¦ä¹ åŸºæœ¬ç®—æ³•ä¹‹çº¿æ€§å›å½’</a></li>
<li><a href="http://fitzeng.org/2018/02/16/MLLogisticRegression/">æœºå™¨å­¦ä¹ åŸºæœ¬ç®—æ³•ä¹‹é€»è¾‘å›å½’</a></li>
</ul>
<p><a href="https://github.com/mk43/machine-learning/tree/master/algorithm/logistic-regression" target="_blank" rel="external">å®éªŒä»£ç </a>-<a href="https://github.com/mk43/machine-learning/tree/master/reference" target="_blank" rel="external">å‚è€ƒä¹¦ç±</a>-[å‚è€ƒåšå®¢è¯¦è§æœ€å]</p>
</blockquote>
<a id="more"></a>
<h1 id="gt-TODO"><a href="#gt-TODO" class="headerlink" title="==&gt; TODO"></a>==&gt; TODO</h1><p>è¿™ä¸ªå‘å…ˆç•™ç€ï¼Œå…ˆä»‹ç»ç¥ç»ç½‘ç»œå§ï¼Œæˆ‘å‘ç°å†³ç­–æ ‘è™½ç„¶å¥½ç†è§£ä½†æ˜¯å’Œå‰é¢çš„çº¿æ€§å›å½’é€»è¾‘å›å½’æœ‰ç‚¹è”ç³»ä¸ä¸Šï¼Œä¸ºäº†èƒ½å¤Ÿç³»ç»Ÿåœ°ä½“ä¼šæœºå™¨å­¦ä¹ çš„æ€è€ƒè¿‡ç¨‹å¹¶ä¸”æŠŠå‰é¢çš„çŸ¥è¯†è¿›è¡Œè¿ç§»ï¼Œä¸€æ­¥ä¸€æ­¥æ·±å…¥åˆ†æï¼Œæ‰€ä»¥å†³å®šä¸Šç¥ç»ç½‘ç»œï¼Œä¸ºäº†ä¸çŠ¯å¤§é”™è¯¯ï¼Œæ‰€ä»¥ä¸‹ä¸€ç¯‡æˆ‘ä¼šèŠ±ç‚¹æ—¶é—´å¤šå¤šå­¦ä¹ ä¸€ä¸‹ï¼Œæ›´æ–°å¯èƒ½ä¼šæœ‰ç‚¹æ…¢ã€‚å†³ç­–æ ‘é…åˆå›¾æ–‡å¥½ç†è§£ä½†æ˜¯ç”¨æ–‡å­—æè¿°ä¸å¥½æ€ä¹ˆå†™ï¼Œç­‰æœ‰æ—¶é—´æˆ‘ä¼šäº‰å–æŠŠè¿™ç¯‡å†™å‡ºæ¥ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">## 0 åŸºæœ¬ä»‹ç»</div><div class="line"></div><div class="line">### 0.1 ä»€ä¹ˆæ˜¯å†³ç­–æ ‘</div><div class="line"></div><div class="line">### 0.2 å†³ç­–æ ‘èƒ½è§£å†³ä»€ä¹ˆé—®é¢˜</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;script type=&quot;text/javascript&quot; src=&quot;http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default&quot;&gt;&lt;/script&gt;

&lt;blockquote&gt;
&lt;p&gt;å†™åœ¨å‰é¢ï¼šæˆ‘å°†ä»ä¸€ä¸ªå…¥é—¨è€…çš„è§†è§’ï¼ˆæ°´å¹³ï¼‰å°†æœºå™¨å­¦ä¹ ä¸­çš„å¸¸ç”¨ç®—æ³•å¨“å¨“é“æ¥ã€‚è‡ªèº«æ°´å¹³ç¡®å®æœ‰é™ï¼Œå¦‚æœå…¶ä¸­æœ‰ä»€ä¹ˆé”™è¯¯çš„è¯å¸Œæœ›å¤§å®¶æŒ‡å‡ºï¼Œé¿å…è¯¯å¯¼å¤§å®¶ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªç³»åˆ—å·²ç»æœ‰ä¸¤ç¯‡å‰ä½œäº†ï¼Œæ¬¢è¿æ„Ÿå…´è¶£çš„è¯»è€…å»é˜…è¯»ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://fitzeng.org/2018/02/11/MLLinearRegression/&quot;&gt;æœºå™¨å­¦ä¹ åŸºæœ¬ç®—æ³•ä¹‹çº¿æ€§å›å½’&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://fitzeng.org/2018/02/16/MLLogisticRegression/&quot;&gt;æœºå™¨å­¦ä¹ åŸºæœ¬ç®—æ³•ä¹‹é€»è¾‘å›å½’&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/mk43/machine-learning/tree/master/algorithm/logistic-regression&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å®éªŒä»£ç &lt;/a&gt;-&lt;a href=&quot;https://github.com/mk43/machine-learning/tree/master/reference&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å‚è€ƒä¹¦ç±&lt;/a&gt;-[å‚è€ƒåšå®¢è¯¦è§æœ€å]&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="Math" scheme="http://fitzeng.org/tags/Math/"/>
    
      <category term="MachineLearning" scheme="http://fitzeng.org/tags/MachineLearning/"/>
    
      <category term="Python" scheme="http://fitzeng.org/tags/Python/"/>
    
      <category term="NumPy" scheme="http://fitzeng.org/tags/NumPy/"/>
    
      <category term="Matplotlib" scheme="http://fitzeng.org/tags/Matplotlib/"/>
    
      <category term="DecisionTree" scheme="http://fitzeng.org/tags/DecisionTree/"/>
    
  </entry>
  
  <entry>
    <title>æœºå™¨å­¦ä¹ åŸºæœ¬ç®—æ³•ä¹‹é€»è¾‘å›å½’</title>
    <link href="http://fitzeng.org/2018/02/16/MLLogisticRegression/"/>
    <id>http://fitzeng.org/2018/02/16/MLLogisticRegression/</id>
    <published>2018-02-16T03:27:00.000Z</published>
    <updated>2018-02-22T10:35:08.310Z</updated>
    
    <content type="html"><![CDATA[<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script>

<blockquote>
<p>å†™åœ¨å‰é¢ï¼šæˆ‘å°†ä»ä¸€ä¸ªå…¥é—¨è€…çš„è§†è§’ï¼ˆæ°´å¹³ï¼‰å°†æœºå™¨å­¦ä¹ ä¸­çš„å¸¸ç”¨ç®—æ³•å¨“å¨“é“æ¥ã€‚è‡ªèº«æ°´å¹³ç¡®å®æœ‰é™ï¼Œå¦‚æœå…¶ä¸­æœ‰ä»€ä¹ˆé”™è¯¯çš„è¯å¸Œæœ›å¤§å®¶æŒ‡å‡ºï¼Œé¿å…è¯¯å¯¼å¤§å®¶ã€‚ç„¶åè¿™æ˜¯è¿™ä¸ªç³»åˆ—çš„ç¬¬äºŒç¯‡äº†ï¼Œå¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œå¦‚æœä½ æ²¡çœ‹è¿‡ç¬¬ä¸€ç¯‡ï¼Œæ¨èçœ‹çœ‹<a href="http://fitzeng.org/2018/02/11/MLLinearRegression/">æœºå™¨å­¦ä¹ åŸºæœ¬ç®—æ³•ä¹‹çº¿æ€§å›å½’</a>ï¼Œé‡Œé¢æåŠåˆ°äº†å¾ˆå¤šåŸºç¡€çš„æ•°å­¦çŸ¥è¯†å’Œä¸€äº›çš„æœºå™¨å­¦ä¹ æ€ç»´ï¼Œå¯¹äºç†è§£è¿™ç¯‡æ–‡ç« å¾ˆæœ‰å¸®åŠ©ï¼Œå¾ˆå¤šæœºå™¨å­¦ä¹ æµç¨‹åŒ–çš„ä¸œè¥¿è¿™é‡Œå°±ä¸åœ¨å…·ä½“ä»‹ç»ä¸ºä»€ä¹ˆè¿™æ ·åšäº†ï¼Œè€Œæ˜¯ç›´æ¥è§£é‡Šä¸ºä»€ä¹ˆåœ¨é€»è¾‘å›å½’ä¸­éœ€è¦ä½¿ç”¨è¿™æ ·çš„æ–¹å¼æ¥å®ç°ï¼Œæ›´åŠ èšç„¦äºé€»è¾‘å›å½’å®ç°æœ¬èº«ï¼Œè€Œéæœºå™¨å­¦ä¹ çš„æµç¨‹ç†è§£ã€‚</p>
<p><a href="https://github.com/mk43/machine-learning/tree/master/algorithm/logistic-regression" target="_blank" rel="external">å®éªŒä»£ç </a>-<a href="https://github.com/mk43/machine-learning/tree/master/reference" target="_blank" rel="external">å‚è€ƒä¹¦ç±</a>-[å‚è€ƒåšå®¢è¯¦è§æœ€å]</p>
</blockquote>
<a id="more"></a>
<h2 id="0-å‡†å¤‡"><a href="#0-å‡†å¤‡" class="headerlink" title="0 å‡†å¤‡"></a>0 å‡†å¤‡</h2><h3 id="0-1-ç¯å¢ƒ"><a href="#0-1-ç¯å¢ƒ" class="headerlink" title="0.1 ç¯å¢ƒ"></a>0.1 ç¯å¢ƒ</h3><blockquote>
<p>Python: 3.5</p>
<p>TensorFlow: Anaconda3 envs</p>
<p>IDE: PyCharm 2017.3.3</p>
</blockquote>
<h3 id="0-2-åŸºæœ¬è®¤è¯†"><a href="#0-2-åŸºæœ¬è®¤è¯†" class="headerlink" title="0.2 åŸºæœ¬è®¤è¯†"></a>0.2 åŸºæœ¬è®¤è¯†</h3><p>å¦‚æœä½ çœ‹è¿‡å‰é¢çš„çº¿æ€§å›å½’ä»‹ç»ï¼Œå¯ä»¥çŸ¥é“ï¼Œçº¿æ€§å›å½’æ˜¯é€šè¿‡å¯¹ä¸€ç±»å‘ˆçº¿æ€§åˆ†å¸ƒçš„æ•°æ®è¿›è¡Œæ‹Ÿåˆï¼Œç„¶åè®­ç»ƒä¸€ä¸ªçº¿æ€§æ¨¡å‹å¯¹æ•°æ®è¿›è¡Œé¢„æµ‹ã€‚é‚£ä¹ˆåœ¨é€»è¾‘å›å½’ä¸­ï¼Œå¯ä»¥æš‚æ—¶ç†è§£ä¸ºå¤„ç†åˆ†ç±»é—®é¢˜ã€‚æ¯”å¦‚ç»™å‡ºä¸€ä¸ªäººçš„ç»çº¬åº¦ï¼Œè¦åˆ¤æ–­è¿™ä¸ªäººåœ¨å“ªä¸ªå›½å®¶ï¼Œå¦‚æœä»…ä»…ä»¥çº¿æ€§å›å½’çš„æ€ç»´ï¼Œæˆ‘ä»¬å¾ˆéš¾æ ¹æ®ç»çº¬åº¦å»æ„é€ å‡ºä¸€ä¸ªå¾ˆå¥½çš„çº¿æ€§æ¨¡å‹å»é¢„æµ‹åœ°åŒºï¼Œæˆ‘ä»¬å°±éœ€è¦çŸ¥é“çš„æ˜¯å›½å®¶åˆ†ç•Œçº¿ï¼Œè€Œè¿™äº›åˆ†ç•Œçº¿çš„è·å¾—å°±æ˜¯é€šè¿‡é€»è¾‘å›å½’ã€‚</p>
<h2 id="1-äºŒå…ƒåˆ†ç±»"><a href="#1-äºŒå…ƒåˆ†ç±»" class="headerlink" title="1 äºŒå…ƒåˆ†ç±»"></a>1 äºŒå…ƒåˆ†ç±»</h2><h3 id="1-1-æå‡ºæ‹Ÿåˆå‡½æ•°-Sigmoid"><a href="#1-1-æå‡ºæ‹Ÿåˆå‡½æ•°-Sigmoid" class="headerlink" title="1.1 æå‡ºæ‹Ÿåˆå‡½æ•° Sigmoid"></a>1.1 æå‡ºæ‹Ÿåˆå‡½æ•° <code>Sigmoid</code></h3><p>å¦‚æœä½ è¿˜æ²¡æœ‰å¤ªç†è§£é€»è¾‘å›å½’å¤„ç†çš„é—®é¢˜å’Œçº¿æ€§å›å½’æ¯”çš„ç‹¬ç‰¹æ€§ï¼Œæˆ‘ä»¬å†æ¥ä¸¾ä¸ªå°ä¾‹å­(æ³¨æ„ï¼šä¸ºäº†ç®€å•ï¼Œè¿™é‡Œçš„æ•°æ®éƒ½æ˜¯ç‰¹æ®Šå–å€¼çš„)ï¼Œæ¥å¼•å‡ºä»Šå¤©çš„ä¸»è§’ï¼š</p>
<p><img src="/2018/02/16/MLLogisticRegression/linear2LogisticreGressionGraph.png" alt=""></p>
<p>å¯¹äºä¸Šé¢è¿™å¼ å›¾ï¼Œå¾ˆæ˜æ˜¾ï¼Œæ€ä¹ˆç”»ç›´çº¿ä¹Ÿä¸å¥½ï¼Œæ€»ä¼šäº§ç”Ÿè¾ƒå¤§çš„è¯¯å·®ã€‚è€Œå¦‚æœæœ‰ä¸€ä¸ªå‡½æ•°èƒ½å¤Ÿè¡¨ç¤ºï¼š</p>
<p>$$<br>y=\begin{cases}<br>1,\quad x &gt; 5 \\<br>0,\quad x \leq 5<br>\end{cases}<br>$$</p>
<p>é‚£ä¹ˆå°±å®Œç¾ç¬¦åˆå½“å‰çš„æ•°æ®åˆ†å¸ƒï¼Œç›´è§‰å‘Šè¯‰æˆ‘ä»¬æœ‰å¾ˆå¤§å¯èƒ½å…¶å¯¹æ•°æ®çš„é¢„æµ‹èƒ½åŠ›ä¹Ÿæ¯”è¾ƒå¼ºã€‚æ¥ä¸‹æ¥ï¼Œå°±æ˜¯æ‰¾ä¸€ä¸ª \( S \) å½¢å‡½æ•°æ¥ä½œä¸ºæ‹Ÿåˆå‡½æ•°ã€‚è¿™é‡Œå¾ˆæ˜æ˜¾æˆ‘ä»¬çš„å‡½æ•°ä¸æ˜¯çº¿æ€§çš„ã€‚è¿™é‡Œæå‡ºä¸€ä¸ªå« \( Sigmoid \) çš„å‡½æ•°ï¼š</p>
<p>$$<br>y = \frac{1}{1 + e^{-x}}<br>$$</p>
<p><img src="/2018/02/16/MLLogisticRegression/linear2LogisticreGressionGraphAddSigmoid.png" alt=""></p>
<p>ä»å›¾åƒä¸­å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªå‡½æ•°çš„å®Œç¾ç¬¦åˆæˆ‘ä»¬å¿ƒä¸­çš„é¢„æœŸã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># coding: utf-8</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</div><div class="line"></div><div class="line">x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</div><div class="line">y = [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>]</div><div class="line"></div><div class="line">train_X = np.asarray(x)</div><div class="line">train_Y = np.asarray(y)</div><div class="line"></div><div class="line">fig = plt.figure()</div><div class="line">plt.xlim(<span class="number">-1</span>, <span class="number">12</span>)</div><div class="line">plt.ylim(<span class="number">-0.5</span>, <span class="number">1.5</span>)</div><div class="line">plt.scatter(train_X, train_Y)</div><div class="line"></div><div class="line">s_X = np.linspace(<span class="number">-2</span>, <span class="number">12</span>, <span class="number">100</span>)</div><div class="line">s_Y = <span class="number">1</span>/(<span class="number">1</span> + np.power(np.e, <span class="number">-6</span>*(s_X - <span class="number">5</span>)))</div><div class="line">plt.plot(s_X, s_Y)</div><div class="line">plt.savefig(<span class="string">"linear2LogisticreGressionGraphAddSigmoid.png"</span>)</div><div class="line"><span class="comment"># plt.savefig("linear2LogisticreGressionGraph.png")</span></div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<h3 id="1-2-æ‰©å……åˆ†ç±»"><a href="#1-2-æ‰©å……åˆ†ç±»" class="headerlink" title="1.2 æ‰©å……åˆ†ç±»"></a>1.2 æ‰©å……åˆ†ç±»</h3><p>å‰é¢å·²ç»è¯´äº†ï¼Œä¸ºäº†æ›´å¥½ä½“ä¼šé€»è¾‘å›å½’ï¼Œæ‰€ä»¥æ•°æ®æœ‰ç‚¹ç‰¹æ®Šå’Œå•ä¸€ï¼Œä¸‹é¢æˆ‘ä»¬å†æ¥çœ‹ä¸€ç»„æ•°æ®ï¼š</p>
<p><img src="/2018/02/16/MLLogisticRegression/linear2LogisticreGressionGraphAddScatter.png" alt=""></p>
<p>åƒè¿™ç§æœ‰æ˜æ˜¾çš„èšæ‹¢æ•ˆæœçš„æ•£ç‚¹å›¾ï¼Œå¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªåˆ†ç±»é—®é¢˜ï¼Œæ‰€ä»¥å¯¹äºè¿™é‡Œæˆ‘ä»¬æ€ä¹ˆåˆ©ç”¨å‰é¢æåˆ°çš„é€»è¾‘å›å½’æ¥å¤„ç†ç±»ä¼¼äºè¿™ç§åˆ†ç±»é—®é¢˜ï¼Ÿ</p>
<p>è¿™é‡Œæ€ç»´è¦ç¨å¾®è½¬æ¢ä¸€ä¸‹ï¼Œä»¥å‰æˆ‘ä»¬ä»¥ \( y \) çš„å€¼ä½œä¸ºè¾“å‡ºï¼Œè¿™é‡Œä¸æ˜¯äº†ï¼Œè¿™é‡Œéœ€è¦é¢„æµ‹çš„ç»“æœæ˜¯ç»™å®š \( (x, y) \) æ±‚å‡ºè¯¥ç‚¹æ˜¯çº¢è‰²çš„åœ†å½¢è¿˜æ˜¯è“è‰²çš„ä¸‰è§’å½¢ï¼Ÿæ‰€ä»¥è¦æ‰¾ä¸€ä¸ªå½¢å¦‚  \( g(x, y) \)<br>çš„å‡½æ•°æ¥å¤„ç†ï¼Œå‰é¢çš„ \( Sigmoid\)å‡½æ•°å¯ä»¥å¸®æˆ‘ä»¬åˆ†ç±»ï¼Œåªè¦å‡è®¾ \( 1 \) å’Œ \( 0 \) å„ä»£è¡¨ä¸€ç§æƒ…å†µï¼Œé‚£ä¹ˆå¾—å‡º \( 1/0 \) æ—¶å°±å¯ä»¥æ¨æ–­å‡º \( (x, y) \)ç°åœ¨çš„æƒ…å†µæ˜¯çº¢è‰²çš„åœ†å½¢è¿˜æ˜¯è“è‰²çš„ä¸‰è§’å½¢ï¼Œç°åœ¨çš„æƒ…å†µæ˜¯ï¼Œå¦‚ä½•å°† \( g(x, y) \) é¢„å¤„ç†çš„ç»“æœä¸ \( Sigmoid \) å‡½æ•°è”ç³»èµ·æ¥ã€‚å¯èƒ½ä½ å·²ç»æƒ³åˆ°äº†ï¼Œå°† \( g(x, y) \) çš„å€¼åŸŸå½“åš \( Sigmoid \) çš„å®šä¹‰åŸŸã€‚é‚£ä¹ˆç»™å®šä¸€ä¸ª \( (x,y) \) æˆ‘ä»¬å°±èƒ½å¾—å‡ºä¸€ä¸ªåœ¨åŒºé—´ \( [0, 1] \) å†…çš„å€¼ã€‚è¿™ä¸‹ï¼Œå‡½æ•°å°±èƒ½å¤Ÿæ»¡è¶³æˆ‘ä»¬çš„è¦æ±‚äº†ã€‚</p>
<p>æ¨¡ä»¿å‰é¢æœºå™¨å­¦ä¹ çš„æ€ç»´ï¼Œæˆ‘ä»¬å¯¹äºç»™å®šçš„è¾“å…¥ç»Ÿä¸€ç”¨ä¸€ä¸ªè¾“å…¥çŸ©é˜µ \( X \) è¡¨ç¤º \( (x, y) \) ç„¶ååŠ å…¥æƒé‡ \( W \)ï¼Œåˆ™å¾—å‡ºå‡½æ•° \( g(W, X) \)ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¦å®šä¹‰ä¸€ä¸ªæ¨¡å‹å»åŒºåˆ†è¿™ç§åˆ†å¸ƒï¼Ÿå¦‚æœä½ çœ‹è¿‡ä»£ç å°±çŸ¥é“ï¼Œåœ¨åšæ•°æ®çš„æ—¶å€™é»˜è®¤å°±æ˜¯åˆ©ç”¨ \( x + y &gt; 7 \) æ¥åˆ†çš„ç±»ï¼Œæ‰€ä»¥è‡ªç„¶å–çš„æ˜¯çº¿æ€§æ¨¡å‹ä½œä¸ºé¦–é€‰ã€‚è‡³äºæ€ä¹ˆé€‰æ¨¡å‹æˆ‘è®¤ä¸ºæœ€ç®€æ´çš„è¡¨ç¤ºå¾€å¾€å°±æ˜¯æœ€å¥½çš„ï¼Œä¸‹é¢çœ‹çœ‹å´æ©è¾¾è€å¸ˆçš„ä¾‹å­ä½“ä¼šä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹ã€‚</p>
<p><img src="/2018/02/16/MLLogisticRegression/wuenda_1.png" alt=""></p>
<p>æ—¢ç„¶æ˜¯çº¿æ€§ï¼Œé‚£ä¹ˆç›´æ¥å¾—å‡º \( g(W, X) = W^TX \) è¿™é‡Œæé†’ä¸‹åŠ  \({}^T \) æ˜¯å› ä¸ºæˆ‘ä»¬é»˜è®¤çš„å‘é‡éƒ½æ˜¯åˆ—å‘é‡ã€‚ ç†è§£äº†è¿™é‡Œé‚£å°±å¥½åŠäº†ï¼Œç»¼åˆæˆ‘ä»¬çš„ \( Sigmoid \) å¯ä»¥å¾—å‡ºæ‹Ÿåˆå‡½æ•°ï¼š</p>
<p>$$<br>h_W(X) = \frac{1}{1 + e^{-W^TX}}<br>$$</p>
<h3 id="1-3-ä»ç›´è§‚æ„Ÿå—æ¨å¯¼æŸå¤±å‡½æ•°"><a href="#1-3-ä»ç›´è§‚æ„Ÿå—æ¨å¯¼æŸå¤±å‡½æ•°" class="headerlink" title="1.3 ä»ç›´è§‚æ„Ÿå—æ¨å¯¼æŸå¤±å‡½æ•°"></a>1.3 ä»ç›´è§‚æ„Ÿå—æ¨å¯¼æŸå¤±å‡½æ•°</h3><p>æ—¢ç„¶æˆ‘ä»¬éƒ½å·²ç»æŠŠæ•°æ®åšäº†å¤„ç†ï¼Œæ‰€ä»¥å¯¹äºè¾“å…¥æ˜¯äºŒå…ƒè¿˜æ˜¯ä¸€å…ƒæ²¡å·®äº†ï¼Œå°±æ˜¯ä¸€ä¸ª \( h_W(X) \)è€Œå·²ã€‚ä¸‹é¢æˆ‘ä»¬æ ¹æ®ä¹‹å‰çº¿æ€§å‡½æ•°çš„ä¾‹å­ï¼Œæ‰¾ä¸€ä¸ªé€‚åˆæè¿°è¯¯å·®çš„å‡½æ•°ã€‚çœ‹å›¾ï¼š</p>
<p><img src="/2018/02/16/MLLogisticRegression/linear2LogisticreGressionGraphAddSigmoid2.png" alt=""></p>
<p>ä¸‹é¢æˆ‘ä»¬å…ˆåªåˆ†æä¸º \( 1 \) çš„ç‚¹å¦‚ä½•é€šè¿‡ \( h_W(x_1) &lt; h_W(x_2) &lt; h_W(x_3) \) çš„å…³ç³»æ‰¾åˆ°ä¸€ä¸ªå‡½æ•°æ¥è¡¨è¾¾æŸå¤±ã€‚é¦–å…ˆå¯ä»¥è‚¯å®šçš„æ˜¯ï¼Œè¦å¯¹ \( h_W(x_1) \) çš„æƒ©ç½šåŠ›åº¦æ˜¯æœ€å¤§çš„ã€‚å› ä¸ºä»å›¾ä¸­çœ‹å‡ºå¯¹å®ƒçš„é¢„æµ‹æœ€ç¦»è°±ï¼Œæ‰€ä»¥æŸå¤±å‡½æ•°è¦æ˜¯ä¸€ä¸ªé€’å‡å‡½æ•°ï¼Œç„¶åç»§ç»­åˆ†ææŸå¤±å‡½æ•°æ˜¯å¦å¯¹äº \( h_W(x_i) \) çš„å˜åŒ–å‘ˆå‡åŒ€å˜åŒ–ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªé€’å‡å‡½æ•°çš„é€’å‡å¹…åº¦æ˜¯è®¾ä¹ˆæ ·çš„ï¼Ÿå¾ˆæ˜æ˜¾ï¼Œ\( h_W(x_i) \) è¶Šé è¿‘ \( 0 \)ï¼Œå®ƒçš„æƒ©ç½šåŠ›åº¦åº”è¯¥å’ŒæŒ‡æ•°å¢é•¿æœ‰ç‚¹ç±»ä¼¼ã€‚è¶Šå°ä¸€ç‚¹ç‚¹ï¼Œæƒ©ç½šåŠ›åº¦ç«‹åˆ»æ¿€å¢ï¼Œè¿™æ ·å¯¹äºæœ€åæŸå¤±å‡½æ•°æ”¶æ•›æ—¶çš„å‚æ•°æ‹Ÿåˆç»“æœæ¯”è¾ƒç¬¦åˆå¤§å¤šæ•°æ•°æ®çš„æƒ…å†µï¼Œä¸ä¼šå‡ºç°å®ƒæç«¯çš„åˆ†ç±»ï¼Œå› ä¸ºå¯¹æç«¯çš„æ•°æ®å¤„ç½šåŠ›åº¦å®åœ¨æ˜¯å¤ªå¤§äº†ã€‚å¥½äº†ï¼Œè¿™ä¸ªå‡½æ•°ç¬¦åˆä¸‰ä¸ªç‰¹ç‚¹ï¼Œ<code>é€’å‡</code>ã€<code>å¯¼æ•°ç»å¯¹å€¼é€’å‡</code>ï¼ˆé€’å‡å¹…åº¦è¦å‡å°ï¼‰å’Œå®šä¹‰åŸŸåœ¨ \( [0, 1] \)å†…çš„è·¨åº¦å¿…é¡»å¤§ï¼Œæœ€å¥½æ˜¯ä»æ­£æ— ç©·åˆ° \( 0 \) å› ä¸ºå¦‚æœå‡½æ•°å€¼ä¸º \( 0 \)æˆ‘ä»¬å°±ä¸è¦å¯¹è¿™ä¸ªç‚¹è¿›è¡Œæƒ©ç½šäº†ï¼Œæ‰€ä»¥è‚¯å®šæ˜¯è¦æœ‰ \( 0 \) è¿™ä¸ªå‡½æ•°å€¼çš„ã€‚è¿™æ—¶ä½ å¯èƒ½æƒ³åˆ°äº†ï¼Œå¯¹æ•°å‡½æ•°æ­£å¥½æ»¡è¶³æƒ…å†µã€‚æ‰€ä»¥æœ‰å¦‚ä¸‹ç»“æœï¼š</p>
<p>$$<br>loss(h_W(x_i), y_i) = -log(h_W(x_i))\quad if\ y_i = 1<br>$$</p>
<p>è¿™é‡Œå°±ä¸è´´å‡½æ•°å›¾äº†ï¼Œä¸‹é¢å¤§å®¶è‡ªå·±åˆ†æä¸€ä¸‹ \( y = 0 \) çš„æƒ…å†µã€‚è‡ªå·±å®åœ¨æƒ³ä¸å‡ºæ¥å†å¾€ä¸‹é˜…è¯»å§ï¼Œå¦‚æœç›´æ¥çœ‹ç¼ºå°‘æ€è€ƒè¿‡ç¨‹å¯¹è‡ªå·±çš„ç†è§£å¯èƒ½æœ‰ç‚¹æ¬ ç¼ºã€‚å°±åƒå¾ˆå¤šä¹¦å¾ˆå¤šåšå®¢éƒ½æ˜¯ç›´æ¥ç»™å…¬å¼ï¼Œè™½ç„¶å‹‰å¼ºä¹Ÿèƒ½çœ‹æ‡‚ï¼Œä½†æ˜¯æ›´å¤šæ—¶å€™æ˜¯è‡ªå·±è®°ä½ï¼Œå¯¹äºå…¶ä¸­çš„æ€è€ƒè¿‡ç¨‹æ²¡æœ‰ä¸€ç‚¹è‡ªå·±çš„ä½“ä¼šå’Œå¿ƒå¾—ã€‚ç»™ä¸ªå›¾å¤§å®¶è‡ªå·±çŒœçŒœï¼š</p>
<p><img src="/2018/02/16/MLLogisticRegression/linear2LogisticreGressionGraphAddSigmoid3.png" alt=""></p>
<p>ä¸‹é¢ç›´æ¥ç»™å‡ºæœ€åçš„ç»“æœï¼š</p>
<p>$$<br>loss(h_W(x_i), y_i) = - y_i * log(h_W(x_i)) - (1 - y_i) * log(1 - h_W(x_i))<br>$$</p>
<h3 id="1-4-ä»æ¦‚ç‡è®ºè§’åº¦åˆ†ææŸå¤±å‡½æ•°"><a href="#1-4-ä»æ¦‚ç‡è®ºè§’åº¦åˆ†ææŸå¤±å‡½æ•°" class="headerlink" title="1.4 ä»æ¦‚ç‡è®ºè§’åº¦åˆ†ææŸå¤±å‡½æ•°"></a>1.4 ä»æ¦‚ç‡è®ºè§’åº¦åˆ†ææŸå¤±å‡½æ•°</h3><p>è¿˜è®°å¾—å‰é¢è¯´çš„é€»è¾‘å›å½’å¯ä»¥çœ‹åšæ˜¯åˆ†ç±»é—®é¢˜å—ï¼Ÿè€Œå¯¹äºåˆ†ç±»é—®é¢˜çš„é¢„æµ‹æˆ‘ä»¬å¯ä»¥çœ‹åšæ¦‚ç‡æ¥è®¡ç®—ã€‚æ‰€ä»¥å‡½æ•° \( h_W(x_i) \) å¯ä»¥çœ‹åšï¼Œåœ¨ \( W \) ä¸‹ï¼Œè¾“å…¥ \( x_i \) å–å€¼ä¸º \( 1 \) çš„æ¦‚ç‡ã€‚è€Œæˆ‘ä»¬è¦åšçš„å°±æ˜¯æ±‚å‡ºä¸€ä¸ª \( W \) æ˜¯çš„å¯¹äºç»™å®šçš„ \( x_i \) çš„æ¦‚ç‡å°½å¯èƒ½å’Œ \( y_i \) ç¬¦åˆã€‚è¿™æ—¶å€™ä½ ä¼šå‘ç°ï¼Œç»“æœ \( y_i \) æœä»ä¼¯åŠªåˆ©åˆ†å¸ƒï¼Œä¹Ÿå°±æ˜¯éšæœºå˜é‡ \( Y \)çš„å–å€¼åªèƒ½æ˜¯ \( 0/1 \)ï¼Œåœ¨ \( h_W(x_i) \) çœ‹åšæ˜¯å– \( 1 \) çš„æ¦‚ç‡çš„æƒ…å†µä¸‹ï¼Œå½“è¿™ä¸ªå€¼å¤§äº \( 0.5 \) æˆ‘ä»¬è®¤ä¸ºåˆ†ç±»ä¸º \( 1 \)ã€‚</p>
<p>å¥½äº†ï¼ŒæŠŠä¸Šé¢çš„ä¸œè¥¿éƒ½â€œå¿˜æ‰â€ï¼Œæ¥ä¸‹æ¥è¿›å…¥ä¸€ä¸ªæ¦‚ç‡è®ºçš„æ€ç»´æ¨¡å¼ã€‚å‡è®¾è¿™ä¸€ä¸ªå¹³é¢å†…æœ‰æ— æ•°ä¸ªç‚¹ï¼Œè€Œæˆ‘ä»¬ç»™å‡ºçš„æ•°æ®åªæ˜¯ä¸€ä¸ªæŠ½æ ·æ•°æ®ã€‚ä½†æ˜¯æˆ‘ä»¬ä¸å¯èƒ½æŠŠæ‰€æœ‰çš„æƒ…å†µéƒ½åˆ—ä¸¾å‡ºæ¥ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åšçš„å°±æ˜¯é€šè¿‡ç»™å‡ºçš„æ ·æœ¬æ¥ä¼°æµ‹æ•´ä½“åˆ†å¸ƒã€‚å…¶å®è¿™ä¹Ÿå’Œæœºå™¨å­¦ä¹ éœ€è¦å¤§é‡æ ·æœ¬è®­ç»ƒæœ‰å…³ï¼Œå¾ˆæ˜æ˜¾æ•°æ®é‡è¶Šå¤§ï¼Œå¶ç„¶è¯¯å·®è¶Šå°ï¼Œæ ·æœ¬çš„åˆ†å¸ƒè¶Šæ¥è¿‘æ•´ä½“åˆ†å¸ƒã€‚æ”¶å›åˆ°æ¦‚ç‡è®ºï¼Œæˆ‘å‘ç°å®¹æ˜“å†™ç€å†™ç€å°±è·‘åäº†ğŸ˜‚ğŸ˜‚ğŸ˜‚ã€‚ç°åœ¨æˆ‘ä»¬ç»Ÿè®¡æ•°æ®çš„æƒ…å†µæ˜¯ï¼šç¬¦åˆä¼¯åŠªåˆ©åˆ†å¸ƒã€‚è€Œè¿™ç§çŸ¥é“åˆ†å¸ƒçš„æ±‚èƒ½å¤Ÿå’Œåˆ†å¸ƒåŒ¹é…çš„å‚æ•°çš„æ–¹æ³•æ¦‚ç‡è®ºä¸­æœ‰ä¸€ä¸ªå‚æ•°ä¼°è®¡æ–¹æ³•å«ï¼š<code>æå¤§ä¼¼ç„¶ä¼°è®¡</code>ã€‚å¦‚æœä¸æ‡‚çœ‹ä¸€ä¸‹ç®€çŸ­ä»‹ç»ï¼š</p>
<blockquote>
<p>æå¤§ä¼¼ç„¶ä¼°è®¡ï¼Œé€šä¿—ç†è§£æ¥è¯´ï¼Œå°±æ˜¯åˆ©ç”¨å·²çŸ¥çš„æ ·æœ¬ç»“æœä¿¡æ¯ï¼Œåæ¨æœ€å…·æœ‰å¯èƒ½ï¼ˆæœ€å¤§æ¦‚ç‡ï¼‰å¯¼è‡´è¿™äº›æ ·æœ¬ç»“æœå‡ºç°çš„æ¨¡å‹å‚æ•°å€¼ï¼<br>æ¢å¥è¯è¯´ï¼Œæå¤§ä¼¼ç„¶ä¼°è®¡æä¾›äº†ä¸€ç§ç»™å®šè§‚å¯Ÿæ•°æ®æ¥è¯„ä¼°æ¨¡å‹å‚æ•°çš„æ–¹æ³•ï¼Œå³ï¼šâ€œæ¨¡å‹å·²å®šï¼Œå‚æ•°æœªçŸ¥â€ã€‚</p>
</blockquote>
<p>å‚è€ƒè‡ª<a href="https://zhuanlan.zhihu.com/p/26614750" target="_blank" rel="external">@å¿†è‡»ï¼šä¸€æ–‡ææ‡‚æå¤§ä¼¼ç„¶ä¼°è®¡</a></p>
<p>ä¾ç…§ä¸Šé¢çš„æ„æ€é‚£å¾ˆæ˜æ˜¾ï¼Œæˆ‘ä»¬æ˜¯æŠŠ \( h_W(x_i) = P(y = 1|x_i;W)\) é‚£è‡ªç„¶å°±æœ‰ï¼š</p>
<p>$$<br>P(y_i|x_i;W) = {h_W(x_i)}^{y_i} * {(1 - h_W(x_i))}^{1 - y_i}<br>$$</p>
<p>è¿™æ˜¯å•ä¸ª \(ï¼ˆx_i, y_iï¼‰\)çš„æ¦‚ç‡ã€‚å¦‚æœæŠŠæ•´ä¸ªæ ·æœ¬çœ‹åš \( n \) æ¬¡çš„ç‹¬ç«‹é‡å¤å®éªŒå‘¢ï¼Ÿé‚£å‘ç”Ÿçš„æ¦‚ç‡å°±æ˜¯è¿™ä¸ªçš„ä¹˜ç§¯äº†ã€‚è¿™é‡Œä½¿ç”¨ \( X, Y \) å‘é‡è¡¨ç¤ºæ•´ä¸ªæ•°æ®ã€‚å³ï¼š</p>
<p>$$<br>P(Y|X;W) = \prod_{i = 1}^{n}P(y_i|x_i; W) = \prod_{i = 1}^{n}{h_W(x_i)}^{y_i} * {(1 - h_W(x_i))}^{1 - y_i}<br>$$</p>
<p>å¯ä»¥çœ‹å‡ºè¿™æ˜¯ä¸€ä¸ªå…³äº \( W \) çš„å‡½æ•°ï¼Œç°åœ¨æ¯”è¾ƒç„å­¦çš„éƒ¨åˆ†æ¥äº†ï¼Œæˆ‘ä»¬è®¤ä¸ºï¼Œè¿™ä¸ªäº‹ä»¶æ—¢ç„¶å‘ç”Ÿäº†ï¼Œé‚£ä¹ˆå®ƒå‘ç”Ÿçš„æ¦‚ç‡å°±åº”è¯¥æ˜¯æ‰€æœ‰äº‹ä»¶ä¸­æ¦‚ç‡æœ€å¤§çš„ï¼Œå¦‚æœä¸æ˜¯é‚£å®ƒå‡­ä»€ä¹ˆå‘ç”Ÿï¼Ÿå“ˆå“ˆï¼Œå°±æ˜¯è¿™ä¹ˆè®²é“(xuan)ç†(xue)ã€‚æœ€å¤§å€¼ï¼Ÿé‚£å°±å¥½åŠäº†ï¼Œç›´æ¥æ±‚å¯¼ï¼Ÿä¸è¡Œä¸è¡Œï¼Œå¤ªéš¾äº†ã€‚ã€‚ã€‚é«˜ä¸­æœ€å¸¸ç”¨çš„æŠŠæˆï¼šä¹˜å˜åŠ ï¼Œç”¨å¯¹æ•°ã€‚ç„¶åä¹˜ä»¥ \( -\frac{1}{n} \) å°±ç¼–ç¨‹æ±‚æœ€å°å€¼äº†ã€‚</p>
<p>$$<br>loss(W) = - \frac{1}{n}log(P(Y|X;W)) = - \frac{1}{n} \sum_{i = 1}^{n}y_i * log(h_W(x_i)) + (1 - y_i) * log(1 - h_W(x_i))<br>$$</p>
<h3 id="1-5-æ¢¯åº¦ä¸‹é™æ±‚æå€¼"><a href="#1-5-æ¢¯åº¦ä¸‹é™æ±‚æå€¼" class="headerlink" title="1.5 æ¢¯åº¦ä¸‹é™æ±‚æå€¼"></a>1.5 æ¢¯åº¦ä¸‹é™æ±‚æå€¼</h3><p>å‰é¢å·²ç»ç»™å‡ºäº†æŸå¤±å‡½æ•°ï¼Œæˆ‘ä»¬å†æ¬¡åˆ©ç”¨æ¢¯åº¦ä¸‹é™ç®—æ³•æ›´æ–°æƒé‡ã€‚å¦‚æœè‡ªå·±æ‰‹å†™ä»£ç æ¥å®ç°ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦æ±‚åå¯¼çš„ğŸ˜‚ğŸ˜‚ğŸ˜‚</p>
<p>é«˜æ•°çš„ä¸œè¥¿ï¼Œè¿™é‡Œå·æ‡’äº†ï¼Œå­—æœ‰ç‚¹éš¾æ‰“å°±ç›´æ¥æˆªå›¾äº†ï¼Œæ¯•ç«Ÿè¿™ä¸æ˜¯ä»€ä¹ˆéš¾ç‚¹ï¼š</p>
<p><img src="/2018/02/16/MLLogisticRegression/wuenda_2.png" alt=""></p>
<p>é‚£ä¹ˆæ›´æ–°å‡½æ•°å°±æ˜¯ï¼š</p>
<p>$$<br>w_j := w_j - \frac{\alpha}{n}\sum_{i=1}^{n}(h_W(x_i) - y_i)x_{i_j}<br>$$</p>
<p>æ³¨æ„è¿™é‡Œçš„ \( i, j \)ï¼Œ\( x_i \) ä»£è¡¨çš„æ˜¯ä¸€ä¸ªåˆ—å‘é‡ï¼Œ\( x_{i_j} \) ä»£è¡¨ç¬¬ \( i \) åˆ—ç¬¬ \( j \) ä¸ªæ•°å­—ã€‚å…¶å®ä»”ç»†æƒ³æƒ³å°±å¯ä»¥å‘ç°ï¼Œæ›´æ–°çš„ \( w_j \)å°±æ˜¯ä¸€ä¸ªæ•°ï¼Œå¯¹å®ƒæ±‚åå¯¼çš„æ—¶å€™ä½™å‡ºæ¥å°±æ˜¯å’Œå®ƒç›¸ä¹˜çš„é‚£ä¸ª \( x_{i_j} \)ã€‚ç”±äºå‰é¢éƒ½æ˜¯ä»å•ä¸ªç‚¹å¼€å§‹ç ”ç©¶ï¼Œä¸ºäº†å¥½ç†è§£æ‰€ä»¥ç›´æ¥ä½¿ç”¨ä¸‹æ ‡è¡¨ç¤ºï¼Œä½†æ˜¯åœ¨ä½¿ç”¨çº¿æ€§è¾¹ç•Œå‡½æ•°çš„æ—¶å€™è¦æœ‰ä¸€ä¸ªçŸ©é˜µçš„æ€æƒ³ã€‚è¿™é‡Œå°±ä¸ç»†è®²äº†ï¼Œåé¢å¤šå…ƒçš„å°±å¿…é¡»ä½¿ç”¨å‘é‡å½¢å¼äº†ã€‚</p>
<h3 id="1-6-æ‰‹å†™ä»£ç "><a href="#1-6-æ‰‹å†™ä»£ç " class="headerlink" title="1.6 æ‰‹å†™ä»£ç "></a>1.6 æ‰‹å†™ä»£ç </h3><p>å¥½äº†ï¼ŒåŸºæœ¬é€»è¾‘å·²ç»ææ¸…æ¥šäº†ï¼Œå°±æ˜¯å’Œçº¿æ€§å›å½’ç±»ä¼¼ï¼Œåªä¸è¿‡è¿™é‡Œå¤„ç†çš„æ˜¯ä¸€ä¸ªçº¿æ€§äºŒåˆ†ç±»é—®é¢˜ï¼Œéœ€è¦å¯¹åŸå§‹æ•°æ®å¤„ç†æˆçº¿æ€§å€¼ç„¶åæŠŠçº¿æ€§å€¼æ˜ å°„åˆ° \( sigmoid \) å‡½æ•°çš„å®šä¹‰åŸŸä¸Šï¼Œæ ¹æ® \( sigmoid \) å‡½æ•°ç‰¹å¾æˆ‘ä»¬å¯ä»¥å¾—å‡ºæ•°æ®åˆ†ç±»ä¸ºæ­£ \( (1) \) çš„æ¦‚ç‡å¤§å°ï¼Œç„¶åè¿›è¡Œè¯„ä¼°ã€‚</p>
<p>å¦‚æœå¯¹å…¬å¼è¿˜æœ‰ä»€ä¹ˆä¸æ‡‚çš„è¯ï¼Œå‚è€ƒè¿™ç¯‡ <a href="http://blog.csdn.net/ligang_csdn/article/details/53838743" target="_blank" rel="external">æœºå™¨å­¦ä¹ â€“Logisticå›å½’è®¡ç®—è¿‡ç¨‹çš„æ¨å¯¼</a> é‡Œé¢è®²è§£äº†å¦‚ä½•å‘é‡åŒ–ï¼Œå¦‚æœä½ å¯¹çº¿æ€§ä»£æ•°ä¸ç†Ÿæ‚‰å¯ä»¥è‡ªå·±å»çœ‹çœ‹è¿™ç¯‡æ–‡ç« çš„è®²è§£ã€‚ä¸‹é¢æˆ‘åªè®²è§£ä»£ç ï¼Œå°±ä¸å¯¹åŸç†é‡å¤ä»‹ç»äº†ã€‚</p>
<p>éœ€è¦çš„åº“å’Œæ•°æ®ï¼Œè¿™é‡Œä¸ºäº†è·å–æ›´å¥½çš„ç²¾åº¦æœ€å¥½ä½¿ç”¨ <code>float64</code>ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><span class="keyword">import</span> matplotlib.animation <span class="keyword">as</span> animation</div><div class="line"></div><div class="line">x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</div><div class="line">y = [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>]</div><div class="line"></div><div class="line">train_X = np.asarray(np.row_stack((np.ones(shape=(<span class="number">1</span>, len(x))), x)), dtype=np.float64)</div><div class="line">train_Y = np.asarray(y, dtype=np.float64)</div><div class="line">train_W = np.asarray([<span class="number">-1</span>, <span class="number">-1</span>], dtype=np.float64).reshape(<span class="number">1</span>, <span class="number">2</span>)</div></pre></td></tr></table></figure>
<p>å®šä¹‰ \( sigmoid \) å’Œ \( loss \) å‡½æ•°</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">sigmoid</span><span class="params">(X)</span>:</span></div><div class="line">    <span class="keyword">return</span> <span class="number">1</span> / (<span class="number">1</span> + np.power(np.e, -(X)))</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">lossfunc</span><span class="params">(X, Y, W)</span>:</span></div><div class="line">    n = len(Y)</div><div class="line">    <span class="keyword">return</span> (<span class="number">-1</span> / n) * np.sum(Y * np.log(sigmoid(np.matmul(W, X))) + (<span class="number">1</span> - Y) * np.log((<span class="number">1</span> - sigmoid(np.matmul(W, X)))))</div></pre></td></tr></table></figure>
<p>å®ç°å‚æ•°æ›´æ–°ï¼ˆæ¢¯åº¦ä¸‹é™ç®—æ³•ï¼‰</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">gradientDescent</span><span class="params">(X, Y, W, learningrate=<span class="number">0.001</span>, trainingtimes=<span class="number">500</span>)</span>:</span></div><div class="line">    n = len(Y)</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(trainingtimes):</div><div class="line">        W = W - (learningrate / n) * np.sum((sigmoid(np.matmul(W, X)) - Y) * X, axis=<span class="number">1</span>)</div></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„ä¸€ä¸ªé‡ç‚¹æ˜¯æŠŠä¹‹å‰çš„åˆ†æå‘é‡åŒ–äº†ï¼Œç„¶åæ³¨æ„ç»´åº¦å˜åŒ–å°±å¾ˆç®€å•äº†ã€‚å…¶ä¸­ \( axis=1 \) æ˜¯ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„ç‚¹ï¼Œå®ƒä»£è¡¨æ±‚æŸä¸ªç»´åº¦çš„å’Œã€‚</p>
<p>å…¶å®åˆ°è¿™é‡Œæ•´ä¸ªç®—æ³•å°±ç®—æ˜¯å®Œæˆäº†ã€‚ä¸‹é¢æˆ‘ä»¬è¿›è¡Œå¯è§†åŒ–ï¼Œä¸ä¼šçš„å¯ä»¥å‚è€ƒæˆ‘ä¹‹å‰çš„æ–‡ç«  <a href="http://fitzeng.org/2018/02/08/MatplotlibGenerateGif/">Matplotlib ä¿å­˜ GIF åŠ¨å›¾</a>ï¼Œä¸‹é¢ç»™å‡ºæ•ˆæœå’Œæºä»£ç ï¼š</p>
<p><img src="/2018/02/16/MLLogisticRegression/logisticregression.gif" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># coding: utf-8</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><span class="keyword">import</span> matplotlib.animation <span class="keyword">as</span> animation</div><div class="line"></div><div class="line">x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</div><div class="line">y = [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>]</div><div class="line"></div><div class="line">train_X = np.asarray(np.row_stack((np.ones(shape=(<span class="number">1</span>, len(x))), x)), dtype=np.float64)</div><div class="line">train_Y = np.asarray(y, dtype=np.float64)</div><div class="line">train_W = np.asarray([<span class="number">-1</span>, <span class="number">-1</span>], dtype=np.float64).reshape(<span class="number">1</span>, <span class="number">2</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">sigmoid</span><span class="params">(X)</span>:</span></div><div class="line">    <span class="keyword">return</span> <span class="number">1</span> / (<span class="number">1</span> + np.power(np.e, -(X)))</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">lossfunc</span><span class="params">(X, Y, W)</span>:</span></div><div class="line">    n = len(Y)</div><div class="line">    <span class="keyword">return</span> (<span class="number">-1</span> / n) * np.sum(Y * np.log(sigmoid(np.matmul(W, X))) + (<span class="number">1</span> - Y) * np.log((<span class="number">1</span> - sigmoid(np.matmul(W, X)))))</div><div class="line"></div><div class="line"></div><div class="line">Training_Times = <span class="number">100000</span></div><div class="line">Learning_Rate = <span class="number">0.3</span></div><div class="line"></div><div class="line">loss_Trace = []</div><div class="line">w_Trace = []</div><div class="line">b_Trace = []</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">gradientDescent</span><span class="params">(X, Y, W, learningrate=<span class="number">0.001</span>, trainingtimes=<span class="number">500</span>)</span>:</span></div><div class="line">    n = len(Y)</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(trainingtimes):</div><div class="line">        W = W - (learningrate / n) * np.sum((sigmoid(np.matmul(W, X)) - Y) * X, axis=<span class="number">1</span>)</div><div class="line">        <span class="comment"># for GIF</span></div><div class="line">        <span class="keyword">if</span> <span class="number">0</span> == i % <span class="number">1000</span> <span class="keyword">or</span> (<span class="number">100</span> &gt; i <span class="keyword">and</span> <span class="number">0</span> == i % <span class="number">2</span>):</div><div class="line">            b_Trace.append(W[<span class="number">0</span>, <span class="number">0</span>])</div><div class="line">            w_Trace.append(W[<span class="number">0</span>, <span class="number">1</span>])</div><div class="line">            loss_Trace.append(lossfunc(X, Y, W))</div><div class="line">    <span class="keyword">return</span> W</div><div class="line"></div><div class="line"></div><div class="line">final_W = gradientDescent(train_X, train_Y, train_W, learningrate=Learning_Rate, trainingtimes=Training_Times)</div><div class="line"></div><div class="line">print(<span class="string">"Final Weight:"</span>, final_W)</div><div class="line">print(<span class="string">"Weight details trace: "</span>, np.asarray([b_Trace, w_Trace]))</div><div class="line">print(<span class="string">"Loss details trace: "</span>, loss_Trace)</div><div class="line"></div><div class="line">fig, ax = plt.subplots()</div><div class="line">ax.scatter(np.asarray(x), np.asarray(y))</div><div class="line">ax.set_title(<span class="string">r'$Fitting\ line$'</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">(i)</span>:</span></div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        ax.lines.pop(<span class="number">0</span>)</div><div class="line">    <span class="keyword">except</span> Exception:</div><div class="line">        <span class="keyword">pass</span></div><div class="line">    plot_X = np.linspace(<span class="number">-1</span>, <span class="number">12</span>, <span class="number">100</span>)</div><div class="line">    W = np.asarray([b_Trace[i], w_Trace[i]]).reshape(<span class="number">1</span>, <span class="number">2</span>)</div><div class="line">    X = np.row_stack((np.ones(shape=(<span class="number">1</span>, len(plot_X))), plot_X))</div><div class="line">    plot_Y = sigmoid(np.matmul(W, X))</div><div class="line">    line = ax.plot(plot_X, plot_Y[<span class="number">0</span>], <span class="string">'r-'</span>, lw=<span class="number">1</span>)</div><div class="line">    ax.set_xlabel(<span class="string">r"$Cost\ %.6s$"</span> % loss_Trace[i])</div><div class="line">    <span class="keyword">return</span> line</div><div class="line"></div><div class="line"></div><div class="line">ani = animation.FuncAnimation(fig, update, frames=len(w_Trace), interval=<span class="number">100</span>)</div><div class="line">ani.save(<span class="string">'logisticregression.gif'</span>, writer=<span class="string">'imagemagick'</span>)</div><div class="line"></div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<h2 id="2-å¤šå…ƒåˆ†ç±»"><a href="#2-å¤šå…ƒåˆ†ç±»" class="headerlink" title="2 å¤šå…ƒåˆ†ç±»"></a>2 å¤šå…ƒåˆ†ç±»</h2><p>å…ˆä»ä¸‰å…ƒåˆ†ç±»å¼€å§‹äº†è§£ï¼ŒåŠ å…¥ç»™äº†ä»¥ä¸‹åˆ†å¸ƒï¼Œè¦ä½ æ±‚è¾¹ç•Œï¼š</p>
<p><img src="/2018/02/16/MLLogisticRegression/multiClass3ToAll.png" alt=""></p>
<p>æ¯”èµ·å‰é¢çš„æ¥å°±éš¾å¤šäº†ï¼Œé¦–å…ˆå‰é¢æ˜¯çº¿æ€§åˆ†ç±»çš„è€Œè¿™é‡Œå¾ˆæ˜æ˜¾ä¸æ˜¯ï¼Œå…¶æ¬¡è¿™é‡Œåˆå¤šå‡ºäº†ä¸€ä¸ªå˜é‡ã€‚ã€‚ã€‚åˆ«æ€¥ï¼Œå¯¹æ¯”ä¸€ä¸‹ä¸‰å¹…å›¾ä½ å°±æ¸…æ¥šäº†ã€‚</p>
<p><img src="/2018/02/16/MLLogisticRegression/multiClass3To1.png" alt=""><br><img src="/2018/02/16/MLLogisticRegression/multiClass3To2.png" alt=""><br><img src="/2018/02/16/MLLogisticRegression/multiClass3To3.png" alt=""></p>
<p>è¿™é‡Œæˆ‘ä»¬å°±è§£å†³äº†å¤šä¸€ä¸ªå˜é‡çš„é—®é¢˜ï¼Œé€šè¿‡é€‰å–ä¸€ä¸ªä¸»å˜é‡ä¸º \( 1 \)ï¼Œå…¶å®ƒçš„å€¼å°±ä¸º \( 0 \)ï¼Œç„¶åå°±å¯ä»¥è¿›è¡ŒäºŒåˆ†ã€‚è¿˜æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯å¦‚ä½•é€‰å–å‚æ•°ï¼Ÿæˆ‘ä»¬æ—¢ç„¶å¯ä»¥è½¬æ¢æˆäºŒåˆ†é—®é¢˜äº†ï¼Œé‚£ä¹ˆå¯¹äºæ¯ä¸€æ¬¡äºŒåˆ†éƒ½åªè¦é€‰å– \( (W, X) \) äº†ã€‚\( X \) å¾ˆæ˜æ˜¾æœ‰ä¸¤ä¸ªåŸºæœ¬çš„ \( (X1, X2) \) ä½†æ˜¯ä¸ºäº†èƒ½è¿‡é€‰å–æ›´åŠ åˆé€‚çš„è¾¹ç•Œï¼Œå¦‚æœåªæ˜¯è¿™ä¸¤ä¸ªç‰¹å¾çš„è¯æ˜¯ä¸å¤Ÿçš„ï¼Œæ‰€ä»¥å…¶å®ƒçš„ \( X1^2ï¼ŒX1*X2 \ldots \) ç­‰ç­‰ï¼Œçœ‹ä½ è¦æ‹Ÿåˆæˆä»€ä¹ˆæ ·çš„è¾¹ç•Œå°±é€‰å–ä»€ä¹ˆæ ·çš„ç‰¹å¾ï¼ŒåŒç†ä¸‰ç»´å°±é€‰å–ä¸€ä¸ªèƒ½è¡¨è¾¾å¼¯å¼¯æ›²æ›²çš„å¹³é¢çš„ç‰¹å¾é‡ã€‚ä¸‹é¢é€‰å–æƒé‡ï¼Œä¹Ÿå°±æ˜¯ç‰¹å¾å‰å‰é¢çš„ç³»æ•°ï¼Œå¦‚æœç‰¹å¾é€‰å–å¥½äº†ï¼Œé‚£ä¹ˆåªè¦åœ¨æ­¤åŸºç¡€ä¸ŠåŠ ä¸€ä¸ª \( bias \) å°±å¥½äº†ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬æ¥ä¸¾ä¸ªå°ä¾‹å­å¦‚ä½•æ“ä½œï¼š</p>
<p><img src="/2018/02/16/MLLogisticRegression/circleGraph.png" alt=""></p>
<p>å¾ˆæ˜æ˜¾è¿™é‡Œæœ‰ä¸€ä¸ªåŒ…å›´è¶‹åŠ¿ï¼Œæ‰€ä»¥ç†æ‰€å½“ç„¶æƒ³åˆ°åœ†ã€‚ä¹Ÿå°±æ˜¯è¯´é€‰å–çš„ \( X: X1,\ X2,\ X1^2,\ X2^2 \) é‚£ä¹ˆ\( sigmoid \)å‡½æ•°å°±å¯ä»¥å®šä¹‰ä¸ºï¼š</p>
<p>$$<br>h_{(bias, w_1, w_2, w_3, w_4)}({x_1, x_2, x_1^2, x_2^2}) = \frac{1}{1 + e^{-(bias + w_1 * x_1 + w_2 * x_2 + w_3 * x_1^2 + w_4 * x_2^2)}}<br>$$</p>
<p>è‡³äºè§£æ³•å°±å’Œä¸Šé¢ç±»ä¼¼äº†ï¼ŒæŠŠè¿™äº›éƒ½æŠ½è±¡æˆå‘é‡ï¼Œé‚£ä¹ˆè‡³äºä»€ä¹ˆç»´åº¦ï¼Œæœ‰å‡ ä¸ªå˜é‡éƒ½æ²¡å·®äº†ã€‚éœ€è¦è®°å¾—çš„æ˜¯ï¼Œè¿™é‡Œè¦è·‘çš„æ¬¡æ•°æ˜¯åˆ†ç±»çš„ç§æ•°çš„å¤§å°ï¼Œä¹Ÿå°±æ˜¯æŠŠæ¯ä¸€ç§éƒ½å½“åšä¸»è§’å¤„ç†ä¸€æ¬¡å¾—åˆ°å±äºå®ƒæŠŠå…¶å®ƒå…ƒç´ åŒºåˆ†çš„åˆ†ç•Œçº¿ï¼Œé¢„æµ‹æ˜¯ä¹Ÿè¦æŠŠæ‰€æœ‰æ¨¡å‹è·‘ä¸€éï¼Œå“ªä¸ªæ¨¡å‹çš„æ¦‚ç‡é«˜å°±å–å“ªä¸ªä½œä¸ºåˆ†ç±»é¢„æµ‹çš„ç»“æœã€‚</p>
<p>è¿™é‡Œå°±ä¸è¯¦ç»†ä»‹ç»åº”ç”¨äº†ï¼Œä»¥åæœ‰æœºä¼šè¡¥å……ä»£ç å®è·µï¼Œä¸‹é¢ç»™å‡ºå‡ ç¯‡å‚è€ƒåšå®¢ï¼š</p>
<ul>
<li><a href="http://blog.csdn.net/gamer_gyt/article/details/51236978" target="_blank" rel="external">ã€Šæœºå™¨å­¦ä¹ å®æˆ˜ã€‹Logisticå›å½’ç®—æ³•ï¼ˆ1ï¼‰</a></li>
<li><a href="http://blog.csdn.net/lookqlp/article/details/51161640" target="_blank" rel="external">é€»è¾‘å›å½’æ¢¯åº¦ä¸‹é™æ³•è¯¦è§£</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/28775274" target="_blank" rel="external">æ·±å…¥æœºå™¨å­¦ä¹ ç³»åˆ—3-é€»è¾‘å›å½’</a></li>
</ul>
<h2 id="3-æ¨¡å‹ä¼˜åŒ–"><a href="#3-æ¨¡å‹ä¼˜åŒ–" class="headerlink" title="3 æ¨¡å‹ä¼˜åŒ–"></a>3 æ¨¡å‹ä¼˜åŒ–</h2><h3 id="3-1-ç®—æ³•æ–¹å‘"><a href="#3-1-ç®—æ³•æ–¹å‘" class="headerlink" title="3.1 ç®—æ³•æ–¹å‘"></a>3.1 ç®—æ³•æ–¹å‘</h3><p>æ±‚è§£æœ€ä¼˜åŒ–é—®é¢˜ä¸åªæ˜¯åªæœ‰æ¢¯åº¦ä¸‹é™ç®—æ³•ï¼Œè¿˜æœ‰å…¶å®ƒèƒ½å¤Ÿæ”¶æ•›æ›´å¿«çš„æ–¹å¼ã€‚æ¯”å¦‚ï¼šå…±è½­æ¢¯åº¦æ³• <code>BFGS</code> (å˜å°ºåº¦æ³•) å’Œ <code>L-BFGS</code> (é™åˆ¶å˜å°ºåº¦æ³•) ç­‰ï¼Œä¸è¿‡æˆ‘ç°åœ¨è¿˜æ²¡çœ‹è¿‡è¿™äº›ç®—æ³•çš„å…·ä½“å®ç°ï¼Œè¿™é‡Œå°±ç«‹ä¸‹ FLAG äº†ã€‚ä¸è¿‡ä¸€èˆ¬æˆ‘ä»¬ä½¿ç”¨è¿™äº›ç®—æ³•éƒ½æ˜¯è°ƒç”¨ç°æˆçš„åº“ï¼Œæ¯•ç«Ÿè‡ªå·±å†™çš„ç®—æ³•å¤šå¤šå°‘å°‘è¿˜æ˜¯æœ‰ç¼ºé™·çš„ï¼Œ</p>
<h3 id="3-2-æ‹Ÿåˆåº¦æ–¹å‘"><a href="#3-2-æ‹Ÿåˆåº¦æ–¹å‘" class="headerlink" title="3.2 æ‹Ÿåˆåº¦æ–¹å‘"></a>3.2 æ‹Ÿåˆåº¦æ–¹å‘</h3><p>åœ¨ä¹‹å‰çš„ä¾‹å­ä¸­ï¼Œä½ ä¼šå‘ç°ä¸ªé€‰å–å¥½ç‰¹å¾é‡ä¹‹åï¼Œæ€ä¹ˆé€‰å–è¿­ä»£æ¬¡æ•°å¾ˆé‡è¦ã€‚ä¸¾ä¸ªå°ä¾‹å­ï¼šæˆ‘ä»¬æ‹Ÿåˆä¸€ä¸ªç¬¦åˆäºŒæ¬¡å‡½æ•°åˆ†å¸ƒçš„æ•£ç‚¹å›¾ï¼Œå¦‚æœä½ é€‰å–çš„æ¨¡å‹æ˜¯ \( b + w*x \) é‚£æ€ä¹ˆè·‘éƒ½è·‘ä¸å‡ºç†æƒ³ç»“æœï¼Œå¿…é¡»æŠŠ \( x^2 \) è¿™ä¸ªç‰¹å¾é¡¹åŠ ä¸Šï¼Œè¿™æ ·å°±ä¸ä¼šæ¬ æ‹Ÿåˆã€‚åŒæ ·ï¼Œå¦‚æœä½ é€‰å–å¥½äº†ä¸€ä¸ªäºŒæ¬¡æ¨¡å‹ï¼Œä½†æ˜¯è¿­ä»£æ¬¡æ•°ä¸å¤Ÿï¼Œä¹Ÿä¼šå¯¼è‡´æ¬ æ‹Ÿåˆï¼Œè®²é“ç†å¦‚æœæ¨¡å‹é¢„æµ‹å’Œåˆ†å¸ƒä¸€è‡´ï¼Œé‚£ä¹ˆè¿­ä»£æ¬¡æ•°è‡ªç„¶æ˜¯è¶Šå¤šè¶Šå¥½ã€‚ä½†ä½†æ˜¯ï¼Œå¦‚æœä½ ä¸èƒ½ç¡®å®šï¼ŒåˆåŠ ä¸€ä¸ª \( x^3 \) çš„ç‰¹å¾é‡è¿›å»ï¼Œæœ¬æ¥æ˜¯æ•°æ®æ˜¯ç¬¦åˆäºŒæ¬¡å‡½æ•°çš„ç‰¹å¾ï¼Œå¦‚æœè®­ç»ƒæ¬¡æ•°æ§åˆ¶å¾—æ¯”è¾ƒå¥½ï¼Œä¹Ÿå¯ä»¥è®­ç»ƒå‡ºå¥½æ¨¡å‹ï¼Œæ— éå°±æ˜¯æŠŠ \( x^3 \) çš„æƒé‡ç½®é›¶ï¼Œå¦‚æœè®­ç»ƒæ¬¡æ•°æ§åˆ¶ä¸å¥½ï¼Œé‚£ä¹ˆå¿…å°†é€ æˆæ¬ æ‹Ÿåˆï¼ˆè®­ç»ƒæ¬¡æ•°è¿‡å°‘ï¼‰æˆ–è¿‡æ‹Ÿåˆï¼ˆè®­ç»ƒæ¬¡æ•°è¿‡å¤šï¼‰ï¼Œè¿™é‡Œä¸æ˜¯è¯´æŸå¤±å‡½æ•°å€¼è¶Šå°è¶Šå°‘ï¼Œè€Œæ˜¯è¯´é‚£æ‹Ÿåˆå‡½æ•°çš„è¶‹åŠ¿ç¬¦åˆæ•´ä½“æ•°æ®çš„è¶‹åŠ¿ï¼Œä»æ¦‚ç‡è®ºçš„è§’åº¦è®²ï¼Œå°±æ˜¯æˆ‘ä»¬æŠ½å–çš„æ˜¯æ€»ä½“ä¸­çš„ä¸€ä¸ªæ ·æœ¬ï¼Œç”±äºè·å¾—å…¨ä½“æ•°æ®ä¸ç°å®ï¼Œæ‰€ä»¥åªèƒ½ä½¿ç”¨æ ·æœ¬ä¼°è®¡æ•´ä½“ï¼Œæ‰€ä»¥è¿™é‡Œçš„ä¼°è®¡çš„å°±åº”è¯¥æ˜¯ä¸€ä¸ªè¶‹åŠ¿ã€‚</p>
<p>é‚£ä¹ˆå¦‚ä½•é¿å…è¿‡æ‹Ÿåˆæˆ–æ¬ æ‹Ÿåˆå‘¢ï¼Ÿæˆ‘è§‰å¾—å¯ä»¥ä»ä¸€ä¸‹è§’åº¦è€ƒè™‘ï¼š</p>
<ul>
<li>æ•°æ®é‡ï¼ˆè¶Šå¤šè¶Šå¥½ï¼‰</li>
<li>ç‰¹å¾é‡ï¼ˆæœ€å°èƒ½æè¿°è¶‹åŠ¿åŸåˆ™ï¼‰</li>
<li>è®­ç»ƒæ¬¡æ•°ï¼ˆæœç€è¶‹åŠ¿è¡Œè¿›æ–¹å‘è®­ç»ƒæ¬¡æ•°è¶Šå¤šè¶Šå¥½ï¼‰</li>
</ul>
<p>æ€»ä¹‹è¿™é‡Œæœ€æœ€å…³é”®çš„æ˜¯æ¨¡å‹çš„å‡†ç¡®åº¦ï¼Œå¦‚æœä¸€å¼€å§‹æ¨¡å‹é€‰é”™é‚£æ€ä¹ˆè¿­ä»£ä¹Ÿä¸ä¼šè·‘å‡ºå¥½çš„æ•ˆæœã€‚</p>
<p>ä¸‹é¢ç»™å‡ºå´æ©è¾¾è€å¸ˆçš„è¯¾ä»¶å›¾ï¼Œå¤§å®¶ä½“ä¼šä¸€ä¸‹ï¼š</p>
<p><img src="/2018/02/16/MLLogisticRegression/wuenda_3.png" alt=""></p>
<p><img src="/2018/02/16/MLLogisticRegression/wuenda_4.png" alt=""></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬è¿˜æœ‰ä¸€ç§æ–¹å¼å¤„ç†ï¼š<code>æ­£åˆ™åŒ–</code></p>
<p>æˆ‘æ ¹æ®æˆ‘è‡ªå·±çš„ç†è§£æ¥å¤§èƒ†è§£é‡Šä¸€ä¸‹å§ï¼Œå¦‚æœä½ æœ‰è‡ªå·±çš„ç†è§£å°±å¯ä»¥ä¸çœ‹äº†ã€‚ã€‚é¿å…è¯¯å¯¼ã€‚æ­£åˆ™åŒ–ä¸€èˆ¬å°±æ˜¯è§£å†³è¿‡æ‹Ÿåˆï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ ¹æœ¬ä¸èƒ½ç¡®å®šè¶‹åŠ¿ï¼Œæ‰€ä»¥æ·»åŠ äº†å¾ˆå¤šå¤šä½™çš„ç‰¹å¾é‡ï¼Œé‚£ä¹ˆå¯¹äºè¿™ä¸ªæ¨¡å‹ä»€ä¹ˆæ ·çš„ç»“æœæ˜¯æˆ‘ä»¬å¯ä»¥æ¥å—çš„å‘¢ï¼Ÿå¦‚æœé‚£äº›å¤šä½™ç‰¹å¾é‡çš„æƒé‡æ¥è¿‘ \( 0 \) æ˜¯ä¸æ˜¯å°±æ„å‘³ç€æˆ‘ä»¬ä¹Ÿèƒ½å¾—åˆ°è¾ƒå¥½çš„æ‹Ÿåˆæ•ˆæœï¼Œç”šè‡³å’Œæ²¡æœ‰è¿™äº›å¹²æ‰°ç‰¹å¾æ˜¯è¾¾åˆ°ä¸€æ ·çš„æ•ˆæœã€‚è¿™é‡Œå°±æ˜¯å¯¹é‚£äº›ç‰¹å¾é‡çš„ç³»æ•°è¿›è¡Œå¤„ç½šè¾¾åˆ°è¿™ä¸ªç›®çš„çš„ã€‚</p>
<p>ä»ä¸Šé¢çš„è§£é‡Šå¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬ä¸éœ€è¦å¯¹ \( bias \) è¿›è¡Œæƒ©ç½šï¼Œæ‰€ä»¥ç»“æœå°±æ˜¯åœ¨æŸå¤±å‡½æ•°åé¢åŠ ä¸Š \( \sum_{i = 1}^{n}{w_i}^2 \)ã€‚å½“ç„¶è¿™åªæ˜¯å…¶ä¸­ä¸€ç§æ–¹å¼ï¼Œä½ å¯ä»¥é€‰å–å…¶å¯è¡Œçš„æ–¹å¼ï¼Œä¸»è¦ç›®çš„æ˜¯é¿å…æƒé‡è¿‡å¤§ï¼Œæ‹Ÿåˆçš„æ›²çº¿è¿‡äºå¼¯æ›²ï¼ˆå› ä¸ºæ±‚å¯¼ä¹‹åï¼Œæ–œç‡å’Œç³»æ•°æ˜¯æ­£ç›¸å…³çš„ï¼‰ã€‚è¿™é‡Œçš„å“²å­¦æ€æƒ³å°±æ˜¯åœ¨æ‹Ÿåˆç»“æœèƒ½å¤Ÿæ¥å—çš„æƒ…å†µä¸‹ï¼Œæ›²çº¿è¶Šå¹³æ»‘ï¼Œå®¹é”™èƒ½åŠ›è¶Šé«˜ï¼Œæ ·æœ¬è¶Šèƒ½å¤Ÿä»£è¡¨æ€»ä½“ã€‚</p>
<p>è¿™é‡Œå°±ç›´æ¥æˆªå›¾ä¸¾ä¾‹å­äº†ï¼š</p>
<ul>
<li><p>æ­£åˆ™åŒ–çº¿æ€§å›å½’<br><img src="/2018/02/16/MLLogisticRegression/wuenda_5.png" alt=""></p>
</li>
<li><p>æ­£åˆ™åŒ–é€»è¾‘å›å½’</p>
</li>
</ul>
<p><img src="/2018/02/16/MLLogisticRegression/wuenda_6.png" alt=""><br><img src="/2018/02/16/MLLogisticRegression/wuenda_7.png" alt=""></p>
<h2 id="4-æ€»ç»“"><a href="#4-æ€»ç»“" class="headerlink" title="4 æ€»ç»“"></a>4 æ€»ç»“</h2><p>ç»è¿‡ä¸€äº›ç»†èŠ‚çš„é˜…è¯»ï¼Œå¯¹æ•´ä¸ªè¿‡ç¨‹çš„äº†è§£åˆåŠ æ·±äº†ä¸å°‘ã€‚åŠ¨æ‰‹å®è·µæ‰æ˜¯æœ€å¥½çš„æ–¹å¼ï¼Œä¹‹å‰ä»¥ä¸ºè‡ªå·±å…¬å¼çœ‹æ‡‚äº†å°±è¡Œäº†ï¼Œç„¶åè¿™æ¬¡å†™ä»£ç æ˜¯æŠŠä¸€ä¸ªå˜é‡å†™åœ¨äº†æ‹¬å·é‡Œé¢ï¼Œæ­»æ´»æ‹Ÿåˆä¸å‡ºæ•ˆæœã€‚ç„¶åèŠ±äº†å‡ ä¸ªå°æ—¶ä¹‹åå†³å¿ƒè‡ªå·±å†æ¨ä¸€éå…¬å¼å¹¶ä¸”é‡æ–°æ•²ä¸€ä¸‹å…¬å¼ä»£ç ï¼ˆå› ä¸ºæ‰“å°æ•°æ®å‘ç°å¾ˆè¯¡å¼‚ï¼‰ï¼Œåé¢å°±ä¸€éè¿‡äº†ã€‚æ‰€ä»¥å¦‚æœä½ ä¹Ÿæ˜¯åˆšåˆšå¼€å§‹å­¦ä¹ ï¼Œå“ªæ€•ç…§ç€æ•²ä¸€éï¼Œä¹‹åä¹Ÿè¦è‡ªå·±å°†æ€è·¯æ•´ç†æˆæ–‡å­—/ä»£ç å½¢å¼ï¼Œæœ€å¥½æ˜¯èƒ½æ•´ç†æˆåšå®¢ï¼Œæ–¹ä¾¿ä»¥åè‡ªå·±å¤ä¹ ã€‚</p>
<p>è¿˜æ˜¯å¾ˆå–œæ¬¢é‚£å°±è¯ï¼š<code>èŠ±æ—¶é—´å¼„æ‡‚ç»†èŠ‚å°±æ˜¯èŠ‚çœæ—¶é—´</code></p>
<p>æœ€åï¼šHappy Year Of Dog ^_^ ! </p>
<h2 id="5-å‚è€ƒèµ„æ–™"><a href="#5-å‚è€ƒèµ„æ–™" class="headerlink" title="5 å‚è€ƒèµ„æ–™"></a>5 å‚è€ƒèµ„æ–™</h2><ul>
<li><a href="https://zhuanlan.zhihu.com/p/26614750" target="_blank" rel="external">@å¿†è‡»ï¼šä¸€æ–‡ææ‡‚æå¤§ä¼¼ç„¶ä¼°è®¡</a></li>
<li><a href="http://blog.csdn.net/ligang_csdn/article/details/53838743" target="_blank" rel="external">æœºå™¨å­¦ä¹ â€“Logisticå›å½’è®¡ç®—è¿‡ç¨‹çš„æ¨å¯¼</a></li>
<li><a href="http://blog.csdn.net/gamer_gyt/article/details/51236978" target="_blank" rel="external">ã€Šæœºå™¨å­¦ä¹ å®æˆ˜ã€‹Logisticå›å½’ç®—æ³•ï¼ˆ1ï¼‰</a></li>
<li><a href="http://blog.csdn.net/lookqlp/article/details/51161640" target="_blank" rel="external">é€»è¾‘å›å½’æ¢¯åº¦ä¸‹é™æ³•è¯¦è§£</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/28775274" target="_blank" rel="external">æ·±å…¥æœºå™¨å­¦ä¹ ç³»åˆ—3-é€»è¾‘å›å½’</a></li>
<li><a href="https://chenrudan.github.io/blog/2016/01/09/logisticregression.html" target="_blank" rel="external">ã€æœºå™¨å­¦ä¹ ç®—æ³•ç³»åˆ—ä¹‹äºŒã€‘æµ…æLogistic Regression</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;script type=&quot;text/javascript&quot; src=&quot;http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default&quot;&gt;&lt;/script&gt;

&lt;blockquote&gt;
&lt;p&gt;å†™åœ¨å‰é¢ï¼šæˆ‘å°†ä»ä¸€ä¸ªå…¥é—¨è€…çš„è§†è§’ï¼ˆæ°´å¹³ï¼‰å°†æœºå™¨å­¦ä¹ ä¸­çš„å¸¸ç”¨ç®—æ³•å¨“å¨“é“æ¥ã€‚è‡ªèº«æ°´å¹³ç¡®å®æœ‰é™ï¼Œå¦‚æœå…¶ä¸­æœ‰ä»€ä¹ˆé”™è¯¯çš„è¯å¸Œæœ›å¤§å®¶æŒ‡å‡ºï¼Œé¿å…è¯¯å¯¼å¤§å®¶ã€‚ç„¶åè¿™æ˜¯è¿™ä¸ªç³»åˆ—çš„ç¬¬äºŒç¯‡äº†ï¼Œå¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œå¦‚æœä½ æ²¡çœ‹è¿‡ç¬¬ä¸€ç¯‡ï¼Œæ¨èçœ‹çœ‹&lt;a href=&quot;http://fitzeng.org/2018/02/11/MLLinearRegression/&quot;&gt;æœºå™¨å­¦ä¹ åŸºæœ¬ç®—æ³•ä¹‹çº¿æ€§å›å½’&lt;/a&gt;ï¼Œé‡Œé¢æåŠåˆ°äº†å¾ˆå¤šåŸºç¡€çš„æ•°å­¦çŸ¥è¯†å’Œä¸€äº›çš„æœºå™¨å­¦ä¹ æ€ç»´ï¼Œå¯¹äºç†è§£è¿™ç¯‡æ–‡ç« å¾ˆæœ‰å¸®åŠ©ï¼Œå¾ˆå¤šæœºå™¨å­¦ä¹ æµç¨‹åŒ–çš„ä¸œè¥¿è¿™é‡Œå°±ä¸åœ¨å…·ä½“ä»‹ç»ä¸ºä»€ä¹ˆè¿™æ ·åšäº†ï¼Œè€Œæ˜¯ç›´æ¥è§£é‡Šä¸ºä»€ä¹ˆåœ¨é€»è¾‘å›å½’ä¸­éœ€è¦ä½¿ç”¨è¿™æ ·çš„æ–¹å¼æ¥å®ç°ï¼Œæ›´åŠ èšç„¦äºé€»è¾‘å›å½’å®ç°æœ¬èº«ï¼Œè€Œéæœºå™¨å­¦ä¹ çš„æµç¨‹ç†è§£ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/mk43/machine-learning/tree/master/algorithm/logistic-regression&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å®éªŒä»£ç &lt;/a&gt;-&lt;a href=&quot;https://github.com/mk43/machine-learning/tree/master/reference&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å‚è€ƒä¹¦ç±&lt;/a&gt;-[å‚è€ƒåšå®¢è¯¦è§æœ€å]&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="Math" scheme="http://fitzeng.org/tags/Math/"/>
    
      <category term="MachineLearning" scheme="http://fitzeng.org/tags/MachineLearning/"/>
    
      <category term="Python" scheme="http://fitzeng.org/tags/Python/"/>
    
      <category term="NumPy" scheme="http://fitzeng.org/tags/NumPy/"/>
    
      <category term="Matplotlib" scheme="http://fitzeng.org/tags/Matplotlib/"/>
    
      <category term="LogisticRegression" scheme="http://fitzeng.org/tags/LogisticRegression/"/>
    
  </entry>
  
  <entry>
    <title>leetcode ç®—æ³•é›†é”¦ï¼ˆäºŒï¼‰</title>
    <link href="http://fitzeng.org/2018/02/14/AlgoAndMath2/"/>
    <id>http://fitzeng.org/2018/02/14/AlgoAndMath2/</id>
    <published>2018-02-14T03:27:00.000Z</published>
    <updated>2018-02-15T03:02:44.999Z</updated>
    
    <content type="html"><![CDATA[<h2 id="leetcode-ç®—æ³•é›†é”¦ï¼ˆäºŒï¼‰"><a href="#leetcode-ç®—æ³•é›†é”¦ï¼ˆäºŒï¼‰" class="headerlink" title="leetcode ç®—æ³•é›†é”¦ï¼ˆäºŒï¼‰"></a><a href="https://www.nowcoder.com/ta/leetcode" target="_blank" rel="external">leetcode ç®—æ³•é›†é”¦ï¼ˆäºŒï¼‰</a></h2><blockquote>
<p>ä¸»è¦æ˜¯ç‰›å®¢ç½‘ä¸Š leetcode çš„ç®—æ³•é¢˜å®è·µ. åœ¨ Blog åŒ…å«è‡ªå·±çš„è§£æ³•å’Œå¯¹åˆ«äººä¼˜ç§€è§£æ³•çš„åˆ†æ.</p>
</blockquote>
<a id="more"></a>
<table>
<thead>
<tr>
<th style="text-align:center">åºå·</th>
<th style="text-align:center">è€ƒç‚¹</th>
<th style="text-align:center">é¢˜ç›®</th>
<th style="text-align:center">C/C++</th>
<th style="text-align:center">Java     </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">  11</td>
<td style="text-align:center">åŠ¨æ€è§„åˆ’</td>
<td style="text-align:center">word-break-ii</td>
<td style="text-align:center">NULL</td>
<td style="text-align:center"><a href="#jump_11">é¢˜è§£</a>  </td>
</tr>
<tr>
<td style="text-align:center">  12</td>
<td style="text-align:center">åŠ¨æ€è§„åˆ’</td>
<td style="text-align:center">word-break</td>
<td style="text-align:center">NULL</td>
<td style="text-align:center"><a href="#jump_12">é¢˜è§£</a> </td>
</tr>
</tbody>
</table>
<h3 id="12-word-break"><a href="#12-word-break" class="headerlink" title="12 : word-break"></a><span id="jump_12"><a href="https://www.nowcoder.com/practice/5f3b7bf611764c8ba7868f3ed40d6b2c" target="_blank" rel="external">12 : word-break</a></span></h3><h4 id="æˆ‘çš„è§£æ³•"><a href="#æˆ‘çš„è§£æ³•" class="headerlink" title="æˆ‘çš„è§£æ³•"></a>æˆ‘çš„è§£æ³•</h4><p>å‚è€ƒä¸Šä¸€é¢˜ï¼Œä¸è¿‡ä¸ç”¨è®°å½•ç»“æœï¼Œç”¨ä¸ªæ ‡è®°å°±å¯ä»¥äº†ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.ArrayList;</div><div class="line"><span class="keyword">import</span> java.util.Set;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">wordBreak</span><span class="params">(String s, Set&lt;String&gt; dict)</span> </span>&#123;</div><div class="line">        ArrayList&lt;String&gt; result = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">        <span class="keyword">boolean</span> flag = <span class="keyword">false</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = s.length() - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</div><div class="line">            String word = s.substring(i, s.length());</div><div class="line">            <span class="keyword">if</span> (dict.contains(word)) &#123;</div><div class="line">                flag = wordBreak(s.substring(<span class="number">0</span>, i), dict);</div><div class="line">                <span class="keyword">if</span> (<span class="keyword">true</span> == flag || <span class="number">0</span> == i) &#123;</div><div class="line">                    <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> flag;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="å…¶ä»–æ€è·¯"><a href="#å…¶ä»–æ€è·¯" class="headerlink" title="å…¶ä»–æ€è·¯"></a>å…¶ä»–æ€è·¯</h4><p>ç”¨åŠ¨æ€è§„åˆ’ï¼Œdp[i]è¡¨ç¤ºå­—ç¬¦ä¸²s[0~i]æ˜¯å¦å¯åˆ†çš„boolå€¼ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> len = s.length();</div><div class="line"><span class="function">vector&lt;bool&gt; <span class="title">dp</span><span class="params">(len+<span class="number">1</span>,<span class="keyword">false</span>)</span></span>;</div><div class="line">dp[<span class="number">0</span>]=<span class="keyword">true</span>;</div><div class="line"><span class="keyword">for</span>(<span class="keyword">int</span> pos=<span class="number">0</span>;pos&lt;len;++pos)</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=pos;dp[pos] &amp;&amp; i&lt;len;++i)</div><div class="line">        <span class="keyword">if</span> (dict.find(s.substr(pos,i-pos+<span class="number">1</span>))!=dict.end())</div><div class="line">            dp[i+<span class="number">1</span>]=<span class="keyword">true</span>;</div><div class="line"><span class="keyword">return</span> dp[len];</div></pre></td></tr></table></figure>
<h3 id="11-word-break-ii"><a href="#11-word-break-ii" class="headerlink" title="11 : word-break-ii"></a><span id="jump_11"><a href="https://www.nowcoder.com/practice/bd73f6b52fdc421d91b14f9c909f9104" target="_blank" rel="external">11 : word-break-ii</a></span></h3><h4 id="æˆ‘çš„è§£æ³•-1"><a href="#æˆ‘çš„è§£æ³•-1" class="headerlink" title="æˆ‘çš„è§£æ³•"></a>æˆ‘çš„è§£æ³•</h4><p>åˆ©ç”¨é€’å½’å’ŒåŠ¨æ€è§„åˆ’çš„æ€æƒ³ï¼Œæ¯æ¬¡æˆªå–æœ€åé¢çš„ä¸€ä¸ªç„¶åæŠŠå‰©ä¸‹çš„é€’å½’æˆªå–ï¼Œæ¥ä¸‹æ¥ç»§ç»­å¾ªç¯è®¡ç®—ä¸æˆªå–è¯¥å•è¯ä¹‹åçš„æƒ…å†µã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.ArrayList;</div><div class="line"><span class="keyword">import</span> java.util.Set;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ArrayList&lt;String&gt; <span class="title">wordBreak</span><span class="params">(String s, Set&lt;String&gt; dict)</span> </span>&#123;</div><div class="line">        ArrayList&lt;String&gt; result = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">        ArrayList&lt;String&gt; temp = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = s.length() - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</div><div class="line">            String word = s.substring(i, s.length());</div><div class="line">            <span class="keyword">if</span> (dict.contains(word)) &#123;</div><div class="line">                temp = wordBreak(s.substring(<span class="number">0</span>, i), dict);</div><div class="line">                <span class="keyword">if</span> (<span class="number">0</span> == temp.size() &amp;&amp; i == <span class="number">0</span>) &#123;</div><div class="line">                    result.add(word);</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    <span class="keyword">for</span> (String str : temp) &#123;</div><div class="line">                        result.add(str + <span class="string">" "</span> + word);</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> result;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="å…¶ä»–æ€è·¯-1"><a href="#å…¶ä»–æ€è·¯-1" class="headerlink" title="å…¶ä»–æ€è·¯"></a>å…¶ä»–æ€è·¯</h4><p>å¾ˆåŸºæœ¬çš„åŠ¨æ€è§„åˆ’æ€è·¯ï¼Œå€¼å¾—å­¦ä¹ ã€‚DP[i][j] è¡¨ç¤º S ä»ç¬¬ i ä¸ªå­—æ¯åˆ°ç¬¬ j ä¸ªå­—æ¯çš„å­—ç¬¦ä¸²ï¼Œå¦‚æœåœ¨å­—å…¸ä¸­ï¼Œå°±æ ‡è®°ä¸º 1ï¼Œç›´åˆ°æ•´ä¸ªéå†å®Œæˆã€‚<br>ç„¶åä» i = 0 å¼€å§‹æ‰¾å¯»ä¸º 1 çš„ä¸‹æ ‡ j ä»£è¡¨æˆªå–å‰é¢ä¸€ä¸ªå­—æ¯æˆåŠŸï¼Œç„¶åä» i = j + 1 å¼€å§‹æ‰¾ä¸‹ä¸€ä¸ªç­‰äº 1 çš„ j ç›´åˆ° j = S.length() å°±è¯´æ˜æˆªå–æˆåŠŸã€‚</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div></pre></td><td class="code"><pre><div class="line">æ€è·¯CSDN Allan:</div><div class="line">=================================æ€è·¯Allan========================================</div><div class="line">s ="catsand",</div><div class="line">dict =["cat", "cats", "and", "sand", "dog"].</div><div class="line"> </div><div class="line">åŠ¨æ€è§„åˆ’æ ¹æœ¬æ€æƒ³æ˜¯è®°å½•çŠ¶æ€å€¼:</div><div class="line">DP[i][j]:</div><div class="line">           j    0       1       2       3       4       5       6  </div><div class="line">        i </div><div class="line">        0       c       ca      cat(1)  cats(1) catsa   catsan  catsand</div><div class="line">        1               a       at      ats     atsa    atsan   atsand       </div><div class="line">        2                       t       ts      tsa     tsan    tsand</div><div class="line">        3                               s       sa      san     sand(1)</div><div class="line">        4                                       a       an      and(1)</div><div class="line">        5                                               n       nd</div><div class="line">        6                                                       d</div><div class="line"> </div><div class="line">DP[i][j]é‡Œ:</div><div class="line">0       c       ca      cat(1)  cats(1) catsa   catsan  catsand</div><div class="line">1       a       at      ats     atsa    atsan   atsand</div><div class="line">2       t       ts      tsa     tsan    tsand</div><div class="line">3       s       sa      san     sand(1)</div><div class="line">4       a       an      and(1)</div><div class="line">5       n       nd</div><div class="line">6       d</div><div class="line">æ€è·¯:</div><div class="line">DP[i][j]å­˜æ”¾ç€å­—ç¬¦ä¸²sçš„æ‰€æœ‰å­å­—ç¬¦ä¸²åœ¨dictä¸­çš„çŠ¶æ€å€¼ã€‚</div><div class="line">éå†é¡ºåºæ˜¯å…ˆæœç´¢iåˆ°ä¸²å°¾çš„å­ä¸²ï¼Œè‹¥å­ä¸²åœ¨dicté‡Œï¼Œå†æœç´¢ä¸²å¤´åˆ°içš„å­ä¸²ã€‚</div><div class="line">        c a t s a n d</div><div class="line">        j     i</div><div class="line">æ¯”å¦‚ï¼Œdp[3][3]=1è¡¨æ˜"sand"åœ¨dicté‡Œï¼Œå†æœç´¢cat......</div><div class="line">å†æœç´¢é¡ºåºä¸ºcat at t......</div><div class="line"> </div><div class="line"> </div><div class="line">output(6,s):</div><div class="line">i=6     k:0 1 2 3 4 5 6</div><div class="line">dp[k][i-k]:åç§»ä¸ºkï¼Œæˆªæ–­å­—ç¬¦ä¸²é•¿åº¦i-k+1</div><div class="line">æ²¿ç€æ¬¡å¯¹è§’çº¿éå†,ç›¸å½“äºä»å¤´éƒ¨æ¯éš”ä¸€ä¸ªå­—ç¬¦æˆªæ–­!!!</div><div class="line">dp[0][6]:åç§»ä¸º0ï¼Œæˆªæ–­å­—ç¬¦ä¸²é•¿åº¦7      0</div><div class="line">dp[1][5]:åç§»ä¸º1ï¼Œæˆªæ–­å­—ç¬¦ä¸²é•¿åº¦6      0</div><div class="line">dp[2][4]:åç§»ä¸º2ï¼Œæˆªæ–­å­—ç¬¦ä¸²é•¿åº¦5      0</div><div class="line">dp[3][3]:åç§»ä¸º3ï¼Œæˆªæ–­å­—ç¬¦ä¸²é•¿åº¦4      1   --&gt;output(2,s)</div><div class="line">dp[4][2]:åç§»ä¸º4ï¼Œæˆªæ–­å­—ç¬¦ä¸²é•¿åº¦3      1   --&gt;output(3,s)</div><div class="line">dp[5][1]:åç§»ä¸º5ï¼Œæˆªæ–­å­—ç¬¦ä¸²é•¿åº¦2      0</div><div class="line">dp[6][0]:åç§»ä¸º6ï¼Œæˆªæ–­å­—ç¬¦ä¸²é•¿åº¦1      0</div><div class="line"> </div><div class="line">output(2,s):</div><div class="line">i=2     k:0 1 2</div><div class="line">dp[k][i-k]:åç§»ä¸ºkï¼Œæˆªæ–­å­—ç¬¦ä¸²é•¿åº¦i-k+1</div><div class="line">æ²¿ç€æ¬¡å¯¹è§’çº¿éå†,ç›¸å½“äºä»å¤´éƒ¨æ¯éš”ä¸€ä¸ªå­—ç¬¦æˆªæ–­!!!</div><div class="line">dp[0][2]:åç§»ä¸º0ï¼Œæˆªæ–­å­—ç¬¦ä¸²é•¿åº¦3      1   --&gt;output(-1,s)</div><div class="line">dp[1][1]:åç§»ä¸º1ï¼Œæˆªæ–­å­—ç¬¦ä¸²é•¿åº¦2      0</div><div class="line">dp[2][0]:åç§»ä¸º2ï¼Œæˆªæ–­å­—ç¬¦ä¸²é•¿åº¦1      0</div><div class="line"> </div><div class="line">output(-1,s):</div><div class="line">......</div><div class="line"> </div><div class="line"> </div><div class="line">mystring.push_back(s.substr(k,i-k+1));</div><div class="line">output(k-1,s);</div><div class="line">s.substr(k,i-k+1)==&gt;é€’å½’output(k-1,s)!!!</div><div class="line">åç§»ä¸ºk,æˆªæ–­é•¿åº¦i-(k-1);                           ------</div><div class="line">==&gt;é€’å½’ä¸ºk-1                                              |---&gt;å¤„ç†å­—ç¬¦ä¸²é•¿åº¦i </div><div class="line">ä»åç§»ä¸º0ï¼Œæˆªæ–­é•¿åº¦kå¼€å§‹ä»¥æ¬¡å¯¹è§’çº¿æ–¹å‘éå†!!!       ------</div><div class="line">================================================================================</div><div class="line"> </div><div class="line">*/</div><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;string&gt;</div><div class="line">#include &lt;vector&gt;</div><div class="line">#include &lt;stack&gt;</div><div class="line">#include &lt;list&gt;</div><div class="line">#include &lt;set&gt;</div><div class="line">#include &lt;unordered_set&gt;</div><div class="line">#include &lt;map&gt;</div><div class="line">#include &lt;queue&gt;</div><div class="line">#include &lt;algorithm&gt;</div><div class="line">#include &lt;numeric&gt;        //accmulate</div><div class="line">#include &lt;functional&gt;   //greater&lt;int&gt;()!!!</div><div class="line">using namespace std;</div><div class="line"> </div><div class="line">class Solution &#123;</div><div class="line">public:</div><div class="line">    vector&lt;string&gt; wordBreak(string s, unordered_set&lt;string&gt; &amp;dict) &#123;</div><div class="line">        dp = new vector&lt;bool&gt;[s.size()];</div><div class="line"> </div><div class="line">        for (int i = 0; i &lt; s.size(); i++)</div><div class="line">        &#123;</div><div class="line">            for (int j = i; j &lt; s.size(); j++)</div><div class="line">            &#123;</div><div class="line">                dp[i].push_back(match(s.substr(i, j - i + 1), dict));</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        /*</div><div class="line">        for (int i = 0; i &lt; s.size(); i++)</div><div class="line">        &#123;</div><div class="line">            for (int j = 0; j &lt; dp[i].size(); j++)</div><div class="line">            &#123;</div><div class="line">                cout &lt;&lt; dp[i][j] &lt;&lt; " ";</div><div class="line">            &#125;</div><div class="line">            cout &lt;&lt; endl;</div><div class="line">        &#125;</div><div class="line">        */</div><div class="line">        output(s.size() - 1, s);</div><div class="line">         </div><div class="line">        return result;</div><div class="line">    &#125;</div><div class="line">    bool match(string s, unordered_set&lt;string&gt; &amp;dict)</div><div class="line">    &#123;</div><div class="line">        if (dict.find(s) != dict.end()) return true;</div><div class="line">        else return false;</div><div class="line">    &#125;</div><div class="line">    void output(int i, string s)</div><div class="line">    &#123;</div><div class="line">        if (i == -1)    //é€’å½’é€€å‡ºæ¡ä»¶</div><div class="line">        &#123;</div><div class="line">            string str;</div><div class="line">            for (int j = mystring.size() - 1; j &gt;= 0; j--)</div><div class="line">            &#123;</div><div class="line">                str += mystring[j];</div><div class="line">                if (j != 0) str += " ";</div><div class="line">            &#125;</div><div class="line">            result.push_back(str);</div><div class="line">        &#125;</div><div class="line">        else</div><div class="line">        &#123;</div><div class="line">            for (int k = 0; k &lt;= i; k++) //error!!!  for (int k = 0; k &lt; i; k++)</div><div class="line">            &#123;</div><div class="line">                if (dp[k][i - k])       //dp[k][i-k]:åç§»ä¸ºkï¼Œæˆªæ–­é•¿åº¦i-k+1</div><div class="line">                &#123;</div><div class="line">                    mystring.push_back(s.substr(k, i - k + 1));</div><div class="line">                    output(k - 1, s);   //é€’å½’:dp[0][i]:åç§»ä¸º0ï¼Œæˆªæ–­é•¿åº¦i+1      i=k-1,åˆ™æˆªæ–­é•¿åº¦ä¸ºk,ä¸é€’å½’å‰åç§»käº’è¡¥</div><div class="line">                    mystring.pop_back();</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    vector&lt;string&gt; result;</div><div class="line">    vector&lt;string&gt; mystring;</div><div class="line">    vector&lt;bool&gt; *dp;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;leetcode-ç®—æ³•é›†é”¦ï¼ˆäºŒï¼‰&quot;&gt;&lt;a href=&quot;#leetcode-ç®—æ³•é›†é”¦ï¼ˆäºŒï¼‰&quot; class=&quot;headerlink&quot; title=&quot;leetcode ç®—æ³•é›†é”¦ï¼ˆäºŒï¼‰&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://www.nowcoder.com/ta/leetcode&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;leetcode ç®—æ³•é›†é”¦ï¼ˆäºŒï¼‰&lt;/a&gt;&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;ä¸»è¦æ˜¯ç‰›å®¢ç½‘ä¸Š leetcode çš„ç®—æ³•é¢˜å®è·µ. åœ¨ Blog åŒ…å«è‡ªå·±çš„è§£æ³•å’Œå¯¹åˆ«äººä¼˜ç§€è§£æ³•çš„åˆ†æ.&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="Algo" scheme="http://fitzeng.org/tags/Algo/"/>
    
      <category term="Math" scheme="http://fitzeng.org/tags/Math/"/>
    
      <category term="Java" scheme="http://fitzeng.org/tags/Java/"/>
    
      <category term="C/C++" scheme="http://fitzeng.org/tags/C-C/"/>
    
  </entry>
  
  <entry>
    <title>æœºå™¨å­¦ä¹ åŸºæœ¬ç®—æ³•ä¹‹çº¿æ€§å›å½’</title>
    <link href="http://fitzeng.org/2018/02/11/MLLinearRegression/"/>
    <id>http://fitzeng.org/2018/02/11/MLLinearRegression/</id>
    <published>2018-02-11T03:27:00.000Z</published>
    <updated>2018-02-12T08:50:48.613Z</updated>
    
    <content type="html"><![CDATA[<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script>

<blockquote>
<p>å†™åœ¨å‰é¢ï¼šæˆ‘å°†ä»ä¸€ä¸ªå…¥é—¨è€…çš„è§†è§’ï¼ˆæ°´å¹³ï¼‰å°†æœºå™¨å­¦ä¹ ä¸­çš„å¸¸ç”¨ç®—æ³•å¨“å¨“é“æ¥ã€‚è‡ªèº«æ°´å¹³ç¡®å®æœ‰é™ï¼Œå¦‚æœå…¶ä¸­æœ‰ä»€ä¹ˆé”™è¯¯çš„è¯å¸Œæœ›å¤§å®¶æŒ‡å‡ºï¼Œé¿å…è¯¯å¯¼å¤§å®¶ã€‚å¯¹äºå¼€ç¯‡æœ‰æ¯”è¾ƒå¤šçš„ä¸œè¥¿æƒ³è¯´ï¼Œæ‰€ä»¥å¦å–ä¸€ç« ä»‹ç»ä¸€ä¸‹æˆ‘ä¸ªäººå¯¹æœºå™¨å­¦ä¹ è¿™ä¸ªé¢†åŸŸçš„ç†è§£å’Œä¸€äº›åŸºæœ¬å¸¸è¯†ä»‹ç»ã€‚å¦‚æœä½ æ—¶é—´æ¯”è¾ƒå……è£•ï¼Œå¯ä»¥çœ‹çœ‹æˆ‘<code>å‰è¨€</code>çš„æ–‡å­—ä»‹ç»ã€‚</p>
</blockquote>
<a id="more"></a>
<h2 id="0-å‰è¨€"><a href="#0-å‰è¨€" class="headerlink" title="0 å‰è¨€"></a>0 å‰è¨€</h2><p>ä»‹ç»ä¸€ä¸‹ä¸ªäººæƒ³æ³•</p>
<h3 id="0-1-å…³äºæœºå™¨å­¦ä¹ "><a href="#0-1-å…³äºæœºå™¨å­¦ä¹ " class="headerlink" title="0.1 å…³äºæœºå™¨å­¦ä¹ "></a>0.1 å…³äºæœºå™¨å­¦ä¹ </h3><p>æ¯«æ— ç–‘é—®ï¼Œæœºå™¨å­¦ä¹ ç°åœ¨è¶Šæ¥è¶Šçƒ­é—¨äº†ï¼Œéœ€æ±‚éšç€ä»¥åäººå·¥æ™ºèƒ½å¤§çˆ†å‘ä¼šæŒç»­å¢é•¿ã€‚ä¸ç®¡ä½ æ˜¯ä¸æ˜¯è¿™ä¸ªç¼–ç¨‹é¢†åŸŸçš„äººï¼Œéƒ½æœ‰å¿…è¦äº†è§£ä¸€ä¸‹æœºå™¨å­¦ä¹ æ˜¯æ€ä¹ˆå›äº‹ï¼Œè‡³å°‘æœ‰ä¸ªç†æ€§çš„è®¤è¯†ï¼Œè€Œä¸æ˜¯è§‰å¾—å¾ˆç¥ç§˜ã€‚ä½†æ˜¯æ¶‰åŠåˆ°ç®—æ³•æ•°å­¦çŸ¥è¯†æ˜¯å¯ä»¥å¿½ç•¥çš„ï¼Œåªè¦çŸ¥é“ï¼Œæˆ‘ä»¬é€šè¿‡æŸä¸ªæ•°å­¦æ‰‹æ®µå¯ä»¥è¾¾åˆ°æŸä¸ªç›®çš„ã€‚æ¯”å¦‚è¿™é‡Œè¦ä»‹ç»çš„çº¿æ€§å›å½’åœ¨æ›´æ–°æƒé‡æ—¶æ˜¯ä¾æ®æ¢¯åº¦ä¸‹é™ç®—æ³•çš„ï¼Œä½ å¯ä»¥ä¸å¿…çŸ¥é“ä»€ä¹ˆæ˜¯æ¢¯åº¦ä¸‹é™ï¼ŒçŸ¥é“çŸ¥é“æ•°å­¦ä¸Šå¯¹äºæ±‚è§£æœ€ä¼˜åŒ–æ˜¯æœ‰è‡ªå·±çš„æ‰‹æ®µçš„ï¼Œå½“ç„¶å¦‚æœèƒ½çŸ¥é“æ›´å¥½ã€‚ç”±äºæœºå™¨å­¦ä¹ çš„æ€§è´¨ï¼Œé€ŸæˆåŸºæœ¬ä¸å¤ªå¯èƒ½ï¼Œè€Œä¸”ç°åœ¨å¤„äºé«˜é€Ÿå‘å±•çš„é˜¶æ®µï¼Œå¿…é¡»ä¿æŒå­¦ä¹ çš„çƒ­æƒ…æ‰èƒ½å­¦å¾—ä¸‹å»ã€‚å¦å¤–ï¼Œè¿™ä¸ªå‰æœŸçš„å­¦ä¹ æˆæœ¬æ˜¯æ¯”è¾ƒé«˜çš„ï¼Œåœ¨è‡ªå·±å†™ä»£ç ä¹‹å‰ï¼Œè¦æƒ³å¿ƒé‡Œæœ‰ç‚¹åº•ï¼Œè‡³å°‘è¦å¯¹ <code>å¾®ç§¯åˆ†</code>ã€<code>çº¿æ€§ä»£æ•°</code> å’Œ <code>æ¦‚ç‡è®º</code> çš„åº”ç”¨è¦æœ‰ç‚¹è‡ªå·±çš„ç†è§£çš„ã€‚æ‰€ä»¥è¿™ä¹Ÿæ˜¯ä¸€å¤§ä¼˜åŠ¿ï¼Œä¸å¤ªå®¹æ˜“è¢«å–ä»£ã€‚</p>
<h3 id="0-2-å…³äºçº¿æ€§å›å½’"><a href="#0-2-å…³äºçº¿æ€§å›å½’" class="headerlink" title="0.2 å…³äºçº¿æ€§å›å½’"></a>0.2 å…³äºçº¿æ€§å›å½’</h3><p>å¯¹äºç†æ€§äº†è§£æœºå™¨å­¦ä¹ çš„æ·å¾„å°±æ˜¯å¼„æ‡‚çº¿æ€§å›å½’ç®—æ³•çš„æ•´ä¸ªæµç¨‹ï¼Œå¦‚æœä½ é€šè¿‡è¿™ç¯‡æ–‡ç« çœŸçš„ç†è§£äº†çº¿æ€§å›å½’ï¼Œé‚£ä¹ˆä½ åº”è¯¥å°±ç†è§£è¿™å¥è¯äº†ã€‚å½“ç„¶ï¼Œå¯¹äºå¤§å¤šæ•°é˜…è¯»è€…ç¯‡æ–‡ç« çš„äººæ¥è¯´ï¼Œå¯èƒ½æ—©å°±å¯¹çº¿æ€§å›å½’æœ‰äº†è‡ªå·±çš„ç†è§£ã€‚ä½†æ˜¯æˆ‘è¿™è¦æçš„æ˜¯ï¼Œå¦‚æœä½ æ²¡æ‰“ç®—å…¥é—¨æœºå™¨å­¦ä¹ ï¼Œé˜…è¯»ä¸€ä¸‹çº¿æ€§å›å½’ä¹Ÿæ˜¯å¯¹è‡ªå·±çŸ¥è¯†é¢è¿›è¡Œæ‹“å±•çš„ä¸€ä¸ªå¥½æ–¹å¼ï¼Œå› ä¸ºåŸºæœ¬å¤§å¤šæ•°äººéƒ½æ˜¯ä»è¿™é‡Œå¼€å§‹çš„ã€‚</p>
<h3 id="0-3-å…³äºåŸºç¡€"><a href="#0-3-å…³äºåŸºç¡€" class="headerlink" title="0.3 å…³äºåŸºç¡€"></a>0.3 å…³äºåŸºç¡€</h3><p>é¦–å…ˆï¼Œä½ éœ€è¦ä¸€ç‚¹ \( Python \) åŸºç¡€ã€‚å¦‚æœæ²¡æœ‰ä¹Ÿç®€å•ï¼Œè‡ªå­¦ä¸€ä¸‹å°±è¡Œã€‚ç„¶åå°±æ˜¯è¦å­¦ä¹ ä¸€ä¸‹ä»¥ä¸‹å·¥å…·çš„ä½¿ç”¨ï¼š<code>NumPy</code>ï¼Œ<code>Matplotlib</code>ï¼Œ<code>sklearn</code>ï¼Œ<code>TensorFlow</code>ã€‚å…¶ä¸­éƒ¨åˆ†å¯ä»¥å‚è€ƒæˆ‘ä»¥å‰çš„æ–‡ç« ã€‚</p>
<ul>
<li><a href="http://fitzeng.org/2018/02/03/TensorFlowIntroduction/">ä» TensorFlow å…¥é—¨æœºå™¨å­¦ä¹ </a></li>
<li><a href="http://fitzeng.org/2018/02/04/NumPyOfficialQuickstartTutorial/">NumPy å®˜æ–¹å¿«é€Ÿå…¥é—¨æ•™ç¨‹(è¯‘)</a></li>
<li><a href="http://fitzeng.org/2018/02/07/MatplotlibDraw/">Matplotlib åŸºæœ¬æ“ä½œ</a></li>
<li><a href="http://fitzeng.org/2018/02/08/MatplotlibGenerateGif/">Matplotlib ä¿å­˜ GIF åŠ¨å›¾</a></li>
</ul>
<p>æœ‰äº†è¿™äº›ä½ è¿˜éœ€è¦ä¸€äº›æ•°å­¦åŸºç¡€ã€‚æ•°å­¦çš„è¯æˆ‘è§‰å¾—ä¸è¦æ±‚å…¨å­¦ä¼šï¼Œä¹Ÿä¸å¤ªç°å®ï¼Œå¯ä»¥åœ¨å†™ä»£ç è¿‡ç¨‹ä¸­ç¢°åˆ°ä»€ä¹ˆç®—æ³•å†å»å¯»æ±‚æ•°å­¦è¯æ˜ï¼Œå‰ææ˜¯ä¹‹å‰çš„çŸ¥è¯†é‡æœ€å¥½èƒ½è¾¾åˆ°çœ‹æ‡‚å¤§å¤šæ•°æ•°å­¦çŸ¥è¯†çš„æ°´å¹³ã€‚è¿™é‡Œæˆ‘è§‰å¾—çŸ¥ä¹ä¸Šæœ‰äº›æ•°å­¦ç§‘æ™®å…¶å®æŒºä¸é”™çš„ï¼Œæ¯•ç«Ÿä¸æ˜¯æ•°å­¦ç³»ï¼Œæ‰€ä»¥ç†è§£ä¸»è¦é€»è¾‘ä¹‹åæŒæœ‰ä¸€ç§æ‹¿æ¥ç”¨çš„æ€åº¦æˆ‘è§‰å¾—æ²¡é—®é¢˜ã€‚</p>
<ul>
<li><a href="http://fitzeng.org/2018/01/26/reProbabilityTheory/">æœºå™¨å­¦ä¹ ä¹‹é‡æ‹¾æ¦‚ç‡è®º</a></li>
</ul>
<h3 id="0-4-å…³äºå‚è€ƒ"><a href="#0-4-å…³äºå‚è€ƒ" class="headerlink" title="0.4 å…³äºå‚è€ƒ"></a>0.4 å…³äºå‚è€ƒ</h3><p>è¿™é‡Œå¾ˆæ„Ÿè°¢åƒå´æ©è¾¾ã€è«çƒ¦ç­‰è€å¸ˆçš„æ— ç§å¥‰çŒ®ï¼Œè¿˜æœ‰å¾ˆå¤šåœ¨ç½‘ä¸Šå†™åšå®¢åˆ†äº«çŸ¥è¯†çš„äººï¼Œè®©ç¼–ç¨‹è¿™ä¸ªè¡Œä¸šå½¢æˆä¸€ä¸ªè‰¯å¥½çš„å­¦ä¹ é£æ°”ã€‚è€Œä¸”ç½‘ä¸Šè¿˜æµä¼ å¾ˆå¤šä¼˜è´¨çš„å­¦ä¹ èµ„æºï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘å°†æˆ‘å­¦ä¹ è¿‡ç¨‹çš„å‚è€ƒèµ„æ–™æ•´ç†è¿›äº† <a href="https://github.com/mk43" target="_blank" rel="external">GitHub</a>ï¼Œæˆ‘æƒ³å¤§å®¶å¥‰çŒ®å‡ºæ¥å°±æ˜¯ä¸ºäº†åˆ«äººæ›´å¥½çš„å­¦ä¹ å§ï¼Œå¦‚æœæœ‰ä¾µæƒä¹‹ç±»çš„è¯ï¼Œæˆ‘ä¼šç«‹å³åˆ é™¤çš„ã€‚ç„¶åè¿™ä¸€ç³»åˆ—çš„æ–‡ç« ï¼Œæˆ‘ä¼šä¸»è¦ä»¥å´æ©è¾¾è€å¸ˆçš„è¯¾ç¨‹ä¸ºåŸºç¡€ï¼Œä»¥åˆå­¦è€…çš„è§†è§’è®°å½•å¹¶ä¸”å®è·µã€‚</p>
<ul>
<li><a href="https://github.com/mk43/machine-learning/tree/master/reference" target="_blank" rel="external">å­¦ä¹ å‚è€ƒä¹¦ç±</a></li>
</ul>
<h3 id="0-5-å…³äºæˆ‘"><a href="#0-5-å…³äºæˆ‘" class="headerlink" title="0.5 å…³äºæˆ‘"></a>0.5 å…³äºæˆ‘</h3><p>ä¸€ä¸ªå³å°†æ¯•ä¸šçš„çŸ¥è¯†æ°´å¹³æœ‰é™çš„æœ¬ç§‘ç”Ÿï¼Œæ‰€ä»¥æ–‡ç« è‚¯å®šæœ‰å¾ˆå¤šä¸è¶³ä¹‹å¤„ï¼Œæœ›å¤§å®¶æŒ‡æ­£ã€‚ç„¶åå®éªŒçš„ä»£ç åœ¨<a href="https://github.com/mk43/machine-learning/tree/master/algorithm/linear-regression" target="_blank" rel="external">è¿™é‡Œ</a>ã€‚</p>
<h2 id="1-èƒŒæ™¯"><a href="#1-èƒŒæ™¯" class="headerlink" title="1 èƒŒæ™¯"></a>1 èƒŒæ™¯</h2><p>æ•…äº‹å°±ä¸è®²äº†ï¼Œå¯ä»¥å‚è€ƒè§†è§†é¢‘ã€‚ä¸‹é¢æˆ‘è®²è®²è¿™ä¸ªæ˜¯è¦è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿç”Ÿæ´»ä¸­å¾€å¾€æœ‰å¾ˆå¤šç°è±¡ï¼Œè€Œæˆ‘ä»¬å¯ä»¥ä»ç°è±¡æ€»ç»“å‡ºæŸäº›ç»“è®ºï¼Œä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬çœ‹åˆ°äº†ä¸€ä¸ªä¹‹å‰ä»æ¥éƒ½æ²¡æœ‰çœ‹åˆ°è¿‡çš„ç°è±¡ï¼Œæˆ‘ä»¬å°±æ— æ³•ä¸‹ç»“è®ºäº†ã€‚ä½†ä½†æ˜¯ä¸€äº›æœ‰ç»éªŒçš„äººå¯ä»¥å‡­å€Ÿä¸°å¯Œçš„ç»éªŒè¿›è¡Œé¢„æµ‹ã€‚å°±æ¯”å¦‚ï¼Œä¸€ä¸ªå¤„äºæ‡µæ‡‚æœŸçš„å°å­©å­ï¼Œçœ‹è§ä¸€ç‰‡ä¹Œäº‘ä¸èƒ½æ¨æµ‹å‡ºä¼šä¸‹é›¨ï¼Œè€Œä¸€ä¸ªå¤§äººå°±ä¼šçŸ¥é“ï¼Œæé†’å°å­©å‡ºé—¨è¦å¸¦ä¼ã€‚ã€‚ã€‚å¥½å§ï¼Œè¿˜æ˜¯åœ¨è®²æ•…äº‹ï¼Œé‚£å°±ç»§ç»­å§ğŸ˜‚ğŸ˜‚ğŸ˜‚ã€‚è¿™ä¸ªä¾‹å­ä¸­çš„å¤§äººå°å­©çš„åŒºåˆ«åœ¨äºå¹´é¾„ä¸åŒï¼Œè§è¯†ä¸åŒï¼ŒçŸ¥è¯†æ°´å¹³è‡ªç„¶ä¸åŒï¼Œèƒ½åšå‡ºçš„åˆ¤æ–­ä¹Ÿè‡ªç„¶ä¸åŒã€‚æ‰€ä»¥è¦æƒ³è¾¾åˆ°å¯¹ç°è±¡è¿›è¡Œé¢„æµ‹ï¼Œé‚£ä¹ˆå°±å¿…é¡»è¿›è¡Œå­¦ä¹ ï¼Œç­‰å°å­©æ…¢æ…¢é•¿å¤§äº†ï¼Œçœ‹åˆ°èš‚èšæ¬å®¶å°±ä¼šå¸¦ä¼å‡ºé—¨äº†ã€‚</p>
<p>å¥½äº†ï¼Œæˆ‘ä»¬æ€»ç»“ä¸€ä¸‹ä¸Šé¢çš„æ•…äº‹ï¼šç°è±¡å¯ä»¥æ¯”å–»æˆæ•°æ®ï¼Œç»“è®ºé€ æˆçš„è¡Œä¸ºä¹Ÿæ˜¯æ•°æ®ï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯ï¼Œæ˜¯æœ‰ç°è±¡å¾—å‡ºçš„ç»“è®ºï¼Œæ‰€ä»¥å¯ä»¥å°†ç°è±¡çš„æ•°æ®çœ‹ä½œæ˜¯è¾“å…¥ï¼Œç»“è®ºçš„æ•°æ®çœ‹æˆæ˜¯è¾“å‡ºã€‚é‚£ä¹ˆæœºå™¨å­¦ä¹ å°±æ˜¯å°†è¾“å…¥æ•°æ®è¾“å…¥è¿›ä¸€ä¸ªæ¨¡å‹ï¼Œç„¶åå°†æ¨¡å‹çš„è¾“å‡ºç»“æœå’Œä¹‹å‰çš„â€œæ­£ç¡®â€ç»“è®ºä½œæ¯”å¯¹æ…¢æ…¢æ›´æ”¹æ¨¡å‹ï¼Œç›´åˆ°è¿™ä¸ªæ¨¡å‹å¯¹å‡ºå…¥æ•°æ®æœ‰è¾ƒå¥½çš„é¢„æµ‹ï¼Œé‚£ä¹ˆè¿™ä¸ªæ¨¡å‹å°±å¯ä»¥æ‹¿æ¥ç”¨äº†ã€‚æŠ½è±¡å‡ºæ¥çš„è¯å°±æ˜¯æ‰¾ä¸€ä¸ªè¾“å…¥\( X \) å’Œè¾“å‡º \( Y \)ä¹‹é—´çš„æ˜ å°„\( f \)ï¼Œä½¿å¾—å¯¹äºç»å¤§å¤šæ•° \( X \) éƒ½èƒ½é€šè¿‡æ˜ å°„ \( f(X) \rightarrow Y \) è¾ƒå¥½åœ°å¾—åˆ° \( Y \)ã€‚</p>
<p>æˆ¿ä»·çš„ä¾‹å­æˆ‘å°±ä¸ä¸¾äº†ï¼Œç›´æ¥çœ‹ä¸‹é¢çš„å›¾ï¼Œçœ‹çœ‹èƒ½ä¸èƒ½è§£å†³ \( X = 4,\ Y = ? \) </p>
<p><img src="/2018/02/11/MLLinearRegression/scattergraph.png" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"># coding: utf-8</div><div class="line"></div><div class="line">import numpy as np</div><div class="line">import matplotlib.pyplot as plt</div><div class="line"></div><div class="line">def draw():</div><div class="line">    X = np.linspace(0, 10, 50)</div><div class="line">    noise = np.random.normal(0, 0.5, X.shape)</div><div class="line">    Y = X * 0.5 + 3 + noise</div><div class="line"></div><div class="line">    plt.scatter(X, Y)</div><div class="line">    plt.savefig(&quot;scattergraph.png&quot;)</div><div class="line">    plt.show()</div><div class="line"></div><div class="line">if __name__ == &quot;__main__&quot;:</div><div class="line">    draw()</div></pre></td></tr></table></figure>
<p>å¥½äº†ï¼Œä½ å¯èƒ½ä¼šå‘ç°ï¼Œè¦æƒ³ç»™å‡º \( Y \) ä¾èµ–çš„æ˜¯ç›´è§‰ï¼Œæ‰€ä»¥æ¯ä¸€ä¸ªäººçš„ç­”æ¡ˆéƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œè€Œå¯¹äºæŸäº›æ ‡å‡†ç»Ÿä¸€çš„é¢†åŸŸï¼ˆæ¯”å¦‚å†›äº‹é¡¹ç›®ï¼‰ï¼Œè¿™ç§ä¾é ç›´è§‰åˆ¤æ–­çš„æƒ…å†µç»å¯¹ä¸å®¹è®¸å‘ç”Ÿã€‚æƒ³è±¡åœ¨ç°ä»£ä¿¡æ¯åŒ–æˆ˜åœºä¸Šé ç›´è§‰æ€ä¹ˆå¯èƒ½ä½œæˆ˜æˆåŠŸï¼Ÿ</p>
<p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ¨¡å‹ï¼Œä½ å¯ä»¥ç†è§£æˆä¸€ä¸ªé»‘ç›’ï¼ŒæŠŠ \( X \) å–‚è¿›å»ï¼ŒæŠŠ \( Y \) å–å‡ºæ¥ï¼Œè€Œä¸”æ— è®ºè°ï¼Œåªè¦é‚£ä¸ªé»‘ç›’æ˜¯åŒä¸€ä¸ªï¼Œé‚£ä¹ˆæ¯ä¸ªäººçš„è¾“å…¥ \( X \) ç›¸åŒçš„è¯ï¼Œè¾“å‡º \( Y \) å°±æ˜¯ç›¸åŒçš„ã€‚ é‚£ä¹ˆåœ¨è¿™é‡Œè¿™ä¸ªæ¨¡å‹å¤§æ¦‚æ˜¯ä»€ä¹ˆå½¢çŠ¶çš„å‘¢ï¼Ÿç›®å‰è¿™ä¸ªè¿˜æ˜¯æˆ‘ä»¬äººä¸ºå¹²é¢„è¿›è¡Œé€‰æ‹©çš„ã€‚ç›´è§‚æ¥è¯´ï¼Œå¯ä»¥è¿™ä¸ªåˆ†å¸ƒçœ‹æˆä¸€æ¡å¾ˆç²—çš„çº¿ï¼Œé‚£ä¹ˆæˆ‘ä»¬é€‰æ‹©çº¿æ€§æ¨¡å‹æ¥æ¨¡æ‹Ÿåˆ†å¸ƒã€‚é‚£ä¹ˆå¦‚ä½•ç¡®å®šè¿™ä¸ªçº¿æ€§æ¨¡å‹å‘¢ï¼Ÿè¿™é‡Œå°±æ¶‰åŠåˆ°ä»Šå¤©çš„ä¸»è§’ï¼š<a href="https://en.wikipedia.org/w/index.php?title=Linear_regression" target="_blank" rel="external">çº¿æ€§å›å½’</a></p>
<h2 id="2-ä¸€å…ƒçº¿æ€§å›å½’"><a href="#2-ä¸€å…ƒçº¿æ€§å›å½’" class="headerlink" title="2 ä¸€å…ƒçº¿æ€§å›å½’"></a>2 ä¸€å…ƒçº¿æ€§å›å½’</h2><p>å…ˆä»ä¸€å…ƒçº¿æ€§å‡½æ•°å¼€å§‹åˆ†æï¼Œæ—¢ç„¶å‡è®¾æ˜¯ä¸€å…ƒçº¿æ€§ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„æ‹Ÿåˆå‡½æ•°å°±å¯ä»¥å®šä¹‰ä¸º \( Y = X*W + b \) äº†ã€‚åŒæ ·é‚£å‰ä¸€ä¸ªå›¾ä½œä¸ºä¾‹å­ï¼Œæˆ‘ä»¬ç°åœ¨çš„ç›®çš„æ˜¯æ±‚å‡º\( W, b \)ï¼Œå¦‚æœæ±‚å‡ºæ¥äº†ï¼Œç»™å®šä»»æ„ä¸€ä¸ª \( X \) å°±èƒ½æ±‚å‡º \( Y \) æ¥äº†ã€‚</p>
<h3 id="2-1-å®šä¹‰è¯„ä¼°å‡½æ•°-æŸå¤±å‡½æ•°"><a href="#2-1-å®šä¹‰è¯„ä¼°å‡½æ•°-æŸå¤±å‡½æ•°" class="headerlink" title="2.1 å®šä¹‰è¯„ä¼°å‡½æ•°-æŸå¤±å‡½æ•°"></a>2.1 å®šä¹‰è¯„ä¼°å‡½æ•°-æŸå¤±å‡½æ•°</h3><p>è¿™é‡Œè®²è§£å¦‚ä½•æ±‚å‡º \( W, b \) çš„æ•´ä¸ªæ€è€ƒè¿‡ç¨‹ã€‚</p>
<p>æˆ‘ä»¬é€‰å–ä¸€ä¸ªç‚¹ \( (x_0, y_0) \) å› ä¸ºè¯¯å·®çš„å­˜åœ¨ï¼Œæ‰€ä»¥ \( y_0 = x_0 <em> W + b + \delta_0 \)ã€‚åŒç†å¦‚æœæœ‰å¾ˆå¤šç‚¹ï¼Œé‚£ä¹ˆå°±æœ‰ä»¥ä¸‹ç»“æœï¼Œä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬å–è¯„ä¼°å€¼ \( h(x) = x </em> W + b \)ã€‚</p>
<p>$$<br>\delta_0 = y_0 - h(x_0) \\<br>\delta_1 = y_1 - h(x_1) \\<br>\ldots \\<br>\delta_n = y_n - h(x_n) \\\<br>$$</p>
<p>æˆ‘ä»¬çš„ç›®çš„è‡ªç„¶æ˜¯è¯¯å·®è¶Šå°è¶Šå¥½ï¼Œæ‰€ä»¥é‡‡ç”¨å¹³æ–¹å’Œçš„å½¢å¼è¡¨è¾¾è¯¯å·®ï¼š</p>
<p>$$<br>loss(W, b) = \sum_{i = 0}^{n}\delta_i^2 = \sum_{i = 0}^{n} [y_i - h(x_i)]^2<br>$$</p>
<p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å›¾åƒæ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ</p>
<p><img src="/2018/02/11/MLLinearRegression/lossgraph.png" alt=""></p>
<p>PSï¼šå›¾æœ‰ç‚¹ä¸‘ï¼Œå®åœ¨æ˜¯æ²¡åŠæ³•äº†ï¼Œè®¾ç½®äº†å™ªç‚¹ï¼Œä½¿å¾—å‡½æ•°å€¼è·¨åº¦å¾ˆå¤§ï¼Œç¨å¾®æ”¹ä¸€ä¸‹å°±ä¼šå‘¼è„¸ã€‚åªèƒ½è®¾ç½®æ•£ç‚¹å›¾å‡‘åˆçœ‹äº†ï¼Œæœ›çŸ¥é“çš„å°ä¼™ä¼´å‘ŠçŸ¥ã€‚å¥½äº†ï¼Œå°±ä¸åœ¨è¿™æµªè´¹è¿‡å¤šæ—¶é—´äº†ï¼Œç›´æ¥çœ‹ä»£ç ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># coding: utf-8</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</div><div class="line"><span class="keyword">from</span> mpl_toolkits.mplot3d <span class="keyword">import</span> Axes3D</div><div class="line"></div><div class="line">fig = plt.figure()</div><div class="line">ax = Axes3D(fig)</div><div class="line">ax.set_xlabel(<span class="string">r'$Weight$'</span>)</div><div class="line">ax.set_ylabel(<span class="string">r'$bias$'</span>)</div><div class="line">ax.set_zlabel(<span class="string">r'$loss\ value$'</span>)</div><div class="line">N = <span class="number">200</span></div><div class="line"></div><div class="line">X = np.linspace(<span class="number">0</span>, <span class="number">10</span>, N)</div><div class="line">noise = np.random.normal(<span class="number">0</span>, <span class="number">0.1</span>, X.shape)</div><div class="line">Y = X * <span class="number">0.5</span> + <span class="number">3</span> + noise</div><div class="line"></div><div class="line">W = np.linspace(<span class="number">-10</span>, <span class="number">10</span>, N)</div><div class="line">b = np.linspace(<span class="number">-2</span>, <span class="number">8</span>, N)</div><div class="line"></div><div class="line">p = <span class="number">0.6</span></div><div class="line">plt.xlim(W.min() * p, W.max() * p)</div><div class="line">plt.ylim(b.min() * p, b.max() * p)</div><div class="line">ax.set_zlim(<span class="number">0</span>, <span class="number">1000</span>)</div><div class="line"></div><div class="line">h = []</div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> W:</div><div class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> b:</div><div class="line">        h.append(np.sum(np.square(Y - (X * i + j))))</div><div class="line"></div><div class="line">print(np.min(h))</div><div class="line">h = np.asarray(h).reshape(N, N)</div><div class="line">W, b = np.meshgrid(W, b)</div><div class="line"></div><div class="line">ax.scatter(W, b, h, c=<span class="string">'b'</span>)</div><div class="line">plt.savefig(<span class="string">"lossgraph.png"</span>)</div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<p>ç°åœ¨æˆ‘ä»¬é€šè¿‡å¯è§†åŒ–çš„æ‰‹æ®µçŸ¥é“äº†å¤§æ¦‚ä»€ä¹ˆä½ç½®å–æœ€å°å€¼ï¼Œå…¶å®æˆ‘ä»¬è¿˜æ˜¯æ²¡æœ‰è¾¾åˆ°ç›®çš„ï¼Œæˆ‘ä»¬è¦çš„æ˜¯ \( W, b \) å…·ä½“å€¼ã€‚</p>
<h3 id="2-2-æ±‚è§£æœ€å°å€¼-æ¢¯åº¦ä¸‹é™"><a href="#2-2-æ±‚è§£æœ€å°å€¼-æ¢¯åº¦ä¸‹é™" class="headerlink" title="2.2 æ±‚è§£æœ€å°å€¼-æ¢¯åº¦ä¸‹é™"></a>2.2 æ±‚è§£æœ€å°å€¼-æ¢¯åº¦ä¸‹é™</h3><p>é—®é¢˜è¢«è¿›ä¸€æ­¥ç»†åŒ–ï¼Œå°±æ˜¯æ±‚è§£ä¸‹é¢äºŒå…ƒå‡½æ•°åœ¨ä»€ä¹ˆæ—¶å€™å–æå€¼ï¼š</p>
<p>$$<br>loss(W, b) = \sum_{i = 0}^{n}\delta_i^2 = \sum_{i = 0}^{n} [y_i - h(x_i)]^2<br>$$</p>
<p>è¿™æ—¶å€™é«˜æ•°å°±ç™»åœºäº†ï¼Œæ‰¾äº†ä¸€å¼ å›¾</p>
<p><img src="/2018/02/11/MLLinearRegression/findextremum.png" alt=""></p>
<p>é‚£é—®é¢˜å°±å¾ˆç®€å•äº†ï¼Œå°±æ˜¯ç›´æ¥æ±‚å¯¹ \( W, b \) çš„åå¯¼ç­‰äº \( 0 \) çš„æ–¹ç¨‹ç»„ã€‚ä½†æ˜¯è¿™æ˜¯æ•°å­¦æ–¹æ³•ï¼Œä¸ç¬¦åˆè®¡ç®—æœºæ€ç»´ï¼Œå°±å¥½åƒæˆ‘ä»¬è§£ä¸€ä¸ªä¸€å…ƒä¸€æ¬¡æ–¹ç¨‹ï¼Œæ™®é€šæ–¹æ³•æ˜¯ç›´æ¥æ‹¿å®šä¹‰åŸŸå†…çš„å€¼ä¸€ä¸ªä¸€ä¸ªè¯•ï¼Œç›´åˆ°ç»“æœç¬¦åˆé¢„æœŸã€‚å½“ç„¶ï¼Œé«˜çº§ä¸€ç‚¹ç‚¹çš„æ–¹æ³•æ˜¯å¯ä»¥å†™ä¸€ä¸ªè§£é‡Šå™¨ï¼ŒæŠŠäººç±»è®¡ç®—æ–¹æ³•ç¨‹åºåŒ–ã€‚æ˜¾ç„¶è¿™é‡Œä¸å¤ªç°å®ï¼Œè€Œä¸”æ–¹ç¨‹ç±»å‹ä¸€å˜ï¼Œè§£é‡Šå™¨å¾ˆå¯èƒ½å°±ä¸é€‚ç”¨äº†ã€‚æ‰€ä»¥æˆ‘ä»¬è¿˜æ˜¯é‡‡ç”¨é‚£ç§æœºå™¨è®¤å¯çš„â€œç¬¨â€åŠæ³•ï¼Œæƒ³èµ·å¼€å­¦æ—¶è®¡ç®—æœºå¯¼è®ºè€å¸ˆè¯„ä»·è®¡ç®—æœºçš„ä¸€å¥è¯ï¼š<code>fast but stupid</code>ã€‚è¯´æ˜åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥æ¥å—ç”¨å¿«æ¥å¼¥è¡¥å…¶å®ƒåŠ£åŠ¿ï¼Œåªè¦è®¡ç®—çš„å€¼ä¸€æ­¥ä¸€æ­¥é è¿‘æœ€ç»ˆç»“æœå°±èƒ½æ»¡è¶³éœ€æ±‚ã€‚å…¶å®è¯´åˆ°è¿™é‡Œï¼Œè®¡ç®—æœºå˜å¿«çš„è¿™äº›ç‰¹ç‚¹å’Œç°åœ¨æœºå™¨å­¦ä¹ ã€äººå·¥æ™ºèƒ½é¢†åŸŸçš„å…´èµ·æœ‰ä¸€å®šå…³ç³»ã€‚</p>
<p>å¥½äº†ï¼Œä¸‹é¢å¼€å§‹æƒ³ä¸€ä¸ªåŠæ³•å¦‚ä½•è®©ç»“æœæ…¢æ…¢è¶‹è¿‘ä¸æå€¼ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥è¿™æ ·æƒ³ï¼Œéšæœºæ”¾ä¸€ä¸ªçƒåœ¨è¿™ä¸ªå¹³é¢ä¸Šï¼Œç­‰åˆ°çƒç¦æ­¢æ—¶ï¼Œå®ƒæ‰€åœ¨çš„ä½ç½®å°±æ˜¯æå€¼çš„ä½ç½®ã€‚é‚£æˆ‘ä»¬å¦‚ä½•æ¨¡ä»¿è¿™ä¸€è¿‡ç¨‹å‘¢ï¼Ÿ</p>
<blockquote>
<p>ç¬¬ä¸€æ­¥ï¼šæ”¾çƒ</p>
</blockquote>
<p>è¿™ä¸ªå¥½åšï¼Œå°±æ˜¯ç›´æ¥éšæœºä¸€ä¸ªåœ¨å®šä¹‰åŸŸå†…çš„ä»»æ„ä½ç½®å°±å¥½äº†ã€‚</p>
<blockquote>
<p>ç¬¬äºŒæ­¥ï¼šæ»šåŠ¨</p>
</blockquote>
<p>æ»šåŠ¨çš„è¯å¦‚ä½•å»æ¨¡æ‹Ÿæ˜¯ä¸€ä¸ªæ¯”è¾ƒéš¾çš„ç‚¹ï¼Œä½†æ˜¯ä»”ç»†åˆ†æå°±å¾ˆå¥½ç†è§£äº†ã€‚ä½ å¯ä»¥æŠŠè‡ªå·±æƒ³è±¡æˆé‚£ä¸ªçƒï¼Œå¼€å§‹ç«™åœ¨æŸä¸ªåœ°æ–¹ï¼Œè¿™ä¸ªåœ°æ–¹å¾ˆä¸ç¨³ï¼Œé‚£ä¹ˆä½ è‡ªç„¶ååº”è‚¯å®šæ˜¯å¾€å¹³æ•´çš„åœ°æ–¹å»ï¼Œå‰ææ˜¯æ¯ä¸ªä½ç½®çš„æµ·æ‹”å·®ä¸å¤šã€‚é‚£è¿™æ ·å°±è¯´æ˜é‚£äº›æ–œç‡è¶Šå¤§çš„åœ°æ–¹æœ‰æ›´å¤§çš„å‡ ç‡æ›´å¿«è·Œè½è°·åº•ã€‚è¿™ä¸ªä¾‹å­æœ‰ä¸ªä¸æ°å½“çš„åœ°æ–¹ï¼Œå¯ä»¥æ€è€ƒä¸‹äºŒæ¬¡å‡½æ•°ï¼Œè¿™é‡Œä¸»è¦æ˜¯ä½“ä¼šè¿™ç§æ€ç»´ï¼Œè€Œæˆ‘ä»¬æ˜¯å¯ä»¥å˜é€šçš„ã€‚å½“ä½ æœ‰äº†è¿™ç§æ–œç‡çš„æ€ç»´ï¼Œé‚£å°±å¥½åŠäº†ï¼Œä¸‹é¢ç»™å‡ºæ€»ç»“ï¼š<code>æˆ‘ä»¬æ€»æ˜¯å¸Œæœ›åœ¨ç»™å®šæ­¥é•¿çš„æƒ…å†µä¸‹ï¼Œå¾€æ°´å¹³æœ€ä½çš„åœ°æ–¹è¡Œè¿›</code>ã€‚è€Œå…¶ä¸­è¦çŸ¥é“é‚£ä¸ªæ˜¯æœ€ä½ï¼Œåˆæ˜¯ä¸€ä¸ªéš¾é¢˜ï¼Œè®¡ç®—æœºå¯æ²¡æœ‰ç›´è§‰ï¼Œå¦‚æœæ•°å€¼è®¾ç½®ä¸å½“ï¼Œå¯èƒ½å¯¼è‡´å‡½æ•°æ”¶æ•›è¿‡æ…¢æˆ–è€…ç›´æ¥å‘æ•£ï¼Œè€Œè¿™äº›éƒ½æ˜¯æœºå™¨å­¦ä¹ åº”è¯¥æåŠ›é¿å…çš„ã€‚</p>
<p>ä¸ºäº†å¥½åˆ†æé—®é¢˜ï¼Œæˆ‘ä»¬é‡‡ç”¨æ§åˆ¶å˜é‡æ–¹æ³•ã€‚å¯ä»¥çœ‹åˆ°ï¼Œåœ¨æŸå¤±å‡½æ•°ä¸­æœ‰ä¸¤ä¸ªå˜é‡ \( W, b \)ï¼Œå½“ \( W \) å–æŸä¸€å€¼å¾—æ—¶å€™ï¼Œ\( loss(n, b) \ n\ is\ a\ constant \)æ˜¯ä¸€ä¸ªäºŒæ¬¡å‡½æ•°ã€‚</p>
<p><img src="/2018/02/11/MLLinearRegression/quadraticFunction.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># coding: utf-8</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"></div><div class="line">fig = plt.figure()</div><div class="line"></div><div class="line">N = <span class="number">200</span></div><div class="line"></div><div class="line">X = np.linspace(<span class="number">0</span>, <span class="number">10</span>, N * <span class="number">2</span>)</div><div class="line">noise = np.random.normal(<span class="number">0</span>, <span class="number">0.1</span>, X.shape)</div><div class="line">Y = X * <span class="number">0.5</span> + <span class="number">3</span> + noise</div><div class="line"></div><div class="line">W = <span class="number">1</span></div><div class="line">b = np.linspace(<span class="number">-5</span>, <span class="number">6</span>, N)</div><div class="line"></div><div class="line">h = []</div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> b:</div><div class="line">    h.append(np.sum(np.square(Y - (X * W + i))))</div><div class="line"></div><div class="line">plt.plot(b, h)</div><div class="line"></div><div class="line">plt.savefig(<span class="string">"quadraticFunction.png"</span>)</div><div class="line"></div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬æ¥ç›´æ¥çœ‹å´æ©è¾¾è€å¸ˆçš„è¯¾ä»¶å§ï¼Œæœ‰ç‚¹ä¸æƒ³åšå›¾äº†ã€‚ã€‚ã€‚</p>
<p><img src="/2018/02/11/MLLinearRegression/wuenda_1.png" alt=""></p>
<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥å¼•å‡ºæ›´æ–°è§„åˆ™äº†ï¼Œåœ¨è¿™é‡Œæ±‚è§£æœ€å°å€¼ï¼Œå¯¹äºä¸€å…ƒå‡½æ•°æ¥è¯´å°±æ˜¯æ±‚å¯¼ï¼Œå¯¹äºå¤šå…ƒå‡½æ•°å°±æ˜¯æ±‚åå¯¼äº†ã€‚å¾ˆæ˜æ˜¾ï¼Œå½“æ–œç‡ä¸ºæ­£çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦å¾€è´Ÿåå‘èµ°ï¼Œåä¹‹å¾€æ­£æ–¹å‘èµ°ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åŠ ä¸Šä¸€ä¸ªå…³äºæ–œç‡å‘ˆåæ¯”çš„å‡½æ•°æ¥è·Ÿæ–°å€¼ï¼Œè‡³äºæ›´æ–°åŠ›åº¦ä¹Ÿå°±æ˜¯å‰é¢è¯´çš„ä¸€æ¬¡èµ°å¤šè¿œå°±æ˜¯å­¦ä¹ ç‡çš„è®¾å®šäº†ã€‚è€Œä¸”ç¦»æå€¼ç‚¹è¶Šè¿œï¼Œæ–œç‡ç»å¯¹å€¼è¶Šå¤§ï¼Œæ­¥å­è¿ˆå¾—è¶Šå¤§ï¼Œç¬¦åˆæ›´æ–°é€»è¾‘ã€‚</p>
<p>$$<br>\begin{aligned}<br>&amp;W:=W-\frac{\alpha}{2n}\frac{\partial\,loss(W)}{\partial\,W} = W + \frac{ \alpha}{n}\sum_{i = 1}^{n}{x_i*(y_i-h(x_i))}\\<br>&amp;b:=b-\frac{\alpha}{2n}\frac{\partial\,loss(b)}{\partial\,b} = b + \frac{ \alpha}{n}\sum_{i = 0}^{n}{y_i-h(x_i)}<br>\end{aligned}<br>$$</p>
<p>è¿™é‡Œå¯èƒ½æœ‰ç‚¹æ€ç»´è·³è·ƒçš„æ˜¯é™¤äº†ä¸€ä¸ª \( 2n \)ï¼Œå¯ä»¥ä»æ•°æ®é‡çš„è§’åº¦æ€è€ƒï¼Œä¹Ÿå¯ä»¥ä»æ›´æ–°æ–œç‡çš„è§’åº¦æ€è€ƒï¼Œå› ä¸ºåœ¨æ›´æ–°æƒé‡ä¸­ï¼Œæˆ‘ä»¬ä¸ä»…ä»…åªæ˜¯è®¡ç®—ä¸€ä¸ªç‚¹çš„æ–œç‡ï¼Œå¦‚æœç›´æ¥æ±‚å’Œå¿…å®šä¼šå¯¼è‡´æƒé‡è¿‡å¤§ä»è€Œæœ€ç»ˆç»“æœæ˜¯å‘æ•£çš„ï¼Œè¿™ç‚¹å¤§å®¶å¯ä»¥è‡ªå·±æ”¹æ”¹ä»£ç è¯•è¯•ã€‚å¥½äº†ï¼Œæ—¢ç„¶åŸºæœ¬æ€è·¯éƒ½å‡ºæ¥äº†ï¼Œé‚£å°±å†™ä»£ç å®ç°å§ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># coding: utf-8</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"></div><div class="line">N = <span class="number">200</span></div><div class="line"></div><div class="line">X = np.linspace(<span class="number">0</span>, <span class="number">10</span>, N * <span class="number">2</span>)</div><div class="line">noise = np.random.normal(<span class="number">0</span>, <span class="number">0.5</span>, X.shape)</div><div class="line">Y = X * <span class="number">0.5</span> + <span class="number">3</span> + noise</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">calcLoss</span><span class="params">(train_X, train_Y, W, b)</span>:</span></div><div class="line">    <span class="keyword">return</span> np.sum(np.square(train_Y - (train_X * W + b)))</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">gradientDescent</span><span class="params">(train_X, train_Y, W, b, learningrate=<span class="number">0.001</span>, trainingtimes=<span class="number">500</span>)</span>:</span></div><div class="line">    <span class="keyword">global</span> loss</div><div class="line">    <span class="keyword">global</span> W_trace</div><div class="line">    <span class="keyword">global</span> b_trace</div><div class="line">    size = train_Y.size</div><div class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> range(trainingtimes):</div><div class="line">        prediction = W * train_X + b</div><div class="line">        tempW = W + learningrate * np.sum(train_X * (train_Y - prediction)) / size</div><div class="line">        tempb = b + learningrate * np.sum(train_Y - prediction) / size</div><div class="line">        W = tempW</div><div class="line">        b = tempb</div><div class="line">        loss.append(calcLoss(train_X, train_Y, W, b))</div><div class="line">        W_trace.append(W)</div><div class="line">        b_trace.append(b)</div><div class="line"></div><div class="line"></div><div class="line">Training_Times = <span class="number">100</span></div><div class="line">Learning_Rate = <span class="number">0.002</span></div><div class="line"></div><div class="line">loss = []</div><div class="line">W_trace = [<span class="number">-1</span>]</div><div class="line">b_trace = [<span class="number">1</span>]</div><div class="line">gradientDescent(X, Y, W_trace[<span class="number">0</span>], b_trace[<span class="number">0</span>], learningrate=Learning_Rate, trainingtimes=Training_Times)</div><div class="line">print(W_trace[<span class="number">-1</span>], b_trace[<span class="number">-1</span>])</div><div class="line"></div><div class="line">fig = plt.figure()</div><div class="line">plt.title(<span class="string">r'$loss\ function\ change\ tendency$'</span>)</div><div class="line">plt.xlabel(<span class="string">r'$learning\ times$'</span>)</div><div class="line">plt.ylabel(<span class="string">r'$loss\ value$'</span>)</div><div class="line">plt.plot(np.linspace(<span class="number">1</span>, Training_Times, Training_Times), loss)</div><div class="line">plt.savefig(<span class="string">"gradientDescentLR.png"</span>)</div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<p><img src="/2018/02/11/MLLinearRegression/gradientDescentLR.png" alt=""></p>
<p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬åŸºæœ¬æ‰‹å†™å®ç°äº†ä¸€å…ƒå˜é‡çš„çº¿æ€§å›å½’ï¼Œè¿™é‡Œä¸ºäº†æ–¹ä¾¿è®­ç»ƒæ¬¡æ•°å–å¾—æ¯”è¾ƒå°‘ï¼Œåªæœ‰ \( 100 \) æ¬¡ï¼Œè¿™è¿œè¿œä¸å¤Ÿï¼Œæˆ‘æµ‹è¯•äº†ä¸€ä¸‹ï¼Œå¤§æ¦‚è¾¾åˆ° \( 10000 \) æ¬¡è®­ç»ƒæ•ˆæœå°±æ¯”è¾ƒå¥½äº†ã€‚å½“ç„¶ä¹Ÿå¯ä»¥è°ƒæ•´å­¦ä¹ ç‡ï¼Œåˆå§‹å€¼â€¦â€¦è¯»è€…å¯ä»¥è‡ªè¡Œå°è¯•ã€‚</p>
<h2 id="3-å¤šå…ƒçº¿æ€§å›å½’"><a href="#3-å¤šå…ƒçº¿æ€§å›å½’" class="headerlink" title="3 å¤šå…ƒçº¿æ€§å›å½’"></a>3 å¤šå…ƒçº¿æ€§å›å½’</h2><p>è¿™é‡Œæˆ‘ä»¬å…ˆæ‹†åˆ†ç†è§£å¤šå…ƒä»£è¡¨å¤šä¸ªè‡ªå˜é‡ï¼Œçº¿æ€§ä»£è¡¨è‡ªå˜é‡ä¹‹é—´æ»¡è¶³é½æ¬¡æ€§å’Œå¯åŠ æ€§ï¼Œå›å½’å°±æ˜¯ä¸€ç§æ–¹æ³•çš„è¡¨è¿°ã€‚ä¸€å…ƒå¥½åŠï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å„ç§å·¥å…·å®ç°å¯è§†åŒ–ï¼Œä½†æ˜¯å¤šå…ƒçš„è¡¨è¿°å°±æœ‰äº†ä¸€äº›å›°éš¾ï¼Œç‰¹åˆ«æ˜¯åœ¨é«˜ç»´çº¿æ€§ç©ºé—´æˆ‘ä»¬æƒ³è±¡ä¸å‡ºæ¥ã€‚æ‰€ä»¥æˆ‘ä»¬å°±å¿…é¡»æŠ½è±¡å‡ºæ¥ï¼Œä½¿ç”¨æ•°å­¦ç¬¦å·ä»£æ›¿é‚£äº›å¤æ‚çš„å˜é‡ã€‚</p>
<p>å¯èƒ½ä½ å·²ç»æƒ³åˆ°äº†ï¼Œå¯¹ï¼Œæ²¡é”™ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨çº¿æ€§ä»£æ•°äº†ã€‚å¦‚æœä¹‹å‰æ²¡æœ‰ä¸€ç‚¹åŸºç¡€çš„è¯ï¼Œå¯ä»¥ç¨å¾®èŠ±ç‚¹æ—¶é—´åœ¨çŸ¥ä¹ä¸Šäº†è§£ä¸‹çº¿æ€§ä»£æ•°æ˜¯åšä»€ä¹ˆçš„å°±å¥½äº†ï¼Œè¿™é‡Œåªæ¶‰åŠçº¿æ€§ä»£æ•°çš„åŸºç¡€è®¤è¯†åº”ç”¨ã€‚</p>
<p>å‡å¦‚å½“æˆ‘ä»¬æœ‰ä¸‰ä¸ªè‡ªå˜é‡ \( X_1, X_2, X_3 \) å’Œä¸€ä¸ªå› å˜é‡ \( Y \)ï¼Œä¸”ç¬¦åˆçº¿æ€§å…³ç³»ã€‚é‚£ä¹ˆå°±ä¼šæœ‰ä»¥ä¸‹æ–¹ç¨‹æˆç«‹ï¼š</p>
<p>$$<br>w_1X_1 + w_2X_2 + w_3X_3 + b = Y<br>$$</p>
<p>å†å‡è®¾æˆ‘ä»¬æœ‰å››ç»„æ•°æ®\((x_1, x_2, x_3, y): \{(1,1,1,1), (1,1,2,3), (1,3,4,1), (3,2,4,2) \} \)ï¼Œé‚£ä¹ˆæœ‰ï¼š</p>
<p>$$<br>1w_1 + 1w_2 + 1w_3 + b = 1 \\<br>1w_1 + 1w_2 + 2w_3 + b = 3 \\<br>1w_1 + 3w_2 + 4w_3 + b = 1 \\<br>3w_1 + 2w_2 + 4w_3 + b = 2<br>$$</p>
<p>äºæ˜¯æˆ‘ä»¬å¯ä»¥æŠ½è±¡ä»¥ä¸‹ï¼Œå†™æˆçŸ©é˜µçš„å½¢å¼ï¼š</p>
<p>$$<br>\begin{bmatrix}<br>1 &amp; 1 &amp; 1 &amp; 1 \\<br>1 &amp; 1 &amp; 2 &amp; 1 \\<br>1 &amp; 3 &amp; 4 &amp; 1 \\<br>3 &amp; 2 &amp; 4 &amp; 1<br>\end{bmatrix} * \begin{bmatrix}<br>w_1 \\<br>w_2 \\<br>w_3 \\ b \end{bmatrix} = \begin{bmatrix}<br>1 \\<br>3 \\<br>1 \\<br>2<br>\end{bmatrix}<br>$$</p>
<p>å†æŠ½è±¡ï¼š</p>
<p>$$<br>XW = Y<br>$$</p>
<p>å…¶ä¸­</p>
<p>$$<br>X =<br>\begin{bmatrix}<br>X_1 &amp; X_2 &amp; X_3 &amp; 1<br>\end{bmatrix}<br>and\ X_i =<br>\begin{bmatrix}<br>x_{1i} \\<br>x_{2i} \\<br>\ldots \\<br>x_{ni}<br>\end{bmatrix} \\<br>W =<br>\begin{bmatrix}<br>w_1 \\<br>w_2 \\<br>w_3 \\<br>b<br>\end{bmatrix}<br>$$</p>
<p>æˆ‘ä»¬çš„ç›®çš„æ˜¯æ±‚è§£ \( W \)ï¼Œä¹Ÿå°±æ˜¯æŠŠæ–¹ç¨‹ \(XW = Y \) ä¸­çš„ \( W \) è§£å‡ºæ¥ã€‚ç›´æ¥è§£ä¸ªæ–¹ç¨‹å°±èƒ½å¾—åˆ°æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœï¼Œå¤ªå¥½äº†ï¼Œé©¬ä¸Šå¼€å§‹ï¼š</p>
<p>$$<br>\begin{aligned}<br>&amp;XW = Y \\<br>\Longrightarrow &amp;X^TXW = X^TY \\<br>\Longrightarrow &amp;(X^TX)^{-1}X^TXW = (X^TX)^{-1}X^TY \\<br>\Longrightarrow &amp;W = (X^TX)^{-1}X^TY<br>\end{aligned}<br>$$</p>
<p>å¦‚æœè¿™é‡Œä¸ç†è§£çš„è¯ï¼Œæˆ‘ç®€å•è¯´ä¸€ä¸‹ï¼Œæ±‚é€†è¿ç®—å¿…é¡»æ˜¯å½¢å¦‚ \( \mathbb{R}^{n*n} \) çš„å½¢å¼ï¼Œä¹Ÿå°±æ˜¯è¡Œå’Œåˆ—è¦ç›¸ç­‰ã€‚ä¸ºä»€ä¹ˆè¿™æ ·å‘¢ï¼Ÿæˆ‘çš„ç†è§£æ˜¯çŸ©é˜µæ˜¯å¯¹ä¸€ä¸ªçº¿æ€§ç©ºé—´åˆ°å¦ä¸€ä¸ªçº¿æ€§ç©ºé—´çš„æ˜ å°„ï¼Œæ‰€ä»¥å¦‚æœä¸€ä¸ªçŸ©é˜µçš„ç§©å°äºè¡Œæ•°ï¼Œä¹Ÿå°±æ˜¯é‡Œé¢æœ‰çº¿æ€§ç›¸å…³çš„å‘é‡ï¼Œåœ¨å¯¹çº¿æ€§ç©ºé—´è¿›è¡Œå˜æ¢æ—¶ï¼Œå¯èƒ½è¿›è¡Œé™ç»´å½±å“ï¼Œä¹Ÿå°±æ˜¯é€ æˆæŸä¸ªç»´åº¦å¡Œç¼©ï¼Œè¿™ç§å½±å“æ˜¯ä¸å¯é€†çš„ï¼Œæ‰€ä»¥è¿™ç§çŸ©é˜µæ˜¯æ²¡æœ‰é€†çŸ©é˜µè¿›è¡Œæ¢å¤çš„ã€‚å¦‚æœè¦ä»ä¸€ä¸ªå‘é‡æ˜ å°„åˆ°å¦ä¸€ä¸ªå‘é‡ï¼Œè¿˜æœ‰ä»å¦ä¸€ä¸ªå‘é‡æ˜ å°„å›æ¥çš„è¯ï¼Œè¿™ä¸ªçŸ©é˜µå¿…é¡»æœ‰é€†çŸ©é˜µä¹Ÿå°±æ˜¯æ»¡ç§©çš„ã€‚è¿˜æœ‰ä¸ªä¸œè¥¿å«å¥‡å¼‚çŸ©é˜µï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥äº†è§£ä¸€ä¸‹ã€‚</p>
<p>å›åˆ°ä¸»çº¿ï¼Œç›´æ¥æ±‚è§£æ–¹ç¨‹å§ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># coding: utf-8</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"></div><div class="line">X1 = np.asarray([<span class="number">2104</span>, <span class="number">1416</span>, <span class="number">1534</span>, <span class="number">852</span>]).reshape(<span class="number">4</span>, <span class="number">1</span>)</div><div class="line">X2 = np.asarray([<span class="number">5</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">2</span>]).reshape(<span class="number">4</span>, <span class="number">1</span>)</div><div class="line">X3 = np.asarray([<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>]).reshape(<span class="number">4</span>, <span class="number">1</span>)</div><div class="line"></div><div class="line">X = np.mat(np.column_stack((X1, X2, X3, np.ones(shape=(<span class="number">4</span>, <span class="number">1</span>)))))</div><div class="line">noise = np.random.normal(<span class="number">0</span>, <span class="number">0.1</span>, X1.shape)</div><div class="line">Y = np.mat(<span class="number">2.5</span> * X1 - X2 + <span class="number">2</span> * X3 + <span class="number">4</span> + noise)</div><div class="line">YTwin = np.mat(<span class="number">2.5</span> * X1 - X2 + <span class="number">2</span> * X3 + <span class="number">4</span>)</div><div class="line"></div><div class="line">W = (X.T * X).I * X.T * Y</div><div class="line">WTWin = (X.T * X).I * X.T * YTwin</div><div class="line">print(W, <span class="string">"\n"</span>, WTWin)</div><div class="line"></div><div class="line"><span class="comment"># output:</span></div><div class="line"><span class="comment"># [[ 2.50043958]</span></div><div class="line"><span class="comment">#  [-1.16868808]</span></div><div class="line"><span class="comment">#  [ 1.79213736]</span></div><div class="line"><span class="comment">#  [ 4.27637958]] </span></div><div class="line"><span class="comment">#  [[ 2.5]</span></div><div class="line"><span class="comment">#  [-1. ]</span></div><div class="line"><span class="comment">#  [ 2. ]</span></div><div class="line"><span class="comment">#  [ 4. ]]</span></div></pre></td></tr></table></figure>
<p><img src="/2018/02/11/MLLinearRegression/wuenda_2.png" alt=""></p>
<p>è¿™é‡Œæˆ‘ä»¬é‡‡ç”¨å´æ©è¾¾è€å¸ˆçš„æˆ¿å­æ•°æ®ï¼Œè‡ªå·±ç”Ÿæˆçš„æ•°æ®ä¹‹é—´æœ‰å¤ªå¤§çš„ç›¸ä¼¼æ€§ï¼Œç®—å‡ºçš„ç»“æœè¯¯å·®å¤ªå¤§ã€‚</p>
<p>æˆ‘ä»¬åŸºæœ¬å¯ä»¥è®¡ç®—å¤šå…ƒçº¿æ€§å›å½’ï¼Œä½†æ˜¯ä¸€ç‚¹ä¹Ÿä½“ç°ä¸å‡ºæœºå™¨å­¦ä¹ ä¸­å­¦ä¹ è¿™ä¸ªè¯ï¼Œå½“ç„¶æˆ‘ä»¬å¯ä»¥è‡ªå·±åˆ©ç”¨å‰é¢ç»™å‡ºçš„ä¾‹å­åˆ©ç”¨ \( loss \) å‡½æ•°æ±‚è§£ã€‚è¿™é‡Œæˆ‘ä»¬å€ŸåŠ© \( TensorFlow \) å¸®æˆ‘ä»¬å®Œæˆã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># coding: utf-8</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</div><div class="line"></div><div class="line">N = <span class="number">1000</span></div><div class="line">train_X1 = np.linspace(<span class="number">1</span>, <span class="number">10</span>, N).reshape(N, <span class="number">1</span>)</div><div class="line">train_X2 = np.linspace(<span class="number">1</span>, <span class="number">10</span>, N).reshape(N, <span class="number">1</span>)</div><div class="line">train_X3 = np.linspace(<span class="number">1</span>, <span class="number">10</span>, N).reshape(N, <span class="number">1</span>)</div><div class="line">train_X4 = np.linspace(<span class="number">1</span>, <span class="number">10</span>, N).reshape(N, <span class="number">1</span>)</div><div class="line"></div><div class="line"><span class="comment"># train_X = np.column_stack((train_X1, np.ones(shape=(N, 1))))</span></div><div class="line">train_X = np.column_stack((train_X1, train_X2, train_X3, train_X4, np.ones(shape=(N, <span class="number">1</span>))))</div><div class="line"></div><div class="line">noise = np.random.normal(<span class="number">0</span>, <span class="number">0.5</span>, train_X1.shape)</div><div class="line"><span class="comment"># train_Y = 3 * train_X1 + 4</span></div><div class="line">train_Y = train_X1 + train_X2 + train_X3 + train_X4 + <span class="number">4</span> + noise</div><div class="line"></div><div class="line">length = len(train_X[<span class="number">0</span>])</div><div class="line"></div><div class="line">X = tf.placeholder(tf.float32, [<span class="keyword">None</span>, length], name=<span class="string">"X"</span>)</div><div class="line">Y = tf.placeholder(tf.float32, [<span class="keyword">None</span>, <span class="number">1</span>], name=<span class="string">"Y"</span>)</div><div class="line"></div><div class="line">W = tf.Variable(np.random.random(size=length).reshape(length, <span class="number">1</span>), dtype=tf.float32, name=<span class="string">"weight"</span>)</div><div class="line"></div><div class="line">activation = tf.matmul(X, W)</div><div class="line">learning_rate = <span class="number">0.006</span></div><div class="line"></div><div class="line">loss = tf.reduce_mean(tf.reduce_sum(tf.pow(activation - Y, <span class="number">2</span>), reduction_indices=[<span class="number">1</span>]))</div><div class="line">optimizer = tf.train.GradientDescentOptimizer(learning_rate).minimize(loss)</div><div class="line"></div><div class="line">training_epochs = <span class="number">2000</span></div><div class="line">display_step = <span class="number">100</span></div><div class="line"></div><div class="line">loss_trace = []</div><div class="line"></div><div class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</div><div class="line">    sess.run(tf.global_variables_initializer())</div><div class="line">    <span class="keyword">for</span> epoch <span class="keyword">in</span> range(training_epochs):</div><div class="line">        sess.run(optimizer, feed_dict=&#123;X: train_X, Y: train_Y&#125;)</div><div class="line">        temp_loss = sess.run(loss, feed_dict=&#123;X: train_X, Y: train_Y&#125;)</div><div class="line">        loss_trace.append(temp_loss)</div><div class="line">        <span class="keyword">if</span> <span class="number">1</span> == epoch % display_step:</div><div class="line">            print(<span class="string">'epoch: %4s'</span>%epoch, <span class="string">'\tloss: %s'</span>%temp_loss)</div><div class="line">    print(<span class="string">"\nOptimization Finished!"</span>)</div><div class="line">    print(<span class="string">"\nloss = "</span>, loss_trace[<span class="number">-1</span>], <span class="string">"\nWeight =\n"</span>, sess.run(W, feed_dict=&#123;X: train_X, Y: train_Y&#125;))</div><div class="line"></div><div class="line"></div><div class="line">plt.plot(np.linspace(<span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>), loss_trace[:<span class="number">100</span>])</div><div class="line">plt.savefig(<span class="string">"tensorflowLR.png"</span>)</div><div class="line">plt.show()</div><div class="line"></div><div class="line"><span class="comment"># output:</span></div><div class="line"><span class="comment"># epoch:    1 	loss: 118.413925</span></div><div class="line"><span class="comment"># epoch:  101 	loss: 1.4500043</span></div><div class="line"><span class="comment"># epoch:  201 	loss: 1.0270562</span></div><div class="line"><span class="comment"># epoch:  301 	loss: 0.75373846</span></div><div class="line"><span class="comment"># epoch:  401 	loss: 0.5771168</span></div><div class="line"><span class="comment"># epoch:  501 	loss: 0.46298113</span></div><div class="line"><span class="comment"># epoch:  601 	loss: 0.38922414</span></div><div class="line"><span class="comment"># epoch:  701 	loss: 0.34156123</span></div><div class="line"><span class="comment"># epoch:  801 	loss: 0.31076077</span></div><div class="line"><span class="comment"># epoch:  901 	loss: 0.29085675</span></div><div class="line"><span class="comment"># epoch: 1001 	loss: 0.27799463</span></div><div class="line"><span class="comment"># epoch: 1101 	loss: 0.26968285</span></div><div class="line"><span class="comment"># epoch: 1201 	loss: 0.2643118</span></div><div class="line"><span class="comment"># epoch: 1301 	loss: 0.26084095</span></div><div class="line"><span class="comment"># epoch: 1401 	loss: 0.2585978</span></div><div class="line"><span class="comment"># epoch: 1501 	loss: 0.25714833</span></div><div class="line"><span class="comment"># epoch: 1601 	loss: 0.25621164</span></div><div class="line"><span class="comment"># epoch: 1701 	loss: 0.2556064</span></div><div class="line"><span class="comment"># epoch: 1801 	loss: 0.2552152</span></div><div class="line"><span class="comment"># epoch: 1901 	loss: 0.2549625</span></div><div class="line"><span class="comment"># Optimization Finished!</span></div><div class="line"><span class="comment"># loss =  0.25480175 </span></div><div class="line"><span class="comment"># Weight =</span></div><div class="line"><span class="comment">#  [[1.0982682 ]</span></div><div class="line"><span class="comment">#  [0.9760315 ]</span></div><div class="line"><span class="comment">#  [1.0619627 ]</span></div><div class="line"><span class="comment">#  [0.87049955]</span></div><div class="line"><span class="comment">#  [3.9700394 ]]</span></div></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„æ‹Ÿåˆæ•ˆæœä¸å¤ªå¥½ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯æ•°æ®çš„é—®é¢˜ï¼Œå› ä¸ºæ•°æ®å¢é•¿çš„ç›¸ä¼¼æ€§å¤ªé«˜ï¼Œæ„Ÿè§‰å¯èƒ½è¿‡æ‹Ÿåˆäº†ï¼Œå¦‚æœæœ‰çŸ¥é“çš„å°ä¼™ä¼´æ¬¢è¿å‘ŠçŸ¥ã€‚ä¸‹å›¾å¯ä»¥çœ‹åˆ° \( loss \) æ—©æ—©å°±æ”¶æ•›äº†ã€‚</p>
<p><img src="/2018/02/11/MLLinearRegression/tensorflowLR.png" alt=""></p>
<h2 id="4-æ€»ç»“"><a href="#4-æ€»ç»“" class="headerlink" title="4 æ€»ç»“"></a>4 æ€»ç»“</h2><p>çº¿æ€§å›å½’çš„æ±‚è§£è¿‡ç¨‹å¾ˆç›´è§‚ï¼Œç¬¦åˆæˆ‘ä»¬çš„ç†è§£ã€‚å¯¹äºè¿™ä¸ªé—®é¢˜æœ‰ä¸€ä¸ªå…ˆå…¥ä¸ºä¸»çš„è§‚ç‚¹å°±æ˜¯æ•°æ®ä¸€å®šæ˜¯æ‹Ÿåˆæˆçº¿æ€§çš„ï¼Œå› ä¸ºè¿™é‡Œè®²çš„æ˜¯çº¿æ€§å›å½’ã€‚å½“ç„¶ï¼Œæ•°æ®åˆ†å¸ƒä¸æ˜¯çº¿æ€§çš„è¿™ä¸ªæ–¹æ³•å°±ä¸é€‚ç”¨äº†ï¼ŒåŒæ ·ï¼Œå¦‚æœæˆ‘ä»¬çœ‹ä¸åˆ°æ•°æ®çš„åˆ†å¸ƒï¼Œä¸èƒ½å¯¹æ¨¡å‹è¿›è¡Œé¢„ä¼°ï¼Œé‚£åªèƒ½ä¸€æ­¥ä¸€æ­¥å»è¯•æ¢ï¼Œæ‰€ä»¥æœºå™¨å­¦ä¹ å¼€å§‹å°±æ˜¯é€‰å–é€‚ç”¨äºå½“å‰æ•°æ®çš„æ¨¡å‹ï¼Œå¯ä»¥ç†è§£ä¸ºæ‰¾ä¸€ä¸ªè¾“å…¥è¾“å‡ºçš„åˆç†æ˜ å°„å…³ç³»ï¼Œç„¶åå¯¼å…¥æ•°æ®ï¼Œæ„é€ ä¸€ä¸ªèƒ½å¤Ÿæ­£ç¡®è¯„ä¼°æ‹Ÿåˆæ•ˆæœçš„æŸå¤±å‡½æ•°ï¼Œæ¥ç€å°±æ˜¯å¯¹æŸå¤±å‡½æ•°è¿›è¡Œæœ€ä¼˜åŒ–ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜å‰é¢æ²¡æœ‰æåŠçš„æ˜¯å¦‚æœåªæ˜¯éšæœºåœ°æ‰¾ï¼Œå…¶å®æˆ‘ä»¬ä¸èƒ½ä¿è¯æ‰¾åˆ°çš„å°±æ˜¯å…¨å±€æœ€ä¼˜ï¼Œå½“ç„¶ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå±€éƒ¨æœ€ä¼˜å¾—åˆ°çš„æ¨¡å‹å·²ç»èƒ½å¾ˆå¥½çš„é¢„æµ‹è¾“å‡ºäº†ã€‚è¿™åªæ˜¯æˆ‘çš„ä¸ªäººç†è§£å•¦ï¼Œæ¬¢è¿å¤§å®¶ä¸€èµ·è®¨è®ºï¼Œç„¶åå®éªŒçš„ä»£ç åœ¨æˆ‘çš„ <a href="https://github.com/mk43/machine-learning" target="_blank" rel="external">GitHub</a> ä¸Šï¼Œéœ€è¦çš„å¯ä»¥è‡ªå–ã€‚ç„¶åè¿™ä¸ªç³»åˆ—å¯èƒ½ä¼šç»§ç»­æ›´æ–°ï¼Œä¸è¿‡ç¦»ä¸‹ä¸€æ¬¡æ›´æ–°å¯èƒ½è¦ç‚¹æ—¶é—´ï¼Œå› ä¸ºæ–°å¹´å¿«ä¹^_^ï¼Œå¯¹äº†å‚è€ƒèµ„æ–™å‰é¢åˆç»™å‡ºï¼Œå°±ä¸ä¸€ä¸€åˆ—ä¸¾æ„Ÿè°¢äº†ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;script type=&quot;text/javascript&quot; src=&quot;http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default&quot;&gt;&lt;/script&gt;

&lt;blockquote&gt;
&lt;p&gt;å†™åœ¨å‰é¢ï¼šæˆ‘å°†ä»ä¸€ä¸ªå…¥é—¨è€…çš„è§†è§’ï¼ˆæ°´å¹³ï¼‰å°†æœºå™¨å­¦ä¹ ä¸­çš„å¸¸ç”¨ç®—æ³•å¨“å¨“é“æ¥ã€‚è‡ªèº«æ°´å¹³ç¡®å®æœ‰é™ï¼Œå¦‚æœå…¶ä¸­æœ‰ä»€ä¹ˆé”™è¯¯çš„è¯å¸Œæœ›å¤§å®¶æŒ‡å‡ºï¼Œé¿å…è¯¯å¯¼å¤§å®¶ã€‚å¯¹äºå¼€ç¯‡æœ‰æ¯”è¾ƒå¤šçš„ä¸œè¥¿æƒ³è¯´ï¼Œæ‰€ä»¥å¦å–ä¸€ç« ä»‹ç»ä¸€ä¸‹æˆ‘ä¸ªäººå¯¹æœºå™¨å­¦ä¹ è¿™ä¸ªé¢†åŸŸçš„ç†è§£å’Œä¸€äº›åŸºæœ¬å¸¸è¯†ä»‹ç»ã€‚å¦‚æœä½ æ—¶é—´æ¯”è¾ƒå……è£•ï¼Œå¯ä»¥çœ‹çœ‹æˆ‘&lt;code&gt;å‰è¨€&lt;/code&gt;çš„æ–‡å­—ä»‹ç»ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="Math" scheme="http://fitzeng.org/tags/Math/"/>
    
      <category term="MachineLearning" scheme="http://fitzeng.org/tags/MachineLearning/"/>
    
      <category term="Python" scheme="http://fitzeng.org/tags/Python/"/>
    
      <category term="NumPy" scheme="http://fitzeng.org/tags/NumPy/"/>
    
      <category term="Matplotlib" scheme="http://fitzeng.org/tags/Matplotlib/"/>
    
      <category term="LinearRegression" scheme="http://fitzeng.org/tags/LinearRegression/"/>
    
  </entry>
  
  <entry>
    <title>Matplotlib ä¿å­˜ GIF åŠ¨å›¾</title>
    <link href="http://fitzeng.org/2018/02/08/MatplotlibGenerateGif/"/>
    <id>http://fitzeng.org/2018/02/08/MatplotlibGenerateGif/</id>
    <published>2018-02-08T03:27:00.000Z</published>
    <updated>2018-02-08T12:55:13.776Z</updated>
    
    <content type="html"><![CDATA[<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script>

<blockquote>
<p>å†™åœ¨å‰é¢ï¼šä¸ºäº†å¯è§†åŒ–æœºå™¨å­¦ä¹ è¿‡ç¨‹ï¼Œå¹¶ä¸”ä¿å­˜ä¸‹æ¥ï¼Œæ‰€ä»¥æƒ³ç›´æ¥åˆ©ç”¨ \( Matplotlib.animation \) ä¿å­˜åŠ¨å›¾ï¼ŒæœŸé—´å‚è€ƒäº†å¥½å¤šèµ„æ–™ï¼Œè¿‡ç¨‹æ¯”è¾ƒè‰°è¾›ï¼Œæ‰€ä»¥æƒ³è®°å½•ä¸‹æ¥ã€‚å½“ç„¶ï¼Œæ­¤æ–‡è¿˜å‚è€ƒäº†å¥½å¤šç½‘ä¸Šçš„å…¶å®ƒæ–‡ç« ï¼Œå†æ­¤ä¸€å¹¶æ„Ÿè°¢é‚£äº›çƒ­çˆ±åˆ†äº«çš„ \( coder \)ï¼Œå¹¶ä¸”å‚è€ƒèµ„æ–™ä¸­ç»™å‡ºé“¾æ¥ã€‚æ‰€æœ‰ä»£ç æ•´ç†åˆ°<a href="https://github.com/mk43/python-practice/tree/master/matplotlib" target="_blank" rel="external">GitHub</a>ã€‚</p>
</blockquote>
<a id="more"></a>
<h2 id="0-å‰æœŸå‡†å¤‡"><a href="#0-å‰æœŸå‡†å¤‡" class="headerlink" title="0. å‰æœŸå‡†å¤‡"></a>0. å‰æœŸå‡†å¤‡</h2><p>å®‰è£… \( NumPy \) å’Œ \( Matplotlib \)ã€‚å…·ä½“å®‰è£…ç›´æ¥ä¸Šå®˜ç½‘ä¾¿å¯ï¼Œé‡åˆ°ä»€ä¹ˆé—®é¢˜åœ¨ç½‘ä¸ŠåŸºæœ¬å¯ä»¥æœåˆ°ç­”æ¡ˆçš„ï¼Œè¿™é‡Œå°±ä¸ä»‹ç»äº†ã€‚è¿™é‡Œè¦ç®€å•çš„ä½¿ç”¨ \( NumPy \) ç”Ÿæˆä¸€äº›æµ‹è¯•æ•°æ®ï¼Œå¦‚æœå¯¹ \( NumPy \) ä¸ç†Ÿæ‚‰ï¼Œå‚è€ƒ <a href="http://fitzeng.org/2018/02/04/NumPyOfficialQuickstartTutorial/">NumPy å®˜æ–¹å¿«é€Ÿå…¥é—¨æ•™ç¨‹(è¯‘)</a>ï¼Œå¦‚æœå¯¹ \( Matplotlib \) ä¸ç†Ÿæ‚‰ï¼Œå‚è€ƒ<a href="http://fitzeng.org/2018/02/07/MatplotlibDraw/">Matplotlib åŸºæœ¬æ“ä½œ</a>ã€‚å½“ç„¶å¦‚æœè¦èƒ½å¤Ÿä¿å­˜ \( GIF \) è¿˜éœ€è¦ä¸€ä¸ªå·¥å…· <a href="http://www.imagemagick.org/script/download.php#macosx" target="_blank" rel="external">ImageMagick</a>ï¼ŒæŒ‰ç…§å®˜æ–¹æŒ‡å¯¼å®‰è£…å°±å¥½ï¼Œç¡®ä¿åœ¨å‘½ä»¤ä¸­è¾“å…¥ <code>magick</code> æœ‰å“åº”ã€‚å¦‚æœä½¿ç”¨ \( PyCharm \) ä¹‹ç±»çš„ \( IDE \) è¯·å°†ç¯å¢ƒå˜é‡é…ç½®åˆ°å…¨å±€ï¼Œé¿å…åœ¨ \( IDE \) ä¸­æ‰¾ä¸åˆ°å‘½ä»¤ã€‚</p>
<h2 id="1-ç»˜åˆ¶åŸºæœ¬åŠ¨å›¾"><a href="#1-ç»˜åˆ¶åŸºæœ¬åŠ¨å›¾" class="headerlink" title="1. ç»˜åˆ¶åŸºæœ¬åŠ¨å›¾"></a>1. ç»˜åˆ¶åŸºæœ¬åŠ¨å›¾</h2><p>è¯·ç¡®ä¿å·²ç»å®‰è£…äº† <a href="http://www.imagemagick.org/script/download.php#macosx" target="_blank" rel="external">ImageMagick</a> å¹¶ä¸”å¯ç”¨çš„æƒ…å†µä¸‹å†ç»§ç»­ï¼Œä¸ç„¶ä»£ç è·‘æ­¥èµ·æ¥ã€‚</p>
<p>è¿™é‡Œé‡‡ç”¨ä¸¤ç§æ–¹å¼ç»˜åˆ¶åŠ¨å›¾</p>
<h3 id="1-1-é‡ç½®é‡ç»˜"><a href="#1-1-é‡ç½®é‡ç»˜" class="headerlink" title="1.1 é‡ç½®é‡ç»˜"></a>1.1 é‡ç½®é‡ç»˜</h3><p>é‡ç½®é‡ç»˜ä¸»è¦æ˜¯æ¯æ¬¡æ›´æ–°åŸæ¥å›¾å½¢çš„å€¼æ¥è¾¾åˆ°ç»˜åˆ¶åŠ¨å›¾çš„æ•ˆæœã€‚</p>
<ul>
<li>å¯¼å…¥åŸºæœ¬åº“</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">import numpy as np</div><div class="line">from matplotlib import pyplot as plt</div><div class="line">from matplotlib import animation</div></pre></td></tr></table></figure>
<ul>
<li>ç”Ÿæˆæ•°æ®ï¼Œç”»å‡ºåŸå§‹å›¾</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">fig, ax = plt.subplots()</div><div class="line"></div><div class="line">x = np.arange(0, 2 * np.pi, 0.01)</div><div class="line">line0 = ax.plot(x, np.cos(x))</div><div class="line">line, = ax.plot(x, np.sin(x))</div></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼Œè¿™é‡Œç”³æ˜çš„ \( line, \) ä¸­ <code>,</code> ä¸èƒ½å°‘ï¼Œå¥½åƒæ˜¯ä¸ºäº†æ›´æ–°å€¼æ—¶ç±»å‹åŒ¹é…ã€‚æ²¡æ·±ç©¶ï¼Œå¸Œæœ›çŸ¥é“çš„å¯ä»¥æŒ‡ç‚¹ä¸€ä¸‹ã€‚</p>
<ul>
<li>å®šä¹‰åˆå§‹å‡½æ•°å’Œè·Ÿæ–°å‡½æ•°</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">def init():</div><div class="line">    line.set_ydata(np.sin(x))</div><div class="line">    return line,</div><div class="line"></div><div class="line">def animate(i):</div><div class="line">    line.set_ydata(np.sin(x + i / 10.0))</div><div class="line">    return line,</div></pre></td></tr></table></figure>
<p>å…¶å®å°±æ˜¯æ›´æ–°ä¸€ä¸‹ \( Y \) åæ ‡çš„å€¼ã€‚</p>
<ul>
<li>æ‰§è¡ŒåŠ¨ç”»</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">animation = animation.FuncAnimation(fig=fig, func=animate, frames=100, init_func=init, interval=20, blit=False)</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªå‡½æ•°çš„å‚æ•°å¯ä»¥çœ‹æºç ï¼Œä»¥åŠå®˜ç½‘çš„ä»‹ç»ï¼Œè¿™é‡Œå°±æ˜¯æ¯ä¸ª \( 20\ ms \) ç»˜åˆ¶ä¸€å¸§ï¼Œæ€»å…±æœ‰ \( 100 \) å¸§ã€‚</p>
<ul>
<li>ä¿å­˜ \( GIF \)</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">animation.save(&apos;resetvalue.gif&apos;, writer=&apos;imagemagick&apos;)</div></pre></td></tr></table></figure>
<p>è¿™é‡Œå°±æ˜¯ç›´æ¥ä¿å­˜æˆ \( GIF \) æ ¼å¼å°±å¥½äº†ã€‚</p>
<ul>
<li>æ˜¾ç¤ºåŠ¨å›¾</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">plt.show()</div></pre></td></tr></table></figure>
<p>ç”Ÿæˆå›¾ç‰‡çš„æ•ˆæœå¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/2018/02/08/MatplotlibGenerateGif/resetvalue.gif" alt=""></p>
<h3 id="1-2-æ“¦é™¤é‡ç»˜"><a href="#1-2-æ“¦é™¤é‡ç»˜" class="headerlink" title="1.2 æ“¦é™¤é‡ç»˜"></a>1.2 æ“¦é™¤é‡ç»˜</h3><p>ä¸ä¸Šä¸€ç§æ–¹æ³•æ¯”è¾ƒï¼Œè¿™ç§å°±æ˜¯ä¸åˆ©ç”¨ä¸Šä¸€æ¬¡çš„ä»»ä½•åæ ‡ï¼Œç›´æ¥æ“¦é™¤ï¼Œç„¶åå† \( plot \) å›¾å½¢ä¸Šå»ã€‚</p>
<ul>
<li>å¯¼å…¥åŸºæœ¬åº“</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">import numpy as np</div><div class="line">from matplotlib import pyplot as plt</div><div class="line">from matplotlib import animation</div></pre></td></tr></table></figure>
<ul>
<li>ç”Ÿæˆæ•°æ®ï¼Œç”»å‡ºåŸå§‹å›¾</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">fig, ax = plt.subplots()</div><div class="line"></div><div class="line">x = np.arange(0, 2 * np.pi, 0.01)</div><div class="line">ax.plot(x, np.cos(x))</div></pre></td></tr></table></figure>
<p>è¿™é‡Œå°±æ²¡æœ‰é‚£ä¸ªè¦æ±‚äº†ï¼Œå› ä¸ºè¿™ç§æ–¹å¼ä¸ä¾èµ–äºå‰é¢çš„å›¾å½¢ã€‚</p>
<ul>
<li>å®šä¹‰åˆå§‹å‡½æ•°å’Œè·Ÿæ–°å‡½æ•°</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">def init():</div><div class="line">    return ax.plot(x, np.sin(x))</div><div class="line"></div><div class="line"></div><div class="line">def animate(i):</div><div class="line">    try:</div><div class="line">        ax.lines.pop(1)</div><div class="line">    except Exception:</div><div class="line">        pass</div><div class="line">    line = ax.plot(x, np.sin(x + i / 10.0), &apos;r&apos;)</div><div class="line">    return line,</div></pre></td></tr></table></figure>
<p>åˆå§‹åŒ–æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œå…¶å®ä¹Ÿå¯ä»¥ä¸åˆå§‹åŒ–ï¼Œæ—¶é—´é—´éš”å¤ªçŸ­æ•ˆæœåŸºæœ¬æ˜¯çœ‹ä¸å‡ºæ¥çš„ã€‚ä¸‹é¢ä»‹ç»ä¸€ä¸‹ <code>ax.lines.pop(1)</code> è¿™å¥â€œæ“¦é™¤â€å‡½æ•°ã€‚è¿™é‡Œçš„ \( lines \)å¯ä»¥ç†è§£ä¸ºå­˜å‚¨ \( plot \) ä¸Šæ¥çš„å›¾åƒæ ˆï¼Œå‰é¢ \( plot \) äº†ä¸€ä¸ªä½™å¼¦å‡½æ•°ï¼Œåœ¨åˆå§‹åŒ–çš„æ—¶å€™ç»˜åˆ¶äº†ç¬¬äºŒæ¡ï¼Œæ‰€ä»¥ç´¢å¼•æ˜¯ \( 1 \) çš„æ­£å¼¦å‡½æ•°è¢« \( pop \) äº†ç„¶åè¿›è¡Œä¸‹ä¸€æ¡ç»˜åˆ¶ã€‚äºæ˜¯æ‰§è¡Œ <code>line = ax.plot(x, np.sin(x + i / 10.0), &#39;r&#39;)</code></p>
<ul>
<li>åç»­</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">animation = animation.FuncAnimation(fig=fig, func=animate, frames=100, init_func=init, interval=20, blit=False)</div><div class="line">animation.save(&apos;redraw.gif&apos;, writer=&apos;imagemagick&apos;)</div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<p>æ²¡åŒºåˆ«</p>
<p>ç”Ÿæˆå›¾ç‰‡çš„æ•ˆæœå¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/2018/02/08/MatplotlibGenerateGif/redraw.gif" alt=""></p>
<h2 id="2-æœºå™¨å­¦ä¹ è¿‡ç¨‹å¯è§†åŒ–"><a href="#2-æœºå™¨å­¦ä¹ è¿‡ç¨‹å¯è§†åŒ–" class="headerlink" title="2. æœºå™¨å­¦ä¹ è¿‡ç¨‹å¯è§†åŒ–"></a>2. æœºå™¨å­¦ä¹ è¿‡ç¨‹å¯è§†åŒ–</h2><p>å‰é¢ä»‹ç»äº†çš„çŸ¥è¯†åŸºæœ¬å¤Ÿç”¨äº†ï¼Œä½†ç»ˆç©¶ä¸æ˜¯å®æ“ã€‚å¦‚æœä½ ä¸æ˜¯å­¦ä¹ æœºå™¨å­¦ä¹ çš„ï¼Œå…¶å®æœ‰ä¸Šé¢çš„åŸºç¡€å°±å¯ä»¥äº†ï¼Œè¿™ä¸€èŠ‚å¯ä»¥è·³è¿‡ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ æƒ³å­¦æœºå™¨å­¦ä¹ çš„è¯ï¼Œè¿™é‡Œæä¾›ä¸€ä¸ªå°ä¾‹å­è®©ä½ æ›´åŠ æ¸…æ™°çš„ç†è§£æœºå™¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­çš„æ•°æ®å˜åŒ–ã€‚ä¸è¿‡è¿™é‡Œåªä¸“æ³¨äºç»˜åˆ¶ï¼Œæœºå™¨å­¦ä¹ çš„éƒ¨åˆ†å‚è€ƒ<a href="http://fitzeng.org/2018/02/03/TensorFlowIntroduction/">ä» TensorFlow å…¥é—¨æœºå™¨å­¦ä¹ </a></p>
<p>åŒæ ·è¿˜æ˜¯æ‹¿çº¿æ€§å›å½’ä½œä¸ºä¾‹å­ã€‚</p>
<p>åŸå§‹ä»£ç </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"># coding: utf-8</div><div class="line">from __future__ import print_function</div><div class="line">import tensorflow as tf</div><div class="line">import numpy as np</div><div class="line">import matplotlib.pyplot as plt</div><div class="line">import matplotlib.animation as animation</div><div class="line">from scipy.interpolate import spline</div><div class="line"></div><div class="line">train_X = np.linspace(0, 10, 50)</div><div class="line">noise = np.random.normal(0, 1, train_X.shape)</div><div class="line">train_Y = train_X * 1 - 2 + noise</div><div class="line"></div><div class="line">X = tf.placeholder(tf.float32)</div><div class="line">Y = tf.placeholder(tf.float32)</div><div class="line"></div><div class="line">W = tf.Variable(-1., name=&quot;weight&quot;)</div><div class="line">b = tf.Variable(1., name=&quot;bias&quot;)</div><div class="line"></div><div class="line">activation = tf.add(tf.multiply(X, W), b)</div><div class="line"></div><div class="line">learning_rate = 0.0001</div><div class="line"></div><div class="line">cost = tf.reduce_sum(tf.pow(activation - Y, 2))</div><div class="line">optimizer = tf.train.GradientDescentOptimizer(learning_rate).minimize(cost)</div><div class="line"></div><div class="line">training_epochs = 20</div><div class="line">display_step = 10</div><div class="line"></div><div class="line">with tf.Session() as sess:</div><div class="line">    sess.run(tf.global_variables_initializer())</div><div class="line">    for epoch in range(training_epochs):</div><div class="line">        for (x, y) in zip(train_X, train_Y):</div><div class="line">            sess.run(optimizer, feed_dict=&#123;X: x, Y: y&#125;)</div><div class="line">        if epoch &lt; 10 or epoch % display_step == 0:</div><div class="line">            c_tmp = sess.run(cost, feed_dict=&#123;X: train_X, Y: train_Y&#125;)</div><div class="line">            W_tmp = sess.run(W)</div><div class="line">            b_tmp = sess.run(b)</div><div class="line">            activation_tmp = sess.run(activation, feed_dict=&#123;X: train_X&#125;)</div><div class="line">            print(&quot;Epoch: %04d&quot; % (epoch + 1), &quot;cost=&quot;, &quot;&#123;:.9f&#125;&quot;.format(c_tmp), &quot;W=&quot;, W_tmp, &quot;b=&quot;, b_tmp)</div><div class="line">    print(&quot;Optimization Finished!&quot;)</div><div class="line">    print(&quot;cost=&quot;, sess.run(cost, feed_dict=&#123;X: train_X, Y: train_Y&#125;), &quot;W=&quot;, sess.run(W), &quot;b=&quot;, sess.run(b))</div></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä»£ç å°±ä¸è§£é‡Šäº†ï¼Œä¸ºäº†æ–¹ä¾¿æµ‹è¯•ï¼ŒæŠŠè¿­ä»£æ¬¡æ•°è°ƒçš„æ¯”è¾ƒå°ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨ä¸Šé¢çš„åŸºç¡€ä¸Šè¿›è¡Œæ‰©å……ã€‚</p>
<p>é¦–å…ˆè¿›è¡Œå¯è§†åŒ–ï¼Œé¦–å…ˆæŠŠæˆ‘ä»¬è§‰å¾—æœ‰ç”¨çš„æ•°æ®æå–å‡ºæ¥å§ã€‚å› ä¸ºç»è¿‡æµ‹è¯•ï¼Œå‰é¢çš„å˜åŒ–å¹…åº¦æ¯”è¾ƒå¤§ï¼Œä¸ºäº†å›¾ç¤ºæ˜æ˜¾ï¼Œåˆ»æ„è¿›è¡Œéå‡åŒ€é‡‡æ ·ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">c_trace = []</div><div class="line">W_trace = []</div><div class="line">b_trace = []</div><div class="line">activation_trace = []</div><div class="line"></div><div class="line">with tf.Session() as sess:</div><div class="line">    sess.run(tf.global_variables_initializer())</div><div class="line">    for epoch in range(training_epochs):</div><div class="line">        for (x, y) in zip(train_X, train_Y):</div><div class="line">            sess.run(optimizer, feed_dict=&#123;X: x, Y: y&#125;)</div><div class="line">        if epoch &lt; 10 or epoch % display_step == 0:</div><div class="line">            c_tmp = sess.run(cost, feed_dict=&#123;X: train_X, Y: train_Y&#125;)</div><div class="line">            W_tmp = sess.run(W)</div><div class="line">            b_tmp = sess.run(b)</div><div class="line">            activation_tmp = sess.run(activation, feed_dict=&#123;X: train_X&#125;)</div><div class="line">            print(&quot;Epoch: %04d&quot; % (epoch + 1), &quot;cost=&quot;, &quot;&#123;:.9f&#125;&quot;.format(c_tmp), &quot;W=&quot;, W_tmp, &quot;b=&quot;, b_tmp)</div><div class="line">            c_trace.append(c_tmp)</div><div class="line">            W_trace.append(W_tmp)</div><div class="line">            b_trace.append(b_tmp)</div><div class="line">            activation_trace.append(activation_tmp)</div><div class="line">    print(&quot;Optimization Finished!&quot;)</div><div class="line">    print(&quot;cost=&quot;, sess.run(cost, feed_dict=&#123;X: train_X, Y: train_Y&#125;), &quot;W=&quot;, sess.run(W), &quot;b=&quot;, sess.run(b))</div></pre></td></tr></table></figure>
<p>å‚è€ƒå‰é¢çš„å°ä¾‹å­ï¼ŒæŠŠæ•°æ®å¡«è¿›å»ï¼Œåšå‡ºåŠ¨å›¾æ¥ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">fig, ax = plt.subplots()</div><div class="line">l1 = ax.scatter(train_X, train_Y, color=&apos;red&apos;, label=r&apos;$Original\ data$&apos;)</div><div class="line">ax.set_xlabel(r&apos;$X\ data$&apos;)</div><div class="line">ax.set_ylabel(r&apos;$Y\ data$&apos;)</div><div class="line"></div><div class="line"></div><div class="line">def update(i):</div><div class="line">    try:</div><div class="line">        ax.lines.pop(0)</div><div class="line">    except Exception:</div><div class="line">        pass</div><div class="line">    line, = ax.plot(train_X, activation_trace[i], &apos;g--&apos;, label=r&apos;$Fitting\ line$&apos;, lw=2)</div><div class="line">    return line,</div><div class="line"></div><div class="line"></div><div class="line">ani = animation.FuncAnimation(fig, update, frames=len(activation_trace), interval=100)</div><div class="line">ani.save(&apos;linearregression.gif&apos;, writer=&apos;imagemagick&apos;)</div><div class="line"></div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<p>æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/2018/02/08/MatplotlibGenerateGif/linearregression1.gif" alt=""></p>
<p>æ¥ç€æŠŠ \( Cost \) å‡½æ•°ä¹ŸåŠ ä¸Šæ¥å¹¶ä¸”åœ¨æœ€åæ˜¾ç¤ºã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">def update(i):</div><div class="line">    try:</div><div class="line">        ax.lines.pop(0)</div><div class="line">    except Exception:</div><div class="line">        pass</div><div class="line">    line, = ax.plot(train_X, activation_trace[i], &apos;g--&apos;, label=r&apos;$Fitting\ line$&apos;, lw=2)</div><div class="line">    if i == len(activation_trace) - 1:</div><div class="line">        twinax = ax.twinx()</div><div class="line">        twinax.plot(np.linspace(0, 10, np.size(c_trace)), c_trace, &apos;b&apos;, label=&apos;Cost line&apos;, lw=2)</div><div class="line">    return line,</div></pre></td></tr></table></figure>
<p><img src="/2018/02/08/MatplotlibGenerateGif/linearregression2.gif" alt=""><br><img src="/2018/02/08/MatplotlibGenerateGif/linearregression2.png" alt=""></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œçº¿æ¡ååˆ†é”‹åˆ©ï¼Œè¿™æ—¶å°±å¯ä»¥ä½¿ç”¨ \( spline \)å¹³æ»‘è¿‡æ¸¡ä¸€ä¸‹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">def update(i):</div><div class="line">    try:</div><div class="line">        ax.lines.pop(0)</div><div class="line">    except Exception:</div><div class="line">        pass</div><div class="line">    line, = ax.plot(train_X, activation_trace[i], &apos;g--&apos;, label=r&apos;$Fitting\ line$&apos;, lw=2)</div><div class="line">    if i == len(activation_trace) - 1:</div><div class="line">        xnew = np.linspace(0, 10, np.max(c_trace) - np.min(c_trace))</div><div class="line">        smooth = spline(np.linspace(0, 10, np.size(c_trace)), c_trace, xnew)</div><div class="line">        twinax = ax.twinx()</div><div class="line">        twinax.set_ylabel(r&apos;Cost&apos;)</div><div class="line">        twinax.plot(xnew, smooth, &apos;b&apos;, label=r&apos;$Cost\ line$&apos;, lw=2)</div><div class="line">    return line,</div></pre></td></tr></table></figure>
<p>å…¶å®å°±æ˜¯å¯¹ \( [0, 10] \) è¿™ä¸ªåŒºé—´è¿›è¡Œé‡‡æ ·ã€‚æ·»åŠ  <code>np.max(c_trace) - np.min(c_trace)</code> ä¸ªç‚¹æ¥ç»˜åˆ¶è¿™çº¿æ¡ã€‚</p>
<p><img src="/2018/02/08/MatplotlibGenerateGif/linearregression3.png" alt=""></p>
<p>åŠ ä¸Šå›¾ä¾‹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">def update(i):</div><div class="line">    try:</div><div class="line">        ax.lines.pop(0)</div><div class="line">    except Exception:</div><div class="line">        pass</div><div class="line">    line, = ax.plot(train_X, activation_trace[i], &apos;g--&apos;, label=r&apos;$Fitting\ line$&apos;, lw=2)</div><div class="line">    plt.legend(handles=[l1, line], loc=&apos;upper center&apos;)</div><div class="line">    if i == len(activation_trace) - 1:</div><div class="line">        ax.text(6, -2, &apos;Cost: %s&apos; % c_trace[i], fontdict=&#123;&apos;size&apos;: 16, &apos;color&apos;: &apos;r&apos;&#125;)</div><div class="line">        xnew = np.linspace(0, 10, np.max(c_trace) - np.min(c_trace))</div><div class="line">        smooth = spline(np.linspace(0, 10, np.size(c_trace)), c_trace, xnew)</div><div class="line">        twinax = ax.twinx()</div><div class="line">        twinax.set_ylabel(r&apos;Cost&apos;)</div><div class="line">        costline, = twinax.plot(xnew, smooth, &apos;b&apos;, label=r&apos;$Cost\ line$&apos;, lw=2)</div><div class="line">        plt.legend(handles=[l1, line, costline], loc=&apos;upper center&apos;)</div><div class="line">    return line,</div></pre></td></tr></table></figure>
<p><img src="/2018/02/08/MatplotlibGenerateGif/linearregression3.gif" alt=""><br><img src="/2018/02/08/MatplotlibGenerateGif/linearregression4.png" alt=""></p>
<p>ä¸‹é¢æŠŠæ•°æ®ç»†èŠ‚å¤„ç†ä¸‹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">learning_rate = 0.001</div><div class="line"></div><div class="line">training_epochs = 500</div><div class="line">display_step = 40</div></pre></td></tr></table></figure>
<p><img src="/2018/02/08/MatplotlibGenerateGif/linearregression5.png" alt=""></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œ\( Cost \) å‡½æ•°å¹¶éä¸¥æ ¼é€’å‡çš„ï¼Œæˆ‘ä»¬é‡‡ç”¨çš„æ˜¯æ¢¯åº¦ä¸‹é™ç®—æ³•æ±‚æœ€ä¼˜ï¼Œæ‰€ä»¥é—®é¢˜å‡ºåœ¨å­¦ä¹ ç‡ï¼Œå…·ä½“ä¸ºä»€ä¹ˆä¹Ÿæ˜¯ä¸€ä¸ªæœºå™¨å­¦ä¹ ä¸­åº”è¯¥æ³¨æ„çš„é—®é¢˜ã€‚å¦å¤–å¤§å®¶è¿˜å¯ä»¥è¯•è¯•ç»§ç»­æŠŠå­¦ä¹ ç‡è°ƒå¤§çœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆæœ‰è¶£çš„äº‹æƒ…ï¼Ÿ</p>
<p>æˆ‘ä»¬æŠŠå­¦ä¹ ç‡è°ƒæ•´åˆ° <code>0.0001</code> å°†ä¼šå¾—åˆ°ä»¥ä¸‹ç»“æœï¼š</p>
<p><img src="/2018/02/08/MatplotlibGenerateGif/linearregression4.gif" alt=""><br><img src="/2018/02/08/MatplotlibGenerateGif/linearregression6.png" alt=""></p>
<p>å…¶å®ä½ è§‚å¯Ÿè¾“å‡ºå¯èƒ½å¹¶ä¸æ€ä¹ˆç¬¦åˆåŸå§‹å‡½æ•°ã€‚è€Œä¸”åœ¨ä¸æ–­è°ƒæ•´è®­ç»ƒå‚æ•°çš„æ—¶å€™ä¼šå‘ç°æ‹Ÿåˆç¨‹åº¦ä¼¼ä¹ä¹Ÿæ²¡æ³•æ¯æ¬¡åå¾ˆå¥½ã€‚åŸå› å…¶å®åœ¨äºåŠ çš„å¹²æ‰°ï¼Œè‡³äºä¸ºä»€ä¹ˆå¹²æ‰°ä¼šé€ æˆè¿™æ ·ï¼Œå°±ä¸åœ¨æœ¬æ–‡çš„è®¨è®ºèŒƒå›´äº†ã€‚å¥½äº†ï¼Œåˆ°è¿™é‡Œä½ åº”è¯¥å¯ä»¥ç»˜åˆ¶è‡ªå·±çš„ \( GIF \)äº†å§ã€‚</p>
<p>æºç è¯¦è§ <a href="https://github.com/mk43/python-practice/tree/master/matplotlib" target="_blank" rel="external">GitHub</a></p>
<h2 id="3-æ€»ç»“"><a href="#3-æ€»ç»“" class="headerlink" title="3. æ€»ç»“"></a>3. æ€»ç»“</h2><p>èŠ±æ—¶é—´æŠŠå°ç»†èŠ‚ææ‡‚å°±æ˜¯èŠ‚çœæ—¶é—´ï¼Œå…¶å®çœ¼å‰çš„é—®é¢˜å¯ä»¥å¼•ç”³å‡ºå…¶å®ƒæ›´å¤šå€¼å¾—æ€è€ƒçš„é—®é¢˜ã€‚å¤šè”ç³»ï¼Œå¤šæ€è€ƒã€‚</p>
<h2 id="4-å‚è€ƒèµ„æ–™"><a href="#4-å‚è€ƒèµ„æ–™" class="headerlink" title="4. å‚è€ƒèµ„æ–™"></a>4. å‚è€ƒèµ„æ–™</h2><ul>
<li><a href="https://morvanzhou.github.io/tutorials/data-manipulation/plt/" target="_blank" rel="external">morvanï¼šmarkdown + è§†é¢‘</a></li>
<li><a href="https://matplotlib.org/tutorials/index.html" target="_blank" rel="external">å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://www.jianshu.com/p/aa4150cf6c7f" target="_blank" rel="external">Matplotlib å…¥é—¨æ•™ç¨‹</a></li>
<li><a href="https://www.jianshu.com/p/aa4150cf6c7f" target="_blank" rel="external">Matplotlib æ•™ç¨‹</a></li>
<li><a href="https://www.tuicool.com/articles/Z7BzY3V" target="_blank" rel="external">å¦‚ä½•ç”¨ Matplotlib ç”» GIF åŠ¨å›¾</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;script type=&quot;text/javascript&quot; src=&quot;http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default&quot;&gt;&lt;/script&gt;

&lt;blockquote&gt;
&lt;p&gt;å†™åœ¨å‰é¢ï¼šä¸ºäº†å¯è§†åŒ–æœºå™¨å­¦ä¹ è¿‡ç¨‹ï¼Œå¹¶ä¸”ä¿å­˜ä¸‹æ¥ï¼Œæ‰€ä»¥æƒ³ç›´æ¥åˆ©ç”¨ \( Matplotlib.animation \) ä¿å­˜åŠ¨å›¾ï¼ŒæœŸé—´å‚è€ƒäº†å¥½å¤šèµ„æ–™ï¼Œè¿‡ç¨‹æ¯”è¾ƒè‰°è¾›ï¼Œæ‰€ä»¥æƒ³è®°å½•ä¸‹æ¥ã€‚å½“ç„¶ï¼Œæ­¤æ–‡è¿˜å‚è€ƒäº†å¥½å¤šç½‘ä¸Šçš„å…¶å®ƒæ–‡ç« ï¼Œå†æ­¤ä¸€å¹¶æ„Ÿè°¢é‚£äº›çƒ­çˆ±åˆ†äº«çš„ \( coder \)ï¼Œå¹¶ä¸”å‚è€ƒèµ„æ–™ä¸­ç»™å‡ºé“¾æ¥ã€‚æ‰€æœ‰ä»£ç æ•´ç†åˆ°&lt;a href=&quot;https://github.com/mk43/python-practice/tree/master/matplotlib&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;GitHub&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="Math" scheme="http://fitzeng.org/tags/Math/"/>
    
      <category term="MachineLearning" scheme="http://fitzeng.org/tags/MachineLearning/"/>
    
      <category term="Python" scheme="http://fitzeng.org/tags/Python/"/>
    
      <category term="NumPy" scheme="http://fitzeng.org/tags/NumPy/"/>
    
      <category term="Matplotlib" scheme="http://fitzeng.org/tags/Matplotlib/"/>
    
  </entry>
  
  <entry>
    <title>Matplotlib åŸºæœ¬æ“ä½œ</title>
    <link href="http://fitzeng.org/2018/02/07/MatplotlibDraw/"/>
    <id>http://fitzeng.org/2018/02/07/MatplotlibDraw/</id>
    <published>2018-02-07T03:27:00.000Z</published>
    <updated>2018-02-13T02:43:09.248Z</updated>
    
    <content type="html"><![CDATA[<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script>

<blockquote>
<p>å†™åœ¨å‰é¢ï¼šè¿™ç¯‡ä¸»è¦ä¸ºäº†è‡ªå·±çš„å­¦ä¹ ï¼Œå…ˆç†ä¸€ä¸‹åŸºç¡€æ¦‚å¿µï¼Œç„¶åè®°å½•ä¸‹æ¥ï¼Œä¸‹æ¬¡ä½¿ç”¨èµ·æ¥å°±æ–¹ä¾¿äº†ã€‚å­¦è¿™ä¸ªçš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†å¯è§†åŒ–æœºå™¨å­¦ä¹ çš„å­¦ä¹ è¿‡ç¨‹ã€‚ç½‘ç»œä¸Šçš„èµ„æ–™å¤ªå¤šäº†ï¼Œæ¯æ¬¡å†™çš„æ—¶å€™å»æŸ¥ç®—èµ·æ¥ä¹Ÿæ˜¯æŒºèŠ±è´¹æ—¶é—´çš„ã€‚æ‰€ä»¥è¿˜æ˜¯èŠ±ç‚¹æ—¶é—´ç›´æ¥æ•´ç†è®°å½•å¥½äº†ã€‚è¿™é‡Œæ¨è<a href="https://morvanzhou.github.io/tutorials/data-manipulation/plt/" target="_blank" rel="external">morvanï¼šmarkdown + è§†é¢‘</a> å’Œ <a href="https://matplotlib.org/tutorials/index.html" target="_blank" rel="external">å®˜æ–¹æ–‡æ¡£</a>ã€‚å½“ç„¶ï¼Œæ­¤æ–‡è¿˜å‚è€ƒäº†å¥½å¤šç½‘ä¸Šçš„å…¶å®ƒæ–‡ç« ï¼Œå†æ­¤ä¸€å¹¶æ„Ÿè°¢ï¼Œå¹¶ä¸”å‚è€ƒèµ„æ–™ä¸­ç»™å‡ºé“¾æ¥ã€‚æ‰€æœ‰ä»£ç æ•´ç†åˆ°<a href="https://github.com/mk43/python-practice/tree/master/matplotlib" target="_blank" rel="external">GitHub</a>ã€‚</p>
</blockquote>
<a id="more"></a>
<h2 id="0-å‰æœŸå‡†å¤‡"><a href="#0-å‰æœŸå‡†å¤‡" class="headerlink" title="0. å‰æœŸå‡†å¤‡"></a>0. å‰æœŸå‡†å¤‡</h2><p>å®‰è£… \( NumPy \) å’Œ \( Matplotlib \)ã€‚å…·ä½“å®‰è£…ç›´æ¥ä¸Šå®˜ç½‘ä¾¿å¯ï¼Œé‡åˆ°ä»€ä¹ˆé—®é¢˜åœ¨ç½‘ä¸ŠåŸºæœ¬å¯ä»¥æœåˆ°ç­”æ¡ˆçš„ï¼Œè¿™é‡Œå°±ä¸ä»‹ç»äº†ã€‚è¿™é‡Œè¦ç®€å•çš„ä½¿ç”¨ \( NumPy \) ç”Ÿæˆä¸€äº›æµ‹è¯•æ•°æ®ï¼Œå¦‚æœå¯¹ \( NumPy \) ä¸ç†Ÿæ‚‰çš„è¯å¯ä»¥å‚è€ƒæˆ‘ä¹‹å‰è®°å½•çš„ <a href="http://fitzeng.org/2018/02/04/NumPyOfficialQuickstartTutorial/">NumPy å®˜æ–¹å¿«é€Ÿå…¥é—¨æ•™ç¨‹(è¯‘)</a>ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">PyCharm: 2017.3.3</div><div class="line">Python: Python 3.6.4 :: Anaconda, Inc.</div></pre></td></tr></table></figure>
<h2 id="1-Matplotlib-å¿«é€Ÿå…¥é—¨"><a href="#1-Matplotlib-å¿«é€Ÿå…¥é—¨" class="headerlink" title="1. Matplotlib å¿«é€Ÿå…¥é—¨"></a>1. Matplotlib å¿«é€Ÿå…¥é—¨</h2><p>ä¸»è¦å†…å®¹æ˜¯æŠŠå›¾ç”»å‡ºæ¥ï¼Œç„¶åè®¤è¯†å›¾ä¸­çš„åŸºæœ¬å…ƒç´ ã€‚</p>
<h3 id="1-1-æ˜¾ç¤ºå›¾åƒ"><a href="#1-1-æ˜¾ç¤ºå›¾åƒ" class="headerlink" title="1.1 æ˜¾ç¤ºå›¾åƒ"></a>1.1 æ˜¾ç¤ºå›¾åƒ</h3><p>ç›´æ¥ä¸Šä»£ç å§ã€‚æ•´ä¸ªè¿‡ç¨‹å°±æ˜¯<code>å¯¼åº“-å‡†å¤‡æ•°æ®-ç»˜åˆ¶-æ˜¾ç¤º</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">import matplotlib.pyplot as plt</div><div class="line">import numpy as np</div><div class="line"></div><div class="line">x = np.linspace(0, 10, 20)</div><div class="line">y = x + 1</div><div class="line"></div><div class="line">plt.plot(x, y)</div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<p><img src="/2018/02/07/MatplotlibDraw/1_1_01.png" alt=""></p>
<p>é‚£ä¹ˆæ˜¾ç¤ºå¤šæ¡çº¿æ€ä¹ˆåŠï¼Ÿ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">x = np.linspace(0, 10, 20)</div><div class="line">y1 = x + 1</div><div class="line">y2 = -x + 1</div><div class="line"></div><div class="line">plt.plot(x, y1)</div><div class="line">plt.plot(x, y2)</div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<p><img src="/2018/02/07/MatplotlibDraw/1_1_02.png" alt=""></p>
<p>çœ‹åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±å¾ˆæ¸…æ¥šäº†ï¼Œ\( plot \) å‡½æ•°å°±æ˜¯æŠŠæ•°æ®ç»˜åˆ¶åœ¨ç”»æ¡†é‡Œã€‚</p>
<h3 id="1-2-è®¤è¯†-figure"><a href="#1-2-è®¤è¯†-figure" class="headerlink" title="1.2 è®¤è¯† figure"></a>1.2 è®¤è¯† figure</h3><p>\( figure \) å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªç”»æ¡†ï¼Œå¾€é‡Œé¢ \( plot \) å›¾å½¢ã€‚æ‰€ä»¥ä»¥ä¸‹ä»£ç ä¼šæ˜¾ç¤ºå‡ºä¸¤ä¸ªçª—ä½“ã€‚ä¸€ä¸ªçª—ä½“æ¯”ä¾‹æ˜¯ \( 9 : 6 \)ã€‚æ›´å¤šå‚æ•°å¯ä»¥å‚è€ƒæºç æ³¨é‡Šï¼Œè®²çš„å¾ˆæ¸…æ¥šã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">x = np.linspace(0, 10, 20)</div><div class="line">y1 = x + 1</div><div class="line">y2 = -x - 10</div><div class="line">plt.figure()</div><div class="line">plt.plot(x, y1)</div><div class="line">plt.figure(figsize=(9, 6))</div><div class="line">plt.plot(x, y2)</div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<p><img src="/2018/02/07/MatplotlibDraw/1_2_01.png" alt=""><br><img src="/2018/02/07/MatplotlibDraw/1_2_02.png" alt=""></p>
<h3 id="1-3-plot-å‚æ•°è®¾ç½®"><a href="#1-3-plot-å‚æ•°è®¾ç½®" class="headerlink" title="1.3 plot å‚æ•°è®¾ç½®"></a>1.3 plot å‚æ•°è®¾ç½®</h3><p>å…ˆçœ‹ä¸‹ä¸€äº›æ•ˆæœå§ã€‚<br><img src="/2018/02/07/MatplotlibDraw/1_3_01.png" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">x = np.linspace(0, 10, 20)</div><div class="line">y1 = x + 1</div><div class="line">y2 = x + 2</div><div class="line">y3 = x + 3</div><div class="line">y4 = x + 4</div><div class="line">y5 = x + 5</div><div class="line">y6 = x + 6</div><div class="line">y7 = x + 7</div><div class="line"></div><div class="line">plt.figure()</div><div class="line">plt.plot(x, y1, &apos;bo&apos;)</div><div class="line">plt.plot(x, y2, &apos;r-&apos;)</div><div class="line">plt.plot(x, y3, &apos;g--&apos;)</div><div class="line">plt.plot(x, y4, &apos;y.-&apos;)</div><div class="line">plt.plot(x, y5, &apos;m^&apos;, x, y6, &apos;m-&apos;)</div><div class="line">plt.plot(x, y7, &apos;c-&apos;, linewidth=6)</div><div class="line"></div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<p>è¿™é‡Œå¯ä¾›å®éªŒçš„ä¸œè¥¿å®åœ¨å¤ªå¤šï¼Œåªè¦çŸ¥é“è¿™ä¸ªå‡½æ•°å¤§æ¦‚å¯ä»¥ç»™æˆ‘æä¾›ä»€ä¹ˆæ•ˆæœå°±å¯ä»¥äº†ï¼Œå…¶å®ƒçš„äº¤ç»™<a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.plot.html#matplotlib.pyplot.plot" target="_blank" rel="external">API: matplotlib.pyplot.plot</a></p>
<h3 id="1-4-åæ ‡è½´è®¾ç½®"><a href="#1-4-åæ ‡è½´è®¾ç½®" class="headerlink" title="1.4 åæ ‡è½´è®¾ç½®"></a>1.4 åæ ‡è½´è®¾ç½®</h3><p>è®¾ç½®èŒƒå›´å’Œæ ‡ç­¾</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">x = np.linspace(-10, 10, 40)</div><div class="line">y1 = 10 * x + 50</div><div class="line">y2 = x**2</div><div class="line"></div><div class="line">plt.figure()</div><div class="line">plt.plot(x, y1, &apos;b-&apos;)</div><div class="line">plt.plot(x, y2, &apos;b--&apos;)</div><div class="line">plt.xlim((-20, 20))</div><div class="line">plt.ylim((-60, 160))</div><div class="line">plt.xlabel(&apos;I am x&apos;)</div><div class="line">plt.ylabel(&apos;I am y&apos;)</div><div class="line"></div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<p><img src="/2018/02/07/MatplotlibDraw/1_4_01.png" alt=""></p>
<p>è®¾ç½®åˆ»åº¦</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">plt.xticks(np.linspace(-20, 20, 5))</div><div class="line">plt.yticks([0, 50, 100], [r&apos;$bad$&apos;, r&apos;$normal$&apos;, r&apos;$good$&apos;])</div></pre></td></tr></table></figure>
<p><img src="/2018/02/07/MatplotlibDraw/1_4_02.png" alt=""></p>
<p>è®¾ç½®è¾¹æ¡†<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">boderparameter = plt.gca()</div><div class="line">boderparameter.spines[&apos;right&apos;].set_color(&apos;none&apos;)</div><div class="line">boderparameter.spines[&apos;top&apos;].set_color(&apos;none&apos;)</div></pre></td></tr></table></figure></p>
<p><img src="/2018/02/07/MatplotlibDraw/1_4_03.png" alt=""></p>
<p>è®¾ç½®åˆ»åº¦</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">boderparameter.xaxis.set_ticks_position(&apos;top&apos;)</div></pre></td></tr></table></figure>
<p><img src="/2018/02/07/MatplotlibDraw/1_4_04.png" alt=""></p>
<p>é€šè¿‡è¾¹æ¡†å‚æ•°è®¾ç½®å±æ€§</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">boderparameter.spines[&apos;left&apos;].set_position((&apos;data&apos;,0))</div><div class="line">boderparameter.spines[&apos;bottom&apos;].set_position((&apos;data&apos;,0))</div><div class="line">boderparameter.xaxis.set_ticks_position(&apos;bottom&apos;)</div><div class="line">boderparameter.set_xlabel(&apos;&apos;)</div><div class="line">boderparameter.set_ylabel(&apos;&apos;)</div></pre></td></tr></table></figure>
<p><img src="/2018/02/07/MatplotlibDraw/1_4_05.png" alt=""></p>
<h3 id="1-5-å›¾ä¾‹è®¾ç½®"><a href="#1-5-å›¾ä¾‹è®¾ç½®" class="headerlink" title="1.5 å›¾ä¾‹è®¾ç½®"></a>1.5 å›¾ä¾‹è®¾ç½®</h3><p>è¿™é‡Œå¾ˆç®€å•ï¼Œè®¾ç½® \( label \) å’Œ ä½ç½®å°±å¯ä»¥äº†ã€‚å…¶å®ƒå¯ä»¥å‚è€ƒæ–‡æ¡£ã€‚éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ \( l1\ l2 \)åé¢è¦åŠ ä¸€ä¸ª <code>,</code>ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">import matplotlib.pyplot as plt</div><div class="line">import numpy as np</div><div class="line"></div><div class="line">x = np.linspace(-10, 10, 40)</div><div class="line">y1 = 10 * x + 50</div><div class="line">y2 = x**2</div><div class="line"></div><div class="line">plt.figure()</div><div class="line">l1, = plt.plot(x, y1, &apos;b-&apos;)</div><div class="line">l2, = plt.plot(x, y2, &apos;b--&apos;)</div><div class="line"></div><div class="line">plt.legend(handles=[l1, l2], labels=[r&apos;$line\ 1$&apos;, r&apos;$line\ 2$&apos;],  loc=&apos;best&apos;)</div><div class="line"></div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<p><img src="/2018/02/07/MatplotlibDraw/1_5_01.png" alt=""></p>
<h3 id="1-6-æ·»åŠ æ³¨é‡Š"><a href="#1-6-æ·»åŠ æ³¨é‡Š" class="headerlink" title="1.6 æ·»åŠ æ³¨é‡Š"></a>1.6 æ·»åŠ æ³¨é‡Š</h3><p>ç›´æ¥çœ‹ä»£ç ï¼Œå°±ä¸ä¸€ä¸€ä»‹ç»äº†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">import matplotlib.pyplot as plt</div><div class="line">import numpy as np</div><div class="line"></div><div class="line">x = np.linspace(-10, 10, 40)</div><div class="line">y = x + 5</div><div class="line"></div><div class="line">plt.figure()</div><div class="line">plt.plot(x, y, &apos;b-&apos;)</div><div class="line"></div><div class="line">plt.xticks(np.linspace(-10, 10, 6))</div><div class="line">plt.yticks(np.linspace(-6, 14, 6))</div><div class="line"></div><div class="line">ax = plt.gca()</div><div class="line">ax.spines[&apos;right&apos;].set_color(&apos;none&apos;)</div><div class="line">ax.spines[&apos;top&apos;].set_color(&apos;none&apos;)</div><div class="line"></div><div class="line">ax.xaxis.set_ticks_position(&apos;bottom&apos;)</div><div class="line">ax.spines[&apos;bottom&apos;].set_position(&apos;zero&apos;)</div><div class="line"></div><div class="line">ax.yaxis.set_ticks_position(&apos;left&apos;)</div><div class="line">ax.spines[&apos;left&apos;].set_position(&apos;zero&apos;)</div><div class="line"></div><div class="line">x0 = 4</div><div class="line">y0 = x0 + 5</div><div class="line">plt.plot([x0, x0], [0, y0], &apos;k--&apos;, linewidth=2.5)</div><div class="line">plt.scatter([x0], [y0], color=&apos;k&apos;)</div><div class="line"></div><div class="line">plt.annotate(r&apos;$(%s,\ %s)$&apos; % (x0, y0), xy=(x0, y0),</div><div class="line">             xycoords=&apos;data&apos;, xytext=(+30, -30),</div><div class="line">             textcoords=&apos;offset points&apos;, fontsize=16,</div><div class="line">             arrowprops=dict(arrowstyle=&apos;-&gt;&apos;, connectionstyle=&quot;arc3,rad=.1&quot;))</div><div class="line"></div><div class="line">plt.text(2, 14, r&apos;$y\ =\ x\ +\ 5$&apos;, fontdict=&#123;&apos;size&apos;: 16, &apos;color&apos;: &apos;r&apos;&#125;)</div><div class="line"></div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<p>ä¸»è¦æ˜¯è§‚å¯Ÿå€’æ•°ç¬¬äºŒä¸‰è¡Œä»£ç è¿›è¡Œè®¾ç½®ã€‚</p>
<p><img src="/2018/02/07/MatplotlibDraw/1_6_01.png" alt=""></p>
<h3 id="1-7-æ•£ç‚¹å›¾"><a href="#1-7-æ•£ç‚¹å›¾" class="headerlink" title="1.7 æ•£ç‚¹å›¾"></a>1.7 æ•£ç‚¹å›¾</h3><p>æ•£ç‚¹å›¾åœ¨ä¸Šé¢æ ‡ç‚¹çš„æ—¶å€™å°±å·²ç»ç”¨è¿‡äº†ï¼Œè¿™é‡Œå›é¡¾ä¸€ä¸‹ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">import matplotlib.pyplot as plt</div><div class="line">import numpy as np</div><div class="line"></div><div class="line">n = 1024</div><div class="line">X = np.random.normal(0, 1, n)</div><div class="line">Y = np.random.normal(0, 1, n)</div><div class="line">T = np.arctan2(Y, X)</div><div class="line"></div><div class="line">plt.scatter(X, Y, s=50, c=T, alpha=.5)</div><div class="line"></div><div class="line">plt.xlim(-2.5, 2.5)</div><div class="line">plt.xticks(())</div><div class="line">plt.ylim(-2.5, 2.5)</div><div class="line">plt.yticks(())</div><div class="line"></div><div class="line">plt.show()</div></pre></td></tr></table></figure></p>
<p><img src="/2018/02/07/MatplotlibDraw/1_7_01.png" alt=""></p>
<h3 id="1-8-æŸ±çŠ¶å›¾"><a href="#1-8-æŸ±çŠ¶å›¾" class="headerlink" title="1.8 æŸ±çŠ¶å›¾"></a>1.8 æŸ±çŠ¶å›¾</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">import matplotlib.pyplot as plt</div><div class="line">import numpy as np</div><div class="line"></div><div class="line">n = 12</div><div class="line">X = np.arange(n)</div><div class="line">Y1 = np.random.uniform(0.1, 1.0, n)</div><div class="line">Y2 = np.random.uniform(0.1, 1.0, n)</div><div class="line"></div><div class="line">plt.bar(X, +Y1)</div><div class="line">plt.bar(X, -Y2)</div><div class="line"></div><div class="line">plt.xlim(-.5, n)</div><div class="line">plt.xticks(())</div><div class="line">plt.ylim(-1.25, 1.25)</div><div class="line">plt.yticks(())</div><div class="line"></div><div class="line">for x, y in zip(X, Y1):</div><div class="line">    plt.text(x, y + 0.02, &apos;%.2f&apos; % y, ha=&apos;center&apos;, va=&apos;bottom&apos;)</div><div class="line"></div><div class="line">for x, y in zip(X, Y2):</div><div class="line">    plt.text(x, -y - 0.02, &apos;%.2f&apos; % y, ha=&apos;center&apos;, va=&apos;top&apos;)</div><div class="line"></div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<p><img src="/2018/02/07/MatplotlibDraw/1_8_01.png" alt=""></p>
<h3 id="1-9-é¥¼çŠ¶å›¾"><a href="#1-9-é¥¼çŠ¶å›¾" class="headerlink" title="1.9 é¥¼çŠ¶å›¾"></a>1.9 é¥¼çŠ¶å›¾</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">import matplotlib.pyplot as plt</div><div class="line"></div><div class="line">labels = &apos;Frogs&apos;, &apos;Hogs&apos;, &apos;Dogs&apos;, &apos;Logs&apos;</div><div class="line">sizes = [15, 30, 45, 10]</div><div class="line">explode = (0, 0.1, 0, 0)</div><div class="line">colors = [&apos;y&apos;, &apos;g&apos;, &apos;c&apos;, &apos;m&apos;]</div><div class="line"></div><div class="line">fig1, ax1 = plt.subplots()</div><div class="line">ax1.pie(sizes, colors=colors, explode=explode, labels=labels, autopct=&apos;%1.f%%&apos;, shadow=True, startangle=90)</div><div class="line">ax1.axis(&apos;equal&apos;)  # Equal aspect ratio ensures that pie is drawn as a circle.</div><div class="line"></div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<p><img src="/2018/02/07/MatplotlibDraw/1_9_01.png" alt=""></p>
<h3 id="1-10-ç­‰é«˜çº¿"><a href="#1-10-ç­‰é«˜çº¿" class="headerlink" title="1.10 ç­‰é«˜çº¿"></a>1.10 ç­‰é«˜çº¿</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">import matplotlib.pyplot as plt</div><div class="line">import numpy as np</div><div class="line"></div><div class="line"></div><div class="line">def f(x, y):</div><div class="line">    return (1 - x / 2 + x ** 5 + y ** 3) * np.exp(-x ** 2 - y ** 2)</div><div class="line"></div><div class="line"></div><div class="line">n = 256</div><div class="line">x = np.linspace(-3, 3, n)</div><div class="line">y = np.linspace(-3, 3, n)</div><div class="line">X, Y = np.meshgrid(x, y)</div><div class="line"></div><div class="line">plt.contourf(X, Y, f(X, Y), 12, alpha=.9, cmap=plt.cm.coolwarm)</div><div class="line"></div><div class="line">C = plt.contour(X, Y, f(X, Y), 12, colors=&apos;black&apos;)</div><div class="line"></div><div class="line">plt.clabel(C, inline=True, fontsize=10)</div><div class="line">plt.xticks(())</div><div class="line">plt.yticks(())</div><div class="line"></div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<p><img src="/2018/02/07/MatplotlibDraw/1_10_01.png" alt=""></p>
<h3 id="1-11-å›¾åƒ"><a href="#1-11-å›¾åƒ" class="headerlink" title="1.11 å›¾åƒ"></a>1.11 å›¾åƒ</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">import matplotlib.pyplot as plt</div><div class="line">import numpy as np</div><div class="line"></div><div class="line">a = np.random.normal(2, 1, 16).reshape(4, 4)</div><div class="line"></div><div class="line">plt.imshow(a, interpolation=&apos;nearest&apos;, cmap=&apos;coolwarm&apos;, origin=&apos;lower&apos;)</div><div class="line"></div><div class="line">plt.colorbar(shrink=.98)</div><div class="line"></div><div class="line">plt.xticks(())</div><div class="line">plt.yticks(())</div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<p><img src="/2018/02/07/MatplotlibDraw/1_11_01.png" alt=""></p>
<h3 id="1-12-3D"><a href="#1-12-3D" class="headerlink" title="1.12 3D"></a>1.12 3D</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">import numpy as np</div><div class="line">import matplotlib.pyplot as plt</div><div class="line">from mpl_toolkits.mplot3d import Axes3D</div><div class="line"></div><div class="line">fig = plt.figure()</div><div class="line">ax = Axes3D(fig)</div><div class="line"></div><div class="line">X = np.arange(-4, 4, 0.25)</div><div class="line">Y = np.arange(-4, 4, 0.25)</div><div class="line">X, Y = np.meshgrid(X, Y)</div><div class="line">R = np.sqrt(X ** 2 + Y ** 2)</div><div class="line">Z = np.sin(R)</div><div class="line"></div><div class="line">ax.plot_surface(X, Y, Z, rstride=1, cstride=1, cmap=plt.get_cmap(&apos;rainbow&apos;))</div><div class="line"></div><div class="line">ax.contourf(X, Y, Z, zdir=&apos;x&apos;, offset=-5, cmap=plt.get_cmap(&apos;rainbow&apos;))</div><div class="line"></div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<p><img src="/2018/02/07/MatplotlibDraw/1_12_01.png" alt=""></p>
<h3 id="1-13-å­å›¾"><a href="#1-13-å­å›¾" class="headerlink" title="1.13 å­å›¾"></a>1.13 å­å›¾</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">import matplotlib.pyplot as plt</div><div class="line"></div><div class="line"># example 1:</div><div class="line">###############################</div><div class="line">plt.figure(figsize=(6, 4))</div><div class="line"># plt.subplot(n_rows, n_cols, plot_num)</div><div class="line">plt.subplot(2, 2, 1)</div><div class="line">plt.plot([0, 1], [0, 1])</div><div class="line"></div><div class="line">plt.subplot(222)</div><div class="line">plt.plot([0, 1], [0, 2])</div><div class="line"></div><div class="line">plt.subplot(223)</div><div class="line">plt.plot([0, 1], [0, 3])</div><div class="line"></div><div class="line">plt.subplot(224)</div><div class="line">plt.plot([0, 1], [0, 4])</div><div class="line"></div><div class="line">plt.tight_layout()</div><div class="line"></div><div class="line"># example 2:</div><div class="line">###############################</div><div class="line">plt.figure(figsize=(6, 4))</div><div class="line"># plt.subplot(n_rows, n_cols, plot_num)</div><div class="line">plt.subplot(2, 1, 1)</div><div class="line"># figure splits into 2 rows, 1 col, plot to the 1st sub-fig</div><div class="line">plt.plot([0, 1], [0, 1])</div><div class="line"></div><div class="line">plt.subplot(234)</div><div class="line"># figure splits into 2 rows, 3 col, plot to the 4th sub-fig</div><div class="line">plt.plot([0, 1], [0, 2])</div><div class="line"></div><div class="line">plt.subplot(235)</div><div class="line"># figure splits into 2 rows, 3 col, plot to the 5th sub-fig</div><div class="line">plt.plot([0, 1], [0, 3])</div><div class="line"></div><div class="line">plt.subplot(236)</div><div class="line"># figure splits into 2 rows, 3 col, plot to the 6th sub-fig</div><div class="line">plt.plot([0, 1], [0, 4])</div><div class="line"></div><div class="line"></div><div class="line">plt.tight_layout()</div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<p><img src="/2018/02/07/MatplotlibDraw/1_13_01.png" alt=""><br><img src="/2018/02/07/MatplotlibDraw/1_13_02.png" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">import matplotlib.pyplot as plt</div><div class="line">import matplotlib.gridspec as gridspec</div><div class="line"></div><div class="line"># method 1: subplot2grid</div><div class="line">##########################</div><div class="line">plt.figure()</div><div class="line">ax1 = plt.subplot2grid((3, 3), (0, 0), colspan=3)  # stands for axes</div><div class="line">ax1.plot([1, 2], [1, 2])</div><div class="line">ax1.set_title(&apos;ax1_title&apos;)</div><div class="line">ax2 = plt.subplot2grid((3, 3), (1, 0), colspan=2)</div><div class="line">ax3 = plt.subplot2grid((3, 3), (1, 2), rowspan=2)</div><div class="line">ax4 = plt.subplot2grid((3, 3), (2, 0))</div><div class="line">ax4.scatter([1, 2], [2, 2])</div><div class="line">ax4.set_xlabel(&apos;ax4_x&apos;)</div><div class="line">ax4.set_ylabel(&apos;ax4_y&apos;)</div><div class="line">ax5 = plt.subplot2grid((3, 3), (2, 1))</div><div class="line"></div><div class="line"># method 2: gridspec</div><div class="line">#########################</div><div class="line">plt.figure()</div><div class="line">gs = gridspec.GridSpec(3, 3)</div><div class="line"># use index from 0</div><div class="line">ax6 = plt.subplot(gs[0, :])</div><div class="line">ax7 = plt.subplot(gs[1, :2])</div><div class="line">ax8 = plt.subplot(gs[1:, 2])</div><div class="line">ax9 = plt.subplot(gs[-1, 0])</div><div class="line">ax10 = plt.subplot(gs[-1, -2])</div><div class="line"></div><div class="line"># method 3: easy to define structure</div><div class="line">####################################</div><div class="line">f, ((ax11, ax12), (ax13, ax14)) = plt.subplots(2, 2, sharex=True, sharey=True)</div><div class="line">ax11.scatter([1,2], [1,2])</div><div class="line"></div><div class="line">plt.tight_layout()</div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<p><img src="/2018/02/07/MatplotlibDraw/1_13_03.png" alt=""><br><img src="/2018/02/07/MatplotlibDraw/1_13_04.png" alt=""><br><img src="/2018/02/07/MatplotlibDraw/1_13_05.png" alt=""></p>
<h3 id="1-14-å›¾ä¸­å›¾"><a href="#1-14-å›¾ä¸­å›¾" class="headerlink" title="1.14 å›¾ä¸­å›¾"></a>1.14 å›¾ä¸­å›¾</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">import matplotlib.pyplot as plt</div><div class="line"></div><div class="line">fig = plt.figure()</div><div class="line">x = [1, 2, 3, 4, 5, 6, 7]</div><div class="line">y = [1, 3, 4, 2, 5, 8, 6]</div><div class="line"></div><div class="line"># below are all percentage</div><div class="line">left, bottom, width, height = 0.1, 0.1, 0.8, 0.8</div><div class="line">ax1 = fig.add_axes([left, bottom, width, height])  # main axes</div><div class="line">ax1.plot(x, y, &apos;r&apos;)</div><div class="line">ax1.set_xlabel(&apos;x&apos;)</div><div class="line">ax1.set_ylabel(&apos;y&apos;)</div><div class="line">ax1.set_title(&apos;title&apos;)</div><div class="line"></div><div class="line">ax2 = fig.add_axes([0.2, 0.6, 0.25, 0.25])  # inside axes</div><div class="line">ax2.plot(y, x, &apos;b&apos;)</div><div class="line">ax2.set_xlabel(&apos;x&apos;)</div><div class="line">ax2.set_ylabel(&apos;y&apos;)</div><div class="line">ax2.set_title(&apos;title inside 1&apos;)</div><div class="line"></div><div class="line"></div><div class="line"># different method to add axes</div><div class="line">####################################</div><div class="line">plt.axes([0.6, 0.2, 0.25, 0.25])</div><div class="line">plt.plot(y[::-1], x, &apos;g&apos;)</div><div class="line">plt.xlabel(&apos;x&apos;)</div><div class="line">plt.ylabel(&apos;y&apos;)</div><div class="line">plt.title(&apos;title inside 2&apos;)</div><div class="line"></div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<p><img src="/2018/02/07/MatplotlibDraw/1_14_01.png" alt=""></p>
<h3 id="1-15-ç¬¬äºŒ-Y-åæ ‡"><a href="#1-15-ç¬¬äºŒ-Y-åæ ‡" class="headerlink" title="1.15 ç¬¬äºŒ Y åæ ‡"></a>1.15 ç¬¬äºŒ Y åæ ‡</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">import matplotlib.pyplot as plt</div><div class="line">import numpy as np</div><div class="line"></div><div class="line">x = np.arange(0, 10, 0.1)</div><div class="line">y1 = 0.05 * x**2</div><div class="line">y2 = -1 *y1</div><div class="line"></div><div class="line">fig, ax1 = plt.subplots()</div><div class="line"></div><div class="line">ax2 = ax1.twinx()    # mirror the ax1</div><div class="line">ax1.plot(x, y1, &apos;g-&apos;)</div><div class="line">ax2.plot(x, y2, &apos;b-&apos;)</div><div class="line"></div><div class="line">ax1.set_xlabel(&apos;X data&apos;)</div><div class="line">ax1.set_ylabel(&apos;Y1 data&apos;, color=&apos;g&apos;)</div><div class="line">ax2.set_ylabel(&apos;Y2 data&apos;, color=&apos;b&apos;)</div><div class="line"></div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<p><img src="/2018/02/07/MatplotlibDraw/1_15_01.png" alt=""></p>
<h3 id="1-16-åŠ¨ç”»"><a href="#1-16-åŠ¨ç”»" class="headerlink" title="1.16 åŠ¨ç”»"></a>1.16 åŠ¨ç”»</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">import numpy as np</div><div class="line">from matplotlib import pyplot as plt</div><div class="line">from matplotlib import animation</div><div class="line"></div><div class="line">fig, ax = plt.subplots()</div><div class="line"></div><div class="line">x = np.arange(0, 2*np.pi, 0.01)</div><div class="line">line, = ax.plot(x, np.sin(x))</div><div class="line"></div><div class="line"></div><div class="line">def animate(i):</div><div class="line">    line.set_ydata(np.sin(x + i/10.0))  # update the data</div><div class="line">    return line,</div><div class="line"></div><div class="line"></div><div class="line"># Init only required for blitting to give a clean slate.</div><div class="line">def init():</div><div class="line">    line.set_ydata(np.sin(x))</div><div class="line">    return line,</div><div class="line"></div><div class="line"># call the animator.  blit=True means only re-draw the parts that have changed.</div><div class="line"># blit=True dose not work on Mac, set blit=False</div><div class="line"># interval= update frequency</div><div class="line">ani = animation.FuncAnimation(fig=fig, func=animate, frames=100, init_func=init,</div><div class="line">                              interval=20, blit=False)</div><div class="line"></div><div class="line"># save the animation as an mp4.  This requires ffmpeg or mencoder to be</div><div class="line"># installed.  The extra_args ensure that the x264 codec is used, so that</div><div class="line"># the video can be embedded in html5.  You may need to adjust this for</div><div class="line"># your system: for more information, see</div><div class="line"># http://matplotlib.sourceforge.net/api/animation_api.html</div><div class="line"># anim.save(&apos;basic_animation.mp4&apos;, fps=30, extra_args=[&apos;-vcodec&apos;, &apos;libx264&apos;])</div><div class="line"></div><div class="line">ani.save(&apos;myanimation.gif&apos;, writer=&apos;imagemagick&apos;)</div><div class="line"></div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<p><img src="/2018/02/07/MatplotlibDraw/1_16_01.gif" alt=""></p>
<h2 id="2-æ€»ç»“"><a href="#2-æ€»ç»“" class="headerlink" title="2. æ€»ç»“"></a>2. æ€»ç»“</h2><p>èŠ±æ—¶é—´æŠŠå°ç»†èŠ‚ææ‡‚å°±æ˜¯èŠ‚çœæ—¶é—´ã€‚</p>
<h2 id="3-å‚è€ƒèµ„æ–™"><a href="#3-å‚è€ƒèµ„æ–™" class="headerlink" title="3. å‚è€ƒèµ„æ–™"></a>3. å‚è€ƒèµ„æ–™</h2><ul>
<li><a href="https://morvanzhou.github.io/tutorials/data-manipulation/plt/" target="_blank" rel="external">morvanï¼šmarkdown + è§†é¢‘</a></li>
<li><a href="https://matplotlib.org/tutorials/index.html" target="_blank" rel="external">å®˜æ–¹æ–‡æ¡£</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;script type=&quot;text/javascript&quot; src=&quot;http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default&quot;&gt;&lt;/script&gt;

&lt;blockquote&gt;
&lt;p&gt;å†™åœ¨å‰é¢ï¼šè¿™ç¯‡ä¸»è¦ä¸ºäº†è‡ªå·±çš„å­¦ä¹ ï¼Œå…ˆç†ä¸€ä¸‹åŸºç¡€æ¦‚å¿µï¼Œç„¶åè®°å½•ä¸‹æ¥ï¼Œä¸‹æ¬¡ä½¿ç”¨èµ·æ¥å°±æ–¹ä¾¿äº†ã€‚å­¦è¿™ä¸ªçš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†å¯è§†åŒ–æœºå™¨å­¦ä¹ çš„å­¦ä¹ è¿‡ç¨‹ã€‚ç½‘ç»œä¸Šçš„èµ„æ–™å¤ªå¤šäº†ï¼Œæ¯æ¬¡å†™çš„æ—¶å€™å»æŸ¥ç®—èµ·æ¥ä¹Ÿæ˜¯æŒºèŠ±è´¹æ—¶é—´çš„ã€‚æ‰€ä»¥è¿˜æ˜¯èŠ±ç‚¹æ—¶é—´ç›´æ¥æ•´ç†è®°å½•å¥½äº†ã€‚è¿™é‡Œæ¨è&lt;a href=&quot;https://morvanzhou.github.io/tutorials/data-manipulation/plt/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;morvanï¼šmarkdown + è§†é¢‘&lt;/a&gt; å’Œ &lt;a href=&quot;https://matplotlib.org/tutorials/index.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å®˜æ–¹æ–‡æ¡£&lt;/a&gt;ã€‚å½“ç„¶ï¼Œæ­¤æ–‡è¿˜å‚è€ƒäº†å¥½å¤šç½‘ä¸Šçš„å…¶å®ƒæ–‡ç« ï¼Œå†æ­¤ä¸€å¹¶æ„Ÿè°¢ï¼Œå¹¶ä¸”å‚è€ƒèµ„æ–™ä¸­ç»™å‡ºé“¾æ¥ã€‚æ‰€æœ‰ä»£ç æ•´ç†åˆ°&lt;a href=&quot;https://github.com/mk43/python-practice/tree/master/matplotlib&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;GitHub&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="Math" scheme="http://fitzeng.org/tags/Math/"/>
    
      <category term="MachineLearning" scheme="http://fitzeng.org/tags/MachineLearning/"/>
    
      <category term="Python" scheme="http://fitzeng.org/tags/Python/"/>
    
      <category term="NumPy" scheme="http://fitzeng.org/tags/NumPy/"/>
    
      <category term="Matplotlib" scheme="http://fitzeng.org/tags/Matplotlib/"/>
    
  </entry>
  
  <entry>
    <title>NumPy å®˜æ–¹å¿«é€Ÿå…¥é—¨æ•™ç¨‹(è¯‘)</title>
    <link href="http://fitzeng.org/2018/02/04/NumPyOfficialQuickstartTutorial/"/>
    <id>http://fitzeng.org/2018/02/04/NumPyOfficialQuickstartTutorial/</id>
    <published>2018-02-04T03:27:00.000Z</published>
    <updated>2018-02-04T09:26:08.312Z</updated>
    
    <content type="html"><![CDATA[<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script>

<blockquote>
<p>å†™åœ¨å‰é¢ï¼šæœ¬æ¥æ˜¯å­¦ä¹ ä¸‹ \( NumPy \)ï¼Œçœ‹åˆ°å®˜ç½‘çš„<a href="https://docs.scipy.org/doc/numpy-dev/user/quickstart.html" target="_blank" rel="external">å…¥é—¨æ•™ç¨‹</a>æƒ³è·Ÿç€å®éªŒä¸€ä¸‹ï¼Œæ€•ä¸å¸¸ç”¨ï¼Œè€Œæˆ‘è¿™äººå¥å¿˜ï¼Œæ‰€ä»¥è®°å½•ä¸‹æ¥ã€‚ç´¢æ€§å°±ç…§ç€ç¿»è¯‘ä¸€ä¸‹ï¼ŒåŒæ ·å¯ä»¥æå‡è‡ªå·±çš„é˜…è¯»å’Œå†™ä½œèƒ½åŠ›ï¼Œéœ€è¦çš„å¯ä»¥å­˜ä¸€ä¸‹ã€‚å½“ç„¶ï¼Œæœ¬äººæ°´å¹³æœ‰é™ï¼Œæœ‰é”™è¯¯çš„åœ°æ–¹æ¬¢è¿å¤§å®¶æŒ‡æ­£ã€‚è¿™é‡Œæ˜¯åŸºäº <a href="https://docs.scipy.org/doc/numpy-dev/user/quickstart.html" target="_blank" rel="external">\( NumPy\ v1.13.dev0\ Manual \)</a> ç¿»è¯‘çš„ã€‚æˆªæ­¢æ—¶é—´\( 2018/02/04 \)</p>
</blockquote>
<a id="more"></a>
<h2 id="å¿«é€Ÿå…¥é—¨æ•™ç¨‹"><a href="#å¿«é€Ÿå…¥é—¨æ•™ç¨‹" class="headerlink" title="å¿«é€Ÿå…¥é—¨æ•™ç¨‹"></a>å¿«é€Ÿå…¥é—¨æ•™ç¨‹</h2><h3 id="1-å‡†å¤‡å·¥ä½œ"><a href="#1-å‡†å¤‡å·¥ä½œ" class="headerlink" title="1 å‡†å¤‡å·¥ä½œ"></a>1 å‡†å¤‡å·¥ä½œ</h3><p>åœ¨ä½ æµè§ˆè¿™ä¸ªæŒ‡å¯¼ä¹‹å‰ï¼Œä½ åº”è¯¥æ‡‚ä¸€ç‚¹ \( Python \) ã€‚å¦‚æœä½ æƒ³å›é¡¾ä¸€ä¸‹å¯ä»¥çœ‹<a href="https://docs.python.org/3/tutorial/" target="_blank" rel="external">Python tutorial</a>ã€‚å¦‚æœä½ æƒ³æŠŠæ•™ç¨‹çš„ä»£ç è·‘èµ·æ¥ï¼Œå¿…é¡»å®‰è£…ä¸€äº›è½¯ä»¶ï¼Œè¯·å‚è€ƒ<a href="http://scipy.org/install.html" target="_blank" rel="external">http://scipy.org/install.html</a></p>
<h3 id="2-åŸºç¡€çŸ¥è¯†"><a href="#2-åŸºç¡€çŸ¥è¯†" class="headerlink" title="2 åŸºç¡€çŸ¥è¯†"></a>2 åŸºç¡€çŸ¥è¯†</h3><p>\( NumPy \) çš„ä¸»è¦æ“ä½œå¯¹è±¡æ˜¯åŒç±»å‹çš„å¤šç»´æ•°ç»„ã€‚å®ƒæ˜¯ä¸€ä¸ªç”±æ­£æ•´æ•°å…ƒç»„ç´¢å¼•ï¼Œå…ƒç´ ç±»å‹ç›¸åŒçš„è¡¨ï¼ˆé€šå¸¸å…ƒç´ æ˜¯æ•°å­—ï¼‰ã€‚åœ¨ \( NumPy \) ç»´åº¦è¢«ç§°ä¸º <code>axes</code>, <code>axes</code> çš„æ•°é‡ç§°ä¸º <code>rank</code>ã€‚</p>
<p>ä¾‹å¦‚ï¼Œåœ¨ \( 3D \) ç©ºé—´çš„ä¸€ä¸ªç‚¹ \( [1, 2, 1] \) æ˜¯ä¸€ä¸ª <code>rank = 1</code> çš„æ•°ç»„ï¼Œå› ä¸ºå®ƒåªæœ‰ä¸€ä¸ª <code>axes</code>ã€‚è¿™ä¸ª <code>axes</code> çš„é•¿åº¦æ˜¯ \( 3 \)ã€‚åœ¨ä¸‹é¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ•°ç»„ <code>rank = 2</code> ï¼ˆå®ƒæ˜¯ \( 2  \)ç»´çš„ï¼‰ã€‚ç¬¬ä¸€ç»´ï¼ˆ<code>axes</code>ï¼‰é•¿åº¦æ˜¯ \( 2 \)ï¼Œç¬¬äºŒä½é•¿åº¦æ˜¯ \( 3 \)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[[ 1., 0., 0. ],</div><div class="line"> [ 0., 1., 2. ]]</div></pre></td></tr></table></figure>
<p>\( NumPy \) çš„æ•°ç»„ç±»æ˜¯ <code>ndarray</code>ã€‚ä¹Ÿå¯ä»¥å«åš <code>array</code>ã€‚è¯´åˆ°è¿™é‡Œï¼Œ<code>numpy.array</code> å’Œæ ‡å‡† ( Python \) åº“ä¸­çš„ <code>array.array</code> æ˜¯ä¸ä¸€æ ·çš„ï¼Œå®ƒåªèƒ½å¤„ç†ä¸€ç»´çš„æ•°ç»„å’Œæä¾›æ›´å°‘çš„åŠŸèƒ½ã€‚<code>ndarray</code> å¯¹è±¡çš„ä¸€äº›é‡è¦å±æ€§å¦‚ä¸‹ï¼š</p>
<h5 id="ndarray-ndim"><a href="#ndarray-ndim" class="headerlink" title="ndarray.ndim"></a>ndarray.ndim</h5><blockquote>
<p>æ•°ç»„çš„ <code>axes</code> ï¼ˆç»´æ•°ï¼‰æ•°å€¼å¤§å°ã€‚åœ¨ \( Python \) ä¸­ç»´æ•°çš„å¤§å°å¯ä»¥å‚è€ƒ <code>rank</code></p>
</blockquote>
<h5 id="ndarray-shape"><a href="#ndarray-shape" class="headerlink" title="ndarray.shape"></a>ndarray.shape</h5><blockquote>
<p>æ•°ç»„çš„ç»´æ•°ï¼Œè¿™æ˜¯ç”±æ¯ä¸ªç»´åº¦çš„å¤§å°ç»„æˆçš„ä¸€ä¸ªå…ƒç»„ã€‚å¯¹äºä¸€ä¸ª \( n \) è¡Œ \( m \) åˆ—çš„çŸ©é˜µã€‚<code>shape</code> æ˜¯ <code>(n, m)</code>ã€‚ç”± <code>shape</code> å…ƒç»„çš„é•¿åº¦å¾—å‡º <code>rank</code> æˆ–è€…ç»´æ•° <code>ndim</code>ã€‚</p>
</blockquote>
<h5 id="ndarray-size"><a href="#ndarray-size" class="headerlink" title="ndarray.size"></a>ndarray.size</h5><blockquote>
<p>æ•°ç»„å…ƒç´ çš„ä¸ªæ•°æ€»å’Œï¼Œè¿™ç­‰äº <code>shape</code> å…ƒç»„æ•°å­—çš„ä¹˜ç§¯ã€‚</p>
</blockquote>
<h5 id="ndarray-dtype"><a href="#ndarray-dtype" class="headerlink" title="ndarray.dtype"></a>ndarray.dtype</h5><blockquote>
<p>åœ¨æ•°ç»„ä¸­æè¿°å…ƒç´ ç±»å‹çš„ä¸€ä¸ªå¯¹è±¡ã€‚å®ƒæ˜¯ä¸€ç§å¯ä»¥ç”¨æ ‡å‡†çš„ \( Python \) ç±»å‹åˆ›å»ºå’ŒæŒ‡å®šçš„ç±»å‹ã€‚å¦å¤–ï¼Œ\( NumPy \)ä¹Ÿæä¾›äº†å®ƒè‡ªå·±çš„ç±»å‹ï¼š<code>numpy.int32</code>ï¼Œ<code>numpy.int16</code>ï¼Œ<code>numpy.float64</code>â€¦â€¦</p>
</blockquote>
<h5 id="ndarray-itemsize"><a href="#ndarray-itemsize" class="headerlink" title="ndarray.itemsize"></a>ndarray.itemsize</h5><blockquote>
<p>æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ æ‰€å å­—èŠ‚æ•°ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ª <code>float64</code> çš„ <code>itemsize</code> æ˜¯ \( 8 ( = 64/8bit) \)ï¼Œ<code>complex32</code> çš„ <code>itemsize</code> æ˜¯ \( 4 ( = 32/8bit) \)ã€‚å®ƒå’Œ <code>ndarray.dtype.itemsize</code> æ˜¯ç›¸ç­‰çš„ã€‚</p>
</blockquote>
<h5 id="ndarray-data"><a href="#ndarray-data" class="headerlink" title="ndarray.data"></a>ndarray.data</h5><blockquote>
<p>æ•°ç»„å®é™…å…ƒç´ çš„ç¼“å­˜åŒºã€‚é€šå¸¸æ¥è¯´ï¼Œæˆ‘ä»¬ä¸éœ€è¦ä½¿ç”¨è¿™ä¸ªå±æ€§ï¼Œå› ä¸ºæˆ‘ä»¬ä¼šä½¿ç”¨ç´¢å¼•çš„æ–¹å¼è®¿é—®æ•°æ®ã€‚</p>
</blockquote>
<h3 id="2-1-ä¾‹å­"><a href="#2-1-ä¾‹å­" class="headerlink" title="2.1 ä¾‹å­"></a>2.1 ä¾‹å­</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; import numpy as np</div><div class="line">&gt;&gt;&gt; a = np.arange(15).reshape(3, 5)</div><div class="line">&gt;&gt;&gt; a</div><div class="line">array([[ 0,  1,  2,  3,  4],</div><div class="line">       [ 5,  6,  7,  8,  9],</div><div class="line">       [10, 11, 12, 13, 14]])</div><div class="line">&gt;&gt;&gt; a.shape</div><div class="line">(3, 5)</div><div class="line">&gt;&gt;&gt; a.ndim</div><div class="line">2</div><div class="line">&gt;&gt;&gt; a.dtype.name</div><div class="line">&apos;int64&apos;</div><div class="line">&gt;&gt;&gt; a.itemsize</div><div class="line">8</div><div class="line">&gt;&gt;&gt; a.size</div><div class="line">15</div><div class="line">&gt;&gt;&gt; type(a)</div><div class="line">&lt;type &apos;numpy.ndarray&apos;&gt;</div><div class="line">&gt;&gt;&gt; b = np.array([6, 7, 8])</div><div class="line">&gt;&gt;&gt; b</div><div class="line">array([6, 7, 8])</div><div class="line">&gt;&gt;&gt; type(b)</div><div class="line">&lt;type &apos;numpy.ndarray&apos;&gt;</div></pre></td></tr></table></figure>
<h3 id="2-2-åˆ›å»ºæ•°ç»„"><a href="#2-2-åˆ›å»ºæ•°ç»„" class="headerlink" title="2.2 åˆ›å»ºæ•°ç»„"></a>2.2 åˆ›å»ºæ•°ç»„</h3><p>è¿™é‡Œæœ‰å‡ ç§æ–¹æ³•åˆ›å»ºæ•°ç»„ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>array</code> å‡½æ•°ä»ä¸€ä¸ªå¸¸è§„çš„ \( Python \) åˆ—è¡¨æˆ–å…ƒç»„åˆ›å»ºä¸€ä¸ªæ•°ç»„ã€‚åˆ›å»ºçš„æ•°ç»„ç±»å‹æ˜¯ä»åŸå§‹åºåˆ—ä¸­çš„å…ƒç´ æ¨æ–­å‡ºæ¥çš„ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; import numpy as np</div><div class="line">&gt;&gt;&gt; a = np.array([2,3,4])</div><div class="line">&gt;&gt;&gt; a</div><div class="line">array([2, 3, 4])</div><div class="line">&gt;&gt;&gt; a.dtype</div><div class="line">dtype(&apos;int64&apos;)</div><div class="line">&gt;&gt;&gt; b = np.array([1.2, 3.5, 5.1])</div><div class="line">&gt;&gt;&gt; b.dtype</div><div class="line">dtype(&apos;float64&apos;)</div></pre></td></tr></table></figure>
<p>ä¸€ä¸ªå¸¸è§é”™è¯¯æ˜¯åœ¨è°ƒç”¨ <code>array</code> å‡½æ•°æ—¶ï¼Œä¼ é€’çš„å‚æ•°æ˜¯å¤šä¸ªæ•°å€¼è€Œä¸æ˜¯ä¸€ä¸ªå•ç‹¬çš„æ•°å­—åˆ—è¡¨ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a = np.array(1,2,3,4)    # WRONG</div><div class="line">&gt;&gt;&gt; a = np.array([1,2,3,4])  # RIGHT</div></pre></td></tr></table></figure>
<p><code>array</code> å°†åºåˆ—è½¬åŒ–æˆé«˜ç»´æ•°ç»„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; b = np.array([(1.5,2,3), (4,5,6)])</div><div class="line">&gt;&gt;&gt; b</div><div class="line">array([[ 1.5,  2. ,  3. ],</div><div class="line">       [ 4. ,  5. ,  6. ]])</div></pre></td></tr></table></figure>
<p>æ•°ç»„çš„ç±»å‹ä¹Ÿèƒ½å¤Ÿåœ¨åˆ›å»ºæ—¶å…·ä½“æŒ‡å®šï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; c = np.array( [ [1,2], [3,4] ], dtype=complex )</div><div class="line">&gt;&gt;&gt; c</div><div class="line">array([[ 1.+0.j,  2.+0.j],</div><div class="line">       [ 3.+0.j,  4.+0.j]])</div></pre></td></tr></table></figure>
<p>é€šå¸¸ï¼Œæˆ‘ä»¬éƒ½æ˜¯çŸ¥é“æ•°ç»„çš„å¤§å°è€Œä¸çŸ¥é“å…¶ä¸­çš„åŸå§‹æ•°æ®ã€‚å› æ­¤ \( NumPy \) æä¾›äº†å‡ ä¸ªç”¨å ä½ç¬¦çš„å‡½æ•°å»åˆ›å»ºæ•°ç»„ã€‚è¿™æ ·å¯ä»¥æœ€å°åŒ–å¢åŠ æ•°ç»„çš„æˆæœ¬ï¼Œå¢åŠ æ•°ç»„æ˜¯ä¸€é¡¹å¾ˆè€—è´¹èµ„æºçš„æ“ä½œã€‚</p>
<p><code>zeros</code> å‡½æ•°åˆ›å»ºä¸€ä¸ªå…¨æ˜¯ \( 0 \) çš„æ•°ç»„ï¼Œ<code>ones</code> å‡½æ•°åˆ›å»ºå…¨æ˜¯ \( 1 \) çš„æ•°ç»„ï¼Œ<code>empty</code> åˆ›å»ºä¸€ä¸ªéšæœºçš„æ•°ç»„ã€‚é»˜è®¤åˆ›å»ºæ•°ç»„çš„ç±»å‹æ˜¯ <code>float64</code>ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; np.zeros( (3,4) )</div><div class="line">array([[ 0.,  0.,  0.,  0.],</div><div class="line">       [ 0.,  0.,  0.,  0.],</div><div class="line">       [ 0.,  0.,  0.,  0.]])</div><div class="line">&gt;&gt;&gt; np.ones( (2,3,4), dtype=np.int16 )                # dtype can also be specified</div><div class="line">array([[[ 1, 1, 1, 1],</div><div class="line">        [ 1, 1, 1, 1],</div><div class="line">        [ 1, 1, 1, 1]],</div><div class="line">       [[ 1, 1, 1, 1],</div><div class="line">        [ 1, 1, 1, 1],</div><div class="line">        [ 1, 1, 1, 1]]], dtype=int16)</div><div class="line">&gt;&gt;&gt; np.empty( (2,3) )                                 # uninitialized, output may vary</div><div class="line">array([[  3.73603959e-262,   6.02658058e-154,   6.55490914e-260],</div><div class="line">       [  5.30498948e-313,   3.14673309e-307,   1.00000000e+000]])</div></pre></td></tr></table></figure>
<p>ä¸ºäº†åˆ›å»ºæ•°å­—åºåˆ—ï¼Œ\( NumPy \) æä¾›äº†ä¸€ä¸ªå’Œ <code>range</code> ç›¸ä¼¼çš„å‡½æ•°ï¼Œå¯ä»¥è¿”å›ä¸€ä¸ªæ•°ç»„è€Œä¸æ˜¯åˆ—è¡¨ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; np.arange( 10, 30, 5 )</div><div class="line">array([10, 15, 20, 25])</div><div class="line">&gt;&gt;&gt; np.arange( 0, 2, 0.3 )                 # it accepts float arguments</div><div class="line">array([ 0. ,  0.3,  0.6,  0.9,  1.2,  1.5,  1.8])</div></pre></td></tr></table></figure>
<p>å½“ <code>arange</code> çš„å‚æ•°æ˜¯æµ®ç‚¹å‹çš„ï¼Œç”±äºæœ‰é™çš„æµ®ç‚¹ç²¾åº¦ï¼Œé€šå¸¸ä¸å¤ªå¯èƒ½å»é¢„æµ‹è·å¾—å…ƒç´ çš„æ•°é‡ã€‚å‡ºäºè¿™ä¸ªåŸå› ï¼Œé€šå¸¸é€‰æ‹©æ›´å¥½çš„å‡½æ•° <code>linspace</code>ï¼Œä»–æ¥æ”¶æˆ‘ä»¬æƒ³è¦çš„å…ƒç´ æ•°é‡è€Œä¸æ˜¯æ­¥é•¿ä½œä¸ºå‚æ•°ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; from numpy import pi</div><div class="line">&gt;&gt;&gt; np.linspace( 0, 2, 9 )                 # 9 numbers from 0 to 2</div><div class="line">array([ 0.  ,  0.25,  0.5 ,  0.75,  1.  ,  1.25,  1.5 ,  1.75,  2.  ])</div><div class="line">&gt;&gt;&gt; x = np.linspace( 0, 2*pi, 100 )        # useful to evaluate function at lots of points</div><div class="line">&gt;&gt;&gt; f = np.sin(x)</div></pre></td></tr></table></figure>
<h5 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h5><p><a href="https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.array.html#numpy.array" target="_blank" rel="external">array</a>, <a href="https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.zeros.html#numpy.zeros" target="_blank" rel="external">zeros</a>, <a href="https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.zeros_like.html#numpy.zeros_like" target="_blank" rel="external">zeros_like</a>, <a href="https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.ones.html#numpy.ones" target="_blank" rel="external">ones</a>, <a href="https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.ones_like.html#numpy.ones_like" target="_blank" rel="external">ones_like</a>, <a href="https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.empty.html#numpy.empty" target="_blank" rel="external">empty</a>, <a href="https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.empty_like.html#numpy.empty_like" target="_blank" rel="external">empty_like</a>, <a href="https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.arange.html#numpy.arange" target="_blank" rel="external">arange</a>, <a href="https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.linspace.html#numpy.linspace" target="_blank" rel="external">linspace</a>, <a href="https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.random.rand.html#numpy.random.rand" target="_blank" rel="external">numpy.random.rand</a>, <a href="https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.random.randn.html#numpy.random.randn" target="_blank" rel="external">numpy.random.randn</a>, <a href="https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.fromfunction.html#numpy.fromfunction" target="_blank" rel="external">fromfunction</a>, <a href="https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.fromfile.html#numpy.fromfile" target="_blank" rel="external">fromfile</a></p>
<h3 id="2-3-æ‰“å°æ•°ç»„"><a href="#2-3-æ‰“å°æ•°ç»„" class="headerlink" title="2.3 æ‰“å°æ•°ç»„"></a>2.3 æ‰“å°æ•°ç»„</h3><p>å½“ä½ æ‰“å°æ•°ç»„æ—¶ï¼Œ\( NumPy \) æ˜¾ç¤ºå‡ºæ¥å’ŒåµŒå¥—çš„åˆ—è¡¨ç›¸ä¼¼ï¼Œä½†æ˜¯å…·æœ‰ä»¥ä¸‹å¸ƒå±€ï¼š</p>
<ul>
<li>æœ€åä¸€ä¸ª <code>axis</code> ä»å·¦åˆ°å³æ‰“å°ï¼Œ</li>
<li>ç¬¬äºŒåˆ°æœ€åä¸€ä¸ªä»ä¸Šåˆ°ä¸‹æ‰“å°ï¼Œ</li>
<li>å‰©ä½™çš„ä¹Ÿæ˜¯ä»ä¸Šåˆ°ä¸‹æ‰“å°ï¼Œæ¯ä¸€ç‰‡é€šè¿‡ä¸€ä¸ªç©ºè¡Œéš”å¼€ã€‚</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a = np.arange(6)                         # 1d array</div><div class="line">&gt;&gt;&gt; print(a)</div><div class="line">[0 1 2 3 4 5]</div><div class="line">&gt;&gt;&gt;</div><div class="line">&gt;&gt;&gt; b = np.arange(12).reshape(4,3)           # 2d array</div><div class="line">&gt;&gt;&gt; print(b)</div><div class="line">[[ 0  1  2]</div><div class="line"> [ 3  4  5]</div><div class="line"> [ 6  7  8]</div><div class="line"> [ 9 10 11]]</div><div class="line">&gt;&gt;&gt;</div><div class="line">&gt;&gt;&gt; c = np.arange(24).reshape(2,3,4)         # 3d array</div><div class="line">&gt;&gt;&gt; print(c)</div><div class="line">[[[ 0  1  2  3]</div><div class="line">  [ 4  5  6  7]</div><div class="line">  [ 8  9 10 11]]</div><div class="line"> [[12 13 14 15]</div><div class="line">  [16 17 18 19]</div><div class="line">  [20 21 22 23]]]</div></pre></td></tr></table></figure>
<p>å‚è€ƒ<a href="https://docs.scipy.org/doc/numpy-dev/user/quickstart.html#quickstart-shape-manipulation" target="_blank" rel="external">ä¸‹æ–‡</a>æ¥è·å–æ›´å¤š <code>reshape</code> çš„ç»†èŠ‚ã€‚</p>
<p>å¦‚æœä¸€ä¸ªæ•°ç»„å¤ªå¤§è€Œä¸èƒ½è¢«æ‰“å°ï¼Œé‚£ä¹ˆ \( NumPy \) ä¼šè‡ªåŠ¨å¿½ç•¥ä¸­é—´çš„åªæ‰“å°è§’ä¸Šçš„æ•°æ®ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; print(np.arange(10000))</div><div class="line">[   0    1    2 ..., 9997 9998 9999]</div><div class="line">&gt;&gt;&gt;</div><div class="line">&gt;&gt;&gt; print(np.arange(10000).reshape(100,100))</div><div class="line">[[   0    1    2 ...,   97   98   99]</div><div class="line"> [ 100  101  102 ...,  197  198  199]</div><div class="line"> [ 200  201  202 ...,  297  298  299]</div><div class="line"> ...,</div><div class="line"> [9700 9701 9702 ..., 9797 9798 9799]</div><div class="line"> [9800 9801 9802 ..., 9897 9898 9899]</div><div class="line"> [9900 9901 9902 ..., 9997 9998 9999]]</div></pre></td></tr></table></figure>
<p>ä¸ºäº†å–æ¶ˆè¿™ç§è¡Œä¸ºï¼Œå¼ºåˆ¶ \( NumPy \) å»æ‰“å°æ•´ä¸ªæ•°ç»„ï¼Œä½ å¯ä»¥é€šè¿‡ <code>set_printoptions</code> æ”¹å˜æ‰“å°é€‰é¡¹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; np.set_printoptions(threshold=&apos;nan&apos;)</div></pre></td></tr></table></figure>
<h3 id="2-4-åŸºæœ¬æ“ä½œ"><a href="#2-4-åŸºæœ¬æ“ä½œ" class="headerlink" title="2.4 åŸºæœ¬æ“ä½œ"></a>2.4 åŸºæœ¬æ“ä½œ</h3><p>åœ¨æ•°ç»„ä¸Šçš„ç®—æ•°è¿ç®—åº”ç”¨äºæ¯ä¸ªå…ƒç´ ã€‚å¹¶åˆ›å»ºä¸€ä¸ªç”¨ç»“æœå¡«å……çš„æ–°çš„æ•°ç»„ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a = np.array( [20,30,40,50] )</div><div class="line">&gt;&gt;&gt; b = np.arange( 4 )</div><div class="line">&gt;&gt;&gt; b</div><div class="line">array([0, 1, 2, 3])</div><div class="line">&gt;&gt;&gt; c = a-b</div><div class="line">&gt;&gt;&gt; c</div><div class="line">array([20, 29, 38, 47])</div><div class="line">&gt;&gt;&gt; b**2</div><div class="line">array([0, 1, 4, 9])</div><div class="line">&gt;&gt;&gt; 10*np.sin(a)</div><div class="line">array([ 9.12945251, -9.88031624,  7.4511316 , -2.62374854])</div><div class="line">&gt;&gt;&gt; a&lt;35</div><div class="line">array([ True, True, False, False], dtype=bool)</div></pre></td></tr></table></figure>
<p>åœ¨ \( NumPy \) æ•°ç»„çš„ <code>*</code> æ“ä½œä¸åƒå…¶ä»–çš„çŸ©é˜µè¯­è¨€ã€‚çŸ©é˜µä¹˜æ³•é€šè¿‡ <code>dot</code> å‡½æ•°è¿›è¡Œæ¨¡æ‹Ÿã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; A = np.array( [[1,1],</div><div class="line">...             [0,1]] )</div><div class="line">&gt;&gt;&gt; B = np.array( [[2,0],</div><div class="line">...             [3,4]] )</div><div class="line">&gt;&gt;&gt; A*B                         # elementwise product</div><div class="line">array([[2, 0],</div><div class="line">       [0, 4]])</div><div class="line">&gt;&gt;&gt; A.dot(B)                    # matrix product</div><div class="line">array([[5, 4],</div><div class="line">       [3, 4]])</div><div class="line">&gt;&gt;&gt; np.dot(A, B)                # another matrix product</div><div class="line">array([[5, 4],</div><div class="line">       [3, 4]])</div></pre></td></tr></table></figure>
<p>æƒ³ <code>+=</code> å’Œ <code>*=</code> æ“ä½œä¹‹ç±»çš„ï¼Œç›´æ¥åœ¨åŸæ•°ç»„ä¸Šåšä¿®æ”¹ï¼Œä¸ä¼šåˆ›å»ºæ–°æ•°ç»„ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a = np.ones((2,3), dtype=int)</div><div class="line">&gt;&gt;&gt; b = np.random.random((2,3))</div><div class="line">&gt;&gt;&gt; a *= 3</div><div class="line">&gt;&gt;&gt; a</div><div class="line">array([[3, 3, 3],</div><div class="line">       [3, 3, 3]])</div><div class="line">&gt;&gt;&gt; b += a</div><div class="line">&gt;&gt;&gt; b</div><div class="line">array([[ 3.417022  ,  3.72032449,  3.00011437],</div><div class="line">       [ 3.30233257,  3.14675589,  3.09233859]])</div><div class="line">&gt;&gt;&gt; a += b                  # b is not automatically converted to integer type</div><div class="line">Traceback (most recent call last):</div><div class="line">  ...</div><div class="line">TypeError: Cannot cast ufunc add output from dtype(&apos;float64&apos;) to dtype(&apos;int64&apos;) with casting rule &apos;same_kind&apos;</div></pre></td></tr></table></figure>
<p>åœ¨ä¸åŒæ•°ç»„ç±»å‹ä¹‹é—´çš„æ“ä½œï¼Œç»“æœæ•°ç»„çš„ç±»å‹è¶‹äºæ›´æ™®é€šæˆ–è€…æ›´ç²¾ç¡®çš„ä¸€ç§ï¼ˆç§°ä¸ºå‘ä¸Šè½¬å‹ï¼‰</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a = np.ones(3, dtype=np.int32)</div><div class="line">&gt;&gt;&gt; b = np.linspace(0,pi,3)</div><div class="line">&gt;&gt;&gt; b.dtype.name</div><div class="line">&apos;float64&apos;</div><div class="line">&gt;&gt;&gt; c = a+b</div><div class="line">&gt;&gt;&gt; c</div><div class="line">array([ 1.        ,  2.57079633,  4.14159265])</div><div class="line">&gt;&gt;&gt; c.dtype.name</div><div class="line">&apos;float64&apos;</div><div class="line">&gt;&gt;&gt; d = np.exp(c*1j)</div><div class="line">&gt;&gt;&gt; d</div><div class="line">array([ 0.54030231+0.84147098j, -0.84147098+0.54030231j,</div><div class="line">       -0.54030231-0.84147098j])</div><div class="line">&gt;&gt;&gt; d.dtype.name</div><div class="line">&apos;complex128&apos;</div></pre></td></tr></table></figure>
<p>è®¸å¤šç±»ä¼¼äºæ±‚æ•°ç»„æ‰€æœ‰å…ƒç´ çš„å’Œçš„ä¸€å…ƒæ“ä½œéƒ½æ˜¯ä½œä¸º <code>ndarray</code> ç±»çš„æ–¹æ³•å®ç°çš„ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a = np.random.random((2,3))</div><div class="line">&gt;&gt;&gt; a</div><div class="line">array([[ 0.18626021,  0.34556073,  0.39676747],</div><div class="line">       [ 0.53881673,  0.41919451,  0.6852195 ]])</div><div class="line">&gt;&gt;&gt; a.sum()</div><div class="line">2.5718191614547998</div><div class="line">&gt;&gt;&gt; a.min()</div><div class="line">0.1862602113776709</div><div class="line">&gt;&gt;&gt; a.max()</div><div class="line">0.6852195003967595</div></pre></td></tr></table></figure>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå°½ç®¡è¿™äº›æ“ä½œæ˜¯åº”ç”¨äºä¸€ä¸ªæ•°å­—åˆ—è¡¨ï¼Œå¯ä»¥æ— è§†å®ƒçš„å½¢çŠ¶ã€‚å½“æ—¶ï¼Œé€šè¿‡æŒ‡å®š <code>axis</code> å‚æ•°å¯ä»¥å°†æ“ä½œåº”ç”¨äºæ•°ç»„çš„æŸä¸€å…·ä½“ <code>axis</code> ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; b = np.arange(12).reshape(3,4)</div><div class="line">&gt;&gt;&gt; b</div><div class="line">array([[ 0,  1,  2,  3],</div><div class="line">       [ 4,  5,  6,  7],</div><div class="line">       [ 8,  9, 10, 11]])</div><div class="line">&gt;&gt;&gt;</div><div class="line">&gt;&gt;&gt; b.sum(axis=0)                            # sum of each column</div><div class="line">array([12, 15, 18, 21])</div><div class="line">&gt;&gt;&gt;</div><div class="line">&gt;&gt;&gt; b.min(axis=1)                            # min of each row</div><div class="line">array([0, 4, 8])</div><div class="line">&gt;&gt;&gt;</div><div class="line">&gt;&gt;&gt; b.cumsum(axis=1)                         # cumulative sum along each row</div><div class="line">array([[ 0,  1,  3,  6],</div><div class="line">       [ 4,  9, 15, 22],</div><div class="line">       [ 8, 17, 27, 38]])</div></pre></td></tr></table></figure>
<h3 id="2-5-é€šç”¨åŠŸèƒ½"><a href="#2-5-é€šç”¨åŠŸèƒ½" class="headerlink" title="2.5 é€šç”¨åŠŸèƒ½"></a>2.5 é€šç”¨åŠŸèƒ½</h3><p>\( NumPy \) æä¾›äº†å¾ˆå¤šæ•°å­¦ä¸Šçš„å‡½æ•°ï¼Œä¾‹å¦‚ <code>sin</code>ã€<code>cos</code>ã€<code>exp</code>ã€‚è¿™äº›è¢«å«åš â€œuniversal functionsâ€ (<code>ufunc</code>)ã€‚åœ¨ \( NumPy \ï¼‰ä¸­è¿™äº›å‡½æ•°æ˜¯æ“ä½œæ•°ç»„æ•°å­—ï¼Œäº§ç”Ÿä¸€ä¸ªæ•°ç»„ä½œä¸ºè¾“å‡ºã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; B = np.arange(3)</div><div class="line">&gt;&gt;&gt; B</div><div class="line">array([0, 1, 2])</div><div class="line">&gt;&gt;&gt; np.exp(B)</div><div class="line">array([ 1.        ,  2.71828183,  7.3890561 ])</div><div class="line">&gt;&gt;&gt; np.sqrt(B)</div><div class="line">array([ 0.        ,  1.        ,  1.41421356])</div><div class="line">&gt;&gt;&gt; C = np.array([2., -1., 4.])</div><div class="line">&gt;&gt;&gt; np.add(B, C)</div><div class="line">array([ 2.,  0.,  6.])</div></pre></td></tr></table></figure>
<h5 id="å‚è€ƒ-1"><a href="#å‚è€ƒ-1" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h5><p><a href="https://docs.scipy.org/doc/numpy-dev/user/quickstart.html#universal-functions" target="_blank" rel="external">all, any, apply_along_axis, argmax, argmin, argsort, average, bincount, ceil, clip, conj, corrcoef, cov, cross, cumprod, cumsum, diff, dot, floor, inner, inv, lexsort, max, maximum, mean, median, min, minimum, nonzero, outer, prod, re, round, sort, std, sum, trace, transpose, var, vdot, vectorize, where</a></p>
<h3 id="2-6-ç´¢å¼•ï¼Œåˆ‡ç‰‡å’Œè¿­ä»£"><a href="#2-6-ç´¢å¼•ï¼Œåˆ‡ç‰‡å’Œè¿­ä»£" class="headerlink" title="2.6 ç´¢å¼•ï¼Œåˆ‡ç‰‡å’Œè¿­ä»£"></a>2.6 ç´¢å¼•ï¼Œåˆ‡ç‰‡å’Œè¿­ä»£</h3><p>ä¸€ç»´æ•°ç»„å¯ä»¥è¢«ç´¢å¼•ï¼Œåˆ‡ç‰‡å’Œè¿­ä»£ï¼Œå°±åƒ<a href="https://docs.python.org/tutorial/introduction.html#lists" target="_blank" rel="external">åˆ—è¡¨</a>å’Œå…¶ä»–Pythonåºåˆ—ä¸€æ ·ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a = np.arange(10)**3</div><div class="line">&gt;&gt;&gt; a</div><div class="line">array([  0,   1,   8,  27,  64, 125, 216, 343, 512, 729])</div><div class="line">&gt;&gt;&gt; a[2]</div><div class="line">8</div><div class="line">&gt;&gt;&gt; a[2:5]</div><div class="line">array([ 8, 27, 64])</div><div class="line">&gt;&gt;&gt; a[:6:2] = -1000    # equivalent to a[0:6:2] = -1000; from start to position 6, exclusive, set every 2nd element to -1000</div><div class="line">&gt;&gt;&gt; a</div><div class="line">array([-1000,     1, -1000,    27, -1000,   125,   216,   343,   512,   729])</div><div class="line">&gt;&gt;&gt; a[ : :-1]                                 # reversed a</div><div class="line">array([  729,   512,   343,   216,   125, -1000,    27, -1000,     1, -1000])</div><div class="line">&gt;&gt;&gt; for i in a:</div><div class="line">...     print(i**(1/3.))</div><div class="line">...</div><div class="line">nan</div><div class="line">1.0</div><div class="line">nan</div><div class="line">3.0</div><div class="line">nan</div><div class="line">5.0</div><div class="line">6.0</div><div class="line">7.0</div><div class="line">8.0</div><div class="line">9.0</div></pre></td></tr></table></figure>
<p>å¤šç»´æ•°ç»„å¯¹äºæ¯ä¸ª <code>axis</code> éƒ½æœ‰ä¸€ä¸ªç´¢å¼•ï¼Œè¿™äº›ç´¢å¼•ç”¨é€—å·åˆ†éš”ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; def f(x,y):</div><div class="line">...     return 10*x+y</div><div class="line">...</div><div class="line">&gt;&gt;&gt; b = np.fromfunction(f,(5,4),dtype=int)</div><div class="line">&gt;&gt;&gt; b</div><div class="line">array([[ 0,  1,  2,  3],</div><div class="line">       [10, 11, 12, 13],</div><div class="line">       [20, 21, 22, 23],</div><div class="line">       [30, 31, 32, 33],</div><div class="line">       [40, 41, 42, 43]])</div><div class="line">&gt;&gt;&gt; b[2,3]</div><div class="line">23</div><div class="line">&gt;&gt;&gt; b[0:5, 1]                       # each row in the second column of b</div><div class="line">array([ 1, 11, 21, 31, 41])</div><div class="line">&gt;&gt;&gt; b[ : ,1]                        # equivalent to the previous example</div><div class="line">array([ 1, 11, 21, 31, 41])</div><div class="line">&gt;&gt;&gt; b[1:3, : ]                      # each column in the second and third row of b</div><div class="line">array([[10, 11, 12, 13],</div><div class="line">       [20, 21, 22, 23]])</div></pre></td></tr></table></figure>
<p>å½“æä¾›çš„ç´¢å¼•å°‘äº <code>axis</code> çš„æ•°é‡æ—¶ï¼Œç¼ºå¤±çš„ç´¢å¼•æŒ‰å®Œå…¨åˆ‡ç‰‡è€ƒè™‘ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; b[-1]                                  # the last row. Equivalent to b[-1,:]</div><div class="line">array([40, 41, 42, 43])</div></pre></td></tr></table></figure>
<p><code>b[i]</code> è¿™ç§è¡¨è¾¾ä¸­æ‹¬å·ä¸­çš„ <code>i</code> åé¢å¯ä»¥è·Ÿå¾ˆå¤šç”¨ <code>:</code> è¡¨ç¤ºå…¶å®ƒ <code>axis</code> çš„å®ä¾‹ã€‚\( NumPy \) ä¹Ÿå…è®¸ä½¿ç”¨ä¸‰ä¸ªç‚¹ä»£æ›¿ <code>b[i, ...]</code></p>
<p>è¿™ä¸‰ä¸ªç‚¹(<code>...</code>)è¡¨ç¤ºå¾ˆå¤šå®Œæ•´ç´¢å¼•å…ƒç»„ä¸­çš„å†’å·ã€‚ä¾‹å¦‚ï¼Œ<code>x</code> çš„ <code>rank = 5</code> æœ‰ï¼š</p>
<ul>
<li><code>x[1, 2, ...]</code> = <code>x[1, 2, :, :, :]</code></li>
<li><code>x[..., 3]</code> = <code>x[:, :, :, :, 3]</code></li>
<li><code>x[4, ..., 5, :]</code> = <code>x[4, :, :, 5, :]</code></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; c = np.array( [[[  0,  1,  2],               # a 3D array (two stacked 2D arrays)</div><div class="line">...                 [ 10, 12, 13]],</div><div class="line">...                [[100,101,102],</div><div class="line">...                 [110,112,113]]])</div><div class="line">&gt;&gt;&gt; c.shape</div><div class="line">(2, 2, 3)</div><div class="line">&gt;&gt;&gt; c[1,...]                                   # same as c[1,:,:] or c[1]</div><div class="line">array([[100, 101, 102],</div><div class="line">       [110, 112, 113]])</div><div class="line">&gt;&gt;&gt; c[...,2]                                   # same as c[:,:,2]</div><div class="line">array([[  2,  13],</div><div class="line">       [102, 113]])</div></pre></td></tr></table></figure>
<p>è¿­ä»£å¤šç»´æ•°ç»„æ˜¯å¯¹ç¬¬ä¸€ <code>axis</code> è¿›è¡Œçš„ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; for row in b:</div><div class="line">...     print(row)</div><div class="line">...</div><div class="line">[0 1 2 3]</div><div class="line">[10 11 12 13]</div><div class="line">[20 21 22 23]</div><div class="line">[30 31 32 33]</div><div class="line">[40 41 42 43]</div></pre></td></tr></table></figure>
<p>ç„¶è€Œï¼Œå¦‚æœä½ æƒ³æ¨¡æ‹Ÿå¯¹æ•°ç»„ä¸­æ¯ä¸€ä¸ªå…ƒç´ çš„æ“ä½œï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>flat</code> å±æ€§ï¼Œå®ƒæ˜¯ä¸€ä¸ª <a href="https://docs.python.org/2/tutorial/classes.html#iterators" target="_blank" rel="external">iterator</a>ï¼Œèƒ½å¤Ÿéå†æ•°ç»„ä¸­æ¯ä¸€ä¸ªå…ƒç´ ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; for element in b.flat:</div><div class="line">...     print(element)</div><div class="line">...</div><div class="line">0</div><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td></tr></table></figure>
<h5 id="å‚è€ƒ-2"><a href="#å‚è€ƒ-2" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h5><p><a href="https://docs.scipy.org/doc/numpy-dev/user/basics.indexing.html#basics-indexing" target="_blank" rel="external">Indexing</a>, <a href="https://docs.scipy.org/doc/numpy-dev/reference/arrays.indexing.html#arrays-indexing" target="_blank" rel="external">Indexing</a> (reference), <a href="https://docs.scipy.org/doc/numpy-dev/reference/arrays.indexing.html#numpy.newaxis" target="_blank" rel="external">newaxis</a>, <a href="https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.ndenumerate.html#numpy.ndenumerate" target="_blank" rel="external">ndenumerate</a>, <a href="https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.indices.html#numpy.indices" target="_blank" rel="external">indices</a></p>
<h2 id="3-æ“æ§å½¢çŠ¶"><a href="#3-æ“æ§å½¢çŠ¶" class="headerlink" title="3 æ“æ§å½¢çŠ¶"></a>3 æ“æ§å½¢çŠ¶</h2><h3 id="3-1-æ”¹å˜æ•°ç»„çš„å½¢çŠ¶"><a href="#3-1-æ”¹å˜æ•°ç»„çš„å½¢çŠ¶" class="headerlink" title="3.1 æ”¹å˜æ•°ç»„çš„å½¢çŠ¶"></a>3.1 æ”¹å˜æ•°ç»„çš„å½¢çŠ¶</h3><p>æ¯ä¸€ä¸ªæ•°ç»„çš„å½¢çŠ¶é€šè¿‡æ¯ä¸€ä¸ª <code>axis</code> ä¸­çš„å…ƒç´ æ•°é‡ã€‚ï¼ˆå…¶å®å°±æ˜¯æ¯ä¸€ä¸ªç»´åº¦çš„å…ƒç´ å¤šå°‘ç¡®å®šï¼‰</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a = np.floor(10*np.random.random((3,4)))</div><div class="line">&gt;&gt;&gt; a</div><div class="line">array([[ 2.,  8.,  0.,  6.],</div><div class="line">       [ 4.,  5.,  1.,  1.],</div><div class="line">       [ 8.,  9.,  3.,  6.]])</div><div class="line">&gt;&gt;&gt; a.shape</div><div class="line">(3, 4)</div></pre></td></tr></table></figure>
<p>æ•°ç»„çš„å½¢çŠ¶å¯ä»¥é€šè¿‡å¾ˆå¤šå‘½ä»¤æ¥æ”¹å˜ï¼Œæåˆ°è¿™é‡Œï¼Œæ¥ä¸‹æ¥çš„ä¸‰ä¸ªä¾‹å­æ”¾å›ä¸€ä¸ªè¢«ä¿®æ”¹çš„æ•°ç»„ï¼ŒåŸæ•°ç»„ä¸ä¼šæ”¹å˜ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a.ravel()  # returns the array, flattened</div><div class="line">array([ 2.,  8.,  0.,  6.,  4.,  5.,  1.,  1.,  8.,  9.,  3.,  6.])</div><div class="line">&gt;&gt;&gt; a.reshape(6,2)  # returns the array with a modified shape</div><div class="line">array([[ 2.,  8.],</div><div class="line">       [ 0.,  6.],</div><div class="line">       [ 4.,  5.],</div><div class="line">       [ 1.,  1.],</div><div class="line">       [ 8.,  9.],</div><div class="line">       [ 3.,  6.]])</div><div class="line">&gt;&gt;&gt; a.T  # returns the array, transposed</div><div class="line">array([[ 2.,  4.,  8.],</div><div class="line">       [ 8.,  5.,  9.],</div><div class="line">       [ 0.,  1.,  3.],</div><div class="line">       [ 6.,  1.,  6.]])</div><div class="line">&gt;&gt;&gt; a.T.shape</div><div class="line">(4, 3)</div><div class="line">&gt;&gt;&gt; a.shape</div><div class="line">(3, 4)</div></pre></td></tr></table></figure>
<p><code>ravel()</code> å‡½æ•°ä¸­æ¯ä¸ªå…ƒç´ çš„ä½ç½®é€šå¸¸æ˜¯ä¸€ç§ â€œC-styleâ€ çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæœ€å³è¾¹çš„ç´¢å¼•æ”¹å˜èµ·æ¥æœ€å¿«ã€‚æ‰€ä»¥å…ƒç´  <code>a[0, 0]</code> åé¢çš„å…ƒç´ æ˜¯ <code>a[0, 1]</code>ã€‚å¦‚æœè¿™ä¸ªæ•°ç»„è¢«å¡‘é€ æˆå…¶å®ƒå½¢çŠ¶ï¼Œè¿™ä¸ªæ•°ç»„ä¹Ÿæ˜¯ä½œä¸º â€œC-styleâ€ å¯¹å¾…ã€‚\( NumPy \) é€šå¸¸ä¹Ÿæ˜¯æŒ‰ç…§è¿™ä¸ªåˆ›å»ºçš„æ•°ç»„ï¼Œæ‰€ä»¥ä½¿ç”¨ <code>ravel()</code> å‡½æ•°æ—¶ä¸éœ€è¦å¤åˆ¶ï¼Œä½†æ˜¯å¦‚æœè¿™ä¸ªæ•°ç»„æ˜¯é€šè¿‡ä»å¦ä¸€ä¸ªæ•°ç»„åˆ‡ç‰‡æˆ–è€…å…¶å®ƒä¸åŒå¯»å¸¸çš„æ–¹å¼è€Œæ¥çš„è¯ï¼Œå®ƒå°±éœ€è¦è¿›è¡Œå¤åˆ¶äº†ã€‚å‡½æ•° <code>ravel()</code> å’Œ <code>reshape()</code> ä¹Ÿå¯ä»¥é€šè¿‡å¯é€‰å‚æ•°è¢«æŒ‡å®šå»ç”¨ <code>FORTRAN-style</code> çš„æ•°ç»„ï¼Œè¿™è¿™ç§é£æ ¼ä¸­ï¼Œæœ€å·¦çš„ç´¢å¼•æ”¹å˜æœ€å¿«ã€‚</p>
<p><a href="https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.reshape.html#numpy.reshape" target="_blank" rel="external">reshape</a> å‡½æ•°è¿”å›ä¿®æ”¹çš„å½¢çŠ¶ï¼Œè€Œ <a href="https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.ndarray.resize.html#numpy.ndarray.resize" target="_blank" rel="external">ndarray.resize</a> æ–¹æ³•ç›´æ¥ä¿®æ”¹æ•°ç»„æœ¬èº«ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a</div><div class="line">array([[ 2.,  8.,  0.,  6.],</div><div class="line">       [ 4.,  5.,  1.,  1.],</div><div class="line">       [ 8.,  9.,  3.,  6.]])</div><div class="line">&gt;&gt;&gt; a.resize((2,6))</div><div class="line">&gt;&gt;&gt; a</div><div class="line">array([[ 2.,  8.,  0.,  6.,  4.,  5.],</div><div class="line">       [ 1.,  1.,  8.,  9.,  3.,  6.]])</div></pre></td></tr></table></figure>
<p>å¦‚æœä¸€ä¸ªç»´åº¦ç»™ä¸€ä¸ª \( -1 \) ä½œä¸ºå‚æ•°ï¼Œé‚£ä¹ˆå…¶ä»–å®ƒç»´åº¦å°†è‡ªåŠ¨è®¡ç®—ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a.reshape(3,-1)</div><div class="line">array([[ 2.,  8.,  0.,  6.],</div><div class="line">       [ 4.,  5.,  1.,  1.],</div><div class="line">       [ 8.,  9.,  3.,  6.]])</div></pre></td></tr></table></figure>
<h5 id="å‚è€ƒ-3"><a href="#å‚è€ƒ-3" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h5><p><a href="https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.ndarray.shape.html#numpy.ndarray.shape" target="_blank" rel="external">ndarray.shape</a>, <a href="https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.reshape.html#numpy.reshape" target="_blank" rel="external">reshape</a>, <a href="https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.resize.html#numpy.resize" target="_blank" rel="external">resize</a>, <a href="https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.ravel.html#numpy.ravel" target="_blank" rel="external">ravel</a></p>
<h3 id="3-2-ä¸åŒæ•°ç»„çš„ç»„åˆ"><a href="#3-2-ä¸åŒæ•°ç»„çš„ç»„åˆ" class="headerlink" title="3.2 ä¸åŒæ•°ç»„çš„ç»„åˆ"></a>3.2 ä¸åŒæ•°ç»„çš„ç»„åˆ</h3><p>æ•°ç»„å¯ä»¥é€šè¿‡ä¸åŒçš„ <code>axes</code> ç»„åˆèµ·æ¥ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a = np.floor(10*np.random.random((2,2)))</div><div class="line">&gt;&gt;&gt; a</div><div class="line">array([[ 8.,  8.],</div><div class="line">       [ 0.,  0.]])</div><div class="line">&gt;&gt;&gt; b = np.floor(10*np.random.random((2,2)))</div><div class="line">&gt;&gt;&gt; b</div><div class="line">array([[ 1.,  8.],</div><div class="line">       [ 0.,  4.]])</div><div class="line">&gt;&gt;&gt; np.vstack((a,b))</div><div class="line">array([[ 8.,  8.],</div><div class="line">       [ 0.,  0.],</div><div class="line">       [ 1.,  8.],</div><div class="line">       [ 0.,  4.]])</div><div class="line">&gt;&gt;&gt; np.hstack((a,b))</div><div class="line">array([[ 8.,  8.,  1.,  8.],</div><div class="line">       [ 0.,  0.,  0.,  4.]])</div></pre></td></tr></table></figure>
<p><a href="https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.column_stack.html#numpy.column_stack" target="_blank" rel="external">column_stack</a> å‡½æ•°å¯ä»¥å°† \( 1D \) æ•°ç»„ä½œä¸º \( 2D \) æ•°ç»„çš„åˆ—ã€‚å½“ä¸”ä»…å½“æ•°ç»„æ˜¯ \( 1D \) çš„æ—¶å€™å®ƒç­‰äº <a href="https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.vstack.html#numpy.vstack" target="_blank" rel="external">vstack</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; from numpy import newaxis</div><div class="line">&gt;&gt;&gt; np.column_stack((a,b))   # With 2D arrays</div><div class="line">array([[ 8.,  8.,  1.,  8.],</div><div class="line">       [ 0.,  0.,  0.,  4.]])</div><div class="line">&gt;&gt;&gt; a = np.array([4.,2.])</div><div class="line">&gt;&gt;&gt; b = np.array([2.,8.])</div><div class="line">&gt;&gt;&gt; a[:,newaxis]  # This allows to have a 2D columns vector</div><div class="line">array([[ 4.],</div><div class="line">       [ 2.]])</div><div class="line">&gt;&gt;&gt; np.column_stack((a[:,newaxis],b[:,newaxis]))</div><div class="line">array([[ 4.,  2.],</div><div class="line">       [ 2.,  8.]])</div><div class="line">&gt;&gt;&gt; np.vstack((a[:,newaxis],b[:,newaxis])) # The behavior of vstack is different</div><div class="line">array([[ 4.],</div><div class="line">       [ 2.],</div><div class="line">       [ 2.],</div><div class="line">       [ 8.]])</div></pre></td></tr></table></figure>
<p>å¯¹äºè¶…è¿‡ä¸¤ä¸ªç»´åº¦çš„æ•°ç»„ï¼Œ<a href="https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.hstack.html#numpy.hstack" target="_blank" rel="external">hstack</a> ä¼šæ²¿ç€ç¬¬äºŒä¸ª <code>axis</code> å †ç§¯ï¼Œ<a href="https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.vstack.html#numpy.vstack" target="_blank" rel="external">vstack</a> æ²¿ç€ç¬¬ä¸€ä¸ª <code>axes</code> å †ç§¯ï¼Œ<a href="https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.concatenate.html#numpy.concatenate" target="_blank" rel="external">concatenate</a> å…è®¸ä¸€ä¸ªå¯é€‰å‚æ•°é€‰æ‹©å“ªä¸€ä¸ª <code>axis</code> å‘ç”Ÿè¿æ¥æ“ä½œã€‚</p>
<h5 id="æç¤º"><a href="#æç¤º" class="headerlink" title="æç¤º"></a>æç¤º</h5><p>åœ¨å¤æ‚æƒ…å†µä¸‹ï¼Œ<a href="https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.r_.html#numpy.r_" target="_blank" rel="external">r_</a> å’Œ <a href="https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.c_.html#numpy.c_" target="_blank" rel="external">c_</a> å¯¹äºé€šè¿‡æ²¿ä¸€ä¸ª <code>axis</code> å †ç§¯æ•°å­—æ¥åˆ›å»ºæ•°ç»„å¾ˆæœ‰ç”¨ã€‚å®ƒä»¬å…è®¸ä½¿ç”¨èŒƒå›´è¡¨ç¤ºç¬¦å·ï¼ˆâ€œ:â€ï¼‰</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; np.r_[1:4,0,4]</div><div class="line">array([1, 2, 3, 0, 4])</div></pre></td></tr></table></figure>
<p>å½“ä½¿ç”¨æ•°ç»„ä½œä¸ºå‚æ•°æ—¶ï¼Œ<a href="https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.r_.html#numpy.r_" target="_blank" rel="external">r_</a> ä¸ <a href="https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.c_.html#numpy.c_" target="_blank" rel="external">c_</a> åœ¨é»˜è®¤è¡Œä¸ºæ˜¯å’Œ <a href="https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.vstack.html#numpy.vstack" target="_blank" rel="external">vstack</a> ä¸ <a href="https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.hstack.html#numpy.hstack" target="_blank" rel="external">hstack</a> ç›¸ä¼¼çš„ï¼Œä½†æ˜¯å®ƒä»¬å…è®¸å¯é€‰å‚æ•°ç»™å‡º <code>axis</code> æ¥è¿æ¥ã€‚</p>
<h5 id="å‚è€ƒ-4"><a href="#å‚è€ƒ-4" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h5><p><a href="https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.hstack.html#numpy.hstack" target="_blank" rel="external">hstack</a>ï¼Œ<a href="https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.vstack.html#numpy.vstack" target="_blank" rel="external">vstack</a>ï¼Œ<a href="https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.column_stack.html#numpy.column_stack" target="_blank" rel="external">column_stack</a>ï¼Œ<a href="https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.concatenate.html#numpy.concatenate" target="_blank" rel="external">concatenate</a>ï¼Œ<a href="https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.c_.html#numpy.c_" target="_blank" rel="external">c_</a>ï¼Œ<a href="https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.r_.html#numpy.r_" target="_blank" rel="external">r_</a></p>
<h3 id="3-3-å°†æ•°ç»„åˆ†å‰²æˆå‡ ä¸ªå°æ•°ç»„"><a href="#3-3-å°†æ•°ç»„åˆ†å‰²æˆå‡ ä¸ªå°æ•°ç»„" class="headerlink" title="3.3 å°†æ•°ç»„åˆ†å‰²æˆå‡ ä¸ªå°æ•°ç»„"></a>3.3 å°†æ•°ç»„åˆ†å‰²æˆå‡ ä¸ªå°æ•°ç»„</h3><p>ä½¿ç”¨ <a href="https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.hsplit.html#numpy.hsplit" target="_blank" rel="external">hsplit</a>ï¼Œä½ èƒ½æ²¿ç€å®ƒçš„æ°´å¹³ <code>axis</code> åˆ†å‰²ï¼Œå¯ä»¥é€šè¿‡æŒ‡å®šæ•°ç»„å½¢çŠ¶æ¥è¿”å›ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šå“ªä¸ªåˆ—åº”è¯¥æ‹†åˆ†ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a = np.floor(10*np.random.random((2,12)))</div><div class="line">&gt;&gt;&gt; a</div><div class="line">array([[ 9.,  5.,  6.,  3.,  6.,  8.,  0.,  7.,  9.,  7.,  2.,  7.],</div><div class="line">       [ 1.,  4.,  9.,  2.,  2.,  1.,  0.,  6.,  2.,  2.,  4.,  0.]])</div><div class="line">&gt;&gt;&gt; np.hsplit(a,3)   # Split a into 3</div><div class="line">[array([[ 9.,  5.,  6.,  3.],</div><div class="line">       [ 1.,  4.,  9.,  2.]]), array([[ 6.,  8.,  0.,  7.],</div><div class="line">       [ 2.,  1.,  0.,  6.]]), array([[ 9.,  7.,  2.,  7.],</div><div class="line">       [ 2.,  2.,  4.,  0.]])]</div><div class="line">&gt;&gt;&gt; np.hsplit(a,(3,4))   # Split a after the third and the fourth column</div><div class="line">[array([[ 9.,  5.,  6.],</div><div class="line">       [ 1.,  4.,  9.]]), array([[ 3.],</div><div class="line">       [ 2.]]), array([[ 6.,  8.,  0.,  7.,  9.,  7.,  2.,  7.],</div><div class="line">       [ 2.,  1.,  0.,  6.,  2.,  2.,  4.,  0.]])]</div></pre></td></tr></table></figure>
<p><a href="">vplit</a> æ²¿ç€ç«–ç›´çš„ <code>axis</code> åˆ†å‰²ï¼Œ<a href="https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.array_split.html#numpy.array_split" target="_blank" rel="external">array_split</a> å…è®¸é€šè¿‡æŒ‡å®šå“ªä¸ª <code>axis</code> å»åˆ†å‰²ã€‚</p>
<h2 id="4-æ‹·è´å’Œ-Views"><a href="#4-æ‹·è´å’Œ-Views" class="headerlink" title="4 æ‹·è´å’Œ Views"></a>4 æ‹·è´å’Œ Views</h2><p>åœ¨æ“ä½œæ•°ç»„çš„æ—¶å€™ï¼Œå®ƒä»¬çš„æ•°æ®æœ‰æ—¶å€™æ‹·è´è¿›ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œæœ‰æ—¶å€™åˆä¸æ˜¯ã€‚è¿™ç»å¸¸æ˜¯åˆå­¦è€…æ„Ÿåˆ°å›°æƒ‘ã€‚ä¸‹é¢æœ‰ä¸‰ç§æƒ…å†µï¼š</p>
<h3 id="4-1-ä¸æ‹·è´"><a href="#4-1-ä¸æ‹·è´" class="headerlink" title="4.1 ä¸æ‹·è´"></a>4.1 ä¸æ‹·è´</h3><p>ç®€å•çš„èµ‹å€¼ä¸ä¼šæ‹·è´ä»»ä½•æ•°ç»„å¯¹è±¡å’Œå®ƒä»¬çš„æ•°æ®ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a = np.arange(12)</div><div class="line">&gt;&gt;&gt; b = a            # no new object is created</div><div class="line">&gt;&gt;&gt; b is a           # a and b are two names for the same ndarray object</div><div class="line">True</div><div class="line">&gt;&gt;&gt; b.shape = 3,4    # changes the shape of a</div><div class="line">&gt;&gt;&gt; a.shape</div><div class="line">(3, 4)</div></pre></td></tr></table></figure>
<p>\( Python \) å°†å¯å˜å¯¹è±¡ä½œä¸ºå¼•ç”¨ä¼ é€’ï¼Œæ‰€ä»¥å‡½æ•°è°ƒç”¨ä¸ä¼šäº§ç”Ÿæ‹·è´ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; def f(x):</div><div class="line">...     print(id(x))</div><div class="line">...</div><div class="line">&gt;&gt;&gt; id(a)                           # id is a unique identifier of an object</div><div class="line">148293216</div><div class="line">&gt;&gt;&gt; f(a)</div><div class="line">148293216</div></pre></td></tr></table></figure>
<h3 id="4-2-View-æˆ–è€…æµ…æ‹·è´"><a href="#4-2-View-æˆ–è€…æµ…æ‹·è´" class="headerlink" title="4.2 View æˆ–è€…æµ…æ‹·è´"></a>4.2 View æˆ–è€…æµ…æ‹·è´</h3><p>ä¸åŒçš„æ•°ç»„å¯¹è±¡å¯ä»¥åˆ†äº«ç›¸åŒçš„æ•°æ®ã€‚<code>view</code> æ–¹æ³•åˆ›å»ºäº†ä¸€ä¸ªç›¸åŒæ•°æ®çš„æ–°æ•°ç»„å¯¹è±¡ã€‚<br>PSï¼šè¿™é‡Œ Viewï¼ˆè§†å›¾ï¼Ÿï¼‰ ä¸çŸ¥é“å¦‚ä½•ç†è§£å¥½ï¼Œæ‰€ä»¥ä¿ç•™ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; c = a.view()</div><div class="line">&gt;&gt;&gt; c is a</div><div class="line">False</div><div class="line">&gt;&gt;&gt; c.base is a                        # c is a view of the data owned by a</div><div class="line">True</div><div class="line">&gt;&gt;&gt; c.flags.owndata</div><div class="line">False</div><div class="line">&gt;&gt;&gt;</div><div class="line">&gt;&gt;&gt; c.shape = 2,6                      # a&apos;s shape doesn&apos;t change</div><div class="line">&gt;&gt;&gt; a.shape</div><div class="line">(3, 4)</div><div class="line">&gt;&gt;&gt; c[0,4] = 1234                      # a&apos;s data changes</div><div class="line">&gt;&gt;&gt; a</div><div class="line">array([[   0,    1,    2,    3],</div><div class="line">       [1234,    5,    6,    7],</div><div class="line">       [   8,    9,   10,   11]])</div></pre></td></tr></table></figure>
<p>åˆ‡ç‰‡æ•°ç»„è¿”å›ä¸€ä¸ª <code>view</code>ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; s = a[ : , 1:3]     # spaces added for clarity; could also be written &quot;s = a[:,1:3]&quot;</div><div class="line">&gt;&gt;&gt; s[:] = 10           # s[:] is a view of s. Note the difference between s=10 and s[:]=10</div><div class="line">&gt;&gt;&gt; a</div><div class="line">array([[   0,   10,   10,    3],</div><div class="line">       [1234,   10,   10,    7],</div><div class="line">       [   8,   10,   10,   11]])</div></pre></td></tr></table></figure>
<h3 id="4-3-æ·±æ‹·è´"><a href="#4-3-æ·±æ‹·è´" class="headerlink" title="4.3 æ·±æ‹·è´"></a>4.3 æ·±æ‹·è´</h3><p><code>copy</code> æ–¹æ³•å®Œå…¨æ‹·è´æ•°ç»„ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; d = a.copy()                          # a new array object with new data is created</div><div class="line">&gt;&gt;&gt; d is a</div><div class="line">False</div><div class="line">&gt;&gt;&gt; d.base is a                           # d doesn&apos;t share anything with a</div><div class="line">False</div><div class="line">&gt;&gt;&gt; d[0,0] = 9999</div><div class="line">&gt;&gt;&gt; a</div><div class="line">array([[   0,   10,   10,    3],</div><div class="line">       [1234,   10,   10,    7],</div><div class="line">       [   8,   10,   10,   11]])</div></pre></td></tr></table></figure>
<h3 id="4-4-å‡½æ•°å’Œæ–¹æ³•ç»¼è¿°"><a href="#4-4-å‡½æ•°å’Œæ–¹æ³•ç»¼è¿°" class="headerlink" title="4.4 å‡½æ•°å’Œæ–¹æ³•ç»¼è¿°"></a>4.4 å‡½æ•°å’Œæ–¹æ³•ç»¼è¿°</h3><p>è¿™é‡Œé€šè¿‡ç±»åˆ«æ’åºåˆ—ä¸¾ä¸€äº›æœ‰ç”¨çš„ \( NumPy \) å‡½æ•°å’Œæ–¹æ³•ã€‚æ‹†çœ‹å®Œæ•´åˆ—è¡¨ç‚¹å‡»<a href="https://docs.scipy.org/doc/numpy-dev/reference/routines.html#routines" target="_blank" rel="external">Routines</a></p>
<h5 id="æ•°ç»„æ”¶é›†"><a href="#æ•°ç»„æ”¶é›†" class="headerlink" title="æ•°ç»„æ”¶é›†"></a>æ•°ç»„æ”¶é›†</h5><blockquote>
<p><a href="https://docs.scipy.org/doc/numpy-dev/user/quickstart.html#functions-and-methods-overview" target="_blank" rel="external">arange, array, copy, empty, empty_like, eye, fromfile, fromfunction, identity, linspace, logspace, mgrid, ogrid, ones, ones_like, r, zeros, zeros_like</a></p>
</blockquote>
<h5 id="è½¬åŒ–"><a href="#è½¬åŒ–" class="headerlink" title="è½¬åŒ–"></a>è½¬åŒ–</h5><blockquote>
<p><a href="https://docs.scipy.org/doc/numpy-dev/user/quickstart.html#functions-and-methods-overview" target="_blank" rel="external">ndarray.astype, atleast_1d, atleast_2d, atleast_3d, mat</a></p>
</blockquote>
<h5 id="æ“ä½œ"><a href="#æ“ä½œ" class="headerlink" title="æ“ä½œ"></a>æ“ä½œ</h5><blockquote>
<p><a href="https://docs.scipy.org/doc/numpy-dev/user/quickstart.html#functions-and-methods-overview" target="_blank" rel="external">array_split, column_stack, concatenate, diagonal, dsplit, dstack, hsplit, hstack, ndarray.item, newaxis, ravel, repeat, reshape, resize, squeeze, swapaxes, take, transpose, vsplit, vstack</a></p>
</blockquote>
<h5 id="ç–‘é—®"><a href="#ç–‘é—®" class="headerlink" title="ç–‘é—®"></a>ç–‘é—®</h5><blockquote>
<p><a href="https://docs.scipy.org/doc/numpy-dev/user/quickstart.html#functions-and-methods-overview" target="_blank" rel="external">all, any, nonzero, where</a></p>
</blockquote>
<h5 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h5><blockquote>
<p><a href="https://docs.scipy.org/doc/numpy-dev/user/quickstart.html#functions-and-methods-overview" target="_blank" rel="external">argmax, argmin, argsort, max, min, ptp, searchsorted, sort</a></p>
</blockquote>
<h5 id="è¿ç®—"><a href="#è¿ç®—" class="headerlink" title="è¿ç®—"></a>è¿ç®—</h5><blockquote>
<p><a href="https://docs.scipy.org/doc/numpy-dev/user/quickstart.html#functions-and-methods-overview" target="_blank" rel="external">choose, compress, cumprod, cumsum, inner, ndarray.fill, imag, prod, put, putmask, real, sum</a></p>
</blockquote>
<h5 id="åŸºæœ¬ç»Ÿè®¡"><a href="#åŸºæœ¬ç»Ÿè®¡" class="headerlink" title="åŸºæœ¬ç»Ÿè®¡"></a>åŸºæœ¬ç»Ÿè®¡</h5><blockquote>
<p><a href="https://docs.scipy.org/doc/numpy-dev/user/quickstart.html#functions-and-methods-overview" target="_blank" rel="external">cov, mean, std, var</a></p>
</blockquote>
<h5 id="åŸºæœ¬çº¿æ€§ä»£æ•°"><a href="#åŸºæœ¬çº¿æ€§ä»£æ•°" class="headerlink" title="åŸºæœ¬çº¿æ€§ä»£æ•°"></a>åŸºæœ¬çº¿æ€§ä»£æ•°</h5><blockquote>
<p><a href="https://docs.scipy.org/doc/numpy-dev/user/quickstart.html#functions-and-methods-overview" target="_blank" rel="external">cross, dot, outer, linalg.svd, vdot</a></p>
</blockquote>
<h2 id="5-Less-Basic"><a href="#5-Less-Basic" class="headerlink" title="5 Less Basic"></a>5 Less Basic</h2><h3 id="5-1-å¹¿æ’­è§„åˆ™"><a href="#5-1-å¹¿æ’­è§„åˆ™" class="headerlink" title="5.1 å¹¿æ’­è§„åˆ™"></a>5.1 å¹¿æ’­è§„åˆ™</h3><p>å¹¿æ’­å…è®¸é€šç”¨åŠŸèƒ½ç”¨ä¸€ç§æœ‰æ„ä¹‰çš„æ–¹å¼å»å¤„ç†ä¸å®Œå…¨ç›¸åŒçš„å½¢çŠ¶è¾“å…¥ã€‚<br>ç¬¬ä¸€æ¡å¹¿æ’­è§„åˆ™æ˜¯å¦‚æœæ‰€æœ‰è¾“å…¥çš„æ•°ç»„éƒ½æ²¡æœ‰ç›¸åŒçš„ç»´åº¦æ•°å­—ï¼Œé‚£ä¹ˆå°†ä¼šé‡å¤åœ°ç”¨ \( 1 \) å»åŠ åœ¨è¾ƒå°çš„æ•°ç»„å½¢çŠ¶ä¸Šç›´åˆ°æ‰€æœ‰çš„æ•°ç»„æœ‰ç›¸åŒçš„ç»´åº¦æ•°å­—ã€‚<br>ç¬¬äºŒæ¡å¹¿æ’­è§„åˆ™æ˜¯ç¡®ä¿æ²¿ç€ç‰¹å®šç»´åº¦å¤§å°ä¸º \( 1 \) çš„æ•°ç»„å°±åƒæ²¿ç€è¿™ä¸ªç»´åº¦æœ€å¤§ç»´æ•°å¤§å°ä¸€æ ·çš„ï¼Œå‡è®¾æ•°ç»„å…ƒç´ çš„å€¼åœ¨å¹¿æ’­æ•°ç»„çš„ç»´åº¦æ˜¯ç›¸åŒçš„ã€‚<br>åº”ç”¨å¹¿æ’­è§„åˆ™åï¼Œæ‰€æœ‰æ•°ç»„å¤§å°ä¸å¿…é¡»åŒ¹é…ã€‚æ›´å¤šç»†èŠ‚å¯ä»¥åœ¨<a href="https://docs.scipy.org/doc/numpy-dev/user/basics.broadcasting.html" target="_blank" rel="external">Broadcasting</a>ã€‚</p>
<ul>
<li><a href="http://blog.csdn.net/yangnanhai93/article/details/50127747" target="_blank" rel="external">Numpyä¸­çš„å¹¿æ’­(Broadcasting)</a></li>
</ul>
<h2 id="6-èŠ±å¼ç´¢å¼•å’Œç´¢å¼•æŠ€å·§"><a href="#6-èŠ±å¼ç´¢å¼•å’Œç´¢å¼•æŠ€å·§" class="headerlink" title="6 èŠ±å¼ç´¢å¼•å’Œç´¢å¼•æŠ€å·§"></a>6 èŠ±å¼ç´¢å¼•å’Œç´¢å¼•æŠ€å·§</h2><p>\( NumPy \) æä¾›äº†æ¯” \(  Python \) åºåˆ—æ›´å¤šçš„ç´¢å¼•åŠŸèƒ½ã€‚é™¤äº†æˆ‘ä»¬ä¹‹å‰çœ‹åˆ°çš„é€šè¿‡æ•´æ•°å’Œåˆ‡ç‰‡ç´¢å¼•ä¹‹å¤–ï¼Œæ•°ç»„å¯ä»¥é€šè¿‡æ•´æ•°æ•°ç»„å’Œå¸ƒå°”æ•°ç»„ç´¢å¼•ã€‚</p>
<h3 id="6-1-ç”¨ç´¢å¼•æ•°ç»„ç´¢å¼•"><a href="#6-1-ç”¨ç´¢å¼•æ•°ç»„ç´¢å¼•" class="headerlink" title="6.1 ç”¨ç´¢å¼•æ•°ç»„ç´¢å¼•"></a>6.1 ç”¨ç´¢å¼•æ•°ç»„ç´¢å¼•</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a = np.arange(12)**2                       # the first 12 square numbers</div><div class="line">&gt;&gt;&gt; i = np.array( [ 1,1,3,8,5 ] )              # an array of indices</div><div class="line">&gt;&gt;&gt; a[i]                                       # the elements of a at the positions i</div><div class="line">array([ 1,  1,  9, 64, 25])</div><div class="line">&gt;&gt;&gt;</div><div class="line">&gt;&gt;&gt; j = np.array( [ [ 3, 4], [ 9, 7 ] ] )      # a bidimensional array of indices</div><div class="line">&gt;&gt;&gt; a[j]                                       # the same shape as j</div><div class="line">array([[ 9, 16],</div><div class="line">       [81, 49]])</div></pre></td></tr></table></figure>
<p>å½“æ•°ç»„ <code>a</code> æ˜¯å¤šç»´çš„ï¼Œå•ä¸ªæ•°ç»„æŒ‡å‘æ•°ç»„ <code>a</code> çš„ç¬¬ä¸€ç»´ã€‚ä»¥ä¸‹ç¤ºä¾‹é€šè¿‡ä½¿ç”¨è°ƒè‰²æ¿å°†æ ‡ç­¾å›¾åƒè½¬æ¢ä¸ºå½©è‰²å›¾åƒæ¥æ˜¾ç¤ºæ­¤è¡Œä¸ºã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; palette = np.array( [ [0,0,0],                # black</div><div class="line">...                       [255,0,0],              # red</div><div class="line">...                       [0,255,0],              # green</div><div class="line">...                       [0,0,255],              # blue</div><div class="line">...                       [255,255,255] ] )       # white</div><div class="line">&gt;&gt;&gt; image = np.array( [ [ 0, 1, 2, 0 ],           # each value corresponds to a color in the palette</div><div class="line">...                     [ 0, 3, 4, 0 ]  ] )</div><div class="line">&gt;&gt;&gt; palette[image]                            # the (2,4,3) color image</div><div class="line">array([[[  0,   0,   0],</div><div class="line">        [255,   0,   0],</div><div class="line">        [  0, 255,   0],</div><div class="line">        [  0,   0,   0]],</div><div class="line">       [[  0,   0,   0],</div><div class="line">        [  0,   0, 255],</div><div class="line">        [255, 255, 255],</div><div class="line">        [  0,   0,   0]]])</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥ç»™è¶…è¿‡ä¸€ç»´çš„ç´¢å¼•ã€‚æ•°ç»„æ¯ä¸ªç»´åº¦çš„ç´¢å¼•å½¢çŠ¶å¿…é¡»ä¸€æ ·ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a = np.arange(12).reshape(3,4)</div><div class="line">&gt;&gt;&gt; a</div><div class="line">array([[ 0,  1,  2,  3],</div><div class="line">       [ 4,  5,  6,  7],</div><div class="line">       [ 8,  9, 10, 11]])</div><div class="line">&gt;&gt;&gt; i = np.array( [ [0,1],                        # indices for the first dim of a</div><div class="line">...                 [1,2] ] )</div><div class="line">&gt;&gt;&gt; j = np.array( [ [2,1],                        # indices for the second dim</div><div class="line">...                 [3,3] ] )</div><div class="line">&gt;&gt;&gt;</div><div class="line">&gt;&gt;&gt; a[i,j]                                     # i and j must have equal shape</div><div class="line">array([[ 2,  5],</div><div class="line">       [ 7, 11]])</div><div class="line">&gt;&gt;&gt;</div><div class="line">&gt;&gt;&gt; a[i,2]</div><div class="line">array([[ 2,  6],</div><div class="line">       [ 6, 10]])</div><div class="line">&gt;&gt;&gt;</div><div class="line">&gt;&gt;&gt; a[:,j]                                     # i.e., a[ : , j]</div><div class="line">array([[[ 2,  1],</div><div class="line">        [ 3,  3]],</div><div class="line">       [[ 6,  5],</div><div class="line">        [ 7,  7]],</div><div class="line">       [[10,  9],</div><div class="line">        [11, 11]]])</div></pre></td></tr></table></figure>
<p>å½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ <code>i</code>, <code>j</code> æ”¾è¿›ä¸€ä¸ªåºåˆ—ç„¶åå¯¹è¿™ä¸ªåˆ—è¡¨è¿›è¡Œç´¢å¼•ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; l = [i,j]</div><div class="line">&gt;&gt;&gt; a[l]                                       # equivalent to a[i,j]</div><div class="line">array([[ 2,  5],</div><div class="line">       [ 7, 11]])</div></pre></td></tr></table></figure>
<p>ç„¶è€Œï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æŠŠ <code>i</code>ï¼Œ<code>j</code> æ”¾è¿›æ•°ç»„ä¸­ï¼Œå› ä¸ºè¿™ä¸ªæ•°ç»„å°†ä¼šè¢«è§£é‡Šæˆ <code>a</code> ç¬¬ä¸€ç»´çš„ç´¢å¼•ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; s = np.array( [i,j] )</div><div class="line">&gt;&gt;&gt; a[s]                                       # not what we want</div><div class="line">Traceback (most recent call last):</div><div class="line">  File &quot;&lt;stdin&gt;&quot;, line 1, in ?</div><div class="line">IndexError: index (3) out of range (0&lt;=index&lt;=2) in dimension 0</div><div class="line">&gt;&gt;&gt;</div><div class="line">&gt;&gt;&gt; a[tuple(s)]                                # same as a[i,j]</div><div class="line">array([[ 2,  5],</div><div class="line">       [ 7, 11]])</div></pre></td></tr></table></figure>
<p>å¦ä¸€ä¸ªå¸¸ç”¨æ•°ç»„ç´¢å¼•æ˜¯æŸ¥è¯¢æ—¶é—´ç›¸å…³ç³»åˆ—çš„æœ€å¤§å€¼ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; time = np.linspace(20, 145, 5)                 # time scale</div><div class="line">&gt;&gt;&gt; data = np.sin(np.arange(20)).reshape(5,4)      # 4 time-dependent series</div><div class="line">&gt;&gt;&gt; time</div><div class="line">array([  20.  ,   51.25,   82.5 ,  113.75,  145.  ])</div><div class="line">&gt;&gt;&gt; data</div><div class="line">array([[ 0.        ,  0.84147098,  0.90929743,  0.14112001],</div><div class="line">       [-0.7568025 , -0.95892427, -0.2794155 ,  0.6569866 ],</div><div class="line">       [ 0.98935825,  0.41211849, -0.54402111, -0.99999021],</div><div class="line">       [-0.53657292,  0.42016704,  0.99060736,  0.65028784],</div><div class="line">       [-0.28790332, -0.96139749, -0.75098725,  0.14987721]])</div><div class="line">&gt;&gt;&gt;</div><div class="line">&gt;&gt;&gt; ind = data.argmax(axis=0)                   # index of the maxima for each series</div><div class="line">&gt;&gt;&gt; ind</div><div class="line">array([2, 0, 3, 1])</div><div class="line">&gt;&gt;&gt;</div><div class="line">&gt;&gt;&gt; time_max = time[ ind]                       # times corresponding to the maxima</div><div class="line">&gt;&gt;&gt;</div><div class="line">&gt;&gt;&gt; data_max = data[ind, xrange(data.shape[1])] # =&gt; data[ind[0],0], data[ind[1],1]...</div><div class="line">&gt;&gt;&gt;</div><div class="line">&gt;&gt;&gt; time_max</div><div class="line">array([  82.5 ,   20.  ,  113.75,   51.25])</div><div class="line">&gt;&gt;&gt; data_max</div><div class="line">array([ 0.98935825,  0.84147098,  0.99060736,  0.6569866 ])</div><div class="line">&gt;&gt;&gt;</div><div class="line">&gt;&gt;&gt; np.all(data_max == data.max(axis=0))</div><div class="line">True</div></pre></td></tr></table></figure>
<p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨æ•°ç»„ç´¢å¼•å¯¹æ•°ç»„è¿›è¡Œèµ‹å€¼ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a = np.arange(5)</div><div class="line">&gt;&gt;&gt; a</div><div class="line">array([0, 1, 2, 3, 4])</div><div class="line">&gt;&gt;&gt; a[[1,3,4]] = 0</div><div class="line">&gt;&gt;&gt; a</div><div class="line">array([0, 0, 2, 0, 0])</div></pre></td></tr></table></figure>
<p>ç„¶è€Œï¼Œå½“ä½ çš„åˆ—è¡¨ç´¢å¼•åŒ…å«é‡å¤ï¼Œè¿™ä¸ªèµ‹å€¼ä¼šå‘ç”Ÿå‡ æ¬¡ï¼Œä¿ç•™æœ€åä¸€ä¸ªæ•°å€¼ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a = np.arange(5)</div><div class="line">&gt;&gt;&gt; a[[0,0,2]]=[1,2,3]</div><div class="line">&gt;&gt;&gt; a</div><div class="line">array([2, 1, 3, 3, 4])</div></pre></td></tr></table></figure>
<p>è¿™è¶³å¤Ÿåˆç†ï¼Œä½†æ˜¯å¦‚æœä½ æƒ³ä½¿ç”¨ \( Python \) çš„ <code>+=</code> ç»“æ„æ—¶è¦å°å¿ƒï¼Œå®ƒå¯èƒ½ä¸åƒä½ æœŸå¾…çš„ä¸€æ ·ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a = np.arange(5)</div><div class="line">&gt;&gt;&gt; a[[0,0,2]]+=1</div><div class="line">&gt;&gt;&gt; a</div><div class="line">array([1, 1, 3, 3, 4])</div></pre></td></tr></table></figure>
<p>å³ä½¿ \( 0 \) åœ¨åˆ—è¡¨ä¸­å‡ºç°äº†ä¸¤æ¬¡ï¼Œè¿™ç¬¬ \( 0 \) ä¸ªå…ƒç´ ä¹Ÿåªå¢åŠ ä¸€æ¬¡ã€‚è¿™æ˜¯å› ä¸º  \( Python \) æŠŠ â€œa+=1â€ ç­‰ä»·äº â€œa=a+1â€ã€‚</p>
<h3 id="6-2-ç”¨å¸ƒå°”æ•°ç»„ç´¢å¼•"><a href="#6-2-ç”¨å¸ƒå°”æ•°ç»„ç´¢å¼•" class="headerlink" title="6.2 ç”¨å¸ƒå°”æ•°ç»„ç´¢å¼•"></a>6.2 ç”¨å¸ƒå°”æ•°ç»„ç´¢å¼•</h3><p>å½“æˆ‘ä»¬ç”¨æ•´æ•°æ•°ç»„å»ç´¢å¼•æ•°ç»„æ—¶ï¼Œæˆ‘ä»¬æä¾›äº†ç´¢å¼•åˆ—è¡¨å»æŒ‘é€‰ã€‚ç”¨å¸ƒå°”ç´¢å¼•çš„æ–¹æ³•æ˜¯ä¸ç”¨çš„ï¼›æˆ‘ä»¬æ˜ç¡®çš„åœ¨æ•°ç»„ä¸­é€‰æ‹©å“ªä¸ªæˆ‘ä»¬æƒ³è¦å“ªä¸ªæˆ‘ä»¬ä¸æƒ³è¦ã€‚<br>æœ€è‡ªç„¶èƒ½æƒ³åˆ°çš„æ–¹æ³•æ˜¯ç”¨å’ŒåŸæ•°ç»„ä¸€æ ·å½¢çŠ¶çš„å¸ƒå°”æ•°ç»„è¿›è¡Œå¸ƒå°”ç´¢å¼•ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a = np.arange(12).reshape(3,4)</div><div class="line">&gt;&gt;&gt; b = a &gt; 4</div><div class="line">&gt;&gt;&gt; b                                          # b is a boolean with a&apos;s shape</div><div class="line">array([[False, False, False, False],</div><div class="line">       [False,  True,  True,  True],</div><div class="line">       [ True,  True,  True,  True]], dtype=bool)</div><div class="line">&gt;&gt;&gt; a[b]                                       # 1d array with the selected elements</div><div class="line">array([ 5,  6,  7,  8,  9, 10, 11])</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªå±æ€§åœ¨å¤åˆ¶æ—¶éå¸¸æœ‰ç”¨ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a[b] = 0                                   # All elements of &apos;a&apos; higher than 4 become 0</div><div class="line">&gt;&gt;&gt; a</div><div class="line">array([[0, 1, 2, 3],</div><div class="line">       [4, 0, 0, 0],</div><div class="line">       [0, 0, 0, 0]])</div></pre></td></tr></table></figure>
<p>ä½ å¯ä»¥çœ‹æ¥ä¸‹æ¥çš„ä¾‹å­å»äº†è§£å¦‚ä½•ä½¿ç”¨å¸ƒå°”ç´¢å¼•å»ç”Ÿæˆ <a href="http://en.wikipedia.org/wiki/Mandelbrot_set" target="_blank" rel="external">Mandelbrot set</a> å›¾åƒã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; import numpy as np</div><div class="line">&gt;&gt;&gt; import matplotlib.pyplot as plt</div><div class="line">&gt;&gt;&gt; def mandelbrot( h,w, maxit=20 ):</div><div class="line">...     &quot;&quot;&quot;Returns an image of the Mandelbrot fractal of size (h,w).&quot;&quot;&quot;</div><div class="line">...     y,x = np.ogrid[ -1.4:1.4:h*1j, -2:0.8:w*1j ]</div><div class="line">...     c = x+y*1j</div><div class="line">...     z = c</div><div class="line">...     divtime = maxit + np.zeros(z.shape, dtype=int)</div><div class="line">...</div><div class="line">...     for i in range(maxit):</div><div class="line">...         z = z**2 + c</div><div class="line">...         diverge = z*np.conj(z) &gt; 2**2            # who is diverging</div><div class="line">...         div_now = diverge &amp; (divtime==maxit)  # who is diverging now</div><div class="line">...         divtime[div_now] = i                  # note when</div><div class="line">...         z[diverge] = 2                        # avoid diverging too much</div><div class="line">...</div><div class="line">...     return divtime</div><div class="line">&gt;&gt;&gt; plt.imshow(mandelbrot(400,400))</div><div class="line">&gt;&gt;&gt; plt.show()</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">mandelbrot</span><span class="params">(h, w, maxit=<span class="number">20</span>)</span>:</span></div><div class="line">    y, x = np.ogrid[<span class="number">-1.4</span>:<span class="number">1.4</span>:h * <span class="number">1j</span>, <span class="number">-2</span>:<span class="number">0.8</span>:w * <span class="number">1j</span>]</div><div class="line">    c = x + y * <span class="number">1j</span></div><div class="line">    z = c</div><div class="line">    divtime = maxit + np.zeros(z.shape, dtype=int)</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(maxit):</div><div class="line">        z = z ** <span class="number">2</span> + c</div><div class="line">        diverge = z * np.conj(z) &gt; <span class="number">2</span> ** <span class="number">2</span>  <span class="comment"># who is diverging</span></div><div class="line">        div_now = diverge &amp; (divtime == maxit)  <span class="comment"># who is diverging now</span></div><div class="line">        divtime[div_now] = i  <span class="comment"># note when</span></div><div class="line">        z[diverge] = <span class="number">2</span>  <span class="comment"># avoid diverging too much</span></div><div class="line">    <span class="keyword">return</span> divtime</div><div class="line"></div><div class="line">plt.imshow(mandelbrot(<span class="number">400</span>, <span class="number">400</span>))</div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<p><img src="/2018/02/04/NumPyOfficialQuickstartTutorial/6_2_01.png" alt=""></p>
<p>ç¬¬äºŒç§ç”¨å¸ƒå°”ç´¢å¼•æ–¹æ³•æ›´åƒæ˜¯æ•´æ•°ç´¢å¼•ï¼Œå¯¹äºæ¯ä¸ªæ•°ç»„çš„ç»´åº¦ï¼Œæˆ‘ä»¬ç»™ä¸€ä¸ª \( 1D \) çš„å¸ƒå°”æ•°ç»„å»é€‰æ‹©æˆ‘ä»¬æƒ³è¦çš„åˆ‡ç‰‡ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a = np.arange(12).reshape(3,4)</div><div class="line">&gt;&gt;&gt; b1 = np.array([False,True,True])             # first dim selection</div><div class="line">&gt;&gt;&gt; b2 = np.array([True,False,True,False])       # second dim selection</div><div class="line">&gt;&gt;&gt;</div><div class="line">&gt;&gt;&gt; a[b1,:]                                   # selecting rows</div><div class="line">array([[ 4,  5,  6,  7],</div><div class="line">       [ 8,  9, 10, 11]])</div><div class="line">&gt;&gt;&gt;</div><div class="line">&gt;&gt;&gt; a[b1]                                     # same thing</div><div class="line">array([[ 4,  5,  6,  7],</div><div class="line">       [ 8,  9, 10, 11]])</div><div class="line">&gt;&gt;&gt;</div><div class="line">&gt;&gt;&gt; a[:,b2]                                   # selecting columns</div><div class="line">array([[ 0,  2],</div><div class="line">       [ 4,  6],</div><div class="line">       [ 8, 10]])</div><div class="line">&gt;&gt;&gt;</div><div class="line">&gt;&gt;&gt; a[b1,b2]                                  # a weird thing to do</div><div class="line">array([ 4, 10])</div></pre></td></tr></table></figure>
<p>è¯·æ³¨æ„ï¼Œ\( 1D \) å¸ƒå°”æ•°ç»„çš„é•¿åº¦å¿…é¡»ä¸ä½ è¦åˆ‡ç‰‡çš„ç»´åº¦ï¼ˆæˆ–<code>axis</code>ï¼‰çš„é•¿åº¦ä¸€è‡´ã€‚åœ¨ä¹‹å‰çš„ä¾‹å­ä¸­ï¼Œ<code>b1</code> æ˜¯ä¸€ä¸ªé•¿åº¦ä¸º \( 3 \)ï¼ˆ<code>a</code> çš„è¡Œæ•°ï¼‰ çš„ <code>1-rank</code> æ•°ç»„ï¼Œ<code>b2</code> ï¼ˆé•¿åº¦ä¸º \( 4 \)ï¼‰æ˜¯ä¸€ä¸ªé€‚åˆå»ç´¢å¼• <code>a</code> çš„ç¬¬äºŒ <code>rank</code> (åˆ—)ã€‚</p>
<h3 id="6-3-ix-å‡½æ•°"><a href="#6-3-ix-å‡½æ•°" class="headerlink" title="6.3 ix_() å‡½æ•°"></a>6.3 ix_() å‡½æ•°</h3><p><a href="https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.ix_.html#numpy.ix_" target="_blank" rel="external">ix_</a> å¯ä»¥ç»„åˆä¸åŒå‘é‡å»è·å¾—å¯¹äºæ¯ä¸€ä¸ª <code>n-uplet</code> çš„ç»“æœã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³ä»æ¯ä¸ª \( a, b, c \) å‘é‡ä¸­å–å¾—ä¸‰å…ƒç»„å»è®¡ç®—æ‰€æœ‰çš„ \( a+b*c \) ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a = np.array([2,3,4,5])</div><div class="line">&gt;&gt;&gt; b = np.array([8,5,4])</div><div class="line">&gt;&gt;&gt; c = np.array([5,4,6,8,3])</div><div class="line">&gt;&gt;&gt; ax,bx,cx = np.ix_(a,b,c)</div><div class="line">&gt;&gt;&gt; ax</div><div class="line">array([[[2]],</div><div class="line">       [[3]],</div><div class="line">       [[4]],</div><div class="line">       [[5]]])</div><div class="line">&gt;&gt;&gt; bx</div><div class="line">array([[[8],</div><div class="line">        [5],</div><div class="line">        [4]]])</div><div class="line">&gt;&gt;&gt; cx</div><div class="line">array([[[5, 4, 6, 8, 3]]])</div><div class="line">&gt;&gt;&gt; ax.shape, bx.shape, cx.shape</div><div class="line">((4, 1, 1), (1, 3, 1), (1, 1, 5))</div><div class="line">&gt;&gt;&gt; result = ax+bx*cx</div><div class="line">&gt;&gt;&gt; result</div><div class="line">array([[[42, 34, 50, 66, 26],</div><div class="line">        [27, 22, 32, 42, 17],</div><div class="line">        [22, 18, 26, 34, 14]],</div><div class="line">       [[43, 35, 51, 67, 27],</div><div class="line">        [28, 23, 33, 43, 18],</div><div class="line">        [23, 19, 27, 35, 15]],</div><div class="line">       [[44, 36, 52, 68, 28],</div><div class="line">        [29, 24, 34, 44, 19],</div><div class="line">        [24, 20, 28, 36, 16]],</div><div class="line">       [[45, 37, 53, 69, 29],</div><div class="line">        [30, 25, 35, 45, 20],</div><div class="line">        [25, 21, 29, 37, 17]]])</div><div class="line">&gt;&gt;&gt; result[3,2,4]</div><div class="line">17</div><div class="line">&gt;&gt;&gt; a[3]+b[2]*c[4]</div><div class="line">17</div></pre></td></tr></table></figure>
<p>ä½ ä¹Ÿå¯ä»¥æŒ‰ä»¥ä¸‹æ–¹å¼å®ç°ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; def ufunc_reduce(ufct, *vectors):</div><div class="line">...    vs = np.ix_(*vectors)</div><div class="line">...    r = ufct.identity</div><div class="line">...    for v in vs:</div><div class="line">...        r = ufct(r,v)</div><div class="line">...    return r</div></pre></td></tr></table></figure>
<p>ç„¶åè¿™æ ·ä½¿ç”¨ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; ufunc_reduce(np.add,a,b,c)</div><div class="line">array([[[15, 14, 16, 18, 13],</div><div class="line">        [12, 11, 13, 15, 10],</div><div class="line">        [11, 10, 12, 14,  9]],</div><div class="line">       [[16, 15, 17, 19, 14],</div><div class="line">        [13, 12, 14, 16, 11],</div><div class="line">        [12, 11, 13, 15, 10]],</div><div class="line">       [[17, 16, 18, 20, 15],</div><div class="line">        [14, 13, 15, 17, 12],</div><div class="line">        [13, 12, 14, 16, 11]],</div><div class="line">       [[18, 17, 19, 21, 16],</div><div class="line">        [15, 14, 16, 18, 13],</div><div class="line">        [14, 13, 15, 17, 12]]])</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªç‰ˆæœ¬çš„æ¯”é€šå¸¸çš„ <code>ufunc.reduce</code> å¥½åœ¨å®ƒä½¿ç”¨äº†<a href="https://docs.scipy.org/doc/numpy-dev/user/Tentative_NumPy_Tutorial.html#head-c43f3f81719d84f09ae2b33a22eaf50b26333db8" target="_blank" rel="external">Broadcasting Rules</a> è§„åˆ™å»é¿å…åˆ›å»ºä¸€ä¸ªå¤§å°æ˜¯è¾“å‡ºä¹˜ä»¥çŸ¢é‡æ•°é‡æ•°ç»„ã€‚</p>
<h3 id="6-4-ä½¿ç”¨å­—ç¬¦ä¸²ç´¢å¼•"><a href="#6-4-ä½¿ç”¨å­—ç¬¦ä¸²ç´¢å¼•" class="headerlink" title="6.4 ä½¿ç”¨å­—ç¬¦ä¸²ç´¢å¼•"></a>6.4 ä½¿ç”¨å­—ç¬¦ä¸²ç´¢å¼•</h3><p>å‚è€ƒ<a href="https://docs.scipy.org/doc/numpy-dev/user/basics.rec.html#structured-arrays" target="_blank" rel="external">Structured arrays</a></p>
<h2 id="7-çº¿æ€§ä»£æ•°"><a href="#7-çº¿æ€§ä»£æ•°" class="headerlink" title="7 çº¿æ€§ä»£æ•°"></a>7 çº¿æ€§ä»£æ•°</h2><p>å·¥ä½œè¿›è¡Œä¸­ï¼ŒåŸºæœ¬çš„çº¿æ€§ä»£æ•°åŒ…å«åœ¨å…¶ä¸­ã€‚</p>
<h3 id="7-1-ç®€å•çš„æ•°ç»„æ“ä½œ"><a href="#7-1-ç®€å•çš„æ•°ç»„æ“ä½œ" class="headerlink" title="7.1 ç®€å•çš„æ•°ç»„æ“ä½œ"></a>7.1 ç®€å•çš„æ•°ç»„æ“ä½œ</h3><p>çœ‹\( NumPy \) æ–‡ä»¶å¤¹ä¸‹çš„ \( linalg.py \) æ–‡ä»¶äº†è§£æ›´å¤šã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; import numpy as np</div><div class="line">&gt;&gt;&gt; a = np.array([[1.0, 2.0], [3.0, 4.0]])</div><div class="line">&gt;&gt;&gt; print(a)</div><div class="line">[[ 1.  2.]</div><div class="line"> [ 3.  4.]]</div><div class="line"></div><div class="line">&gt;&gt;&gt; a.transpose()</div><div class="line">array([[ 1.,  3.],</div><div class="line">       [ 2.,  4.]])</div><div class="line"></div><div class="line">&gt;&gt;&gt; np.linalg.inv(a)</div><div class="line">array([[-2. ,  1. ],</div><div class="line">       [ 1.5, -0.5]])</div><div class="line"></div><div class="line">&gt;&gt;&gt; u = np.eye(2) # unit 2x2 matrix; &quot;eye&quot; represents &quot;I&quot;</div><div class="line">&gt;&gt;&gt; u</div><div class="line">array([[ 1.,  0.],</div><div class="line">       [ 0.,  1.]])</div><div class="line">&gt;&gt;&gt; j = np.array([[0.0, -1.0], [1.0, 0.0]])</div><div class="line"></div><div class="line">&gt;&gt;&gt; np.dot (j, j) # matrix product</div><div class="line">array([[-1.,  0.],</div><div class="line">       [ 0., -1.]])</div><div class="line"></div><div class="line">&gt;&gt;&gt; np.trace(u)  # trace</div><div class="line">2.0</div><div class="line"></div><div class="line">&gt;&gt;&gt; y = np.array([[5.], [7.]])</div><div class="line">&gt;&gt;&gt; np.linalg.solve(a, y)</div><div class="line">array([[-3.],</div><div class="line">       [ 4.]])</div><div class="line"></div><div class="line">&gt;&gt;&gt; np.linalg.eig(j)</div><div class="line">(array([ 0.+1.j,  0.-1.j]), array([[ 0.70710678+0.j        ,  0.70710678-0.j        ],</div><div class="line">       [ 0.00000000-0.70710678j,  0.00000000+0.70710678j]]))</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Parameters:</div><div class="line">    square matrix</div><div class="line">Returns</div><div class="line">    The eigenvalues, each repeated according to its multiplicity.</div><div class="line">    The normalized (unit &quot;length&quot;) eigenvectors, such that the</div><div class="line">    column ``v[:,i]`` is the eigenvector corresponding to the</div><div class="line">    eigenvalue ``w[i]`` .</div></pre></td></tr></table></figure>
<h2 id="8-æŠ€å·§å’Œæç¤º"><a href="#8-æŠ€å·§å’Œæç¤º" class="headerlink" title="8 æŠ€å·§å’Œæç¤º"></a>8 æŠ€å·§å’Œæç¤º</h2><p>è¿™é‡Œæˆ‘ä»¬ç»™å‡ºä¸€äº›æœ‰ç”¨çš„å°æŠ€å·§ã€‚</p>
<h3 id="8-1-â€œè‡ªåŠ¨å¡‘å½¢â€"><a href="#8-1-â€œè‡ªåŠ¨å¡‘å½¢â€" class="headerlink" title="8.1 â€œè‡ªåŠ¨å¡‘å½¢â€"></a>8.1 â€œè‡ªåŠ¨å¡‘å½¢â€</h3><p>ä¸ºäº†æ”¹å˜æ•°ç»„çš„ç»´åº¦ï¼Œä½ å¯ä»¥çœç•¥ä¸€ä¸ªå¯ä»¥è‡ªåŠ¨è¢«æ¨ç®—å‡ºæ¥çš„å¤§å°çš„å‚æ•°ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a = np.arange(30)</div><div class="line">&gt;&gt;&gt; a.shape = 2,-1,3  # -1 means &quot;whatever is needed&quot;</div><div class="line">&gt;&gt;&gt; a.shape</div><div class="line">(2, 5, 3)</div><div class="line">&gt;&gt;&gt; a</div><div class="line">array([[[ 0,  1,  2],</div><div class="line">        [ 3,  4,  5],</div><div class="line">        [ 6,  7,  8],</div><div class="line">        [ 9, 10, 11],</div><div class="line">        [12, 13, 14]],</div><div class="line">       [[15, 16, 17],</div><div class="line">        [18, 19, 20],</div><div class="line">        [21, 22, 23],</div><div class="line">        [24, 25, 26],</div><div class="line">        [27, 28, 29]]])</div></pre></td></tr></table></figure>
<h3 id="8-2-çŸ¢é‡å åŠ "><a href="#8-2-çŸ¢é‡å åŠ " class="headerlink" title="8.2 çŸ¢é‡å åŠ "></a>8.2 çŸ¢é‡å åŠ </h3><p>æˆ‘ä»¬æ€ä¹ˆä»ä¸€ä¸ªç›¸åŒå¤§å°çš„è¡Œå‘é‡æ„é€ å‡ºä¸€ä¸ª \( 2D \) æ•°ç»„ï¼Ÿåœ¨ \( MATLAB \)ä¸­æ˜¯ç›¸å½“ç®€å•çš„ï¼šå¦‚æœ <code>x</code> å’Œ <code>y</code> æ˜¯ä¸¤ä¸ªç›¸åŒé•¿åº¦çš„å‘é‡ï¼Œä½ åªéœ€è¦æŠŠ <code>m=[x;y]</code>ã€‚åœ¨ \( NumPy \) ä¸­ï¼Œé€šè¿‡å‡½æ•° <code>column_stack</code>ï¼Œ<code>dstack</code>ï¼Œ<code>hstack</code> å’Œ <code>vstack</code> å®ç°ï¼Œè¿™å–å†³äºæ‰€è¦å åŠ çš„ç»´åº¦ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">x = np.arange(0,10,2)                     # x=([0,2,4,6,8])</div><div class="line">y = np.arange(5)                          # y=([0,1,2,3,4])</div><div class="line">m = np.vstack([x,y])                      # m=([[0,2,4,6,8],</div><div class="line">                                          #     [0,1,2,3,4]])</div><div class="line">xy = np.hstack([x,y])                     # xy =([0,2,4,6,8,0,1,2,3,4])</div></pre></td></tr></table></figure>
<p>åœ¨è¶…è¿‡ä¸¤ä¸ªç»´åº¦æ—¶è¿™äº›å‡½æ•°èƒŒåçš„é€»è¾‘æ˜¯å¥‡æ€ªçš„ã€‚</p>
<h5 id="å‚è€ƒ-5"><a href="#å‚è€ƒ-5" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h5><p><a href="https://docs.scipy.org/doc/numpy-dev/user/numpy-for-matlab-users.html" target="_blank" rel="external">NumPy for Matlab users</a></p>
<h3 id="8-3-æŸ±çŠ¶å›¾"><a href="#8-3-æŸ±çŠ¶å›¾" class="headerlink" title="8.3 æŸ±çŠ¶å›¾"></a>8.3 æŸ±çŠ¶å›¾</h3><p>\( NumPy \) çš„ <code>histogram</code> å‡½æ•°åº”ç”¨äºæ•°ç»„ï¼Œè¿”å›ä¸€å¯¹çŸ¢é‡ï¼šæ•°ç»„çš„æŸ±çŠ¶å›¾å’Œ <code>bins</code> çŸ¢é‡ã€‚å½“å¿ƒï¼š<code>matplotlib</code> ä¹Ÿæœ‰ä¸€ä¸ªå‡½æ•°å»æ„å»ºæŸ±çŠ¶å›¾ï¼ˆå«åš <code>hist</code>ï¼ŒåŒæ ·åœ¨ \( Matlab \) ä¸­ï¼‰ï¼Œè¿™ä¸ªå’Œ \( NumPy \) è¿˜æ˜¯ä¸ä¸€æ ·çš„ã€‚ä¸»è¦çš„åŒºåˆ«æ˜¯ <code>pylab.hist</code> è‡ªåŠ¨ç»˜åˆ¶æŸ±çŠ¶å›¾è€Œ <code>matplotlib</code> åªæ˜¯ç”Ÿæˆæ•°æ®ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; import numpy as np</div><div class="line">&gt;&gt;&gt; import matplotlib.pyplot as plt</div><div class="line">&gt;&gt;&gt; # Build a vector of 10000 normal deviates with variance 0.5^2 and mean 2</div><div class="line">&gt;&gt;&gt; mu, sigma = 2, 0.5</div><div class="line">&gt;&gt;&gt; v = np.random.normal(mu,sigma,10000)</div><div class="line">&gt;&gt;&gt; # Plot a normalized histogram with 50 bins</div><div class="line">&gt;&gt;&gt; plt.hist(v, bins=50, normed=1)       # matplotlib version (plot)</div><div class="line">&gt;&gt;&gt; plt.show()</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">import numpy as np</div><div class="line">import matplotlib.pyplot as plt</div><div class="line"></div><div class="line"># Build a vector of 10000 normal deviates with variance 0.5^2 and mean 2</div><div class="line">mu, sigma = 2, 0.5</div><div class="line">v = np.random.normal(mu, sigma, 10000)</div><div class="line"># Plot a normalized histogram with 50 bins</div><div class="line">plt.hist(v, bins=50, normed=1)  # matplotlib version (plot)</div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<p><img src="/2018/02/04/NumPyOfficialQuickstartTutorial/8_3_01.png" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; # Compute the histogram with numpy and then plot it</div><div class="line">&gt;&gt;&gt; (n, bins) = np.histogram(v, bins=50, normed=True)  # NumPy version (no plot)</div><div class="line">&gt;&gt;&gt; plt.plot(.5*(bins[1:]+bins[:-1]), n)</div><div class="line">&gt;&gt;&gt; plt.show()</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">import numpy as np</div><div class="line">import matplotlib.pyplot as plt</div><div class="line"></div><div class="line"># Build a vector of 10000 normal deviates with variance 0.5^2 and mean 2</div><div class="line">mu, sigma = 2, 0.5</div><div class="line">v = np.random.normal(mu, sigma, 10000)</div><div class="line"># Compute the histogram with numpy and then plot it</div><div class="line">(n, bins) = np.histogram(v, bins=50, normed=True)  # NumPy version (no plot)</div><div class="line">plt.plot(.5 * (bins[1:] + bins[:-1]), n)</div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<p><img src="/2018/02/04/NumPyOfficialQuickstartTutorial/8_3_02.png" alt=""></p>
<h2 id="9-æ›´å¤šé˜…è¯»"><a href="#9-æ›´å¤šé˜…è¯»" class="headerlink" title="9 æ›´å¤šé˜…è¯»"></a>9 æ›´å¤šé˜…è¯»</h2><ul>
<li>The <a href="http://docs.python.org/tutorial/" target="_blank" rel="external">Python tutorial</a></li>
<li><a href="https://docs.scipy.org/doc/numpy-dev/reference/index.html#reference" target="_blank" rel="external">NumPy Reference</a></li>
<li><a href="https://docs.scipy.org/doc/scipy/reference/tutorial/index.html" target="_blank" rel="external">SciPy Tutorial</a></li>
<li><a href="http://www.scipy-lectures.org/" target="_blank" rel="external">SciPy Lecture Notes</a></li>
<li>A <a href="http://mathesaurus.sf.net/" target="_blank" rel="external">matlab, R, IDL, NumPy/SciPy dictionary</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;script type=&quot;text/javascript&quot; src=&quot;http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default&quot;&gt;&lt;/script&gt;

&lt;blockquote&gt;
&lt;p&gt;å†™åœ¨å‰é¢ï¼šæœ¬æ¥æ˜¯å­¦ä¹ ä¸‹ \( NumPy \)ï¼Œçœ‹åˆ°å®˜ç½‘çš„&lt;a href=&quot;https://docs.scipy.org/doc/numpy-dev/user/quickstart.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å…¥é—¨æ•™ç¨‹&lt;/a&gt;æƒ³è·Ÿç€å®éªŒä¸€ä¸‹ï¼Œæ€•ä¸å¸¸ç”¨ï¼Œè€Œæˆ‘è¿™äººå¥å¿˜ï¼Œæ‰€ä»¥è®°å½•ä¸‹æ¥ã€‚ç´¢æ€§å°±ç…§ç€ç¿»è¯‘ä¸€ä¸‹ï¼ŒåŒæ ·å¯ä»¥æå‡è‡ªå·±çš„é˜…è¯»å’Œå†™ä½œèƒ½åŠ›ï¼Œéœ€è¦çš„å¯ä»¥å­˜ä¸€ä¸‹ã€‚å½“ç„¶ï¼Œæœ¬äººæ°´å¹³æœ‰é™ï¼Œæœ‰é”™è¯¯çš„åœ°æ–¹æ¬¢è¿å¤§å®¶æŒ‡æ­£ã€‚è¿™é‡Œæ˜¯åŸºäº &lt;a href=&quot;https://docs.scipy.org/doc/numpy-dev/user/quickstart.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;\( NumPy\ v1.13.dev0\ Manual \)&lt;/a&gt; ç¿»è¯‘çš„ã€‚æˆªæ­¢æ—¶é—´\( 2018/02/04 \)&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="Math" scheme="http://fitzeng.org/tags/Math/"/>
    
      <category term="MachineLearning" scheme="http://fitzeng.org/tags/MachineLearning/"/>
    
      <category term="Python" scheme="http://fitzeng.org/tags/Python/"/>
    
      <category term="NumPy" scheme="http://fitzeng.org/tags/NumPy/"/>
    
  </entry>
  
  <entry>
    <title>ä» TensorFlow å…¥é—¨æœºå™¨å­¦ä¹ </title>
    <link href="http://fitzeng.org/2018/02/03/TensorFlowIntroduction/"/>
    <id>http://fitzeng.org/2018/02/03/TensorFlowIntroduction/</id>
    <published>2018-02-03T03:27:00.000Z</published>
    <updated>2018-02-03T02:16:06.149Z</updated>
    
    <content type="html"><![CDATA[<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script>

<blockquote>
<p>å†™åœ¨å‰é¢ï¼šç´§è·Ÿæ—¶ä»£æ­¥ä¼ï¼Œå¼€å§‹å­¦ä¹ æœºå™¨å­¦ä¹ ï¼ŒæŠ±ç€äº‰å–åœ¨æ¯•ä¸šä¹‹å‰å¤šçœ‹çœ‹å„ä¸ªæ–¹å‘æ˜¯ä»€ä¹ˆæ ·å­çš„å¿ƒæ€ï¼Œå‘ç°è¿™æ˜¯ä¸€ä¸ªå¾ˆæœ‰æ½œåŠ›ä¹Ÿå¾ˆæœ‰è¶£çš„é¢†åŸŸï¼ˆkengï¼‰ã€‚// ç„¶åå°±å¼€å§‹è¡¥æ•°å­¦äº†â€¦â€¦</p>
</blockquote>
<a id="more"></a>
<h2 id="0-TensorFlow-ä»‹ç»"><a href="#0-TensorFlow-ä»‹ç»" class="headerlink" title="0 TensorFlow ä»‹ç»"></a>0 TensorFlow ä»‹ç»</h2><p>åˆšåˆšå…¥é—¨çš„å°ç™½ï¼Œç†è§£ä¸æ·±ï¼Œç›´æ¥çœ‹å®˜æ–¹çš„ä»‹ç»å§</p>
<blockquote>
<p>GitHub Description: Computation using data flow graphs for scalable machine learning</p>
<p><a href="https://www.tensorflow.org/" target="_blank" rel="external">å®˜ç½‘</a>: \( TensorFlow^{^{TM}} \)æ˜¯ä¸€ä¸ªä½¿ç”¨æ•°æ®æµå›¾è¿›è¡Œæ•°å€¼è®¡ç®—çš„å¼€æºè½¯ä»¶åº“ã€‚å›¾ä¸­çš„èŠ‚ç‚¹ä»£è¡¨æ•°å­¦è¿ç®—ï¼Œ è€Œå›¾ä¸­çš„è¾¹åˆ™ä»£è¡¨åœ¨è¿™äº›èŠ‚ç‚¹ä¹‹é—´ä¼ é€’çš„å¤šç»´æ•°ç»„ï¼ˆå¼ é‡ï¼‰ã€‚</p>
</blockquote>
<h3 id="0-1-ä»€ä¹ˆæ˜¯-TensorFlow"><a href="#0-1-ä»€ä¹ˆæ˜¯-TensorFlow" class="headerlink" title="0.1 ä»€ä¹ˆæ˜¯ TensorFlow ?"></a>0.1 ä»€ä¹ˆæ˜¯ TensorFlow ?</h3><p>\( Tensor \) æ˜¯å¼ é‡çš„æ„æ€ï¼Œ\( Flow \) æ˜¯æµçš„æ„æ€ã€‚æ‰€ä»¥å¯ä»¥ç›´æ¥çœ‹åšåˆ©ç”¨å¼ é‡ç»„æˆçš„æ•°æ®æµå›¾è¿›è¡Œè®¡ç®—çš„ä¸€ä¸ªå¼€æºåº“ã€‚</p>
<h3 id="0-2-TensorFlow-å¯ä»¥åšä»€ä¹ˆ"><a href="#0-2-TensorFlow-å¯ä»¥åšä»€ä¹ˆ" class="headerlink" title="0.2 TensorFlow å¯ä»¥åšä»€ä¹ˆ ?"></a>0.2 TensorFlow å¯ä»¥åšä»€ä¹ˆ ?</h3><p>ç›®å‰ä¸»è¦æ˜¯ç”¨äºæœºå™¨å­¦ä¹ ï¼Œè¿™æ ·è¯´æœ‰ç‚¹ä¸äº²æ°‘ï¼Œç¬”è€…ç†è§£æ˜¯å¯ä»¥å°†æ•°æ®è½¬åŒ–ä¸ºå‘é‡æè¿°å¹¶ä¸”æ„å»ºç›¸åº”çš„è®¡ç®—æµå›¾éƒ½æ˜¯å¯ä»¥ä½¿ç”¨çš„ã€‚<br>ä¸¾ä¸ªä¾‹å­å§ï¼Œè™½ç„¶ä¸çŸ¥é“æ°ä¸æ°å½“ã€‚<br>æ¯”å¦‚æˆ‘ä»¬åœ¨è®¡ç®— \( (1 + 2)*3-4 \) æ—¶ï¼Œå¯ä»¥æ„å»ºä¸€ä¸ªäºŒå‰æ ‘</p>
<p><img src="/2018/02/03/TensorFlowIntroduction/0_2_01.png" alt=""></p>
<p>è¿™æ£µäºŒå‰æ ‘çš„ä¸­åºéå†å°±æ˜¯ä¸Šé¢çš„è¡¨è¾¾å¼ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªè¡¨è¾¾å¼å¯ä»¥è½¬åŒ–æˆä¸€ä¸ªå½¢å¦‚äºŒå‰æ ‘çš„å›¾ï¼Œè€Œ \( TensorFlow \) æ­£å¥½å¯ä»¥è®¡ç®—è¿™ä¸ªå›¾ã€‚ä¸‹é¢ç»™å‡ºä»£ç ï¼Œçœ‹ä¸æ‡‚æ²¡å…³ç³»ï¼Œåªè¦ç†è§£ä»£ç æµç¨‹æ˜¯å¯¹å›¾(äºŒå‰æ ‘)çš„è®¡ç®—å°±å¯ä»¥äº†ï¼Œä¸‹ä¸€ç« ä¼šä»‹ç»å¦‚ä½•ä½¿ç”¨\( TensorFlow \)ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># coding: utf-8</span></div><div class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</div><div class="line"></div><div class="line">a, b, c, d = tf.constant(<span class="number">1</span>), tf.constant(<span class="number">2</span>), tf.constant(<span class="number">3</span>),tf.constant(<span class="number">4</span>)</div><div class="line">add = tf.add(a,b)</div><div class="line">mul = tf.multiply(add, c)</div><div class="line">sub = tf.subtract(mul, d)</div><div class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</div><div class="line">    print(sess.run(sub))</div><div class="line"><span class="comment"># output: </span></div><div class="line"><span class="comment"># 5</span></div></pre></td></tr></table></figure>
<h3 id="0-3-TensorFlow-å®‰è£…"><a href="#0-3-TensorFlow-å®‰è£…" class="headerlink" title="0.3 TensorFlow å®‰è£…"></a>0.3 TensorFlow å®‰è£…</h3><p>è¿™é‡Œå°±ä¸åšè¯¦ç»†ä»‹ç»äº†ï¼Œç›¸ä¿¡ç‚¹å¼€è¿™ç¯‡æ–‡ç« çš„ä½ åº”è¯¥æœ‰äº†è¿è¡Œç¯å¢ƒã€‚å¦‚æœæ²¡æœ‰è¿™é‡Œæ¨èä¸¤ä¸ªç½‘ç«™<a href="https://www.tensorflow.org/install/" target="_blank" rel="external">è‹±æ–‡:å®˜ç½‘</a> å’Œ <a href="http://wiki.jikexueyuan.com/project/tensorflow-zh/get_started/os_setup.html" target="_blank" rel="external">ä¸­æ–‡:**å­¦é™¢ç¿»è¯‘</a><br>ç„¶åä»‹ç»ä¸€ä¸‹æˆ‘çš„ç¯å¢ƒï¼š\( Anaconda + PyCharm \)</p>
<p>æ³¨æ„ \( PyCharm:\ Project\ Interpreter \) è®¾ç½®ä¸º \( Conda\ Environment \) æ‰èƒ½è·‘ \( TensorFlow \)ã€‚å¦‚æœä¸ä¼šå¯ä»¥å¤šçœ‹çœ‹ç½‘ä¸Šçš„æ•™ç¨‹ï¼Œèƒ½å¯¹è™šæ‹Ÿç¯å¢ƒåŠ æ·±äº†è§£ã€‚</p>
<h2 id="1-åˆè¯†-TensorFlow"><a href="#1-åˆè¯†-TensorFlow" class="headerlink" title="1 åˆè¯† TensorFlow"></a>1 åˆè¯† TensorFlow</h2><p>å¥½äº†ï¼Œæœ‰å‰é¢çš„ä»‹ç»ï¼Œä½ åº”è¯¥æœ‰èƒ½å¤Ÿä½¿ç”¨ \( TensorFlow \) çš„ç¯å¢ƒäº†ï¼Œä¸‹é¢å¼€å§‹ä»‹ç»å¦‚ä½•ç¼–ç ã€‚</p>
<h3 id="1-1-åŸºç¡€è¯­æ³•"><a href="#1-1-åŸºç¡€è¯­æ³•" class="headerlink" title="1.1 åŸºç¡€è¯­æ³•"></a>1.1 åŸºç¡€è¯­æ³•</h3><blockquote>
<p>å…¶å®è¯´è¯­æ³•æ˜¯ä¸å‡†ç¡®çš„ï¼Œè¯­æ³•å°±æ˜¯ \( Python \) çš„è¯­æ³•(è¿™é‡Œä½¿ç”¨ Python)ï¼Œä¸»è¦æ˜¯ä»‹ç»è°ƒç”¨è¿™ä¸ªè®¡ç®—åº“æ¥å®ç°è¿™ä¸ªç‰¹æ®Šçš„è®¡ç®—ã€‚åŒæ ·æ‘†ä¸Š<a href="https://www.tensorflow.org/get_started/" target="_blank" rel="external">å®˜ç½‘æ•™ç¨‹</a></p>
</blockquote>
<h4 id="1-1-1-è®¡ç®—å•å…ƒä»‹ç»"><a href="#1-1-1-è®¡ç®—å•å…ƒä»‹ç»" class="headerlink" title="1.1.1 è®¡ç®—å•å…ƒä»‹ç»"></a>1.1.1 è®¡ç®—å•å…ƒä»‹ç»</h4><p>å¯ä»¥çœ‹åˆ°åœ¨è®¡ç®—å›¾ä¸­ï¼Œæœ‰ä¸¤ä¸ªä¸»è¦çš„å†…å®¹æ˜¯ç‚¹(å¶å­å’Œéå¶å­èŠ‚ç‚¹)å’Œçº¿ã€‚æˆ‘çš„ç†è§£æ˜¯ç‚¹ä»£è¡¨æ•°æ®ï¼Œçº¿ä»£è¡¨æ“ä½œã€‚ä¸çŸ¥é“å¯¹ä¸å¯¹ï¼Œä¸è¿‡ä¸‹é¢å°±æŒ‰ç…§è¿™æ ·æ€è·¯ä»‹ç»äº†ã€‚<br>ä¸‹é¢å¼€å§‹ä»‹ç»æœ‰å“ªäº›å¸¸ç”¨çš„â€œç‚¹â€ï¼š</p>
<p><code>å¸¸é‡</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">c = tf.constant(<span class="number">2</span>)</div></pre></td></tr></table></figure>
<p><code>å˜é‡</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">v = tf.Variable(<span class="number">2</span>)</div></pre></td></tr></table></figure>
<p><code>å ä½ç¬¦</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">p = tf.placeholder(tf.float32)</div></pre></td></tr></table></figure>
<p>ä»¥ä¸Šä»£ç éƒ½æ˜¯ä»¥æœ€å°èƒ½ç”¨åŸåˆ™ä¼ çš„å‚ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥å»çœ‹çœ‹æºç ï¼Œè¿™é‡Œä¸»è¦æ˜¯å¾€ \( Python \) è¯­æ³•ä¸Šæ‹‰ï¼Œå…ˆä½¿ç”¨èµ·æ¥å†ä»¥åè‡ªå·±æ·±ç©¶ä¸ºä»€ä¹ˆè¦è®¾è®¡æˆè¿™æ ·çš„æ•°æ®ç»“æ„å¯¹è®¡ç®—å›¾æ˜¯å¿…é¡»çš„ã€‚</p>
<p>æ¥ä¸‹æ¥å°±æ˜¯æœ‰å“ªäº›â€œçº¿â€ï¼š</p>
<p><code>å››åˆ™è¿ç®—</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">add = tf.add(a, b)</div><div class="line">sub = tf.subtract(a, b)</div><div class="line">mul = tf.multiply(a, b)</div><div class="line">div = tf.divide(a, b)</div></pre></td></tr></table></figure>
<p>å…¶ä»–çš„å°±ä¸å†ä»‹ç»äº†ï¼Œè¯¦æƒ…å¯çœ‹ \( XXX\<em> ops.py \) çš„æºç ã€‚æ¯”å¦‚ä»¥ä¸Šçš„æ“ä½œå®šä¹‰åœ¨ \( math\</em> ops.py \)ã€‚</p>
<h4 id="1-1-2-è®¡ç®—æµç¨‹ä»‹ç»"><a href="#1-1-2-è®¡ç®—æµç¨‹ä»‹ç»" class="headerlink" title="1.1.2 è®¡ç®—æµç¨‹ä»‹ç»"></a>1.1.2 è®¡ç®—æµç¨‹ä»‹ç»</h4><p>çŸ¥é“äº†å¸¸è§æ•°æ®å’Œè®¡ç®—æ–¹æ³•ä¸‹é¢ä»‹ç»è®¡ç®—æµç¨‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># coding: utf-8</span></div><div class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</div><div class="line"></div><div class="line"><span class="comment"># Step1: åˆ›å»ºæ•°æ®</span></div><div class="line">a, b, c, d = tf.constant(<span class="number">1</span>), tf.constant(<span class="number">2</span>), tf.constant(<span class="number">3</span>),tf.constant(<span class="number">4</span>)</div><div class="line"></div><div class="line"><span class="comment"># Step2: æ„é€ è®¡ç®—å›¾</span></div><div class="line">add = tf.add(a,b)</div><div class="line">mul = tf.multiply(add, c)</div><div class="line">sub = tf.subtract(mul, d)</div><div class="line"></div><div class="line"><span class="comment"># Step3: è¿›è¡Œè®¡ç®—</span></div><div class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</div><div class="line">    print(sess.run(sub))</div></pre></td></tr></table></figure>
<p>ä¸Šé¢è¿™ä¸ªä¾‹å­æ˜¯ä¸€ä¸ªæ ‡å‡†çš„å¸¸é‡è®¡ç®—è¿‡ç¨‹ï¼Œä½ å¯ä»¥è¯•ç€ <code>print(a, add)</code> çœ‹çœ‹ä½ åˆ›å»ºçš„æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Œä½ ä¼šå‘ç°ä»–æ˜¯ä¸€ä¸ª \( Tensor \) è€Œä¸”é‡Œé¢çš„å€¼æ˜¯ \( 0 \)ã€‚å¯ä»¥çŒœæµ‹ï¼Œè¿™é‡Œåªæ‰“å°ä¸è®¡ç®—ï¼Œçœ‹ \( Tensor \) æºç ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># ops.py</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span></div><div class="line">    <span class="keyword">return</span> <span class="string">"&lt;tf.Tensor '%s' shape=%s dtype=%s&gt;"</span> % (self.name, self.get_shape(),self._dtype.name)</div><div class="line"></div><div class="line"><span class="meta">@property</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">name</span><span class="params">(self)</span>:</span></div><div class="line">    <span class="string">"""The string name of this tensor."""</span></div><div class="line">    <span class="keyword">if</span> <span class="keyword">not</span> self._op.name:</div><div class="line">        <span class="keyword">raise</span> ValueError(<span class="string">"Operation was not named: %s"</span> % self._op)</div><div class="line">    <span class="keyword">return</span> <span class="string">"%s:%d"</span> % (self._op.name, self._value_index)</div></pre></td></tr></table></figure>
<p>å­¦ä¼šäº†è®¡ç®—å¸¸é‡ï¼Œå˜é‡æ˜¯ä¸æ˜¯ä¹Ÿä¸€æ ·ï¼Ÿå¦‚æœä½ è¯•è¿‡å°±çŸ¥é“æ˜¯ä¸ä¸€æ ·çš„ï¼Œå˜é‡éœ€è¦åˆå§‹åŒ–æ“ä½œã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">v = tf.Variable(<span class="number">2</span>)</div><div class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</div><div class="line">    sess.run(tf.global_variables_initializer())</div><div class="line">    print(v, sess.run(v))</div></pre></td></tr></table></figure>
<p>åˆ°è¿™é‡Œå¯èƒ½ä¼šç–‘é—®ï¼Œé‚£å˜é‡å’Œå¸¸é‡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿä»å­—é¢æ„æ€å¯ä»¥çŸ¥é“å˜é‡åº”è¯¥æ˜¯å¯å˜çš„ï¼Œæ–¹ä¾¿æˆ‘ä»¬åœ¨è®¡ç®—è¿‡ç¨‹ä¸­éšæ—¶è°ƒæ•´å‚æ•°ï¼Œä¸‹é¢é€šè¿‡ä¸€æ®µä»£ç ä»‹ç»å¦‚ä½•ä½¿ç”¨ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">v = tf.Variable(<span class="number">2</span>)</div><div class="line"><span class="comment"># å°† v çš„å€¼è‡ªä¹˜ 2</span></div><div class="line">update = tf.assign(v, tf.multiply(v, tf.constant(<span class="number">2</span>)))</div><div class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</div><div class="line">    sess.run(tf.global_variables_initializer())</div><div class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">4</span>):</div><div class="line">        print(<span class="string">"-----------------------"</span>)</div><div class="line">        <span class="keyword">print</span> <span class="string">"Before : "</span>, sess.run(v)</div><div class="line">        sess.run(update)</div><div class="line">        <span class="keyword">print</span> <span class="string">"After : "</span>, sess.run(v)</div><div class="line"></div><div class="line"><span class="comment"># output:</span></div><div class="line"><span class="comment"># -----------------------</span></div><div class="line"><span class="comment"># Before :  2</span></div><div class="line"><span class="comment"># After :  4</span></div><div class="line"><span class="comment"># -----------------------</span></div><div class="line"><span class="comment"># Before :  4</span></div><div class="line"><span class="comment"># After :  8</span></div><div class="line"><span class="comment"># -----------------------</span></div><div class="line"><span class="comment"># Before :  8</span></div><div class="line"><span class="comment"># After :  16</span></div><div class="line"><span class="comment"># -----------------------</span></div><div class="line"><span class="comment"># Before :  16</span></div><div class="line"><span class="comment"># After :  32</span></div></pre></td></tr></table></figure>
<p>ä½†æ˜¯å¦‚æœæˆ‘ä»¬ä¸æƒ³æ¯æ¬¡éƒ½è®¾ç½®-æ›´æ–°-è®¡ç®—-æ›´æ–°-è®¡ç®—â€¦â€¦è€Œæ˜¯ç›´æ¥æŠŠæ•°æ®å†™å…¥è®¡ç®—ï¼Œé‚£å ä½ç¬¦å°±èµ·ä½œç”¨äº†ã€‚åŒæ ·ä¸¾ä¸ªå°ä¾‹å­ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">c = tf.constant(<span class="number">2</span>)</div><div class="line"><span class="comment"># æ³¨æ„ç±»å‹ä¸€è‡´ï¼Œè¿™é‡Œæ˜¯ tf.int32</span></div><div class="line">p = tf.placeholder(tf.int32)</div><div class="line">mul = tf.multiply(c, p)</div><div class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</div><div class="line">    <span class="comment"># tmp = 2 ç›¸å½“äºä¸Šä¸€ä¸ªä¾‹å­å˜é‡çš„åˆå§‹å€¼æ˜¯ 2</span></div><div class="line">    tmp = <span class="number">2</span>;</div><div class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">4</span>):</div><div class="line">        <span class="comment"># ç›´æ¥å¡«å…… feed_dict</span></div><div class="line">        tmp = sess.run(mul, feed_dict=&#123;p:tmp&#125;)</div><div class="line">        <span class="keyword">print</span> tmp</div><div class="line"></div><div class="line"><span class="comment"># output:</span></div><div class="line"><span class="comment"># 4</span></div><div class="line"><span class="comment"># 8</span></div><div class="line"><span class="comment"># 16</span></div><div class="line"><span class="comment"># 32</span></div></pre></td></tr></table></figure>
<p>ä¸‹é¢æ€»ç»“ä¸‹è®¡ç®—è¿‡ç¨‹ï¼š</p>
<ul>
<li>åˆ›å»ºæ•°æ®ï¼šå¯ä»¥åˆ›å»ºå¸¸é‡ã€å˜é‡å’Œå ä½ç¬¦ã€‚</li>
<li>æ„å»ºå›¾ï¼šé€šè¿‡å‰é¢çš„æ•°æ®æ„å»ºä¸€å¼ å›¾ã€‚</li>
<li>åˆå§‹åŒ–ï¼šæŠŠå˜é‡åˆå§‹åŒ–ã€‚</li>
<li>è®¡ç®—ï¼šå¿…é¡»é€šè¿‡å¼€å¯ä¸€ä¸ª Session æ¥è®¡ç®—å›¾</li>
</ul>
<h3 id="1-2-å¯è§†åŒ–"><a href="#1-2-å¯è§†åŒ–" class="headerlink" title="1.2 å¯è§†åŒ–"></a>1.2 å¯è§†åŒ–</h3><p>\( TensorFlow \)æä¾›äº†ä¸€ä¸ªå¯è§†åŒ–å·¥å…·â€”â€”\( TensorBoard \)ï¼Œä¸‹é¢å¼€å§‹ä»‹ç»å¦‚ä½•ä½¿ç”¨ã€‚</p>
<p>è¿™é‡Œå¯¹ä¸Šé¢äºŒå‰æ ‘çš„ä¾‹å­è¿›è¡Œå¯è§†åŒ–å¤„ç†ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># coding: utf-8</span></div><div class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</div><div class="line"></div><div class="line">a, b, c, d = tf.constant(<span class="number">1</span>), tf.constant(<span class="number">2</span>), tf.constant(<span class="number">3</span>),tf.constant(<span class="number">4</span>)</div><div class="line">add = tf.add(a,b)</div><div class="line">mul = tf.multiply(add, c)</div><div class="line">sub = tf.subtract(mul, d)</div><div class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</div><div class="line">    writer = tf.summary.FileWriter(<span class="string">'./graphs'</span>, sess.graph)</div><div class="line">    print(sess.run(sub))</div><div class="line">writer.close()</div></pre></td></tr></table></figure>
<p>ç„¶åä½¿ç”¨å‘½ä»¤è¡Œåˆ°å­˜å‚¨ <code>graphs</code> çš„æ–‡ä»¶å¤¹ä¸‹æ‰§è¡Œ <code>tensorboard --logdir=&quot;./graphs&quot;</code> å‘½ä»¤ï¼Œç„¶åæŒ‰ç…§æç¤ºåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ <code>http://localhost:6006</code> å¦‚æœæˆåŠŸæ˜¾ç¤º \( TensorBoard \) ç•Œé¢å°±è¯´æ˜æˆåŠŸäº†ã€‚</p>
<p><img src="/2018/02/03/TensorFlowIntroduction/1_2_01.png" alt=""></p>
<h2 id="2-åˆ©ç”¨-TensorFlow-è¿›è¡Œæœºå™¨å­¦ä¹ "><a href="#2-åˆ©ç”¨-TensorFlow-è¿›è¡Œæœºå™¨å­¦ä¹ " class="headerlink" title="2 åˆ©ç”¨ TensorFlow è¿›è¡Œæœºå™¨å­¦ä¹ "></a>2 åˆ©ç”¨ TensorFlow è¿›è¡Œæœºå™¨å­¦ä¹ </h2><p>è¿™é‡Œä¹Ÿç®—æ˜¯æœºå™¨å­¦ä¹ çš„å…¥é—¨ä»‹ç»å§ã€‚ç›´æ¥ä»‹ç»æœºå™¨å­¦ä¹ ç›¸å…³çŸ¥è¯†å¯èƒ½ä¸å¤ªç°å®ï¼Œè€Œä¸”ç¬”è€…ä¹Ÿæ˜¯åœ¨å­¦ä¹ é˜¶æ®µï¼Œæ‰€ä»¥ä¸¾ä¸€äº›å°ä¾‹å­æ¥ä½“ä¼šæœºå™¨å­¦ä¹ çš„è¿‡ç¨‹å§ã€‚</p>
<h3 id="2-1-çº¿æ€§å›å½’"><a href="#2-1-çº¿æ€§å›å½’" class="headerlink" title="2.1 çº¿æ€§å›å½’"></a>2.1 çº¿æ€§å›å½’</h3><p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨æœ€ç†Ÿæ‚‰çš„çº¿æ€§å›å½’æ¥ä½“ä¼šä¸€ä¸‹æœºå™¨å­¦ä¹ çš„è¿‡ç¨‹ï¼š</p>
<h4 id="2-1-1-å‡†å¤‡æ•°æ®"><a href="#2-1-1-å‡†å¤‡æ•°æ®" class="headerlink" title="2.1.1 å‡†å¤‡æ•°æ®"></a>2.1.1 å‡†å¤‡æ•°æ®</h4><p>è¿™é‡Œå¾ˆç®€å•ï¼Œå°±æ˜¯æ¨¡æ‹Ÿä¸€ä¸ªçº¿æ€§å›å½’ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥è‡ªå·±æ‹Ÿå®šä¸€äº›æ•°æ®å¥½é¢„æµ‹ç»“æœå’Œè‡ªå·±è®¾æƒ³çš„æ˜¯å¦ä¸€è‡´ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">train_X = numpy.asarray([<span class="number">1.1</span>, <span class="number">1.8</span>, <span class="number">3.2</span>, <span class="number">4.7</span>, <span class="number">5.9</span>, <span class="number">6.7</span>])</div><div class="line">train_Y = numpy.asarray([<span class="number">1.2</span>, <span class="number">2.1</span>, <span class="number">3.1</span>, <span class="number">4.6</span>, <span class="number">5.5</span>, <span class="number">6.9</span>])</div></pre></td></tr></table></figure>
<h4 id="2-1-2-æ„å»ºæ¨¡å‹"><a href="#2-1-2-æ„å»ºæ¨¡å‹" class="headerlink" title="2.1.2 æ„å»ºæ¨¡å‹"></a>2.1.2 æ„å»ºæ¨¡å‹</h4><p>æˆ‘ä»¬é‡‡ç”¨å ä½ç¬¦çš„å½¢å¼è¿›è¡Œè®¡ç®—ï¼Œåœ¨è¿ç®—æ—¶ç›´æ¥å¯¼å…¥æ•°æ®ä¾¿å¯ã€‚<br>è¿™é‡Œå› ä¸ºæˆ‘ä»¬é‡‡ç”¨çº¿æ€§å›å½’ï¼Œæ‰€ä»¥ç›®æ ‡å‡½æ•°æ˜¯å½¢å¦‚ \( Y = XW + b \) çš„å½¢å¼çš„ä¸€æ¬¡å‡½æ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬é€šè¿‡ç»™å‡ºçš„ç‚¹å»æ‹Ÿåˆä¸€æ¡æ¯”è¾ƒç¬¦åˆè¿™äº›ç‚¹åˆ†å¸ƒçš„ç›´çº¿ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">X = tf.placeholder(tf.float32)</div><div class="line">Y = tf.placeholder(tf.float32)</div><div class="line"></div><div class="line">W = tf.Variable(<span class="number">-1.</span>, name=<span class="string">"weight"</span>)</div><div class="line">b = tf.Variable(<span class="number">-1.</span>, name=<span class="string">"bias"</span>)</div><div class="line"></div><div class="line"><span class="comment"># linear model </span></div><div class="line"><span class="comment"># activation = X*W + b</span></div><div class="line">activation = tf.add(tf.multiply(X, W), b)</div></pre></td></tr></table></figure>
<h4 id="2-1-3-å‚æ•°è¯„ä¼°"><a href="#2-1-3-å‚æ•°è¯„ä¼°" class="headerlink" title="2.1.3 å‚æ•°è¯„ä¼°"></a>2.1.3 å‚æ•°è¯„ä¼°</h4><p>æˆ‘ä»¬é‡‡ç”¨æ¯ä¸ªç‚¹ç»™å‡ºçš„çºµåæ ‡å’Œçº¿æ€§æ¨¡å‹ç®—å‡ºçš„çºµåæ ‡çš„å·®\( (activation - Y) \)çš„å¹³æ–¹å’Œ\( (tf.reduce\_ sum(tf.pow(activation - Y, 2))) \)ä½œä¸ºæŸå¤±å‡½æ•°ï¼Œåœ¨è®­ç»ƒä¸­é‡‡ç”¨æ¢¯åº¦ä¸‹é™ç®—æ³•å°½é‡ä½¿å’Œæœ€å°ï¼Œå­¦åˆ©ç‡é€‰æ‹© \( 0.01 \)ã€‚å…¶ä¸­çš„æ•°å­¦åŸç†è¿™é‡Œå°±ä¸ä»‹ç»äº†ï¼Œä»¥åä¼šå†™å…³äºæœºå™¨å­¦ä¹ ç®—æ³•çš„ç›¸å…³æ–‡ç« ã€‚<br>ä¸€èˆ¬é€‰å–æŸå¤±å‡½æ•°å’Œé€šè¿‡æŸäº›æœ€ä¼˜åŒ–æ‰‹æ®µæ›´æ–°æƒé‡æ˜¯è¿™é‡Œçš„ä¸€å¤§éš¾ç‚¹ï¼Œå¦‚æœè¦çŸ¥é“åŸç†ï¼Œéœ€è¦å­¦ä¹ å¤§é‡æ•°å­¦åŸºç¡€çŸ¥è¯†ï¼ˆæ¦‚ç‡è®ºï¼Œçº¿æ€§ä»£æ•°ï¼Œå¾®ç§¯åˆ†â€¦â€¦ï¼‰ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">learning_rate = <span class="number">0.01</span></div><div class="line"></div><div class="line">cost = tf.reduce_sum(tf.pow(activation - Y, <span class="number">2</span>))</div><div class="line">optimizer = tf.train.GradientDescentOptimizer(learning_rate).minimize(cost)</div></pre></td></tr></table></figure>
<h4 id="2-1-4-è®­ç»ƒæ•°æ®"><a href="#2-1-4-è®­ç»ƒæ•°æ®" class="headerlink" title="2.1.4 è®­ç»ƒæ•°æ®"></a>2.1.4 è®­ç»ƒæ•°æ®</h4><p>è¿™é‡Œå°±æ˜¯å–æ•°æ®ï¼Œå–‚ç»™å›¾ä¸­çš„è¾“å…¥èŠ‚ç‚¹ï¼Œç„¶åæ¨¡å‹ä¼šè‡ªå·±è¿›è¡Œä¼˜åŒ–ï¼Œå¯ä»¥å°†æ•°æ®å¤šæ¬¡è¿­ä»£ä½¿å¾—æ‹Ÿåˆå‡½æ•°èƒ½å¤Ÿæ›´å¥½çš„é€‚åº”è¿™äº›æ•°æ®ç‚¹ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">training_epochs = <span class="number">2000</span></div><div class="line">display_step = <span class="number">100</span></div><div class="line"></div><div class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</div><div class="line">    sess.run(tf.global_variables_initializer())</div><div class="line">    <span class="keyword">for</span> epoch <span class="keyword">in</span> range(training_epochs):</div><div class="line">        <span class="keyword">for</span> (x, y) <span class="keyword">in</span> zip(train_X, train_Y):</div><div class="line">            sess.run(optimizer, feed_dict=&#123;X: x, Y: y&#125;)</div><div class="line">        <span class="keyword">if</span> epoch % display_step == <span class="number">0</span>:</div><div class="line">            print(<span class="string">"Epoch:"</span>, <span class="string">'%04d'</span> % (epoch + <span class="number">1</span>), <span class="string">"cost="</span>,</div><div class="line">                  <span class="string">"&#123;:.9f&#125;"</span>.format(sess.run(cost, feed_dict=&#123;X: train_X, Y: train_Y&#125;)), <span class="string">"W="</span>, sess.run(W), <span class="string">"b="</span>,</div><div class="line">                  sess.run(b))</div><div class="line">    print(<span class="string">"Optimization Finished!"</span>)</div><div class="line">    print(<span class="string">"cost="</span>, sess.run(cost, feed_dict=&#123;X: train_X, Y: train_Y&#125;), <span class="string">"W="</span>, sess.run(W), <span class="string">"b="</span>, sess.run(b))</div><div class="line">```     </div><div class="line"></div><div class="line"><span class="comment">#### 2.1.5 å¯è§†åŒ–</span></div><div class="line">å¯ä»¥ç›´æ¥ç»˜åˆ¶äºŒç»´å›¾å½¢çœ‹ç»“æœã€‚ä¸ç†Ÿæ‚‰çš„å¯ä»¥å‚è€ƒ[Matplotlib æ•™ç¨‹](https://liam0205.me/<span class="number">2014</span>/<span class="number">09</span>/<span class="number">11</span>/matplotlib-tutorial-zh-cn/)</div><div class="line"></div><div class="line">```python</div><div class="line">    writer = tf.summary.FileWriter(<span class="string">'./graphs'</span>, sess.graph)</div><div class="line"></div><div class="line">    plt.scatter(train_X, train_Y, color=<span class="string">'red'</span>, label=<span class="string">'Original data'</span>)</div><div class="line">    plt.plot(train_X, sess.run(W) * train_X + sess.run(b), color=<span class="string">'blue'</span>, label=<span class="string">'Fitted line'</span>)</div><div class="line">    plt.show()</div><div class="line">writer.close()</div></pre></td></tr></table></figure>
<p>äºŒç»´å›¾ï¼š<br><img src="/2018/02/03/TensorFlowIntroduction/2_1_5_01.png" alt=""><br>æ•°æ®æµå›¾ï¼š<br><img src="/2018/02/03/TensorFlowIntroduction/2_1_5_02.png" alt=""></p>
<h4 id="2-1-6-å°ç»“"><a href="#2-1-6-å°ç»“" class="headerlink" title="2.1.6 å°ç»“"></a>2.1.6 å°ç»“</h4><p>å…¶å®æ•´ä¸ªè¿‡ç¨‹å¦‚æœä¸æ·±ç©¶å…¶ä¸­çš„åŸç†ï¼Œè¿˜æ˜¯å¾ˆå¥½ç†è§£çš„ï¼Œæ— éå°±æ˜¯<code>æä¾›æ•°æ®-é€‰å–æ‹Ÿåˆå‡½æ•°-æ„å»ºå›¾-é€‰å–æŸå¤±å‡½æ•°-æœ€ä¼˜åŒ–-è®­ç»ƒæ•°æ®ï¼ˆæ›´æ–°æƒé‡ï¼‰-å¾—å‡ºç»“è®º</code>ã€‚è¿™ä¸ªè¿‡ç¨‹ç¬¦åˆæˆ‘ä»¬å¯¹çº¿æ€§å›å½’è¿™ä¸ªé—®é¢˜è§£å†³çš„åŸºæœ¬æ€è·¯çš„é¢„æœŸã€‚å½“ç„¶ï¼Œç¬”è€…è®¤ä¸ºè¿™åªæ˜¯å¼€å§‹ï¼Œè¦æƒ³æ·±å…¥ï¼Œå­¦ä¹ å¿…è¦çš„æ•°å­¦çŸ¥è¯†æ˜¯æœºå™¨å­¦ä¹ çš„å¿…ç»ä¹‹è·¯ã€‚</p>
<p>è¿™é‡Œå¯ä»¥å‚è€ƒ<a href="https://juejin.im/entry/5904542c570c350058168c76" target="_blank" rel="external">TensorFlow å…¥é—¨</a><br>æ•´ä½“ä»£ç ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># coding: utf-8</span></div><div class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> print_function</div><div class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</div><div class="line"><span class="keyword">import</span> numpy</div><div class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</div><div class="line"></div><div class="line">train_X = numpy.asarray([<span class="number">1.1</span>, <span class="number">1.8</span>, <span class="number">3.2</span>, <span class="number">4.7</span>, <span class="number">5.9</span>, <span class="number">6.7</span>])</div><div class="line">train_Y = numpy.asarray([<span class="number">1.2</span>, <span class="number">2.1</span>, <span class="number">3.1</span>, <span class="number">4.6</span>, <span class="number">5.5</span>, <span class="number">6.9</span>])</div><div class="line"></div><div class="line">X = tf.placeholder(tf.float32)</div><div class="line">Y = tf.placeholder(tf.float32)</div><div class="line"></div><div class="line">W = tf.Variable(<span class="number">-1.</span>, name=<span class="string">"weight"</span>)</div><div class="line">b = tf.Variable(<span class="number">-1.</span>, name=<span class="string">"bias"</span>)</div><div class="line"></div><div class="line">activation = tf.add(tf.multiply(X, W), b)</div><div class="line"></div><div class="line">learning_rate = <span class="number">0.01</span></div><div class="line"></div><div class="line">cost = tf.reduce_sum(tf.pow(activation - Y, <span class="number">2</span>))</div><div class="line">optimizer = tf.train.GradientDescentOptimizer(learning_rate).minimize(cost)</div><div class="line"></div><div class="line">training_epochs = <span class="number">2000</span></div><div class="line">display_step = <span class="number">100</span></div><div class="line"></div><div class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</div><div class="line">    sess.run(tf.global_variables_initializer())</div><div class="line">    <span class="keyword">for</span> epoch <span class="keyword">in</span> range(training_epochs):</div><div class="line">        <span class="keyword">for</span> (x, y) <span class="keyword">in</span> zip(train_X, train_Y):</div><div class="line">            sess.run(optimizer, feed_dict=&#123;X: x, Y: y&#125;)</div><div class="line">        <span class="keyword">if</span> epoch % display_step == <span class="number">0</span>:</div><div class="line">            print(<span class="string">"Epoch:"</span>, <span class="string">'%04d'</span> % (epoch + <span class="number">1</span>), <span class="string">"cost="</span>,</div><div class="line">                  <span class="string">"&#123;:.9f&#125;"</span>.format(sess.run(cost, feed_dict=&#123;X: train_X, Y: train_Y&#125;)), <span class="string">"W="</span>, sess.run(W), <span class="string">"b="</span>,</div><div class="line">                  sess.run(b))</div><div class="line">    print(<span class="string">"Optimization Finished!"</span>)</div><div class="line">    print(<span class="string">"cost="</span>, sess.run(cost, feed_dict=&#123;X: train_X, Y: train_Y&#125;), <span class="string">"W="</span>, sess.run(W), <span class="string">"b="</span>, sess.run(b))</div><div class="line">    </div><div class="line">    writer = tf.summary.FileWriter(<span class="string">'./graphs'</span>, sess.graph)</div><div class="line"></div><div class="line">    plt.scatter(train_X, train_Y, color=<span class="string">'red'</span>, label=<span class="string">'Original data'</span>)</div><div class="line">    plt.plot(train_X, sess.run(W) * train_X + sess.run(b), color=<span class="string">'blue'</span>, label=<span class="string">'Fitted line'</span>)</div><div class="line">    plt.show()</div><div class="line">writer.close()</div><div class="line"></div><div class="line"><span class="comment"># output:</span></div><div class="line"><span class="comment"># Epoch: 0001 cost= 0.785177052 W= 1.07263 b= -0.448403</span></div><div class="line"><span class="comment"># Epoch: 0101 cost= 0.440001398 W= 1.02555 b= -0.0137608</span></div><div class="line"><span class="comment"># Epoch: 0201 cost= 0.437495589 W= 1.02078 b= 0.0176154</span></div><div class="line"><span class="comment"># Epoch: 0301 cost= 0.437433660 W= 1.02043 b= 0.0199056</span></div><div class="line"><span class="comment"># Epoch: 0401 cost= 0.437430561 W= 1.02041 b= 0.0200727</span></div><div class="line"><span class="comment"># Epoch: 0501 cost= 0.437429130 W= 1.0204 b= 0.0200851</span></div><div class="line"><span class="comment"># Epoch: 0601 cost= 0.437429696 W= 1.0204 b= 0.0200854</span></div><div class="line"><span class="comment"># Epoch: 0701 cost= 0.437429696 W= 1.0204 b= 0.0200854</span></div><div class="line"><span class="comment"># Epoch: 0801 cost= 0.437429696 W= 1.0204 b= 0.0200854</span></div><div class="line"><span class="comment"># Epoch: 0901 cost= 0.437429696 W= 1.0204 b= 0.0200854</span></div><div class="line"><span class="comment"># Epoch: 1001 cost= 0.437429696 W= 1.0204 b= 0.0200854</span></div><div class="line"><span class="comment"># Epoch: 1101 cost= 0.437429696 W= 1.0204 b= 0.0200854</span></div><div class="line"><span class="comment"># Epoch: 1201 cost= 0.437429696 W= 1.0204 b= 0.0200854</span></div><div class="line"><span class="comment"># Epoch: 1301 cost= 0.437429696 W= 1.0204 b= 0.0200854</span></div><div class="line"><span class="comment"># Epoch: 1401 cost= 0.437429696 W= 1.0204 b= 0.0200854</span></div><div class="line"><span class="comment"># Epoch: 1501 cost= 0.437429696 W= 1.0204 b= 0.0200854</span></div><div class="line"><span class="comment"># Epoch: 1601 cost= 0.437429696 W= 1.0204 b= 0.0200854</span></div><div class="line"><span class="comment"># Epoch: 1701 cost= 0.437429696 W= 1.0204 b= 0.0200854</span></div><div class="line"><span class="comment"># Epoch: 1801 cost= 0.437429696 W= 1.0204 b= 0.0200854</span></div><div class="line"><span class="comment"># Epoch: 1901 cost= 0.437429696 W= 1.0204 b= 0.0200854</span></div><div class="line"><span class="comment"># Optimization Finished!</span></div><div class="line"><span class="comment"># cost= 0.43743 W= 1.0204 b= 0.0200854</span></div><div class="line"><span class="comment"># å¯ä»¥çœ‹åˆ°è¿­ä»£æ¬¡æ•°åˆ° 500 æ¬¡å·¦å³æ•°æ®å°±ç¨³å®šäº†ã€‚</span></div></pre></td></tr></table></figure>
<h2 id="3-æ€»ç»“"><a href="#3-æ€»ç»“" class="headerlink" title="3 æ€»ç»“"></a>3 æ€»ç»“</h2><p>å…¶å®è¿™åªæ˜¯ä¸€ä¸ªå¼€å§‹ï¼Œè¿˜æœ‰å¥½å¤šå¥½å¤šä¸œè¥¿è¦å»å­¦ä¹ ã€‚è¶Šæ¥è¶Šè§‰å¾—åŸºç¡€çš„é‡è¦æ€§ï¼Œä¸ä»…ä»…æ˜¯è®¡ç®—æœºåŸºç¡€ï¼Œæ•°å­¦åŸºç¡€ä¹Ÿæ˜¯åŒç­‰é‡è¦ï¼Œç‰¹åˆ«æ˜¯æœªæ¥çš„ç‰©è”ç½‘è¶‹åŠ¿ï¼Œå¯èƒ½ç¼–ç è¿™ç§ä¸“ä¸šè¶Šæ¥è¶Šæ·¡åŒ–ï¼Œåªæ˜¯ä½œä¸ºæŸäº›ä¸“ä¸šäººå‘˜çš„ä¸€ç§å·¥å…·/æŠ€èƒ½ä½¿ç”¨ã€‚é©¬ä¸Šé¢ä¸´æ¯•ä¸šï¼Œåªèƒ½è‡ªå·±æ…¢æ…¢å•ƒè¿™äº›ä¸œè¥¿äº†â€¦â€¦</p>
<h2 id="4-å‚è€ƒèµ„æ–™"><a href="#4-å‚è€ƒèµ„æ–™" class="headerlink" title="4 å‚è€ƒèµ„æ–™"></a>4 å‚è€ƒèµ„æ–™</h2><ul>
<li><a href="https://www.tensorflow.org/" target="_blank" rel="external">0. å®˜ç½‘</a></li>
<li><a href="http://wiki.jikexueyuan.com/project/tensorflow-zh/get_started/os_setup.html" target="_blank" rel="external">1. ä¸­æ–‡:**å­¦é™¢ç¿»è¯‘</a></li>
<li><a href="https://liam0205.me/2014/09/11/matplotlib-tutorial-zh-cn/" target="_blank" rel="external">2. Matplotlib æ•™ç¨‹</a></li>
<li><a href="https://juejin.im/entry/5904542c570c350058168c76" target="_blank" rel="external">3. TensorFlow å…¥é—¨</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;script type=&quot;text/javascript&quot; src=&quot;http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default&quot;&gt;&lt;/script&gt;

&lt;blockquote&gt;
&lt;p&gt;å†™åœ¨å‰é¢ï¼šç´§è·Ÿæ—¶ä»£æ­¥ä¼ï¼Œå¼€å§‹å­¦ä¹ æœºå™¨å­¦ä¹ ï¼ŒæŠ±ç€äº‰å–åœ¨æ¯•ä¸šä¹‹å‰å¤šçœ‹çœ‹å„ä¸ªæ–¹å‘æ˜¯ä»€ä¹ˆæ ·å­çš„å¿ƒæ€ï¼Œå‘ç°è¿™æ˜¯ä¸€ä¸ªå¾ˆæœ‰æ½œåŠ›ä¹Ÿå¾ˆæœ‰è¶£çš„é¢†åŸŸï¼ˆkengï¼‰ã€‚// ç„¶åå°±å¼€å§‹è¡¥æ•°å­¦äº†â€¦â€¦&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="Math" scheme="http://fitzeng.org/tags/Math/"/>
    
      <category term="MachineLearning" scheme="http://fitzeng.org/tags/MachineLearning/"/>
    
      <category term="Python" scheme="http://fitzeng.org/tags/Python/"/>
    
      <category term="TensorFlow" scheme="http://fitzeng.org/tags/TensorFlow/"/>
    
  </entry>
  
  <entry>
    <title>æœºå™¨å­¦ä¹ ä¹‹é‡æ‹¾æ¦‚ç‡è®º</title>
    <link href="http://fitzeng.org/2018/01/26/reProbabilityTheory/"/>
    <id>http://fitzeng.org/2018/01/26/reProbabilityTheory/</id>
    <published>2018-01-26T03:27:00.000Z</published>
    <updated>2018-01-26T08:12:37.271Z</updated>
    
    <content type="html"><![CDATA[<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script>

<h2 id="0-å‰è¨€"><a href="#0-å‰è¨€" class="headerlink" title="0. å‰è¨€"></a>0. å‰è¨€</h2><blockquote>
<p>è¿™é‡Œä¸»è¦æ˜¯å›´ç»•æµ™å¤§çš„ã€Šæ¦‚ç‡è®ºä¸æ•°ç†ç»Ÿè®¡ã€‹ç¬¬å››ç‰ˆçš„å†…å®¹è¿›è¡Œæ€»ç»“, å…¶ä¸­æˆªå–äº†ä¸€äº›å›¾ç‰‡ä½œä¸ºå†…å®¹æœ‰åŠ©äºå¯¹å…¬å¼çš„ç†è§£ã€‚ç¬”è€…æŠŠè¿™ç¯‡æ–‡ç« ä½œä¸ºè‡ªå·±çš„è¯»ä¹¦ç¬”è®°, ä¸ºä»¥åç³»ç»Ÿå›é¡¾æ¦‚ç‡è®ºæä¾›ä¾¿æ·ã€‚åŒæ—¶ä¼šç»§ç»­æ›´æ–°, ä¿è¯è‡ªå·±è¯»æ‡‚ä¹‹åå†æ¥ä¹¦å†™ã€‚</p>
</blockquote>
<a id="more"></a>
<h2 id="1-åŸºæœ¬æ¦‚å¿µ"><a href="#1-åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="1. åŸºæœ¬æ¦‚å¿µ"></a>1. åŸºæœ¬æ¦‚å¿µ</h2><h3 id="1-1-äº‹ä»¶å…³ç³»"><a href="#1-1-äº‹ä»¶å…³ç³»" class="headerlink" title="1.1 äº‹ä»¶å…³ç³»"></a>1.1 äº‹ä»¶å…³ç³»</h3><ol>
<li><code>åŒ…å«äº‹ä»¶</code> \( A \subset B \) : äº‹ä»¶ \( B \) åŒ…å«äº‹ä»¶ \( A \)ï¼Œäº‹ä»¶  \( A \) å‘ç”Ÿå¿…ç„¶å¯¼è‡´äº‹ä»¶  \( B \) çš„å‘ç”Ÿã€‚</li>
<li><code>å’Œäº‹ä»¶</code> \( A \cup B = \{ x|x \in A\ or\ x \in B \} \) : \( A \) \( B \) ä¸­è‡³å°‘æœ‰ä¸€ä¸ªäº‹ä»¶å‘ç”Ÿã€‚</li>
<li>\( \bigcup\limits_{k=1}\limits^{n} A_k \) : \( n \) ä¸ªäº‹ä»¶ \( A_1, A_2, \ldots , A_n \) çš„å’Œäº‹ä»¶ã€‚</li>
<li>\( \bigcup\limits_{k=1}\limits^{\infty} A_k \) : å¯åˆ—ä¸ªäº‹ä»¶ \( A_1, A_2, \ldots \) çš„å’Œäº‹ä»¶ã€‚</li>
<li><code>ç§¯äº‹ä»¶</code> \( A \cap B = \{ x|x \in A\ and\ x \in B \} \) : \( A \) \( B \) äº‹ä»¶åŒæ—¶å‘ç”Ÿã€‚</li>
<li>\( \bigcap\limits_{k=1}\limits^{n} A_k \) : \( n \) ä¸ªäº‹ä»¶ \( A_1, A_2, \ldots , A_n \) çš„ç§¯äº‹ä»¶ã€‚</li>
<li>\( \bigcap\limits_{k=1}\limits^{\infty} A_k \) : å¯åˆ—ä¸ªäº‹ä»¶ \( A_1, A_2, \ldots \) çš„ç§¯äº‹ä»¶ã€‚</li>
<li><code>å·®äº‹ä»¶</code> \( A - B = \{x|x=\in A\ and\ \notin B \} \) : å½“ä¸”ä»…å½“ \( A \) å‘ç”Ÿï¼Œ \( B \) ä¸å‘ç”Ÿã€‚</li>
<li><code>äº’æ–¥äº‹ä»¶</code> \( A \cap B = \emptyset \) : \( A \) ä¸ \( B \) äº‹ä»¶ä¸ç›¸å®¹ï¼Œä¸èƒ½åŒæ—¶å‘ç”Ÿã€‚</li>
<li><code>å¯¹ç«‹äº‹ä»¶</code> \( A \cup B = S\ and\ A \cap B = \emptyset \) : \( A \) \( B \)äº‹ä»¶äº’é€†ï¼Œæ¯æ¬¡å®éªŒ \( A, B \) å¿…æœ‰ä¸€ä¸ªå‘ç”Ÿä¸”åªæœ‰ä¸€ä¸ªå‘ç”Ÿã€‚\( A \) çš„å¯¹ç«‹äº‹ä»¶è®°ä¸º \( \overline{A}.\ \overline{A} = S - A \)ã€‚</li>
</ol>
<p><img src="/2018/01/26/reProbabilityTheory/1_1_01.png" alt="äº‹ä»¶å…³ç³»å›¾ç¤º"></p>
<h3 id="1-2-åŸºæœ¬è¿ç®—"><a href="#1-2-åŸºæœ¬è¿ç®—" class="headerlink" title="1.2 åŸºæœ¬è¿ç®—"></a>1.2 åŸºæœ¬è¿ç®—</h3><ol>
<li><code>äº¤æ¢å¾‹</code> $$ A \cup B = B \cup A;\ A \cap B = B \cap A $$</li>
<li><code>ç»“åˆå¾‹</code> $$ A \cup (B \cup C) = (A \cup B) \cup C \\ A \cap (B \cap C) = (A \cap B) \cap C $$</li>
<li><code>åˆ†é…ç‡</code> $$ A \cup (B \cap C) = (A \cup B) \cap (A \cup C) \\ A \cap (B \cup C) = (A \cap B) \cup (A \cap C) $$</li>
<li><code>å¾·æ‘©æ ¹ç‡</code> $$ \overline{A \cap B} = \overline{A} \cap \overline{B};\ \overline{A \cap B} = \overline{A} \cup \overline{B} $$</li>
</ol>
<h3 id="1-3-æ¦‚ç‡"><a href="#1-3-æ¦‚ç‡" class="headerlink" title="1.3 æ¦‚ç‡"></a>1.3 æ¦‚ç‡</h3><ol>
<li><code>éè´Ÿæ€§</code> : å¯¹äºæ¯ä¸€ä¸ªäº‹ä»¶ \( A \), æœ‰ \( P(A) \geq 0 \);</li>
<li><code>è§„èŒƒæ€§</code> : å¯¹äºå¿…ç„¶äº‹ä»¶ \( S \), æœ‰ \( P(S) = 1 \);</li>
<li><code>å¯åˆ—å¯åŠ æ€§</code> : è®¾ \( A_1, A_2, \ldots \) æ˜¯ä¸¤ä¸¤ä¸ç›¸å®¹çš„äº‹ä»¶ï¼Œå³å¯¹äº \( A_iA_j = \emptyset,\ i \neq j, i, j = 1, 2, \ldots \), æœ‰ \( P(A_1 \cup A_2 \cup \ldots) = P(A_1) + P(A_2) + \ldots \)ã€‚</li>
</ol>
<p>Tips : \( n \to \infty \Longrightarrow f_n(A) = P(A) \)</p>
<h4 id="1-3-1-åŸºæœ¬æ€§è´¨"><a href="#1-3-1-åŸºæœ¬æ€§è´¨" class="headerlink" title="1.3.1 åŸºæœ¬æ€§è´¨"></a>1.3.1 åŸºæœ¬æ€§è´¨</h4><ol>
<li>\( P(\emptyset) = 0\ and\ P(A) \leq 1  \)</li>
<li><code>æœ‰é™å¯åŠ æ€§</code> : \( A_1, A_2, \ldots, A_n \) ä¸ºäº’æ–¥äº‹ä»¶, åˆ™ $$ P(A_1 \cup A_2 \cup \ldots \cup A_n) = P(A_1) + P(A_2) + \ldots + P(A_n) $$</li>
<li>è‹¥ \( A \in B \), åˆ™ $$ P(B - A) = P(B) - P(A) \\ P(B) \geq P(A) $$ è¯æ˜æç¤º : \( B = A \cup (B - A)\ and\ A(B - A) = \emptyset \)</li>
<li>\( P(\overline{A}) = 1 - P(A) \)</li>
<li><code>åŠ æ³•å…¬å¼</code> : ä»»æ„ \( A, B \) äº‹ä»¶, æœ‰ $$ P(A \cup B) = P(A) + P(B) - P(AB) $$ è¯æ˜æç¤º : \( A \cup B = A \cup (B - AB) \)</li>
<li><code>åŠ æ³•å…¬å¼æ¨å¹¿</code><br>$$ P(A_1 \cup A_2 \cup A_3) = P(A_1) + P(A_2) + P(A_3) - P(A_1A_2) - P(A_1A_3) - P(A_2A_3) + P(A_1A_2A_3) $$ ä¸€èˆ¬çš„æœ‰<br>$$<br>\begin{aligned} P(A_1 \cup A_2 \cup \ldots \cup A_n) = {}<br>&amp; \sum_{i = 1}^{n}P(A_i) - \sum_{1 \leq i &lt; j \leq n}P(A_iA_j) {} \\<br>&amp; + \sum_{1 \leq i &lt; j &lt; k \leq n}P(A_iA_jA_k) + \ldots + (-1)^{n-1}P(A_1A_2 \ldots A_n) \end{aligned}<br>$$</li>
</ol>
<h3 id="1-4-å¤å…¸æ¦‚å‹"><a href="#1-4-å¤å…¸æ¦‚å‹" class="headerlink" title="1.4 å¤å…¸æ¦‚å‹"></a>1.4 å¤å…¸æ¦‚å‹</h3><blockquote>
<p>ä¹Ÿç§°ç­‰å¯èƒ½äº‹ä»¶, æ ·æœ¬ç©ºé—´åŒ…å«æœ‰é™ä¸ªå…ƒç´ , æ¯ä¸ªåŸºæœ¬äº‹ä»¶å‘ç”Ÿçš„å¯èƒ½æ€§ç›¸åŒã€‚</p>
</blockquote>
<h4 id="1-4-1-åŸºæœ¬æ€§è´¨"><a href="#1-4-1-åŸºæœ¬æ€§è´¨" class="headerlink" title="1.4.1 åŸºæœ¬æ€§è´¨"></a>1.4.1 åŸºæœ¬æ€§è´¨</h4><ol>
<li><code>ç­‰å¯èƒ½æ€§</code> : åœ¨æ ·æœ¬ç©ºé—´ \( S = \{ e_1, e_2, \ldots, e_n \} \) åˆ™ $$ P(\{e_1\}) = P(\{e_2\}) = \ldots = P(\{e_n\}) $$</li>
<li><code>ä¸¤ä¸¤ä¸ç›¸å®¹</code> : æœ‰<br>$$<br>\begin{aligned}<br>1 {}<br>&amp; = P(S) = P(\{e_1\} \cup \{e_2\} \cup \ldots \cup \{e_n\}) {} \\<br>&amp; = P(\{e_1\}) + P(\{e_2\}) + \ldots + P(\{e_n\}) {} \\<br>&amp; = nP(\{e_i\}) \\<br>&amp; P(\{e_i\}) = \frac{1}{n}, i = 1, 2, \ldots, n.<br>\end{aligned}<br>$$</li>
<li>è‹¥äº‹ä»¶ \( A \) åŒ…å« \( k \) ä¸ªåŸºæœ¬äº‹ä»¶, å³ \( A = \{e_{i_1}\} \cup \{e_{i_2}\} \cup \dots \cup \{e_{i_k}\} \) è¿™é‡Œ \( i_1, i_2, \ldots, i_k \) æ˜¯ \( 1, 2, \ldots, n \) ä¸­æŸ \( k \)ä¸ªä¸åŒçš„æ•°ã€‚åˆ™æœ‰ $$ P(A) = \sum<em>{j = 1}^{k} P(\{ e\</em>{i_j} \}) = \frac{k}{n} = \frac{the\ number\ of\ event\ A}{the\ number\ of\ event\ S} $$</li>
</ol>
<h3 id="1-5-æ¡ä»¶æ¦‚ç‡"><a href="#1-5-æ¡ä»¶æ¦‚ç‡" class="headerlink" title="1.5 æ¡ä»¶æ¦‚ç‡"></a>1.5 æ¡ä»¶æ¦‚ç‡</h3><blockquote>
<p>ä¸»è¦ç†è§£å°±æ˜¯åœ¨äº‹ä»¶ \( A \) å‘ç”Ÿäº†çš„æƒ…å†µä¸‹, äº‹ä»¶ \( B \) å‘ç”Ÿçš„æ¦‚ç‡ \( P(B|A) \)ã€‚å¯ç†è§£æ ·æœ¬ç©ºé—´ä¸ºäº‹ä»¶ \( A \) å‘ç”Ÿä¹‹åçš„ã€‚</p>
</blockquote>
<h4 id="1-5-1-å®šä¹‰"><a href="#1-5-1-å®šä¹‰" class="headerlink" title="1.5.1 å®šä¹‰"></a>1.5.1 å®šä¹‰</h4><p>äº‹ä»¶ \( A \) å‘ç”Ÿçš„æ¡ä»¶ä¸‹å‘ç”Ÿäº‹ä»¶ \( B \) çš„æ¡ä»¶æ¦‚ç‡ : $$ P(B|A) = \frac{P(AB)}{P(A)} $$ å¦‚æœä¸å¤ªå¥½ç†è§£å¯ä»¥æ¢æˆ \( P(AB) = P(A)P(B|A) \), äº‹ä»¶ \( AB \) å‘ç”Ÿçš„è¿‡ç¨‹æ˜¯äº‹ä»¶ \( A \) å‘ç”Ÿå, å†å‘ç”Ÿäº‹ä»¶ \( B \), è¿™æ ·å°±å¯ä»¥å¾—å‡ºäº‹ä»¶ \( AB \) çš„æ¦‚ç‡ \( P(AB) \) ä¸ äº‹ä»¶ \( A \) å‘ç”Ÿçš„æ¦‚ç‡ \( P(A) \) ä»¥åŠäº‹ä»¶ \( A \) åå‘ç”Ÿçš„äº‹ä»¶ \( B \) çš„æ¦‚ç‡ \( P(B|A) \) çš„ä¹˜ç§¯ç›¸ç­‰ã€‚ </p>
<p>åŒç†, æ¦‚ç‡çš„<code>éè´Ÿæ€§</code>ã€<code>è§„èŒƒæ€§</code>ã€<code>å¯åˆ—å¯åŠ æ€§</code>æ¡ä»¶æ¦‚ç‡åŒæ ·å…·å¤‡, ä¸‹é¢è§£é‡Šç¬¬ä¸‰æ¡ã€‚</p>
<ol>
<li><code>å¯åˆ—å¯åŠ æ€§</code> : è®¾ \( B_1, B_2, \ldots \) æ˜¯ä¸¤ä¸¤ä¸ç›¸å®¹çš„äº‹ä»¶, åˆ™ $$ P(\bigcup\limits_{i=1}\limits^{\infty} B_i | A) = \sum\limits_{i = 1}\limits^{\infty} P(B_i | A) $$ ç†è§£ : ä½“ä¼šåŸºäºäº‹ä»¶ \( A \) åå‘ç”Ÿçš„äº‹ä»¶ \( B_i \) çš„æ ·æœ¬ç©ºé—´æ˜¯äº‹ä»¶ \( A \) å‘ç”Ÿåçš„æ ·æœ¬ç©ºé—´, å…¸å‹ä¾‹å­æ˜¯åœ¨ä¸€ä¸ªé»‘ç›’ä¸­ä¸æ”¾å›çš„å–çƒ, æ±‚å¤šæ¬¡å–å‡ºæŸç§ç»„åˆçƒçš„æ¦‚ç‡ã€‚</li>
<li><code>ä¹˜æ³•å®šç†</code> : è®¾ \( P(A) &gt; 0 \) åˆ™$$ P(AB) = P(B|A)P(A) $$</li>
<li><code>ä¹˜æ³•å®šç†æ¨å¹¿</code> : è®¾ \( P(AB) &gt; 0 \) åˆ™$$ P(ABC) = P(C|AB)P(B|A)P(A) $$ Tips : \( P(A) \geq P(AB) &gt; 0 \) æ˜¯éšè—æ¡ä»¶ã€‚<br>ä¸€èˆ¬åŒ–, è®¾ \( A_1, A_2, \ldots, A_n \ and\  n \geq 2 \ and \ P(A_1A_2\ldots A_{n-1}) &gt; 0\), åˆ™æœ‰ $$ P(A_1A_2\ldots A_{n}) = P(A_n|A_1A_2\ldots A_{n-1})P(A_{n-1}A_1A_2\ldots A_{n-2}) \ldots P(A_2|A_1)P(A_1)$$ å¾ˆå¥½ç†è§£, ä»ååˆ°å‰, ä¸€ä¸ªä¸€ä¸ªäº‹ä»¶å‘ç”Ÿå»æ€è€ƒã€‚</li>
</ol>
<h4 id="1-5-2-é‡è¦å…¬å¼"><a href="#1-5-2-é‡è¦å…¬å¼" class="headerlink" title="1.5.2 é‡è¦å…¬å¼"></a>1.5.2 é‡è¦å…¬å¼</h4><ol>
<li><p><code>å…¨æ¦‚ç‡å…¬å¼</code> : è®¾å®éªŒ \( E \) çš„æ ·æœ¬ç©ºé—´ä¸º \( S \), \( A \) ä¸º \( E \) çš„äº‹ä»¶, \( B_1, B_2, \ldots, B_n \) ä¸º \( S \) çš„ä¸€ä¸ªåˆ’åˆ†, ä¸” \( P(B_i) &gt; 0 (i = 0, 1, \dots, n) \), åˆ™ $$ P(A) = P(A|B_1)P(B_1) + P(A|B_2)P(B_2) + \ldots + P(A|B_n)P(B_n) $$ ç…§å‰é¢æ ·æœ¬ç©ºé—´æ¥ç†è§£å°±å¥½äº†, \( P(A|B_i) \) ä»£è¡¨ \( A \) äº‹ä»¶åœ¨ \( B_i \) æ ·æœ¬ç©ºé—´çš„æ¦‚ç‡, ä¹˜ä»¥ \( P(B_i) \) ä»£è¡¨åœ¨æ ·æœ¬ç©ºé—´ \( S \) ä¸­, \( B_i \) ä¸­çš„æ ·æœ¬è§¦å‘äº‹ä»¶ \( A \) çš„æ¦‚ç‡ã€‚å½“æ‰€æœ‰åˆ’åˆ†æ ·æœ¬çš„æ¦‚ç‡åŠ èµ·æ¥æ—¶, å°±æ˜¯äº‹ä»¶ \( A \) åœ¨ \( S \) ä¸­å‘ç”Ÿçš„æ¦‚ç‡äº†ã€‚<br>è¯æ˜ï¼šå‡è®¾ \( P(B_i) &gt; 0 \ (i = 1, 2, \ldots, n) \ and \ (AB_i)(AB_j) = \emptyset, i \neq j, i, j = 1, 2, \ldots, n \)<br>$$<br>A = AS = A(B_1 \cup B_2 \cup \ldots \cup B_n) = AB_1 \cup AB_2 \cup \ldots \cup AB_n, \\<br>\begin{aligned}<br>P(A) {} &amp; = P(AB_1) + P(AB_2) + \ldots + P(AB_n)  {} \\<br>&amp; = P(A|B_1)P(B_1) + P(A|B_2)P(B_2) + \ldots + P(A|B_n)P(B_n)<br>\end{aligned}<br>$$</p>
</li>
<li><p><code>è´å¶æ–¯å…¬å¼</code> : è®¾å®éªŒ \( E \) çš„æ ·æœ¬ç©ºé—´ä¸º \( S \), \( A \) ä¸º \( E \) çš„äº‹ä»¶, \( B_1, B_2, \ldots, B_n \) ä¸º \( S \) çš„ä¸€ä¸ªåˆ’åˆ†, ä¸” \( P(A) &gt; 0,P(B_i) &gt; 0 (i = 0, 1, \dots, n) \), åˆ™ $$ P(B_i|A) = \frac{P(A|B_i)P(B_i)}{\sum\limits_{j = 1}\limits^{n}P(A|B_j)P(B_j)}, i= 1,2, \ldots, n.$$ å½“ \( n = 2 \) æ—¶, è¿™ä¸¤ä¸ªå…¬å¼åˆ†åˆ«ä¸º : $$ P(A) = P(A|B)P(B) + P(A|\overline{B})P(\overline{B}) = P(AB) + P(A\overline{B}) \\ P(B|A) = \frac{P(AB)}{P(A)} = \frac{P(A|B)P(B)}{P(A|B)P(B) + P(A|\overline{B})P(\overline{B})} = \frac{P(A|B)P(B)}{P(AB) + P(A\overline{B})} $$</p>
</li>
</ol>
<p>è¿™ä¸¤ä¸ªå…¬å¼æ¯”è¾ƒé‡è¦, è¿™é‡Œæˆªå–ä¸€ä¸ªä¾‹å­ä¾›åŠ æ·±ç†è§£:<br><img src="/2018/01/26/reProbabilityTheory/1_5_2_01.png" alt="å…¨æ¦‚ç‡å’Œè´å¶æ–¯å…¬å¼åº”ç”¨1"><br><img src="/2018/01/26/reProbabilityTheory/1_5_2_02.png" alt="å…¨æ¦‚ç‡å’Œè´å¶æ–¯å…¬å¼åº”ç”¨2"><br><img src="/2018/01/26/reProbabilityTheory/1_5_2_03.png" alt="å…¨æ¦‚ç‡å’Œè´å¶æ–¯å…¬å¼åº”ç”¨3"></p>
<h3 id="1-6-ç‹¬ç«‹æ€§"><a href="#1-6-ç‹¬ç«‹æ€§" class="headerlink" title="1.6 ç‹¬ç«‹æ€§"></a>1.6 ç‹¬ç«‹æ€§</h3><blockquote>
<p>ç†è§£äº‹ä»¶ \( A, B \) æœ‰ \( P(A|B) = P(A) \) æ¡ä»¶æˆç«‹æ—¶, \( A, B \) ç›¸äº’ç‹¬ç«‹ã€‚</p>
</blockquote>
<h4 id="1-6-1-å®šä¹‰"><a href="#1-6-1-å®šä¹‰" class="headerlink" title="1.6.1 å®šä¹‰"></a>1.6.1 å®šä¹‰</h4><p>è®¾äº‹ä»¶ \( A, B \) æ»¡è¶³ $$ P(AB) = P(A)P(B) $$ åˆ™ç§°äº‹ä»¶ \( A, B \) äº’ç›¸ç‹¬ç«‹ã€‚</p>
<h4 id="1-6-2-æ€§è´¨"><a href="#1-6-2-æ€§è´¨" class="headerlink" title="1.6.2 æ€§è´¨"></a>1.6.2 æ€§è´¨</h4><p>è‹¥ \( A, B \) äº’ç›¸ç‹¬ç«‹, åˆ™ \( (A,\overline{B})\ (\overline{A}, B)\ (\overline{A}, \overline{B}) \) ä¹Ÿç›¸äº’ç‹¬ç«‹ã€‚</p>
<p><code>å¤šäº‹ä»¶ç‹¬ç«‹</code> : \( A, B, C \) ç‹¬ç«‹æ¡ä»¶ $$ \begin{aligned} &amp; P(AB) = P(A)P(B) \\ &amp; P(AC) = P(A)P(C) \\ &amp; P(BC) = P(B)P(C) \\ &amp; P(ABC) = P(A)P(B)P(C) \end{aligned}$$ ä¸€èˆ¬, è®¾äº‹ä»¶ \( A_1, A_2, \ldots, A_n \) æ˜¯ \( n \ (n \geq 2) \) ä¸ªäº‹ä»¶, å¦‚æœå¯¹äºå…¶ä¸­ä»»æ„ \( 2, 3, \ldots, n \)ä¸ªäº‹ä»¶çš„ç§¯äº‹ä»¶çš„æ¦‚ç‡éƒ½ç­‰äºå„äº‹ä»¶æ¦‚ç‡ä¹‹ç§¯, åˆ™ç§°äº‹ä»¶ \( A_1, A_2, \ldots, A_n \) ç›¸äº’ç‹¬ç«‹ã€‚</p>
<p>Tips : é€šè¿‡å…³é”®è¯è‡ªå·±ä¸€ä¸€å›é¡¾è¿™ä¸€ç« çš„å†…å®¹å§ã€‚<br><code>éšæœºè¯•éªŒ</code>, <code>æ ·æœ¬ç©ºé—´</code>, <code>éšæœºäº‹ä»¶</code>, <code>åŸºæœ¬äº‹ä»¶</code>, <code>é¢‘ç‡</code>, <code>æ¦‚ç‡</code>, <code>å¤å…¸æ¦‚å‹</code>, \( A \) çš„å¯¹ç«‹äº‹ä»¶ \( \overline{A} \) åŠå…¶æ¦‚ç‡, <code>ä¸¤äº’ä¸ç›¸å®¹äº‹ä»¶çš„å’Œäº‹ä»¶çš„æ¦‚ç‡</code>, <code>æ¦‚ç‡çš„åŠ æ³•å®šç†</code>, <code>æ¡ä»¶æ¦‚ç‡</code>, <code>æ¦‚ç‡çš„ä¹˜æ³•å…¬å¼</code>, <code>å…¨æ¦‚ç‡å…¬å¼</code>, <code>è´å¶æ–¯å…¬å¼</code>, <code>äº‹ä»¶çš„ç‹¬ç«‹æ€§</code>, <code>å®é™…æ¨æ–­åŸç†</code></p>
<h2 id="2-éšæœºå˜é‡åŠå…¶åˆ†å¸ƒ"><a href="#2-éšæœºå˜é‡åŠå…¶åˆ†å¸ƒ" class="headerlink" title="2. éšæœºå˜é‡åŠå…¶åˆ†å¸ƒ"></a>2. éšæœºå˜é‡åŠå…¶åˆ†å¸ƒ</h2><h3 id="2-1-éšæœºå˜é‡"><a href="#2-1-éšæœºå˜é‡" class="headerlink" title="2.1 éšæœºå˜é‡"></a>2.1 éšæœºå˜é‡</h3><blockquote>
<p>åœ¨å‰é¢éšæœºè¯•éªŒä¸­, ç»“æœå¯ä»¥ç”¨æ•°æ¥è¡¨ç¤º, ä½†æ˜¯æœ‰äº›æè¿°èµ·æ¥ä¸æ–¹ä¾¿, ä¸ºäº†å¤„ç†æ–¹ä¾¿, å°† \( S \) ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´  \( e \) ä¸å®æ•° \( x \) å¯¹åº”èµ·æ¥, éšæœºå˜é‡å°±è¿™æ ·å¼•å…¥äº†ã€‚</p>
</blockquote>
<h3 id="2-2-ç¦»æ•£å‹éšæœºå˜é‡åŠå…¶åˆ†å¸ƒ"><a href="#2-2-ç¦»æ•£å‹éšæœºå˜é‡åŠå…¶åˆ†å¸ƒ" class="headerlink" title="2.2 ç¦»æ•£å‹éšæœºå˜é‡åŠå…¶åˆ†å¸ƒ"></a>2.2 ç¦»æ•£å‹éšæœºå˜é‡åŠå…¶åˆ†å¸ƒ</h3><blockquote>
<p>éšæœºå˜é‡ \( X \) çš„å–å€¼æ˜¯ç¦»æ•£çš„, å¦‚ \( 0, 1, 2, 3 \)</p>
</blockquote>
<h4 id="2-2-1-å®šä¹‰"><a href="#2-2-1-å®šä¹‰" class="headerlink" title="2.2.1 å®šä¹‰"></a>2.2.1 å®šä¹‰</h4><p>è®¾ç¦»æ•£å‹éšæœºå˜é‡ \( X \) æ‰€æœ‰å¯èƒ½çš„å–å€¼ä¸º \( x_k(k = 1, 2, \ldots) , X \) å–å„ä¸ªå¯èƒ½å€¼çš„æ¦‚ç‡, åŠæ—¶é—´ \( \{ X = x_k\} \) çš„æ¦‚ç‡ä¸º : $$ P\{X = x_k\} = p_k, k = 1, 2, \ldots . $$ åŒç†, æ¦‚ç‡çš„<code>éè´Ÿæ€§</code>ã€<code>è§„èŒƒæ€§</code>ã€<code>å¯åˆ—å¯åŠ æ€§</code>ç¦»æ•£å‹éšæœºå˜é‡æ¦‚ç‡åŒæ ·å…·å¤‡ã€‚<br>ç”¨è¡¨æ ¼è¡¨ç¤º \( X \) çš„åˆ†å¸ƒå¾‹:<br>$$<br>\begin{array}{c|ccccc}<br>X &amp; x_1 &amp; x_2 &amp; \ldots &amp; x_n &amp; \ldots \\<br>\hline<br>p_k &amp; p_1 &amp; p_2 &amp; \ldots &amp; p_n &amp; \dots<br>\end{array}<br>$$</p>
<h4 id="2-2-2-å‡ ç§å…¸å‹çš„ç¦»æ•£åˆ†å¸ƒ"><a href="#2-2-2-å‡ ç§å…¸å‹çš„ç¦»æ•£åˆ†å¸ƒ" class="headerlink" title="2.2.2 å‡ ç§å…¸å‹çš„ç¦»æ•£åˆ†å¸ƒ"></a>2.2.2 å‡ ç§å…¸å‹çš„ç¦»æ•£åˆ†å¸ƒ</h4><ol>
<li><code>0-1 åˆ†å¸ƒ</code> : éšæœºå˜é‡ \( X \) åªèƒ½å–å€¼ \( 0, 1 \) åˆ†å¸ƒå¾‹æ˜¯ $$ P\{X = k\} = p^k(1 - p)^{1 - k}, k = 0, 1 \ (0 &lt; p &lt; 1) $$<br>å¯¹äºéšæœºè¯•éªŒ \( S = \{ e_1, e_2 \}\), æˆ‘ä»¬æ€»èƒ½åœ¨ \( S \) ä¸Šå®šä¹‰ä¸€ä¸ªæœä» ï¼ˆ0 â€” 1ï¼‰åˆ†å¸ƒçš„éšæœºå˜é‡ \( X \) : $$ X = X(e) = \begin{cases} 0,\ when\ e = e_1 \\ 1,\ when\ e = e_2 \end{cases} $$ æ¥æè¿°ã€‚</li>
<li><code>ä¼¯åŠªåˆ©è¯•éªŒã€äºŒé¡¹åˆ†å¸ƒ</code> : è¯•éªŒ \( E \) åªæœ‰ä¸¤ä¸ªå¯èƒ½çš„ç»“æœ \( \{ A, \overline{A} \} \), åˆ™ç§° \( E \) ä¸ºä¼¯åŠªåˆ©è¯•éªŒã€‚å°† \( E \) é‡å¤åœ°è¿›è¡Œ \( n \) æ¬¡, ç§°è¿™ä¸€ä¸²é‡å¤çš„ç‹¬ç«‹å®è¯•éªŒä¸ºé‡å¤ä¼¯åŠªåˆ©è¯•éªŒã€‚<br>è®¾ \( P(A) = p \) åˆ™åœ¨ \( n \) æ¬¡è¯•éªŒä¸­ \( A \) å‘ç”Ÿ \( k \) æ¬¡çš„æ¦‚ç‡ä¸º : $$ P\{X = k\} = \left( \begin{array}{c} n \\ k \end{array} \right) p^k{(1 - p)}^{n - k}, k = 0, 1, 2, \ldots, n.$$ æ˜¾ç„¶ $$ \sum\limits_{k = 0}\limits^{n}P\{X = k\} = \sum\limits_{k = 0}\limits^{n} \left( \begin{array}{c} n \\ k \end{array} \right) p^k{(1 - p)}^{n - k} = {(p + (1 - p))}^n = 1 $$ äºŒé¡¹å¼ \( {(p + (1 - p))}^n \) çš„ç¬¬ \( k \) é¡¹å±•å¼€ \( \left( \begin{array}{c} n \\ k \end{array} \right) p^k{(1 - p)}^{n - k} \)ã€‚ æ‰€ä»¥, æˆ‘ä»¬ç§° \( X \) æœä»å‚æ•°ä¸º \( n, p \) çš„äºŒé¡¹åˆ†å¸ƒ, è®°ä½œ : $$ X \sim b(n, p) $$ ç‰¹åˆ«çš„, å½“ \( n = 1 \)æ—¶ä¸ºäºŒé¡¹åˆ†å¸ƒ : $$ P\{X = k\} = p^k{(1 - p)}^{1 - k}, k = 0, 1.$$ </li>
<li><code>æ³Šæ¾åˆ†å¸ƒ</code> : éšæœºå˜é‡ \( X = \{0, 1, 2, \ldots \} \), è€Œå„ä¸ªæ¦‚ç‡çš„å–å€¼ä¸º $$ P\{X = k\} = \frac{\lambda^k e^{-\lambda}}{k!}, k = 0, 1, 2, \ldots, \lambda &gt; 0 $$ åˆ™ç§° \( X \)æœä»å‚æ•°ä¸º \( \lambda \) çš„æ³Šæ¾åˆ†å¸ƒ, è®°ä½œ : $$ X \sim \pi(\lambda) $$ æ˜¾ç„¶ $$ \sum\limits_{k = 0}^{\infty}P\{X = k\} = \sum\limits_{k = 0}^{\infty} \frac{\lambda^k e^{-\lambda}}{k!} = e^{-\lambda} \sum\limits_{k = 0}^{\infty}\frac{\lambda^k}{k!} = e^{-\lambda}e^\lambda = 1 $$ å…·ä½“ä½¿ç”¨åé¢ä¼šæ…¢æ…¢ä»‹ç»ã€‚</li>
<li><code>æ³Šæ¾å®šç†</code> : è®¾ \( \lambda &gt; 0, np_n = \lambda \ n \)ä¸ºä»»æ„æ­£æ•´æ•°, åˆ™å¯¹äºä»»æ„ä¸€ä¸ªå›ºå®šçš„éè´Ÿæ•´æ•° \( k \), æœ‰ $$ \lim_{n \rightarrow \infty} \left( \begin{array}{c} n \\ k \end{array} \right) p_n^k{(1 - p_n)}^{n - k} = \frac{\lambda^k e^{-\lambda}}{k!} $$ è¿™å°±æ˜¯ç”¨æ³Šæ¾åˆ†å¸ƒé€¼è¿‘äºŒé¡¹åˆ†å¸ƒçš„æ³Šæ¾å®šç†ã€‚è¯æ˜æˆªå›¾å¦‚ä¸‹ :<br><img src="/2018/01/26/reProbabilityTheory/2_2_2_01.png" alt="æ³Šæ¾å®šç†è¯æ˜"><br>ä¸Šé¢çš„è¯æ˜è¯´æ˜äº†, å½“ \( n \rightarrow \infty\) æ—¶, ä»¥ \( n, p \) ä¸ºå‚æ•°çš„äºŒé¡¹åˆ†å¸ƒæ¦‚ç‡å€¼å¯ä»¥ç”±å‚æ•°ä¸º \( \lambda = np \) çš„æ³Šæ¾åˆ†å¸ƒçš„æ¦‚ç‡å€¼è¿‘ä¼¼ã€‚<br>ä¸¾ä¸ªæ —å­<br><img src="/2018/01/26/reProbabilityTheory/2_2_2_02.png" alt="æ³Šæ¾å®šç†ä¸¾ä¸ªæ —å­"></li>
</ol>
<h3 id="2-3-éšæœºå˜é‡çš„åˆ†å¸ƒå‡½æ•°"><a href="#2-3-éšæœºå˜é‡çš„åˆ†å¸ƒå‡½æ•°" class="headerlink" title="2.3 éšæœºå˜é‡çš„åˆ†å¸ƒå‡½æ•°"></a>2.3 éšæœºå˜é‡çš„åˆ†å¸ƒå‡½æ•°</h3><blockquote>
<p>å¯¹äºéç¦»æ•£çš„éšæœºå˜é‡ \( X \) æŒ‡å®šæŸä¸€å®æ•°å€¼å¾—æ¦‚ç‡éƒ½ä¸º \( 0 \)ã€‚æ‰€ä»¥è¿™é‡Œå°±æ”¹ä¸ºç ”ç©¶éšæœºå˜é‡æ‰€è½åŒºé—´çš„æ¦‚ç‡ : $$ P\{x_1 &lt; X \leq x_2\} = P(X \leq x_2) - P(X \leq x_1) $$ ç”»ä¸ªæ•°è½´å°±å¾ˆå¥½ç†è§£äº†ã€‚</p>
</blockquote>
<h4 id="2-3-1-å®šä¹‰"><a href="#2-3-1-å®šä¹‰" class="headerlink" title="2.3.1 å®šä¹‰"></a>2.3.1 å®šä¹‰</h4><p>è®¾ \( X \) æ˜¯ä¸€ä¸ªéšæœºå˜é‡, \( x \) æ˜¯ä»»æ„å®æ•°, å‡½æ•° : $$ F(x) = P\{ X \leq x\}, -\infty &lt; x &lt; \infty $$ ç§°ä¸º \( X \) çš„<code>åˆ†å¸ƒå‡½æ•°</code>ã€‚<br>å¯¹ä»»æ„å®æ•° \( x_1, x_2 (x_1 &lt; x_2) \), æœ‰ $$ P\{x_1 &lt; X \leq x_2\} = P(X \leq x_2) - P(X \leq x_1) = F(x_2) - F(x_1) $$</p>
<h4 id="2-3-2-åŸºæœ¬æ€§è´¨"><a href="#2-3-2-åŸºæœ¬æ€§è´¨" class="headerlink" title="2.3.2 åŸºæœ¬æ€§è´¨"></a>2.3.2 åŸºæœ¬æ€§è´¨</h4><ol>
<li>\( F(x) \) æ˜¯ä¸€ä¸ªä¸å‡å‡½æ•°ã€‚</li>
<li>\( 0 \leq F(x) \leq 1 \ and\ F(-\infty) = \lim\limits_{x\rightarrow-\infty}F(x) = 0 \ F(\infty) = \lim\limits_{x\rightarrow\infty}F(x) = 1 \)</li>
</ol>
<h3 id="2-4-è¿ç»­å‹éšæœºå˜é‡åŠå…¶æ¦‚ç‡å¯†åº¦"><a href="#2-4-è¿ç»­å‹éšæœºå˜é‡åŠå…¶æ¦‚ç‡å¯†åº¦" class="headerlink" title="2.4 è¿ç»­å‹éšæœºå˜é‡åŠå…¶æ¦‚ç‡å¯†åº¦"></a>2.4 è¿ç»­å‹éšæœºå˜é‡åŠå…¶æ¦‚ç‡å¯†åº¦</h3><blockquote>
<p>å¦‚ä¸Šä¸€èŠ‚åˆ†æ, éšæœºå˜é‡ \( X \) çš„åˆ†å¸ƒå‡½æ•° \( F(x) \)å­˜åœ¨éè´Ÿå‡½æ•° \( f(x) \), ä½¿å¾—ä»»æ„å®æ•° \( x \)æœ‰ $$ F(x) = \int_{-\infty}^{x}f(x)dt $$ åˆ™ç§° \( X \)ä¸º<code>è¿ç»­å‹éšæœºå˜é‡</code>, å…¶ä¸­å‡½æ•° \( f(x) \) ç§°ä¸º \( X \) çš„<code>æ¦‚ç‡å¯†åº¦å‡½æ•°</code>, ç®€ç§°<code>æ¦‚ç‡å¯†åº¦</code>ã€‚</p>
</blockquote>
<ol>
<li>\( f(x) \geq 0 \)</li>
<li>\( \int_{-\infty}^{\infty} f(x)dx = 1 \)</li>
<li>å¯¹äºä»»æ„å®æ•° \( x_1, x_2 (x_1 \leq x_2) \) $$ P(x_1 &lt; X \leq x_2) = F(x_2)   - F(x_1) = \int_{x_1}^{x_2}f(x)dx $$</li>
<li>è‹¥ \( f(x) \) åœ¨ \( x \)å‡ºè¿ç»­, åˆ™ \( F^{â€˜}(x) = f(x) \)</li>
</ol>
<h4 id="2-4-1-å‡ ç§å…¸å‹çš„è¿ç»­å‹éšæœºå˜é‡"><a href="#2-4-1-å‡ ç§å…¸å‹çš„è¿ç»­å‹éšæœºå˜é‡" class="headerlink" title="2.4.1 å‡ ç§å…¸å‹çš„è¿ç»­å‹éšæœºå˜é‡"></a>2.4.1 å‡ ç§å…¸å‹çš„è¿ç»­å‹éšæœºå˜é‡</h4><ol>
<li><code>å‡åŒ€åˆ†å¸ƒ</code> : è‹¥è¿ç»­å‹éšæœºå˜é‡ \( X \) çš„æ¦‚ç‡å¯†åº¦ä¸º $$ f(x) = \begin{cases} \frac{1}{b - a},\ a &lt; x &lt; b \\ 0,\ others \end{cases} $$ åˆ™ç§° \( X \) åœ¨åŒºé—´ \( (a, b) \) ä¸Šæœä»å‡åŒ€åˆ†å¸ƒã€‚è®°ä¸º \( X \sim U(a, b) \)ã€‚åˆ†å¸ƒå‡½æ•°ä¸º $$ F(x) = \begin{cases} 0,\ x &lt; a \\ \frac{x - a}{b - a},\ a \leq x &lt; b \\ 1,\ x \geq b  \end{cases} $$<br><img src="/2018/01/26/reProbabilityTheory/2_4_1_01.png" alt="å‡åŒ€åˆ†å¸ƒä¾‹å­"></li>
<li><code>æŒ‡æ•°åˆ†å¸ƒ</code> : è‹¥è¿ç»­å‹éšæœºå˜é‡ \( X \) çš„æ¦‚ç‡å¯†åº¦ä¸º $$ f(x) = \begin{cases} \frac{1}{\theta}e^{-x/\theta},\  x &gt; 0 \\ 0,\ others \end{cases} $$ å…¶ä¸­ \( \theta &gt; 0 \) ä¸ºå¸¸æ•°, åˆ™ç§° \( X \) æœä»å‚æ•°ä¸º \( \theta \) çš„æŒ‡æ•°åˆ†å¸ƒã€‚åˆ†å¸ƒå‡½æ•°ä¸º $$ f(x) = \begin{cases} 1 - e^{-x/\theta},\  x &gt; 0 \\ 0,\ others \end{cases} $$<br><code>æŒ‡æ•°åˆ†å¸ƒçš„æ— è®°å¿†æ€§</code> : å¯¹äºä»»æ„ \( s, t &gt; 0 \), æœ‰ $$ P\{ X &gt; s + t | X &gt; s\} = P\{ X &gt; t \} $$ è¯æ˜ : <img src="/2018/01/26/reProbabilityTheory/2_4_1_02.png" alt="æŒ‡æ•°åˆ†å¸ƒçš„æ— è®°å¿†æ€§çš„è¯æ˜"> </li>
<li><code>æ­£æ€åˆ†å¸ƒ</code> : è‹¥è¿ç»­å‹éšæœºå˜é‡ \( X \) çš„æ¦‚ç‡å¯†åº¦ä¸º $$ f(x) = \frac{1}{\sqrt{2\pi}\sigma} e ^{- \frac{(x - \mu)^2}{2\sigma^2}}, \ -\infty &lt; x &lt; \infty $$ å…¶ä¸­ \( \mu, \sigma (\sigma &gt; 0) \) ä¸ºå¸¸æ•°, åˆ™ç§° \( X \) æœä»å‚æ•°ä¸º \( \mu, \sigma \) çš„æ­£æ€åˆ†å¸ƒæˆ–é«˜æ–¯åˆ†å¸ƒ, è®°ä¸º \( X \sim N(\mu, \sigma^2) \)ã€‚è¯æ˜ : <img src="/2018/01/26/reProbabilityTheory/2_4_1_03.png" alt=""><br>æ›²çº¿å…³äº \(  x = \mu \) å¯¹ç§°, è¿™è¡¨æ˜å¯¹äºä»»æ„ \( h &gt; 0 \) æœ‰ $$ P\{ \mu - h &lt; X \leq \mu \} = P\{ \mu &lt; X \leq \mu + h \} $$ å½“ \( x = \mu \) æ—¶å–æœ€å¤§å€¼ $$ f(\mu) = \frac{1}{\sqrt{2\pi}\sigma} $$ åœ¨ \( x = \mu \pm \sigma \) å¤„æ›²çº¿æœ‰æ‹ç‚¹ã€‚ç‰¹åˆ«, å½“ \( \mu = 0, \sigma = 1 \) æ—¶, ç§°éšæœºå˜é‡ \( X \) æœä»æ ‡å‡†æ­£æ€åˆ†å¸ƒã€‚å…¶æ¦‚ç‡å¯†åº¦å’Œåˆ†å¸ƒå‡½æ•°åˆ†åˆ«ç”¨ \( \varphi (x), \Phi (x) \) è¡¨ç¤º, å³æœ‰ $$ \varphi (x) = \frac{1}{\sqrt{2\pi}}e^{-t^2/2} \\ \Phi (x) = \frac{1}{\sqrt{2\pi}} \int_{-\infty}^{x}e^{-t^2/2}dt \\ \Phi (-x) = 1 - \Phi (x) $$ <img src="/2018/01/26/reProbabilityTheory/2_4_1_04.png" alt=""></li>
</ol>
<h3 id="2-5-éšæœºå˜é‡çš„å‡½æ•°çš„åˆ†å¸ƒ"><a href="#2-5-éšæœºå˜é‡çš„å‡½æ•°çš„åˆ†å¸ƒ" class="headerlink" title="2.5 éšæœºå˜é‡çš„å‡½æ•°çš„åˆ†å¸ƒ"></a>2.5 éšæœºå˜é‡çš„å‡½æ•°çš„åˆ†å¸ƒ</h3><blockquote>
<p>è¿™é‡Œä¸»è¦ä»‹ç»åœ¨å·²çŸ¥éšæœºå˜é‡ \( X \) çš„æ¦‚ç‡æ±‚ \( Y = g(X) \ g(\cdot) \) æ˜¯å·²çŸ¥è¿ç»­å‡½æ•°ã€‚</p>
</blockquote>
<p>ä¸¾ä¸ªæ —å­<br><img src="/2018/01/26/reProbabilityTheory/2_5_01.png" alt=""></p>
<p>è®¾éšæœºå˜é‡ \( X \) å…·æœ‰æ¦‚ç‡å¯†åº¦ \( f_X(x), \ -\infty &lt; x &lt; \infty \), åˆè®¾å‡½æ•° \( g(x) \) å¤„å¤„å¯å¯¼, æ’æœ‰ \( g(x)^{â€˜} &gt; 0 \ or \  g(x)^{â€˜} &lt; 0 \), åˆ™ \( Y = g(X) \) æ˜¯è¿ç»­å‹éšæœºå˜é‡, å…¶æ¦‚ç‡å¯†åº¦ä¸º $$ f_Y(y) = \begin{cases} f_X[h(y)]|h^{â€˜}(y)|, \ \alpha &lt; y &lt; \beta \\ 0, \ others \end{cases} $$ å…¶ä¸­ \( \alpha = min\{ g(-\infty), g(\infty) \} \ \beta = max\{ g(-\infty), g(\infty) \} \ h(x) \) æ˜¯ \( g(x) \) çš„åå‡½æ•°ã€‚<br>è¯æ˜æç¤º : è§ä¸Šä¸€ä¸ªğŸŒ°</p>
<p><img src="/2018/01/26/reProbabilityTheory/2_5_02.png" alt=""></p>
<p>å°ç»“ :<br><img src="/2018/01/26/reProbabilityTheory/2_5_03.png" alt=""><br><img src="/2018/01/26/reProbabilityTheory/2_5_04.png" alt=""><br><img src="/2018/01/26/reProbabilityTheory/2_5_05.png" alt=""></p>
<p><img src="/2018/01/26/reProbabilityTheory/summary.jpg" alt=""></p>
<h2 id="3-TODO"><a href="#3-TODO" class="headerlink" title="3. TODO"></a>3. TODO</h2><p>æœªå®Œå¾…ç»­â€¦</p>
]]></content>
    
    <summary type="html">
    
      &lt;script type=&quot;text/javascript&quot; src=&quot;http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default&quot;&gt;&lt;/script&gt;

&lt;h2 id=&quot;0-å‰è¨€&quot;&gt;&lt;a href=&quot;#0-å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;0. å‰è¨€&quot;&gt;&lt;/a&gt;0. å‰è¨€&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;è¿™é‡Œä¸»è¦æ˜¯å›´ç»•æµ™å¤§çš„ã€Šæ¦‚ç‡è®ºä¸æ•°ç†ç»Ÿè®¡ã€‹ç¬¬å››ç‰ˆçš„å†…å®¹è¿›è¡Œæ€»ç»“, å…¶ä¸­æˆªå–äº†ä¸€äº›å›¾ç‰‡ä½œä¸ºå†…å®¹æœ‰åŠ©äºå¯¹å…¬å¼çš„ç†è§£ã€‚ç¬”è€…æŠŠè¿™ç¯‡æ–‡ç« ä½œä¸ºè‡ªå·±çš„è¯»ä¹¦ç¬”è®°, ä¸ºä»¥åç³»ç»Ÿå›é¡¾æ¦‚ç‡è®ºæä¾›ä¾¿æ·ã€‚åŒæ—¶ä¼šç»§ç»­æ›´æ–°, ä¿è¯è‡ªå·±è¯»æ‡‚ä¹‹åå†æ¥ä¹¦å†™ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="Math" scheme="http://fitzeng.org/tags/Math/"/>
    
      <category term="MachineLearning" scheme="http://fitzeng.org/tags/MachineLearning/"/>
    
      <category term="ProbabilityTheory" scheme="http://fitzeng.org/tags/ProbabilityTheory/"/>
    
  </entry>
  
  <entry>
    <title>MarkDown æ’å…¥æ•°å­¦å…¬å¼å®éªŒå¤§é›†åˆ</title>
    <link href="http://fitzeng.org/2018/01/23/LaTexFormula/"/>
    <id>http://fitzeng.org/2018/01/23/LaTexFormula/</id>
    <published>2018-01-23T03:27:00.000Z</published>
    <updated>2018-01-23T14:47:46.407Z</updated>
    
    <content type="html"><![CDATA[<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script>

<h2 id="0-å‰è¨€"><a href="#0-å‰è¨€" class="headerlink" title="0. å‰è¨€"></a>0. å‰è¨€</h2><blockquote>
<p>æœ€è¿‘åœ¨å­¦ä¹ ä¸€äº›æœºå™¨å­¦ä¹ ç›¸å…³çš„çŸ¥è¯†ï¼Œæƒ³æŠŠè‡ªå·±å­¦ä¹ çš„ä¸œè¥¿é€šè¿‡ MD çš„å½¢å¼åœ¨çº¿è®°å½•ä¸‹æ¥ï¼Œä½†æ˜¯ä¹‹å‰ä¸€ç›´æ²¡æœ‰å¼€å§‹è¡ŒåŠ¨ï¼Œå› ä¸ºé‡Œé¢çš„å…¬å¼ä»€ä¹ˆçš„æ„Ÿè§‰å®åœ¨æ˜¯éº»çƒ¦ã€‚äºæ˜¯ä»Šå¤©æ‰“ç®—èŠ±ç‚¹æ—¶é—´äº†è§£ä¸€ä¸‹<a href="http://blog.csdn.net/xiahouzuoxin/article/details/26478179" target="_blank" rel="external"><code>å¦‚ä½•åœ¨ markdown ä¸­æ’å…¥æ•°å­¦å…¬å¼</code></a>ï¼Œå‘ç°å…¶å®å¾ˆç®€å•ï¼Œå¤§æ¦‚èŠ±ä¸€ä¸ªå°æ—¶å·¦å³å°±èƒ½çŸ¥é“å¦‚ä½•ç¼–å†™äº†ã€‚</p>
</blockquote>
<a id="more"></a>
<h2 id="1-åŸºç¡€è®¤è¯†"><a href="#1-åŸºç¡€è®¤è¯†" class="headerlink" title="1. åŸºç¡€è®¤è¯†"></a>1. åŸºç¡€è®¤è¯†</h2><blockquote>
<p>ç¬”è€…è®¤ä¸ºæ‰€è°“æ’å…¥æ•°å­¦å…¬å¼å…¶å®å°±æ˜¯å¼•å…¥ä¸€ç§è§„åˆ™ï¼Œç„¶åé€šè¿‡<code>æ¨¡æ¿ï¼Ÿ</code>æ¸²æŸ“æˆå…¬å¼ï¼Œä¸çŸ¥é“è¿™ä¸ªç†è§£å¯¹ä¸å¯¹ï¼Œä¸å¯¹æœ›æŒ‡æ­£ã€‚å…¶å®ä½ ä»¥å‰å¯èƒ½å°±çœ‹åˆ°è¿‡æœ‰çš„åšå®¢æœ¬è¯¥å‡ºç°å…¬å¼çš„æ—¶å€™ä¸æ˜¾ç¤ºï¼Œç‚¹å‡»åä¼šé“¾æ¥åˆ°ä¸€ä¸ª new tab ç„¶åæ˜¾ç¤ºä¸€å¼ å…¬å¼çš„å›¾ç‰‡ï¼Œæœ‰æ—¶å´å‡ºç°ä¸€å¤§å †çš„ä»£ç ã€‚è¿™é‡Œå°±æ˜¯é€šè¿‡è¿™æ®µä»£ç è§£ææˆå…¬å¼ç„¶åæ˜¾ç¤ºçš„ã€‚</p>
</blockquote>
<p>è¿™é‡Œæˆ‘ä»¬é€‰å– MathJax å¼•æ“ã€‚<br>å¼•å…¥è„šæœ¬ï¼ŒæŠŠä¸‹é¢ä»£ç æ’å…¥ MD æ–‡ä»¶é‡Œé¢ï¼Œå¦‚æœä½ æ€•è¿™ä»½åœ¨çº¿æ–‡ä»¶æºåˆ«äººè®¿é—®ä¸åˆ°çš„è¯ï¼Œå¯ä»¥æŠŠè¿™ä¸ªä¸‹ä¸‹æ¥è‡ªå·±åšä¸€ä¸ªæºï¼Œè¿™æ ·æ¯”è¾ƒç¨³å®šç¼ºç‚¹æ˜¯è¦è‡ªå·±æ‰‹åŠ¨æ›´æ–°æºã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default&quot;&gt;&lt;/script&gt;</div></pre></td></tr></table></figure>
<p>å¥½äº†åˆ°è¿™é‡Œå°±å¯ä»¥æ’å…¥å…¬å¼äº†ï¼Œå¦‚æœä½ æ‡‚ LaTeX çš„è¯é‚£çœ‹ä¸€ä¸¤ä¸ªä¾‹å­å°±çŸ¥é“äº†ï¼Œä¸æ‡‚ä¹Ÿæ²¡å…³ç³»ï¼Œè‡ªå·±å†™ä¸€å†™ä»£ç å°±çŸ¥é“äº†ï¼Œå¯ä»¥æ‰¾ä¸€ä¸ªå¯ä»¥é¢„è§ˆ MD çš„å·¥å…·ä¸€ç›´å°è¯•ã€‚</p>
<h3 id="1-1-æ’å…¥æ–¹å¼"><a href="#1-1-æ’å…¥æ–¹å¼" class="headerlink" title="1.1 æ’å…¥æ–¹å¼"></a>1.1 æ’å…¥æ–¹å¼</h3><blockquote>
<p>è¿™é‡Œåˆ†ä¸¤ç§ï¼Œä¸€ç§æ˜¯è¡Œé—´æ’å…¥ï¼Œå¦ä¸€ç§æ˜¯å¦å–ä¸€è¡Œ</p>
</blockquote>
<h4 id="1-1-1-è¡Œé—´æ’å…¥"><a href="#1-1-1-è¡Œé—´æ’å…¥" class="headerlink" title="1.1.1 è¡Œé—´æ’å…¥"></a>1.1.1 è¡Œé—´æ’å…¥</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">\\(a + b\\)</div></pre></td></tr></table></figure>
<p>è¿™é‡Œæ˜¯è¡Œé—´æ’å…¥å…¬å¼ a + b : \(a + b\)ï¼Œç‰¹ç‚¹å°±æ˜¯é€šè¿‡<code>(</code> å’Œ <code>)</code> åŒ…å«å…¬å¼ï¼Œç„¶åä¸ºäº†æ¨¡æ¿å¼•æ“èƒ½å¤ŸåŒºåˆ†è¯¥ <code>(</code> ä¸æ˜¯æ™®é€šæ–‡æœ¬çš„ <code>(</code> è€Œæ˜¯å…¬å¼çš„ <code>(</code>ï¼Œé€šè¿‡ <code>\\</code> è½¬ä¹‰ä¸€ä¸‹ã€‚è¿™æ ·åº”è¯¥å°±å¾ˆå¥½ç†è§£è¿™ä¸ªè¯­æ³•æ„æˆäº†ã€‚æ³¨æ„è¿™é‡Œæ–¹å¼ä¸å”¯ä¸€ï¼Œè¿™æ˜¯ç¬”è€…å–œæ¬¢çš„æ–¹å¼ï¼Œå…¶ä»–çš„ä½¿ç”¨æ–¹å¼è‡ªè¡Œæœç´¢ã€‚ä¸‹é¢çš„ä»‹ç»åŒæ ·æ˜¯è¿™æ ·ã€‚</p>
<h4 id="1-1-2-å¦å–ä¸€è¡Œ"><a href="#1-1-2-å¦å–ä¸€è¡Œ" class="headerlink" title="1.1.2 å¦å–ä¸€è¡Œ"></a>1.1.2 å¦å–ä¸€è¡Œ</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$$a + b$$</div></pre></td></tr></table></figure>
<p>è¿™é‡Œæ˜¯å¦å–ä¸€è¡Œ$$a + b$$ ç‰¹ç‚¹å°±æ˜¯é€šè¿‡<code>$$</code>åŒ…å«å…¬å¼ã€‚</p>
<p>ç¬”è€…è®¤ä¸ºç¬¬äºŒç§æ–¹å¼æ›´å¥½ï¼Œä»¥ä¸‹æ²¡çœ‹ JS æºç çº¯å±çŒœæµ‹ï¼šè¡Œé—´çš„éœ€è¦è€ƒè™‘åˆ°å½“å‰è¡Œçš„è¡Œé«˜å¹¶å¯¹å…¬å¼è¿›è¡Œå¤„ç†ï¼Œè€Œå¦å–ä¸€è¡Œå°±æ›´ç®€å•ä¸€äº›ï¼Œå¯èƒ½è§£æèµ·æ¥æ›´å¿«ã€‚æœ€æœ€æœ€æœ€æœ€æœ€ä¸»è¦æ˜¯çœ‹èµ·æ¥æ¼‚äº® ^_^ ä¸å¤ªè¦è€ƒè™‘ç©ºé—´ä¸å¤Ÿæ¢è¡Œã€‚</p>
<h3 id="1-2-åŸºæœ¬ç±»å‹çš„æ’å…¥"><a href="#1-2-åŸºæœ¬ç±»å‹çš„æ’å…¥" class="headerlink" title="1.2 åŸºæœ¬ç±»å‹çš„æ’å…¥"></a>1.2 åŸºæœ¬ç±»å‹çš„æ’å…¥</h3><blockquote>
<p>è¿™é‡Œå¯¹ <a href="http://www.cnblogs.com/houkai/p/3399646.html" target="_blank" rel="external">@houkai ï¼šLATEXæ•°å­¦å…¬å¼åŸºæœ¬è¯­æ³•</a> çš„æ€è·¯ç¨åŠ ä¿®æ”¹ï¼Œç„¶åè¿›è¡Œä»‹ç»ã€‚</p>
</blockquote>
<h4 id="1-2-1-ä¸Šã€ä¸‹æ ‡"><a href="#1-2-1-ä¸Šã€ä¸‹æ ‡" class="headerlink" title="1.2.1 ä¸Šã€ä¸‹æ ‡"></a>1.2.1 ä¸Šã€ä¸‹æ ‡</h4><p>å…ˆçœ‹ç»“æœå†æ€»ç»“è¯­æ³•å§ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">$$x_1$$</div><div class="line"></div><div class="line">$$x_1^2$$</div><div class="line"></div><div class="line">$$x^2_1$$</div><div class="line"></div><div class="line">$$x_&#123;22&#125;^&#123;(n)&#125;$$</div><div class="line"></div><div class="line">$$&#123;&#125;^*x^*$$</div><div class="line"></div><div class="line">$$x_&#123;balabala&#125;^&#123;bala&#125;&amp;&amp;</div></pre></td></tr></table></figure>
<p>$$x_1$$</p>
<p>$$x_1^2$$</p>
<p>$$x^2_1$$</p>
<p>$$x_{22}^{(n)}$$</p>
<p>$${}^*x^*$$</p>
<p>$$x_{balabala}^{bala}$$</p>
<p>å¯ä»¥çœ‹åˆ° <code>x</code> å…ƒç´ çš„ä¸Šæ ‡é€šè¿‡ <code>^</code> ç¬¦å·åæ¥çš„å†…å®¹ä½“ç°ï¼Œä¸‹è¡¨é€šè¿‡ <code>_</code> ç¬¦å·åæ¥çš„å†…å®¹ä½“ç°ï¼Œå¤šäºä¸€ä½æ˜¯è¦åŠ  <code>{}</code> åŒ…è£¹çš„ã€‚<br>ç¬”è€…ä¹ æƒ¯å…ˆä¸‹æ ‡åä¸Šæ ‡çš„å†™æ³•ï¼Œå’Œæˆ‘çš„ä¹¦å†™ä¹ æƒ¯ä¸€è‡´ï¼š<code>x_{balabala}^{bala}</code>ï¼Œä¸ç®¡ä½ ä½¿ç”¨å“ªä¸€ç§é£æ ¼ï¼Œæœ€å¥½è‡ªå·±æ³¨æ„ç»Ÿä¸€ï¼Œä¸è¦æ··ç”¨ã€‚</p>
<h4 id="1-2-2-åˆ†å¼"><a href="#1-2-2-åˆ†å¼" class="headerlink" title="1.2.2 åˆ†å¼"></a>1.2.2 åˆ†å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$$\frac&#123;x+y&#125;&#123;2&#125;$$</div><div class="line"></div><div class="line">$$\frac&#123;1&#125;&#123;1+\frac&#123;1&#125;&#123;2&#125;&#125;$$</div></pre></td></tr></table></figure>
<p>$$\frac{x+y}{2}$$</p>
<p>$$\frac{1}{1+\frac{1}{2}}$$</p>
<p>è¿™é‡Œå°±å‡ºç°äº†ä¸€ä¸ª <code>frac{}{}</code> å‡½æ•°çš„ä¸œè¥¿ï¼ŒåŒæ ·ï¼Œä¸ºäº†åŒºåˆ†è¿™æ˜¯å‡½æ•°ä¸æ˜¯å‡ ä¸ªå­—æ¯ï¼Œé€šè¿‡ <code>\frac</code> è½¬ä¹‰ï¼Œäºæ˜¯ <code>frac</code> è¢«è§£ææˆå‡½æ•°ï¼Œç„¶åç¬¬ä¸€ä¸ª <code>{}</code> é‡Œé¢çš„è¢«è§£ææˆåˆ†å­ï¼Œç¬¬äºŒä¸ª <code>{}</code> è¢«è§£ææˆåˆ†æ¯ã€‚è¿™é‡Œå¯ä»¥è¯•è¯•åˆ†æ•°çš„è¡Œé—´è§£æ\(\frac{1}{1+\frac{1}{2}}\)ã€‚æˆ‘è¦çœ‹è¡Œé—´å¡«å……æ•ˆæœæˆ‘è¦çœ‹è¡Œé—´å¡«å……æ•ˆæœæˆ‘è¦çœ‹è¡Œé—´å¡«å……æ•ˆæœæˆ‘è¦çœ‹è¡Œé—´å¡«å……æ•ˆæœæˆ‘è¦çœ‹è¡Œé—´å¡«å……æ•ˆæœæˆ‘è¦çœ‹è¡Œé—´å¡«å……æ•ˆæœæˆ‘è¦çœ‹è¡Œé—´å¡«å……æ•ˆæœæˆ‘è¦çœ‹è¡Œé—´å¡«å……æ•ˆæœæˆ‘è¦çœ‹è¡Œé—´å¡«å……æ•ˆæœæˆ‘è¦çœ‹è¡Œé—´å¡«å……æ•ˆæœæˆ‘è¦çœ‹è¡Œé—´å¡«å……æ•ˆæœæˆ‘è¦çœ‹è¡Œé—´å¡«å……æ•ˆæœã€‚</p>
<h4 id="1-2-3-æ ¹å¼"><a href="#1-2-3-æ ¹å¼" class="headerlink" title="1.2.3 æ ¹å¼"></a>1.2.3 æ ¹å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$$\sqrt&#123;2&#125;&lt;\sqrt[3]&#123;3&#125;$$</div><div class="line"></div><div class="line">$$\sqrt&#123;1+\sqrt[p]&#123;1+a^2&#125;&#125;$$</div><div class="line"></div><div class="line">$$\sqrt&#123;1+\sqrt[^p\!]&#123;1+a^2&#125;&#125;$$</div></pre></td></tr></table></figure>
<p>$$\sqrt{2}&lt;\sqrt[3]{3}$$</p>
<p>$$\sqrt{1+\sqrt[p]{1+a^2}}$$</p>
<p>$$\sqrt{1+\sqrt[^p]{1+a^2}}$$</p>
<p>è¯»åˆ°è¿™é‡Œä½ å·²ç»äº†è§£äº†å‡½æ•°çš„æ¦‚å¿µï¼Œé‚£ä¹ˆè¿™å†ä¹…å¾ˆç®€å•äº†ï¼Œè¯­æ³•å°±æ˜¯ <code>sqrt[]{}</code> ã€‚<code>[]</code> ä¸­ä»£è¡¨æ˜¯å‡ æ¬¡æ ¹å¼ï¼Œ<code>{}</code> ä»£è¡¨æ ¹å·ä¸‹çš„è¡¨è¾¾å¼ã€‚ç¬¬äºŒå’Œç¬¬ä¸‰ä¸ªçš„åŒºåˆ«åœ¨äºä¸ºäº†ç¾è§‚å¾®è°ƒä½ç½® ^_^ã€‚</p>
<h4 id="1-2-4-æ±‚å’Œã€ç§¯åˆ†"><a href="#1-2-4-æ±‚å’Œã€ç§¯åˆ†" class="headerlink" title="1.2.4 æ±‚å’Œã€ç§¯åˆ†"></a>1.2.4 æ±‚å’Œã€ç§¯åˆ†</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$$\sum_&#123;k=1&#125;^&#123;n&#125;\frac&#123;1&#125;&#123;k&#125;$$</div><div class="line"></div><div class="line">\\(\sum_&#123;k=1&#125;^n\frac&#123;1&#125;&#123;k&#125;\\)</div><div class="line"></div><div class="line">$$\int_a^b f(x)dx$$</div><div class="line"></div><div class="line">\\(\int_a^b f(x)dx\\)</div></pre></td></tr></table></figure>
<p>$$\sum_{k=1}^{n}\frac{1}{k}$$</p>
<p>\(\sum_{k=1}^n\frac{1}{k}\)</p>
<p>$$\int_{a}^b f(x)dx$$</p>
<p>\(\int_a^b f(x)dx\)</p>
<p>è¿™é‡Œå¾ˆå®¹æ˜“çœ‹å‡ºæ±‚å’Œå‡½æ•°è¡¨è¾¾å¼ <code>sum_{èµ·ç‚¹}^{ç»ˆç‚¹}è¡¨è¾¾å¼</code>ï¼Œç§¯åˆ†å‡½æ•°è¡¨è¾¾å¼ <code>int_ä¸‹é™^ä¸Šé™ è¢«ç§¯å‡½æ•°dè¢«ç§¯é‡</code>ã€‚è¿˜æœ‰ä¸€ä¸ªæœ‰è¶£çš„æ˜¯è¡Œé—´çš„å…¬å¼éƒ½è¢«å‹ç¼©äº†ã€‚</p>
<h4 id="1-2-5-ç©ºæ ¼"><a href="#1-2-5-ç©ºæ ¼" class="headerlink" title="1.2.5 ç©ºæ ¼"></a>1.2.5 ç©ºæ ¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">ç´§è´´ $a\\!b$</div><div class="line">æ²¡æœ‰ç©ºæ ¼ $ab$</div><div class="line">å°ç©ºæ ¼ a\,b</div><div class="line">ä¸­ç­‰ç©ºæ ¼ a\;b</div><div class="line">å¤§ç©ºæ ¼ a\ b</div><div class="line">quadç©ºæ ¼ $a\quad b$</div><div class="line">ä¸¤ä¸ªquadç©ºæ ¼ $a\qquad b$</div></pre></td></tr></table></figure>
<p>$$a\!b$$<br>$$ab$$<br>$$a\,b$$<br>$$a\;b$$<br>$$a\ b$$<br>$$a\quad b$$<br>$$a\qquad b$$</p>
<p>è¿™ä¸ªç›´æ¥çœ‹ä¸Šé¢çš„æ–‡å­—ï¼Œä»‹ç»å¾ˆæ¸…æ¥šï¼Œä¸»è¦æŒ‡å¾®è°ƒè·ç¦»ï¼Œä½¿å¾—å…¬å¼æ›´åŠ æ¼‚äº®ã€‚è¯·æ¯”è¾ƒä¸‹é¢çš„ç§¯åˆ†å…¬å¼ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$$\int_a^b f(x)\mathrm&#123;d&#125;x$$</div><div class="line"></div><div class="line">$$\int_a^b f(x)\,\mathrm&#123;d&#125;x$$</div></pre></td></tr></table></figure>
<p>$$\int_a^b f(x)\mathrm{d}x$$</p>
<p>$$\int_a^b f(x)\,\mathrm{d}x$$</p>
<h4 id="1-2-6-å…¬å¼ç•Œå®šç¬¦"><a href="#1-2-6-å…¬å¼ç•Œå®šç¬¦" class="headerlink" title="1.2.6 å…¬å¼ç•Œå®šç¬¦"></a>1.2.6 å…¬å¼ç•Œå®šç¬¦</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">\\( ( \\)</div><div class="line">\\( ) \\)</div><div class="line">\\( [ \\)</div><div class="line">\\( ] \\)</div><div class="line">\\( \\&#123; \\)</div><div class="line">\\( \\&#125; \\)</div><div class="line">\\( | \\)</div><div class="line">\\( \\| \\)</div></pre></td></tr></table></figure>
<p>ä¸»è¦ç¬¦å·æœ‰<br>\( ( \)<br>\( ) \)<br>\( [ \)<br>\( ] \)<br>\( \{ \)<br>\( \} \)<br>\( | \)<br>\( \| \)<br>é‚£ä¹ˆå¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿ<br>é€šè¿‡ <code>\left</code> å’Œ <code>\right</code> åé¢è·Ÿç•Œå®šç¬¦æ¥å¯¹åŒæ—¶è¿›è¡Œç•Œå®šã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$$\left(\sum_&#123;k=\frac&#123;1&#125;&#123;2&#125;&#125;^&#123;N^2&#125;\frac&#123;1&#125;&#123;k&#125;\right)$$</div></pre></td></tr></table></figure>
<p>$$\left(\sum_{k=\frac{1}{2}}^{N^2}\frac{1}{k}\right)$$</p>
<h4 id="1-2-7-çŸ©é˜µ"><a href="#1-2-7-çŸ©é˜µ" class="headerlink" title="1.2.7 çŸ©é˜µ"></a>1.2.7 çŸ©é˜µ</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">$$\begin&#123;matrix&#125;1 &amp; 2\\\\3 &amp;4\end&#123;matrix&#125;$$</div><div class="line"></div><div class="line">$$\begin&#123;pmatrix&#125;1 &amp; 2\\\\3 &amp;4\end&#123;pmatrix&#125;$$</div><div class="line"></div><div class="line">$$\begin&#123;bmatrix&#125;1 &amp; 2\\\\3 &amp;4\end&#123;bmatrix&#125;$$</div><div class="line"></div><div class="line">$$\begin&#123;Bmatrix&#125;1 &amp; 2\\\\3 &amp;4\end&#123;Bmatrix&#125;$$</div><div class="line"></div><div class="line">$$\begin&#123;vmatrix&#125;1 &amp; 2\\\\3 &amp;4\end&#123;vmatrix&#125;$$</div><div class="line"></div><div class="line">$$\left|\begin&#123;matrix&#125;1 &amp; 2\\\\3 &amp;4\end&#123;matrix&#125;\right|$$</div><div class="line"></div><div class="line">$$\begin&#123;Vmatrix&#125;1 &amp; 2\\\\3 &amp;4\end&#123;Vmatrix&#125;$$</div></pre></td></tr></table></figure>
<p>$$\begin{matrix}1 &amp; 2\\3 &amp;4\end{matrix}$$</p>
<p>$$\begin{pmatrix}1 &amp; 2\\3 &amp;4\end{pmatrix}$$</p>
<p>$$\begin{bmatrix}1 &amp; 2\\3 &amp;4\end{bmatrix}$$</p>
<p>$$\begin{Bmatrix}1 &amp; 2\\3 &amp;4\end{Bmatrix}$$</p>
<p>$$\begin{vmatrix}1 &amp; 2\\3 &amp;4\end{vmatrix}$$</p>
<p>$$\left|\begin{matrix}1 &amp; 2\\3 &amp;4\end{matrix}\right|$$</p>
<p>$$\begin{Vmatrix}1 &amp; 2\\3 &amp;4\end{Vmatrix}$$</p>
<p>ç±»ä¼¼äº left rightï¼Œè¿™é‡Œæ˜¯ begin å’Œ endã€‚è€Œä¸”é‡Œé¢æœ‰å…·ä½“çš„çŸ©é˜µè¯­æ³•ï¼Œ<code>&amp;</code> åŒºåˆ†è¡Œé—´å…ƒç´ ï¼Œ<code>\\\\</code> ä»£è¡¨æ¢è¡Œã€‚å¯ä»¥ç†è§£ä¸º HTML çš„æ ‡ç­¾ä¹‹ç±»çš„ã€‚</p>
<h4 id="1-2-8-æ’ç‰ˆæ•°ç»„"><a href="#1-2-8-æ’ç‰ˆæ•°ç»„" class="headerlink" title="1.2.8 æ’ç‰ˆæ•°ç»„"></a>1.2.8 æ’ç‰ˆæ•°ç»„</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">\mathbf&#123;X&#125; =</div><div class="line">\left( \begin&#123;array&#125;&#123;ccc&#125;</div><div class="line">x\_&#123;11&#125; &amp; x\_&#123;12&#125; &amp; \ldots \\\\</div><div class="line">x\_&#123;21&#125; &amp; x\_&#123;22&#125; &amp; \ldots \\\\</div><div class="line">\vdots &amp; \vdots &amp; \ddots</div><div class="line">\end&#123;array&#125; \right)</div></pre></td></tr></table></figure>
<p>$$<br>\mathbf{X} =<br>\left( \begin{array}{ccc}<br>x_{11} &amp; x_{12} &amp; \ldots \\<br>x_{21} &amp; x_{22} &amp; \ldots \\<br>\vdots &amp; \vdots &amp; \ddots<br>\end{array} \right)<br>$$</p>
<h2 id="2-å¸¸ç”¨å…¬å¼ä¸¾ä¾‹"><a href="#2-å¸¸ç”¨å…¬å¼ä¸¾ä¾‹" class="headerlink" title="2. å¸¸ç”¨å…¬å¼ä¸¾ä¾‹"></a>2. å¸¸ç”¨å…¬å¼ä¸¾ä¾‹</h2><blockquote>
<p>æŒç»­æ›´æ–°â€¦â€¦</p>
</blockquote>
<h3 id="2-1-å¤šè¡Œå…¬å¼"><a href="#2-1-å¤šè¡Œå…¬å¼" class="headerlink" title="2.1 å¤šè¡Œå…¬å¼"></a>2.1 å¤šè¡Œå…¬å¼</h3><blockquote>
<p>ä¸»è¦æ˜¯å„ç§æ–¹ç¨‹çš„è¡¨è¾¾</p>
</blockquote>
<h4 id="2-1-1-é•¿å…¬å¼"><a href="#2-1-1-é•¿å…¬å¼" class="headerlink" title="2.1.1 é•¿å…¬å¼"></a>2.1.1 é•¿å…¬å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">$$</div><div class="line">\begin&#123;multline&#125;</div><div class="line">x = a+b+c+&#123;&#125; \\\\</div><div class="line">d+e+f+g</div><div class="line">\end&#123;multline&#125;</div><div class="line">$$</div><div class="line"></div><div class="line">$$</div><div class="line">\begin&#123;aligned&#125;</div><div class="line">x =&#123;&#125;&amp; a+b+c+&#123;&#125; \\\\</div><div class="line">&amp;d+e+f+g</div><div class="line">\end&#123;aligned&#125;</div><div class="line">$$</div></pre></td></tr></table></figure>
<p>ä¸å¯¹é½</p>
<p>$$<br>\left| \begin{multline}<br>x = a+b+c+{} \\<br>d+e+f+g<br>\end{multline} \right|<br>$$</p>
<p>å¯¹é½</p>
<p>$$<br>\left| \begin{aligned}<br>x ={}&amp; a+b+c+{} \\<br>&amp;d+e+f+g<br>\end{aligned} \right|<br>$$</p>
<h4 id="2-1-2-å…¬å¼ç»„"><a href="#2-1-2-å…¬å¼ç»„" class="headerlink" title="2.1.2 å…¬å¼ç»„"></a>2.1.2 å…¬å¼ç»„</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">$$</div><div class="line">\begin&#123;gather&#125;</div><div class="line">a = b+c+d \\\\</div><div class="line">x = y+z</div><div class="line">\end&#123;gather&#125;</div><div class="line">$$</div><div class="line"></div><div class="line">$$</div><div class="line">\begin&#123;align&#125;</div><div class="line">a &amp;= b+c+d \\\\</div><div class="line">x &amp;= y+z</div><div class="line">\end&#123;align&#125;</div><div class="line">$$</div></pre></td></tr></table></figure>
<p>$$<br>\begin{gather}<br>a = b+c+d \\<br>x = y+z<br>\end{gather}<br>$$</p>
<p>$$<br>\begin{align}<br>a &amp;= b+c+d \\<br>x &amp;= y+z<br>\end{align}<br>$$</p>
<h4 id="2-1-3-åˆ†æ®µå‡½æ•°"><a href="#2-1-3-åˆ†æ®µå‡½æ•°" class="headerlink" title="2.1.3 åˆ†æ®µå‡½æ•°"></a>2.1.3 åˆ†æ®µå‡½æ•°</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$$</div><div class="line">y=\begin&#123;cases&#125;</div><div class="line">-x,\quad x\leq 0 \\\\</div><div class="line">x,\quad x&gt;0</div><div class="line">\end&#123;cases&#125;</div><div class="line">$$</div></pre></td></tr></table></figure>
<p>$$<br>y=\begin{cases}<br>-x,\quad x\leq 0 \\<br>x,\quad x&gt;0<br>\end{cases}<br>$$</p>
<p>é‡Œé¢ç”¨åˆ°äº† \(\leq\) ç¬¦å·ï¼Œä¸‹ä¸€ç« ä¼šä»‹ç»å¸¸ç”¨æ•°å­¦ç¬¦å·ã€‚</p>
<h3 id="2-2-æ•°ç»„çš„å…¶ä»–ä½¿ç”¨"><a href="#2-2-æ•°ç»„çš„å…¶ä»–ä½¿ç”¨" class="headerlink" title="2.2 æ•°ç»„çš„å…¶ä»–ä½¿ç”¨"></a>2.2 æ•°ç»„çš„å…¶ä»–ä½¿ç”¨</h3><h4 id="2-2-1-åˆ’çº¿"><a href="#2-2-1-åˆ’çº¿" class="headerlink" title="2.2.1 åˆ’çº¿"></a>2.2.1 åˆ’çº¿</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$$</div><div class="line">\left(\begin&#123;array&#125;&#123;|c|c|&#125;</div><div class="line">1 &amp; 2 \\\\</div><div class="line">\\hline</div><div class="line">3 &amp; 4</div><div class="line">\end&#123;array&#125;\right)</div><div class="line">$$</div></pre></td></tr></table></figure>
<p>$$<br>\left( \begin{array}{|c|c|}<br>1 &amp; \ldots \\<br>\hline<br>\vdots &amp; \ddots<br>\end{array} \right)<br>$$</p>
<h4 id="2-2-2-åˆ¶è¡¨"><a href="#2-2-2-åˆ¶è¡¨" class="headerlink" title="2.2.2 åˆ¶è¡¨"></a>2.2.2 åˆ¶è¡¨</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">$$</div><div class="line">\begin&#123;array&#125;&#123;|c|c|&#125;</div><div class="line">\hline</div><div class="line">&#123;1111111111&#125; &amp; 2 \\\\</div><div class="line">\hline</div><div class="line">3 &amp; 4 \\\\</div><div class="line">\hline</div><div class="line">\end&#123;array&#125;</div><div class="line">$$</div></pre></td></tr></table></figure>
<p>$$<br>\begin{array}{|c|c|}<br>\hline<br>{1111111111} &amp; 2 \\<br>\hline<br>{balabala} &amp; ä½ å¥½å•Š {}^\land\_{}^\land \\<br>\hline<br>\end{array}<br>$$</p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå…¶å®å…¶ä»–å¾ˆå¤šä¸œè¥¿éƒ½å¯ä»¥å¾ˆçµæ´»çš„è¡¨è¾¾å‡ºæ¥ã€‚ç¢°åˆ°å…¶ä»–æœ‰è¶£çš„æˆ‘ä¼šç»§ç»­å†™å‡ºæ¥çš„ã€‚</p>
<h2 id="3-å¸¸ç”¨æ•°å­¦ç¬¦å·"><a href="#3-å¸¸ç”¨æ•°å­¦ç¬¦å·" class="headerlink" title="3. å¸¸ç”¨æ•°å­¦ç¬¦å·"></a>3. å¸¸ç”¨æ•°å­¦ç¬¦å·</h2><blockquote>
<p>è¿™é‡Œæä¾›ä¸€ä¸ª<a href="http://files.cnblogs.com/houkai/LATEX%E6%95%B0%E5%AD%A6%E7%AC%A6%E5%8F%B7%E8%A1%A8.rar" target="_blank" rel="external">æ–‡æ¡£ä¸‹è½½</a>ï¼Œå¦‚æœä¸Šé¢çš„é“¾æ¥å¤±æ•ˆï¼Œä¹Ÿå¯ä»¥åˆ°æˆ‘çš„ <a href="https://github.com/mk43/BlogResource/blob/master/LaTex/LATEX%E6%95%B0%E5%AD%A6%E7%AC%A6%E5%8F%B7%E8%A1%A8.pdf" target="_blank" rel="external">GitHub ä¸‹è½½ pdf ç‰ˆ</a>ã€‚ä¸‹é¢ä¸¾å‡ ä¸ªä¾‹å­ã€‚</p>
</blockquote>
<h3 id="3-1-å¸Œè…Šå­—æ¯"><a href="#3-1-å¸Œè…Šå­—æ¯" class="headerlink" title="3.1 å¸Œè…Šå­—æ¯"></a>3.1 å¸Œè…Šå­—æ¯</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">$$</div><div class="line">\begin&#123;array&#125;&#123;|c|c|c|c|c|c|c|c|&#125;</div><div class="line">\hline</div><div class="line">&#123;\alpha&#125; &amp; &#123;\backslash alpha&#125; &amp; &#123;\theta&#125; &amp; &#123;\backslash theta&#125; &amp; &#123;o&#125; &amp; &#123;o&#125; &amp; &#123;\upsilon&#125; &amp; &#123;\backslash upsilon&#125; \\\\</div><div class="line">\hline</div><div class="line">&#123;\beta&#125; &amp; &#123;\backslash beta&#125; &amp; &#123;\vartheta&#125; &amp; &#123;\backslash vartheta&#125; &amp; &#123;\pi&#125; &amp; &#123;\backslash pi&#125; &amp; &#123;\phi&#125; &amp; &#123;\backslash phi&#125; \\\\</div><div class="line">\hline</div><div class="line">&#123;\gamma&#125; &amp; &#123;\backslash gamma&#125; &amp; &#123;\iota&#125; &amp; &#123;\backslash iota&#125; &amp; &#123;\varpi&#125; &amp; &#123;\backslash varpi&#125; &amp; &#123;\varphi&#125; &amp; &#123;\backslash varphi&#125; \\\\</div><div class="line">\hline</div><div class="line">&#123;\delta&#125; &amp; &#123;\backslash delta&#125; &amp; &#123;\kappa&#125; &amp; &#123;\backslash kappa&#125; &amp; &#123;\rho&#125; &amp; &#123;\backslash rho&#125; &amp; &#123;\chi&#125; &amp; &#123;\backslash chi&#125; \\\\</div><div class="line">\hline</div><div class="line">&#123;\epsilon&#125; &amp; &#123;\backslash epsilon&#125; &amp; &#123;\lambda&#125; &amp; &#123;\backslash lambda&#125; &amp; &#123;\varrho&#125; &amp; &#123;\backslash varrho&#125; &amp; &#123;\psi&#125; &amp; &#123;\backslash psi&#125; \\\\</div><div class="line">\hline</div><div class="line">&#123;\varepsilon&#125; &amp; &#123;\backslash varepsilon&#125; &amp; &#123;\mu&#125; &amp; &#123;\backslash mu&#125; &amp; &#123;\sigma&#125; &amp; &#123;\backslash sigma&#125; &amp; &#123;\omega&#125; &amp; &#123;\backslash omega&#125; \\\\</div><div class="line">\hline</div><div class="line">&#123;\zeta&#125; &amp; &#123;\backslash zeta&#125; &amp; &#123;\nu&#125; &amp; &#123;\backslash nu&#125; &amp; &#123;\varsigma&#125; &amp; &#123;\backslash varsigma&#125; &amp; &#123;&#125; &amp; &#123;&#125; \\\\</div><div class="line">\hline</div><div class="line">&#123;\eta&#125; &amp; &#123;\backslash eta&#125; &amp; &#123;\xi&#125; &amp; &#123;\backslash xi&#125; &amp; &#123;\tau&#125; &amp; &#123;\backslash tau&#125; &amp; &#123;&#125; &amp; &#123;&#125; \\\\</div><div class="line">\hline</div><div class="line">&#123;\Gamma&#125; &amp; &#123;\backslash Gamma&#125; &amp; &#123;\Lambda&#125; &amp; &#123;\backslash Lambda&#125; &amp; &#123;\Sigma&#125; &amp; &#123;\backslash Sigma&#125; &amp; &#123;\Psi&#125; &amp; &#123;\backslash Psi&#125; \\\\</div><div class="line">\hline</div><div class="line">&#123;\Delta&#125; &amp; &#123;\backslash Delta&#125; &amp; &#123;\Xi&#125; &amp; &#123;\backslash Xi&#125; &amp; &#123;\Upsilon&#125; &amp; &#123;\backslash Upsilon&#125; &amp; &#123;\Omega&#125; &amp; &#123;\backslash Omega&#125; \\\\</div><div class="line">\hline</div><div class="line">&#123;\Omega&#125; &amp; &#123;\backslash Omega&#125; &amp; &#123;\Pi&#125; &amp; &#123;\backslash Pi&#125; &amp; &#123;\Phi&#125; &amp; &#123;\backslash Phi&#125; &amp; &#123;&#125; &amp; &#123;&#125; \\\\</div><div class="line">\hline</div><div class="line">\end&#123;array&#125;</div><div class="line">$$</div></pre></td></tr></table></figure>
<p>$$<br>\begin{array}{|c|c|c|c|c|c|c|c|}<br>\hline<br>{\alpha} &amp; {\backslash alpha} &amp; {\theta} &amp; {\backslash theta} &amp; {o} &amp; {o} &amp; {\upsilon} &amp; {\backslash upsilon} \\<br>\hline<br>{\beta} &amp; {\backslash beta} &amp; {\vartheta} &amp; {\backslash vartheta} &amp; {\pi} &amp; {\backslash pi} &amp; {\phi} &amp; {\backslash phi} \\<br>\hline<br>{\gamma} &amp; {\backslash gamma} &amp; {\iota} &amp; {\backslash iota} &amp; {\varpi} &amp; {\backslash varpi} &amp; {\varphi} &amp; {\backslash varphi} \\<br>\hline<br>{\delta} &amp; {\backslash delta} &amp; {\kappa} &amp; {\backslash kappa} &amp; {\rho} &amp; {\backslash rho} &amp; {\chi} &amp; {\backslash chi} \\<br>\hline<br>{\epsilon} &amp; {\backslash epsilon} &amp; {\lambda} &amp; {\backslash lambda} &amp; {\varrho} &amp; {\backslash varrho} &amp; {\psi} &amp; {\backslash psi} \\<br>\hline<br>{\varepsilon} &amp; {\backslash varepsilon} &amp; {\mu} &amp; {\backslash mu} &amp; {\sigma} &amp; {\backslash sigma} &amp; {\omega} &amp; {\backslash omega} \\<br>\hline<br>{\zeta} &amp; {\backslash zeta} &amp; {\nu} &amp; {\backslash nu} &amp; {\varsigma} &amp; {\backslash varsigma} &amp; {} &amp; {} \\<br>\hline<br>{\eta} &amp; {\backslash eta} &amp; {\xi} &amp; {\backslash xi} &amp; {\tau} &amp; {\backslash tau} &amp; {} &amp; {} \\<br>\hline<br>{\Gamma} &amp; {\backslash Gamma} &amp; {\Lambda} &amp; {\backslash Lambda} &amp; {\Sigma} &amp; {\backslash Sigma} &amp; {\Psi} &amp; {\backslash Psi} \\<br>\hline<br>{\Delta} &amp; {\backslash Delta} &amp; {\Xi} &amp; {\backslash Xi} &amp; {\Upsilon} &amp; {\backslash Upsilon} &amp; {\Omega} &amp; {\backslash Omega} \\<br>\hline<br>{\Omega} &amp; {\backslash Omega} &amp; {\Pi} &amp; {\backslash Pi} &amp; {\Phi} &amp; {\backslash Phi} &amp; {} &amp; {} \\<br>\hline<br>\end{array}<br>$$</p>
<p>å†™å¤ªç´¯äº†ğŸ˜‚ğŸ˜‚ğŸ˜‚ã€‚ã€‚ã€‚å…¶ä»–çš„è¯¦è§ <a href="https://github.com/mk43/BlogResource/blob/master/LaTex/LATEX%E6%95%B0%E5%AD%A6%E7%AC%A6%E5%8F%B7%E8%A1%A8.pdf" target="_blank" rel="external">PDF</a>ã€‚</p>
<h2 id="4-æ€»ç»“"><a href="#4-æ€»ç»“" class="headerlink" title="4. æ€»ç»“"></a>4. æ€»ç»“</h2><blockquote>
<p>é€šè¿‡è¿™æ ·æ¢³ç†ä¸€ä¸‹åŸºæœ¬çš„å…¬å¼éƒ½èƒ½æ’å…¥äº†ï¼Œè€Œä¸”ä¹Ÿä¼šå¦‚ä½•æŸ¥èµ„æ–™ã€‚å¯¹äºè‡ªå·±æ—¥åå­¦ä¹  LaTeX å†™è®ºæ–‡æœ‰å¾ˆå¤§å¸®åŠ©ã€‚ä»¥ä¸‹å»ºè®®å¸¦æœ‰å¾ˆå¼ºçš„ä¸»è§‚æ€§ï¼Œä»…ä¾›å‚è€ƒã€‚</p>
</blockquote>
<ul>
<li>å…¬å¼ä¸€å¾‹ä½¿ç”¨å¦å–ä¸€è¡Œï¼Œå¹¶ä¸”ä¸Šä¸‹éƒ½ç©ºä¸€è¡Œ</li>
<li>ä¸€ä¸ªå…¬å¼ä¸€ä¸ªè¯­å¥ï¼Œä¸è¦å†™åœ¨ä¸€ä¸ª <code>$$***$$</code> é‡Œï¼Œä¿è¯<code>ç‹¬ç«‹æ€§</code>ï¼Œä¸€ä¸ªå…¬å¼é”™è¯¯ä¸å½±å“å¦ä¸€ä¸ªå…¬å¼ã€‚</li>
<li>é£æ ¼ç»Ÿä¸€ï¼Œä¸è¦æ··ç”¨ã€‚æ¯”å¦‚ä¸Šä¸‹æ ‡çš„å†™æ³•ï¼š<code>x_{balabala}^{bala}</code></li>
<li>è¡Œé—´å­—æ¯å¯ä»¥ä½¿ç”¨ <code>\\(a\\)</code> ä»£æ›¿ <code>a</code> ï¼Œå…»æˆè‡ªå·±çš„å†™ä½œé£æ ¼ã€‚</li>
</ul>
<p>æœ€åï¼šæˆ‘çš„ <a href="http://fitzeng.org/">Blog</a> å’Œ <a href="https://github.com/mk43" target="_blank" rel="external">GitHub</a>ï¼Œæ„Ÿè°¢é˜…è¯»ã€‚</p>
<h2 id="5-å‚è€ƒèµ„æ–™"><a href="#5-å‚è€ƒèµ„æ–™" class="headerlink" title="5. å‚è€ƒèµ„æ–™"></a>5. å‚è€ƒèµ„æ–™</h2><blockquote>
<p>ååˆ†æ„Ÿè°¢ä»¥ä¸‹ä½œè€…çš„æ— ç§åˆ†äº«ã€‚</p>
</blockquote>
<ol>
<li><a href="http://blog.csdn.net/xiahouzuoxin/article/details/26478179" target="_blank" rel="external">Markdownä¸­æ’å…¥æ•°å­¦å…¬å¼çš„æ–¹æ³•</a></li>
<li><a href="http://www.cnblogs.com/houkai/p/3399646.html" target="_blank" rel="external">LATEXæ•°å­¦å…¬å¼åŸºæœ¬è¯­æ³•</a></li>
<li><a href="https://liam0205.me/2014/09/08/latex-introduction/" target="_blank" rel="external">ä¸€ä»½å…¶å®å¾ˆçŸ­çš„ LaTeX å…¥é—¨æ–‡æ¡£</a></li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;script type=&quot;text/javascript&quot; src=&quot;http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default&quot;&gt;&lt;/script&gt;

&lt;h2 id=&quot;0-å‰è¨€&quot;&gt;&lt;a href=&quot;#0-å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;0. å‰è¨€&quot;&gt;&lt;/a&gt;0. å‰è¨€&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;æœ€è¿‘åœ¨å­¦ä¹ ä¸€äº›æœºå™¨å­¦ä¹ ç›¸å…³çš„çŸ¥è¯†ï¼Œæƒ³æŠŠè‡ªå·±å­¦ä¹ çš„ä¸œè¥¿é€šè¿‡ MD çš„å½¢å¼åœ¨çº¿è®°å½•ä¸‹æ¥ï¼Œä½†æ˜¯ä¹‹å‰ä¸€ç›´æ²¡æœ‰å¼€å§‹è¡ŒåŠ¨ï¼Œå› ä¸ºé‡Œé¢çš„å…¬å¼ä»€ä¹ˆçš„æ„Ÿè§‰å®åœ¨æ˜¯éº»çƒ¦ã€‚äºæ˜¯ä»Šå¤©æ‰“ç®—èŠ±ç‚¹æ—¶é—´äº†è§£ä¸€ä¸‹&lt;a href=&quot;http://blog.csdn.net/xiahouzuoxin/article/details/26478179&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;code&gt;å¦‚ä½•åœ¨ markdown ä¸­æ’å…¥æ•°å­¦å…¬å¼&lt;/code&gt;&lt;/a&gt;ï¼Œå‘ç°å…¶å®å¾ˆç®€å•ï¼Œå¤§æ¦‚èŠ±ä¸€ä¸ªå°æ—¶å·¦å³å°±èƒ½çŸ¥é“å¦‚ä½•ç¼–å†™äº†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="Math" scheme="http://fitzeng.org/tags/Math/"/>
    
      <category term="MarkDown" scheme="http://fitzeng.org/tags/MarkDown/"/>
    
      <category term="Formula" scheme="http://fitzeng.org/tags/Formula/"/>
    
      <category term="LaTeX" scheme="http://fitzeng.org/tags/LaTeX/"/>
    
  </entry>
  
  <entry>
    <title>GitNote</title>
    <link href="http://fitzeng.org/2017/12/16/GitNote/"/>
    <id>http://fitzeng.org/2017/12/16/GitNote/</id>
    <published>2017-12-16T03:27:00.000Z</published>
    <updated>2017-12-17T06:36:06.885Z</updated>
    
    <content type="html"><![CDATA[<h2 id="0-å‰è¨€"><a href="#0-å‰è¨€" class="headerlink" title="0. å‰è¨€"></a>0. å‰è¨€</h2><blockquote>
<p>åœ¨ä½¿ç”¨ Git æ—¶æœ‰ä¸€ç§æ„Ÿè§‰å°±æ˜¯åªä¼š <code>add | commit | push</code> ä¸‰ä¸ªå‘½ä»¤ã€‚å› ä¸ºè¿™ä¸‰ä¸ªå‘½ä»¤ä¼¼ä¹è¶³ä»¥æŠŠä»£ç æäº¤åˆ° GitHub ä¸Šï¼Œå³ä½¿æ˜¯ç¢°åˆ°æŸä¸ªé—®é¢˜ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ Googleã€‚ä½†æ˜¯å¯¹äºå…¶ä¸­çš„é€»è¾‘å’Œç‰ˆæœ¬ç®¡ç†çš„ç²¾é«“æ²¡æœ‰ä½“ä¼šåˆ°ï¼Œè€Œåªæ˜¯ä½œä¸ºä¸€ä¸ªåœ¨çº¿ä»£ç ä»“åº“åœ¨ä½¿ç”¨ï¼Œè¿™æ ·åšä¹Ÿæ²¡æœ‰ä»€ä¹ˆä¸å¯ä»¥ï¼Œä½†æ˜¯å¦‚æœèƒ½ç³»ç»Ÿçš„äº†è§£ä¸ºä»€ä¹ˆè¦æœ‰ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼Œä»¥åŠç‰ˆæœ¬ç®¡ç†å·¥å…·èƒ½å¤Ÿç»™æˆ‘ä»¬æä¾›æ€ä¹ˆæ ·çš„ç®¡ç†æœåŠ¡ï¼Œå¯¹äºä½¿ç”¨å·¥å…·çš„æˆ‘ä»¬æ¥è¯´æœ‰å¾ˆå¤§å¸®åŠ©ã€‚ä¸ç”¨è®°ä½å‘½ä»¤ï¼Œåªæ˜¯ä»¥åé‡åˆ°é—®é¢˜æ—¶çŸ¥é“è¿™ä¸ªå·¥å…·æœ‰å®ç°çš„æ–¹å¼å°±è¶³å¤Ÿäº†ã€‚</p>
<p>ç°åœ¨æˆ‘ç³»ç»Ÿçš„çœ‹äº†ä¸€ä¸‹å®˜æ–¹çš„ Git å…¥é—¨æ•™ç¨‹ <a href="https://www.nowcoder.com/courses/2#chapter-14" target="_blank" rel="external">Git å®˜æ–¹æ•™ç¨‹ï¼ˆä¸­å­—ï¼‰</a> é‡Œé¢é€šè¿‡æè¿°å¯¹å‘½ä»¤çš„ä½¿ç”¨æƒ…æ™¯è¿›è€Œé€‰æ‹©å‘½ä»¤è¿›è¡Œæ“ä½œçš„æ–¹å¼ï¼Œä½¿å¾—å‘½ä»¤å¾ˆå®¹æ˜“ç†è§£ä¹Ÿå®¹æ˜“åŠ æ·±è®°å¿†ã€‚æ¯”èµ·å•ä¸€çš„å‘½ä»¤ç”¨æ–‡å­—è§£é‡Šè¿™ç§æ–¹å¼ï¼Œå¯¹äºä¸ç†Ÿæ‚‰ Git çš„äººæ¥è¯´æ˜¯ååˆ†å‹å¥½çš„ã€‚ä½†æ˜¯ï¼Œçœ‹å®Œå®¹æ˜“å¿˜ï¼Œæ‰€ä»¥å†™äº†è¿™ç¯‡æ•´ç†ç¬”è®°ç”¨ä½œè¾…åŠ©æŸ¥è¯¢ã€‚</p>
</blockquote>
<a id="more"></a>
<h2 id="1-åŸºæœ¬å‘½ä»¤"><a href="#1-åŸºæœ¬å‘½ä»¤" class="headerlink" title="1. åŸºæœ¬å‘½ä»¤"></a>1. åŸºæœ¬å‘½ä»¤</h2><h3 id="1-1-äº†è§£å¸®åŠ©å‘½ä»¤"><a href="#1-1-äº†è§£å¸®åŠ©å‘½ä»¤" class="headerlink" title="1.1 äº†è§£å¸®åŠ©å‘½ä»¤"></a>1.1 äº†è§£å¸®åŠ©å‘½ä»¤</h3><ul>
<li><code>git help</code> : æŸ¥çœ‹å‘½ä»¤</li>
<li><code>git help add</code> : æŸ¥çœ‹ <code>git add</code> å‘½ä»¤çš„å…·ä½“è§£é‡Š</li>
</ul>
<h3 id="1-2-ä»“åº“åˆå§‹åŒ–"><a href="#1-2-ä»“åº“åˆå§‹åŒ–" class="headerlink" title="1.2 ä»“åº“åˆå§‹åŒ–"></a>1.2 ä»“åº“åˆå§‹åŒ–</h3><ul>
<li><code>git init</code> : åˆ›å»º <code>.git</code>, é€‚åˆåœ¨å·²å­˜åœ¨é¡¹ç›®è¿½åŠ ç‰ˆæœ¬æ§åˆ¶</li>
<li><code>git init projectname</code> : åˆ›å»º <code>projectname/.git</code>, é€‚åˆé¡¹ç›®å¼€å§‹æ—¶åŠ å…¥ç‰ˆæœ¬æ§åˆ¶</li>
</ul>
<h3 id="1-3-æ–‡ä»¶åŸºæœ¬æ“ä½œ"><a href="#1-3-æ–‡ä»¶åŸºæœ¬æ“ä½œ" class="headerlink" title="1.3 æ–‡ä»¶åŸºæœ¬æ“ä½œ"></a>1.3 æ–‡ä»¶åŸºæœ¬æ“ä½œ</h3><ul>
<li><code>git add filename/*</code> : æ·»åŠ æ–‡ä»¶[äº§ç”Ÿæš‚å­˜æ–‡ä»¶]</li>
<li><code>git commmit -m &quot;message&quot;</code> : å°†æ·»åŠ çš„æ–‡ä»¶æäº¤åˆ°æœ¬åœ°ä»“åº“[äº§ç”Ÿæäº¤æ–‡ä»¶]</li>
<li><code>git rm filename</code> : ç§»é™¤æ–‡ä»¶ï¼Œä½¿ç”¨ <code>rm filename</code> çš„æœ‰æš‚å­˜</li>
<li><code>git add -u .</code> : å¦‚æœä¹‹å‰ä½¿ç”¨é git å‘½ä»¤åˆ é™¤æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªå‘½ä»¤æŠŠå½“å‰ç›®å½•çš„æ–‡ä»¶é‡æ–°éå†æ¸…é™¤</li>
<li><code>git rm --cache filename</code> : æš‚å­˜ä½†æ˜¯ä¸å‚ä¸è·Ÿè¸ª</li>
<li><code>git mv filepath newfilepath</code> : ç§»åŠ¨æ–‡ä»¶</li>
<li><code>git rm filepath &amp;&amp; git add newfilepath</code> : ç§»åŠ¨æ–‡ä»¶ï¼Œä¹‹å‰ä½¿ç”¨é git å‘½ä»¤ç§»åŠ¨æ–‡ä»¶</li>
<li><code>git add -A .</code> : å¦‚æœä¹‹å‰ä½¿ç”¨é git å‘½ä»¤ç§»åŠ¨æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªå‘½ä»¤æŠŠå½“å‰ç›®å½•çš„æ–‡ä»¶é‡æ–°éå†ç§»åŠ¨ï¼Œå’Œ <code>rm</code> å‘½ä»¤ç±»ä¼¼</li>
<li><code>git reset etc...</code> : å†å²æäº¤ç®¡ç†(å›é€€ï¼Œåˆå¹¶â€¦)ï¼Œcheckout æ›´å…³æ³¨æ–‡ä»¶</li>
</ul>
<h3 id="1-4-æŸ¥çœ‹æ–‡ä»¶ä¿®æ”¹"><a href="#1-4-æŸ¥çœ‹æ–‡ä»¶ä¿®æ”¹" class="headerlink" title="1.4 æŸ¥çœ‹æ–‡ä»¶ä¿®æ”¹"></a>1.4 æŸ¥çœ‹æ–‡ä»¶ä¿®æ”¹</h3><ul>
<li><code>git status</code> : æŸ¥çœ‹æ–‡ä»¶ä¿¡æ¯</li>
<li><code>git diff</code> : æŸ¥çœ‹ä¿®æ”¹[å·¥ä½œæ ‘å’Œæš‚å­˜æ–‡ä»¶]</li>
<li><code>git diff --staged</code> : æŸ¥çœ‹ä¿®æ”¹[æš‚å­˜æ–‡ä»¶å’Œæœ€è¿‘æäº¤æ–‡ä»¶]</li>
<li><code>git diff HEAD</code> : æŸ¥çœ‹ä¿®æ”¹[å·¥ä½œæ ‘å’Œæœ€è¿‘æäº¤æ–‡ä»¶]</li>
<li><code>git diff --word-diff</code> : æŸ¥çœ‹ä¿®æ”¹çš„å•è¯ç”¨é¢œè‰²æ ‡å‡º</li>
<li><code>git diff --stat</code> : æŸ¥çœ‹ä¿®æ”¹çš„æ–‡ä»¶å</li>
</ul>
<blockquote>
<p>å‚è€ƒèµ„æ–™ <a href="http://www.cnblogs.com/feeland/p/4500721.html" target="_blank" rel="external">0. Git å­¦ä¹ ï¼ˆä¸‰ï¼‰æœ¬åœ°ä»“åº“æ“ä½œâ€”â€”git add &amp; commit</a> äº†è§£ git ç‰ˆæœ¬åº“å®ç°</p>
</blockquote>
<h3 id="1-5-æŸ¥çœ‹æäº¤-Log"><a href="#1-5-æŸ¥çœ‹æäº¤-Log" class="headerlink" title="1.5 æŸ¥çœ‹æäº¤ Log"></a>1.5 æŸ¥çœ‹æäº¤ Log</h3><ul>
<li><code>git log</code> : æ˜¾ç¤ºæäº¤ä¿¡æ¯</li>
<li><code>git log --oneline</code> : æ˜¾ç¤ºæäº¤ Message</li>
<li><code>git log --stat</code> : æ˜¾ç¤ºæäº¤æ–‡ä»¶åçº§è¯¦ç»†ä¿®æ”¹ä¿¡æ¯</li>
<li><code>git log --patch</code> : æ˜¾ç¤ºæäº¤æ–‡ä»¶å†…å®¹çº§è¯¦ç»†ä¿®æ”¹ä¿¡æ¯ </li>
<li><code>git log --graph</code> : ç”¨å›¾æ˜¾ç¤ºæäº¤è®°å½•</li>
<li><code>git log --graph --all --decorate --oneline</code> : å»é™¤å†—ä½™ä¿¡æ¯ï¼Œæ›´åŠ ç›´è§‚æ˜¾ç¤ºæ¯æ¡åˆ†æ”¯æ¯æ¬¡æäº¤</li>
<li><code>git log --stat -- filename</code> : æ–‡ä»¶æäº¤è®°å½•ï¼ˆä¸è®°å½•è·¯å¾„ç§»åŠ¨ï¼‰</li>
<li><code>git log --stat -M --follow -- filename</code> : çœ‹åˆ°å®Œæ•´çš„æ–‡ä»¶æ“ä½œè¿‡ç¨‹</li>
</ul>
<h3 id="1-6-å¿½ç•¥æ–‡ä»¶"><a href="#1-6-å¿½ç•¥æ–‡ä»¶" class="headerlink" title="1.6 å¿½ç•¥æ–‡ä»¶"></a>1.6 å¿½ç•¥æ–‡ä»¶</h3><ul>
<li><code>touch .gitignore</code> : åˆ›å»ºæ–‡ä»¶(æ¬¡çº§ç›®å½•ä¹Ÿå¯ä»¥åˆ›å»º)</li>
<li><code>vim .gitignore</code> : ç¼–è¾‘æ–‡ä»¶æ·»åŠ  ignore æ–‡ä»¶ã€‚<code>*.log | tmp/ | .sass-cache etc...</code></li>
<li><code>git ls-files --others --ignored --exclude-standard</code> : æŸ¥çœ‹è¢« ignore çš„æ–‡ä»¶</li>
<li><code>git reflog</code> : è¯¦ç»†ä¿®æ”¹æ—¥å¿—</li>
</ul>
<h3 id="1-7-åˆ†æ”¯æ“ä½œ"><a href="#1-7-åˆ†æ”¯æ“ä½œ" class="headerlink" title="1.7 åˆ†æ”¯æ“ä½œ"></a>1.7 åˆ†æ”¯æ“ä½œ</h3><ul>
<li><code>git branch branchname</code> : åˆ›å»ºåˆ†æ”¯</li>
<li><code>git branch</code> : æ˜¾ç¤ºåˆ†æ”¯</li>
<li><code>git branch -d branchname</code> : åˆ é™¤åˆ†æ”¯</li>
<li><code>git branch -D branchname</code> : åˆ é™¤æœªåˆå¹¶åˆ†æ”¯</li>
<li><code>git checkout branchname</code> : åˆ‡æ¢åˆ†æ”¯</li>
<li><code>git checkout commitID</code> : å·¥ä½œæ ‘åˆ‡æ¢åˆ° commitID æ—¶</li>
<li><code>git checkout -- filename</code> : æ¸…ç†æ‰æœ€åä¸€æ¬¡æäº¤å†…å®¹</li>
<li><code>git checkout -b branchname</code> : åˆ›å»ºæ–°åˆ†æ”¯å¹¶ä¸”è¿›å…¥è¯¥åˆ†æ”¯</li>
<li><code>git merge branchname</code> : å’Œå¹¶ branchname åˆ†æ”¯åˆ°ç›®å‰æ‰€åœ¨åˆ†æ”¯(åˆå¹¶æ—¶æ–‡ä»¶å†²çªè¦æ‰‹åŠ¨è§£å†³)</li>
<li><code>git merge --abort</code> : æ¸…é™¤å·¥ä½œç›®å½•å’Œæš‚å­˜åŒº</li>
<li><code>git merge squash branchname</code> : å°†åˆå¹¶çš„åˆ†æ”¯æ”¹å˜å˜æˆä¸€ä¸ª commit</li>
<li><code>git rebase branchname</code> : å°†å½“å‰åˆ†æ”¯å†å²æäº¤åˆå¹¶åˆ° branchname åˆ†æ”¯</li>
</ul>
<blockquote>
<p>å‚è€ƒèµ„æ–™ <a href="https://github.com/geeeeeeeeek/git-recipes/wiki/5.1-%E4%BB%A3%E7%A0%81%E5%90%88%E5%B9%B6%EF%BC%9AMerge%E3%80%81Rebase-%E7%9A%84%E9%80%89%E6%8B%A9" target="_blank" rel="external">2. ä»£ç åˆå¹¶ï¼šMergeã€Rebase çš„é€‰æ‹©</a></p>
</blockquote>
<h3 id="1-8-è¿œç¨‹æ“ä½œ"><a href="#1-8-è¿œç¨‹æ“ä½œ" class="headerlink" title="1.8 è¿œç¨‹æ“ä½œ"></a>1.8 è¿œç¨‹æ“ä½œ</h3><ul>
<li><code>git remote add origin  https://github.com/accountname/projectname</code></li>
<li><code>git remote set-url origin newUrl</code> : æ”¹å˜ URL</li>
<li><code>git remote rm origin</code> : åˆ é™¤</li>
<li><code>git remote -v</code> : æŸ¥çœ‹ URL</li>
<li><code>git fetch origin</code> : æŠ“å–è¿œç¨‹åˆ†æ”¯ï¼Œæœ¬åœ°ä¼šæœ‰ä¸€ä¸ª <code>remotehostname/branchname</code> çš„åˆ†æ”¯ï¼Œä¸€èˆ¬ç”¨äºæŸ¥çœ‹ä¼™ä¼´ä»£ç </li>
<li><code>git pull origin</code> : å’Œ fetch ç±»ä¼¼ï¼Œä½†æ˜¯æ˜¯å–å›è¿œç¨‹æ›´æ–°å’Œæœ¬åœ°åˆå¹¶ã€‚ç›¸å½“äºå…ˆ fetch å† mergeã€‚</li>
<li><code>git push origin</code> : push åˆ°è¿œç¨‹ä»“åº“</li>
</ul>
<blockquote>
<p>å‚è€ƒèµ„æ–™ <a href="http://www.ruanyifeng.com/blog/2014/06/git_remote.html" target="_blank" rel="external">1. Gitè¿œç¨‹æ“ä½œè¯¦è§£</a></p>
</blockquote>
<h2 id="2-æ€»ç»“"><a href="#2-æ€»ç»“" class="headerlink" title="2. æ€»ç»“"></a>2. æ€»ç»“</h2><blockquote>
<p>å…¶å®åœ¨å¼€å§‹æŠŠ Git æ•´ä¸ªå‘½ä»¤æµç¨‹å­¦ä¹ ä¸‹æ¥ä¹‹å‰ï¼Œå¯¹ Git ç†è§£ååˆ†æµ…æ˜¾ï¼Œä½¿ç”¨å‘½ä»¤ä¹Ÿæ˜¯æŠ±ç€è¯•è¯•çœ‹çš„å¿ƒæ€ï¼Œé”™äº†æœç´¢è§£å†³æ–¹æ³•é‡è¯•ï¼Œå¯¹äº†å°±ä¸è¿½ç©¶åŸå› äº†ã€‚è¿™ç§æ–¹å¼æ„Ÿè§‰æ›´åŠ æµªè´¹æ—¶é—´ï¼Œè€Œä¸”å¾ˆå¯èƒ½å¤šæ¬¡é‡åˆ°é‡å¤é—®é¢˜ã€‚è§‰å¾—ä»¥åå­¦ä¹ æŸä¸ªä¸œè¥¿è¿˜æ˜¯å¾—å¤§æ¦‚äº†è§£æ•´ä¸ªç³»ç»Ÿæ‰å¥½ï¼Œæƒ³å¿«é€Ÿå…¥é—¨æœªå°ä¸å¯ï¼Œä½†æ˜¯é—²ä¸‹æ¥çš„æ—¶å€™è¦å»å¤šé—®é—®ä¸ºä»€ä¹ˆï¼Œè¿™æ ·æœ‰äº†å®è§‚çš„æ¦‚å¿µï¼Œå‡ºäº†é—®é¢˜è¯´ä¸å®šèƒ½è‡ªå·±æ‘¸ç´¢ç€è§£å†³ã€‚è¿˜æœ‰ä¸€ç‚¹ï¼Œå®è·µç¡®å®æ˜¯æ¯”å•ä¸€çš„é˜…è¯»æˆ–çœ‹è§†é¢‘æ›´åŠ è®°å¿†æ·±åˆ»ï¼Œå¯¹å‘½ä»¤çš„ç†è§£ä¹Ÿæ˜¯åŒç†ï¼Œæ‰€ä»¥æœ€å¥½éƒ½æ•²ä¸€éã€‚</p>
</blockquote>
<ul>
<li><a href="https://github.com/mk43" target="_blank" rel="external">GitHub</a></li>
<li><a href="http://fitzeng.org">Blog</a></li>
<li><a href="https://juejin.im/user/5791a7a30a2b580061a0e352" target="_blank" rel="external">æ˜é‡‘</a></li>
</ul>
<p>å¤šè°¢é˜…è¯» ^_^</p>
<h2 id="3-å‚è€ƒèµ„æ–™"><a href="#3-å‚è€ƒèµ„æ–™" class="headerlink" title="3. å‚è€ƒèµ„æ–™"></a>3. å‚è€ƒèµ„æ–™</h2><ul>
<li><a href="https://www.nowcoder.com/courses/2#chapter-14" target="_blank" rel="external">-1. GitHub&amp;Gitå…¥é—¨åŸºç¡€</a></li>
<li><a href="http://www.cnblogs.com/feeland/p/4500721.html" target="_blank" rel="external">0. Git å­¦ä¹ ï¼ˆä¸‰ï¼‰æœ¬åœ°ä»“åº“æ“ä½œâ€”â€”git add &amp; commit</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2014/06/git_remote.html" target="_blank" rel="external">1. Gitè¿œç¨‹æ“ä½œè¯¦è§£</a></li>
<li><a href="https://github.com/geeeeeeeeek/git-recipes/wiki/5.1-%E4%BB%A3%E7%A0%81%E5%90%88%E5%B9%B6%EF%BC%9AMerge%E3%80%81Rebase-%E7%9A%84%E9%80%89%E6%8B%A9" target="_blank" rel="external">2. ä»£ç åˆå¹¶ï¼šMergeã€Rebase çš„é€‰æ‹©</a></li>
<li><a href="https://github.com/geeeeeeeeek/git-recipes" target="_blank" rel="external">3. GitHub é«˜è´¨é‡çš„Gitä¸­æ–‡æ•™ç¨‹</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;0-å‰è¨€&quot;&gt;&lt;a href=&quot;#0-å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;0. å‰è¨€&quot;&gt;&lt;/a&gt;0. å‰è¨€&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;åœ¨ä½¿ç”¨ Git æ—¶æœ‰ä¸€ç§æ„Ÿè§‰å°±æ˜¯åªä¼š &lt;code&gt;add | commit | push&lt;/code&gt; ä¸‰ä¸ªå‘½ä»¤ã€‚å› ä¸ºè¿™ä¸‰ä¸ªå‘½ä»¤ä¼¼ä¹è¶³ä»¥æŠŠä»£ç æäº¤åˆ° GitHub ä¸Šï¼Œå³ä½¿æ˜¯ç¢°åˆ°æŸä¸ªé—®é¢˜ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ Googleã€‚ä½†æ˜¯å¯¹äºå…¶ä¸­çš„é€»è¾‘å’Œç‰ˆæœ¬ç®¡ç†çš„ç²¾é«“æ²¡æœ‰ä½“ä¼šåˆ°ï¼Œè€Œåªæ˜¯ä½œä¸ºä¸€ä¸ªåœ¨çº¿ä»£ç ä»“åº“åœ¨ä½¿ç”¨ï¼Œè¿™æ ·åšä¹Ÿæ²¡æœ‰ä»€ä¹ˆä¸å¯ä»¥ï¼Œä½†æ˜¯å¦‚æœèƒ½ç³»ç»Ÿçš„äº†è§£ä¸ºä»€ä¹ˆè¦æœ‰ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼Œä»¥åŠç‰ˆæœ¬ç®¡ç†å·¥å…·èƒ½å¤Ÿç»™æˆ‘ä»¬æä¾›æ€ä¹ˆæ ·çš„ç®¡ç†æœåŠ¡ï¼Œå¯¹äºä½¿ç”¨å·¥å…·çš„æˆ‘ä»¬æ¥è¯´æœ‰å¾ˆå¤§å¸®åŠ©ã€‚ä¸ç”¨è®°ä½å‘½ä»¤ï¼Œåªæ˜¯ä»¥åé‡åˆ°é—®é¢˜æ—¶çŸ¥é“è¿™ä¸ªå·¥å…·æœ‰å®ç°çš„æ–¹å¼å°±è¶³å¤Ÿäº†ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨æˆ‘ç³»ç»Ÿçš„çœ‹äº†ä¸€ä¸‹å®˜æ–¹çš„ Git å…¥é—¨æ•™ç¨‹ &lt;a href=&quot;https://www.nowcoder.com/courses/2#chapter-14&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Git å®˜æ–¹æ•™ç¨‹ï¼ˆä¸­å­—ï¼‰&lt;/a&gt; é‡Œé¢é€šè¿‡æè¿°å¯¹å‘½ä»¤çš„ä½¿ç”¨æƒ…æ™¯è¿›è€Œé€‰æ‹©å‘½ä»¤è¿›è¡Œæ“ä½œçš„æ–¹å¼ï¼Œä½¿å¾—å‘½ä»¤å¾ˆå®¹æ˜“ç†è§£ä¹Ÿå®¹æ˜“åŠ æ·±è®°å¿†ã€‚æ¯”èµ·å•ä¸€çš„å‘½ä»¤ç”¨æ–‡å­—è§£é‡Šè¿™ç§æ–¹å¼ï¼Œå¯¹äºä¸ç†Ÿæ‚‰ Git çš„äººæ¥è¯´æ˜¯ååˆ†å‹å¥½çš„ã€‚ä½†æ˜¯ï¼Œçœ‹å®Œå®¹æ˜“å¿˜ï¼Œæ‰€ä»¥å†™äº†è¿™ç¯‡æ•´ç†ç¬”è®°ç”¨ä½œè¾…åŠ©æŸ¥è¯¢ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="Git" scheme="http://fitzeng.org/tags/Git/"/>
    
      <category term="GitHub" scheme="http://fitzeng.org/tags/GitHub/"/>
    
      <category term="Tool" scheme="http://fitzeng.org/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>å®Œç¾è§£å†³ Linux çš„ã€dpkgï¼š warningï¼š files list file for package &#39;XXXXXXX&#39; missing, assuming package has no files currently installedã€‘Bug</title>
    <link href="http://fitzeng.org/2017/11/04/linuxDpkgBug/"/>
    <id>http://fitzeng.org/2017/11/04/linuxDpkgBug/</id>
    <published>2017-11-04T03:27:00.000Z</published>
    <updated>2017-11-04T15:12:10.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="0-å‰è¨€"><a href="#0-å‰è¨€" class="headerlink" title="0.å‰è¨€"></a>0.å‰è¨€</h2><blockquote>
<p>ä¼°è®¡æ˜¯ä¹‹å‰åŠ¨äº†æˆ–è€…æŸåäº† <code>/var/lib/dpkg/info</code> é‡Œé¢çš„æ–‡ä»¶ï¼Œæ¯æ¬¡æ‰§è¡Œ apt ç±»çš„å‘½ä»¤æ€»æ˜¯è¾“å‡ºä¸€å¤§æ®µä¸œè¥¿ï¼Œåœ¨ç½‘ä¸Šæ‰¾äº†å¾ˆå¤šèµ„æ–™ï¼Œæœ‰è§£å†³æ–¹æ¡ˆï¼Œä½†æ˜¯ä¸å…¨ã€‚ã€‚ã€‚å¾ˆå¤šéƒ½æ˜¯å¤±è´¥çš„ã€‚æœ€åæˆ‘å‘ç° reinstall å¯ä»¥è§£å†³ï¼Œæ‰€ä»¥æ‰“ç®—å†™ä¸ªè„šæœ¬æ‰§è¡Œæ–‡ä»¶ã€‚</p>
</blockquote>
<a id="more"></a>
<h2 id="1-è§£å†³æ–¹æ³•"><a href="#1-è§£å†³æ–¹æ³•" class="headerlink" title="1.è§£å†³æ–¹æ³•"></a>1.è§£å†³æ–¹æ³•</h2><h3 id="1-1-åˆ›å»ºä¸€ä¸‹ä¸‰ä¸ªæ–‡ä»¶"><a href="#1-1-åˆ›å»ºä¸€ä¸‹ä¸‰ä¸ªæ–‡ä»¶" class="headerlink" title="1.1 åˆ›å»ºä¸€ä¸‹ä¸‰ä¸ªæ–‡ä»¶"></a>1.1 åˆ›å»ºä¸€ä¸‹ä¸‰ä¸ªæ–‡ä»¶</h3><ul>
<li>fixit.py</li>
<li>fix.sh</li>
<li>txt</li>
</ul>
<h3 id="1-2-å¡«å†™å†…å®¹"><a href="#1-2-å¡«å†™å†…å®¹" class="headerlink" title="1.2 å¡«å†™å†…å®¹"></a>1.2 å¡«å†™å†…å®¹</h3><p>å…ˆæ¥æœ€ç®€å•çš„ <code>fix.sh</code>ï¼Œä¸ç”¨å¡«å†™å†…å®¹ï¼Œæ˜¯ç©ºæ–‡ä»¶ã€‚</p>
<p>æ¥ç€å°±å†™ <code>txt</code>ï¼Œç›´æ¥æŠŠé”™è¯¯æ—¥å¿—å¤åˆ¶è¿›å»ï¼Œå¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">dpkg: warning: files list file for package &apos;libodbc1:amd64&apos; missing; assuming package has no files currently installed</div><div class="line">dpkg: warning: files list file for package &apos;dh-autoreconf&apos; missing; assuming package has no files currently installed</div><div class="line">dpkg: warning: files list file for package &apos;erlang-webtool&apos; missing; assuming package has no files currently installed</div><div class="line">dpkg: warning: files list file for package &apos;libhtml-template-perl&apos; missing; assuming package has no files currently installed</div><div class="line">.......</div><div class="line">dpkg: warning: files list file for package &apos;libvirt-dev:amd64&apos; missing; assuming package has no files currently installed</div><div class="line">dpkg: warning: files list file for package &apos;autopoint&apos; missing; assuming package has no files currently installed</div><div class="line">dpkg: warning: files list file for package &apos;libconfig-general-perl&apos; missing; assuming package has no files currently installed</div><div class="line">dpkg: warning: files list file for package &apos;ubuntu-cloud-keyring&apos; missing; assuming package has no files currently installed</div><div class="line">dpkg: warning: files list file for package &apos;tgt&apos; missing; assuming package has no files currently installed</div><div class="line">dpkg: warning: files list file for package &apos;libfdt1:amd64&apos; missing; assuming package has no files currently installed</div></pre></td></tr></table></figure>
<p>ä¸‹é¢å†™ <code>fixit.py</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/env python</div><div class="line"># -*- coding: utf-8 -*-</div><div class="line"></div><div class="line">__author__ = &apos;Fitzeng&apos;</div><div class="line"></div><div class="line">import re</div><div class="line"></div><div class="line">def main():</div><div class="line">    fix = open(&apos;fix.sh&apos;, &apos;w+&apos;)</div><div class="line">    for line in open(&quot;txt&quot;):</div><div class="line">        pkg = re.match(re.compile(&apos;&apos;&apos;dpkg: warning: files list file for package &apos;(.+)&apos; &apos;&apos;&apos;), line)</div><div class="line">        if pkg:</div><div class="line">            cmd = &quot;sudo apt-get install --reinstall &quot; + pkg.group(1)</div><div class="line">            fix.write(cmd + &apos;\n&apos;)</div><div class="line"></div><div class="line">if __name__ == &quot;__main__&quot;:</div><div class="line">    main()</div></pre></td></tr></table></figure>
<h3 id="1-3-æ‰§è¡Œå‘½ä»¤"><a href="#1-3-æ‰§è¡Œå‘½ä»¤" class="headerlink" title="1.3 æ‰§è¡Œå‘½ä»¤"></a>1.3 æ‰§è¡Œå‘½ä»¤</h3><p>å¦‚æœæƒé™ä¸å¤Ÿå¯ä»¥ç›´æ¥å…ˆ <code>chmod 777 *</code>ï¼Œç„¶åæ‰§è¡Œ <code>python fixit.py</code>ï¼Œè¿™æ—¶ <code>fix.sh</code> å°±å˜æˆä¸‹é¢çš„æ ·å­äº†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install --reinstall libodbc1:amd64</div><div class="line">sudo apt-get install --reinstall dh-autoreconf</div><div class="line">sudo apt-get install --reinstall erlang-webtool</div><div class="line">sudo apt-get install --reinstall libhtml-template-perl</div><div class="line">sudo apt-get install --reinstall erlang-base</div><div class="line"></div><div class="line">.......</div><div class="line"></div><div class="line">sudo apt-get install --reinstall qemu-system-misc</div><div class="line">sudo apt-get install --reinstall libvirt-dev:amd64</div><div class="line">sudo apt-get install --reinstall autopoint</div><div class="line">sudo apt-get install --reinstall libconfig-general-perl</div><div class="line">sudo apt-get install --reinstall ubuntu-cloud-keyring</div><div class="line">sudo apt-get install --reinstall tgt</div><div class="line">sudo apt-get install --reinstall libfdt1:amd64</div></pre></td></tr></table></figure>
<p>æœ€åæ‰§è¡Œ <code>./fix.sh</code>ã€‚</p>
<p>ç„¶åå°±æ˜¯ç­‰å¾…æ‰§è¡Œç»“æŸäº†ã€‚</p>
<p>æ•ˆæœå¦‚ä¸‹ï¼Œä¸€è¡Œä¸€è¡Œ <code>dpkg: warning:</code> åœ¨å‡å°‘ã€‚<br><img src="/2017/11/04/linuxDpkgBug/debuging.png" alt=""><br><img src="/2017/11/04/linuxDpkgBug/debuging1.png" alt=""></p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;0-å‰è¨€&quot;&gt;&lt;a href=&quot;#0-å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;0.å‰è¨€&quot;&gt;&lt;/a&gt;0.å‰è¨€&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;ä¼°è®¡æ˜¯ä¹‹å‰åŠ¨äº†æˆ–è€…æŸåäº† &lt;code&gt;/var/lib/dpkg/info&lt;/code&gt; é‡Œé¢çš„æ–‡ä»¶ï¼Œæ¯æ¬¡æ‰§è¡Œ apt ç±»çš„å‘½ä»¤æ€»æ˜¯è¾“å‡ºä¸€å¤§æ®µä¸œè¥¿ï¼Œåœ¨ç½‘ä¸Šæ‰¾äº†å¾ˆå¤šèµ„æ–™ï¼Œæœ‰è§£å†³æ–¹æ¡ˆï¼Œä½†æ˜¯ä¸å…¨ã€‚ã€‚ã€‚å¾ˆå¤šéƒ½æ˜¯å¤±è´¥çš„ã€‚æœ€åæˆ‘å‘ç° reinstall å¯ä»¥è§£å†³ï¼Œæ‰€ä»¥æ‰“ç®—å†™ä¸ªè„šæœ¬æ‰§è¡Œæ–‡ä»¶ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="linux" scheme="http://fitzeng.org/tags/linux/"/>
    
      <category term="dpkg" scheme="http://fitzeng.org/tags/dpkg/"/>
    
  </entry>
  
  <entry>
    <title>ä¸€ä¸ªå°ç™½ä½¿ç”¨ devstack éƒ¨ç½² openstack çš„å¿ƒè·¯å†ç¨‹</title>
    <link href="http://fitzeng.org/2017/11/04/deployOpenstackByDevstack/"/>
    <id>http://fitzeng.org/2017/11/04/deployOpenstackByDevstack/</id>
    <published>2017-11-04T03:27:00.000Z</published>
    <updated>2017-11-04T04:57:37.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="0-å‰è¨€"><a href="#0-å‰è¨€" class="headerlink" title="0.å‰è¨€"></a>0.å‰è¨€</h2><blockquote>
<p>ä½œä¸ºä¸€ä¸ªæƒ³è¦å…¥é—¨äº‘è®¡ç®—çš„äººæ¥è¯´ï¼Œå¤§å¤šæ•°äººçš„ç¬¬ä¸€æ­¥å°±æ˜¯å­¦ä¹  openstackï¼Œè€Œå­¦ä¹  openstack çš„äººé¢ä¸´çš„ç¬¬ä¸€æ­¥å°±æ˜¯ç¬¬ä¸€ä¸ªâ€˜éš¾é¢˜â€™ï¼Œä½¿ç”¨è‡ªåŠ¨åŒ–éƒ¨ç½²å·¥å…· devstack éƒ¨ç½² openstack ç¯å¢ƒã€‚ç¬¬ä¸€æ¬¡æ¥è§¦è¿™ä¸ªä¸œè¥¿ï¼ŒèŠ±äº†ä¸¤å¤©å¤šæ—¶é—´åœ¨ Ubuntu Server å’Œ Ubuntu Desktop çš„ 16.04 ç‰ˆæœ¬ä¸ŠæˆåŠŸéƒ¨ç½²ã€‚æœ‰å¾ˆå¤šäººè¯´ Desktop ç‰ˆæœ‰å¾ˆå¤šå‘ï¼Œäº²æµ‹é—®é¢˜ç¡®å®æ¯” Server ç‰ˆå¤šï¼Œä½†éƒ½æ˜¯å¯è§£å†³çš„ã€‚å…¶ä¸­æœ€å¯¹åˆå­¦è€…ä¸å‹å¥½çš„å°±æ˜¯ç½‘ç»œé—®é¢˜ï¼Œä¸‹é¢ä¼šä»‹ç»ä¸ºä»€ä¹ˆã€‚æ‰€ä»¥å¦‚æœä½ è‡ªå·±ä¹°äº†å›½å¤–çš„ VPS é‚£å°±å¥½åŠäº†ï¼Œå› ä¸ºæœ‰ä¸ªéªšæ“ä½œè¦ç”¨åˆ°ï¼Œå¦‚æœä½ ç½‘é€Ÿå¥½å¯èƒ½ä½ é‡ä¸åˆ°è¿™äº›é—®é¢˜å°±å¯ä»¥å¿½ç•¥ã€‚</p>
<p>ä¸‹é¢ä¼šåˆ†ä¸¤ä¸ªéƒ¨åˆ†ä»‹ç»ï¼Œéƒ½ä¼šå°† Server å’Œ Desktop ä¸Šçš„éƒ¨ç½²è¿‡ç¨‹æè¿°ä¸€éã€‚<br>æ•™ç¨‹æ¨è <a href="https://docs.openstack.org/devstack/latest/" target="_blank" rel="external">å®˜æ–¹çš„ Doc</a>å’Œ<a href="https://zhuanlan.zhihu.com/p/28996062" target="_blank" rel="external">é¿å‘æŒ‡å—</a><br>æ•™ç¨‹è¿™ä¸ªä¸œè¥¿å¯¹äºåˆå­¦è€…ä¸å®œå¤ªå¤šï¼Œå®¹æ˜“ä¹±ï¼Œåªè¦æœ‰ä¸€ä¸ªæ­£ç¡®çš„æ‰§è¡Œæ¡†æ¶å°±å¥½ã€‚ç¢°åˆ°å…¶ä»– bug ç›´æ¥ Google å°±å¥½ã€‚</p>
</blockquote>
<a id="more"></a>
<p>ç„¶åä»‹ç»ä¸‹æˆ‘çš„ç¯å¢ƒå§</p>
<ul>
<li>Mac 10.12.6</li>
<li>VirtualBox 5.1.28</li>
<li>Ubuntu Server 16.04 4G+20G (ä¸´æ—¶æµ‹è¯• devstackï¼Œå¬è¯´å‘å°‘)</li>
<li>Ubuntu Desktop 16.04 4G+80G (å¹³æ—¶ä½¿ç”¨)</li>
<li>VPS(æœ€å¥½æœ‰) (ç”±äºæ˜¯ä¹ä¸ç‰ˆï¼Œä¸é€‚åˆç›´æ¥éƒ¨ç½²å’Œå¹³æ—¶å­¦ä¹ )</li>
</ul>
<h2 id="1-Ubuntu-Server-ç‰ˆ"><a href="#1-Ubuntu-Server-ç‰ˆ" class="headerlink" title="1.Ubuntu Server ç‰ˆ"></a>1.Ubuntu Server ç‰ˆ</h2><h3 id="å®‰è£…-Ubuntu-Server"><a href="#å®‰è£…-Ubuntu-Server" class="headerlink" title="å®‰è£… Ubuntu Server"></a>å®‰è£… Ubuntu Server</h3><p>é¦–å…ˆè‚¯å®šæ˜¯è¦åœ¨ Virtual Box å®‰è£… Ubuntu Server äº†ï¼Œè¿™ä¸€æ­¥ç•¥è¿‡ã€‚ç›¸ä¿¡ä½ å·²ç»æ˜¯æ¥è§¦è¿‡ä¸€æ®µæ—¶é—´è™šæ‹Ÿæœºçš„äººäº†ï¼Œä½†æ˜¯ä¸€ç‚¹æ³¨æ„ï¼Œç«Ÿå¯èƒ½åˆ†å¤šä¸€ç‚¹å†…å­˜å’Œç¡¬ç›˜ã€‚ç”±äºæˆ‘ä¸æ‰“ç®—æ—¥åå†è¿™ Server ç‰ˆä½¿ç”¨ï¼Œæ‰€ä»¥æˆ‘çš„é…ç½®æ˜¯ 4G + 20G</p>
<h3 id="SSH-ç™»å½•è™šæ‹Ÿæœº"><a href="#SSH-ç™»å½•è™šæ‹Ÿæœº" class="headerlink" title="SSH ç™»å½•è™šæ‹Ÿæœº"></a>SSH ç™»å½•è™šæ‹Ÿæœº</h3><p>å½“ä½ åˆ›å»ºå®Œæˆä¹‹åé¢ä¸´çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯é‚£ä¸ªç•Œé¢å¤ªä¸‘äº†ã€‚ã€‚ã€‚æ‰€ä»¥å¦‚æœå¯ä»¥åœ¨å®¿ä¸»æœºä¸Šæ“ä½œå°±å¥½äº†ï¼ŒSSH æ­£å¥½æ»¡è¶³ä½ ã€‚<br>è‡³äº SSH ä¸é€šä½¿ç”¨ä¸äº†çš„è‡ªå·±æŸ¥æŸ¥èµ„æ–™å§ï¼Œè¿™é‡Œæˆ‘ä¸»è¦ä»‹ç»ç½‘å¡é…ç½®ï¼Œæˆ‘ä½¿ç”¨äº†ä¸¤ä¸ªç½‘å¡ï¼š<br>ç¬¬ä¸€ä¸ªï¼š<br><img src="/2017/11/04/deployOpenstackByDevstack/wk1.png" alt=""><br><img src="/2017/11/04/deployOpenstackByDevstack/wk1port.png" alt=""><br>åšç«¯å£æ˜ å°„ï¼Œå°†ä¸»æœºçš„ 2222 æ˜ å°„åˆ°è™šæ‹Ÿæœºçš„ 22ï¼Œè¿™æ¡æ˜¯ä¸ºäº†ä»¥åä½¿ç”¨ SSHã€‚<br>ç¬¬äºŒä¸ªï¼š<br><img src="/2017/11/04/deployOpenstackByDevstack/wk2.png" alt=""><br>é…å®Œä¹‹åå†åœ¨å…¨å±€é…ç½®ä¸­è®¾ç½®ä½ æ‰€é€‰ä¸­çš„ç½‘å¡å¯ç”¨ DHCPã€‚å¯¹äºç½‘å¡å„ç§è¿æ¥æ¨¡å¼ä¸ç†Ÿçš„å¯ä»¥æŸ¥æŸ¥èµ„æ–™äº†è§£ä¸€ä¸‹ã€‚</p>
<p>ç„¶åè¿æ¥å°±æ˜¯ç›´æ¥åœ¨ä¸»æœºä¸‹ä½¿ç”¨  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssh -p 2222 fitzeng@127.0.0.1</div></pre></td></tr></table></figure>
<p>fitzeng æ”¹æˆä½ çš„ç”¨æˆ·åã€‚<br>å¦‚æœä½ å‡ºç°å„ç§é—®é¢˜è¿ä¸ä¸Šå¯ä»¥æ³¨æ„ä¸€ä¸‹ä¸¤ç‚¹ï¼š<br>1.é˜²ç«å¢™<br>2.æŠŠ <code>~/.ssh</code> æ–‡ä»¶å¤¹ä¸‹çš„ <code>known_hosts</code> æ–‡ä»¶åˆ äº†å†é‡è¿</p>
<h3 id="å¼€å§‹éƒ¨ç½²"><a href="#å¼€å§‹éƒ¨ç½²" class="headerlink" title="å¼€å§‹éƒ¨ç½²"></a>å¼€å§‹éƒ¨ç½²</h3><blockquote>
<p>è¿™é‡Œçš„ä¸»æ•™ç¨‹ä»¥å®˜æ–¹æä¾›çš„ä¸ºå‡†ï¼Œå¹¶ä¸”é‚£äº›æ³¨æ„ç‚¹æˆ‘ä¼šæ›´æ–°ã€‚</p>
</blockquote>
<p>éƒ¨ç½²çš„è„šæœ¬è¦æ±‚æ˜¯æ‹¥æœ‰ root æƒé™çš„é root ç”¨æˆ·ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">sudo useradd -s /bin/bash -d /opt/stack -m stack</div><div class="line"></div><div class="line">echo &quot;stack ALL=(ALL) NOPASSWD: ALL&quot; | sudo tee /etc/sudoers.d/stack</div><div class="line">sudo su - stack</div><div class="line"></div><div class="line">cd /opt/stack</div><div class="line">git clone https://git.openstack.org/openstack-dev/devstack</div><div class="line">cd devstack</div></pre></td></tr></table></figure>
<p>å¦‚æœä¸Šé¢ clone å¤ªæ…¢æˆ–è€… clone ä¸ä¸‹æ¥çš„è¯å¯ä»¥è¯•è¯• github çš„æºã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git clone https://github.com/openstack-dev/devstack.git</div></pre></td></tr></table></figure>
<p>ç„¶åå°±æ˜¯æ·»åŠ é…ç½®äº†ï¼Œå¦‚æœä¸æ‡‚æ¨èç›´æ¥ä½¿ç”¨å®˜æ–¹é¡µé¢ä»‹ç»çš„ã€‚æˆ–è€…ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cp samples/local.conf ./</div><div class="line">vim local.conf</div></pre></td></tr></table></figure>
<p>å¦‚æœä½ å¹¸è¿ï¼Œè®²é“ç†æœ€åæ‰§è¡Œ <code>./stack.sh</code> ç›´æ¥ä¸€è·¯åˆ°åº•ã€‚ã€‚ã€‚ä½†æ˜¯è¿˜æœ‰å¾ˆå¤šå‘æ­£åœ¨ç­‰å¾…ç€æˆ‘ä»¬ã€‚<br>ä½†ä½†æ˜¯æœ‰ä¸€ä¸ªå¾ˆå¥½çš„æ˜¯ä»–çš„ Log å’ŒæŠ¥é”™ååˆ†æ¸…æ–°ï¼Œå¾ˆå¿«å¯ä»¥å®šä½é—®é¢˜æ‰€åœ¨ï¼Œæœ‰æ—¶å€™ç›´æ¥æœ Log éƒ½ä¼šå‡ºç°è§£å†³æ–¹æ³•ã€‚<br>å¦‚æœè„šæœ¬ç›´æ¥é€€å‡ºæç¤ºæ²¡æœ‰ HOST_IPã€‚é‚£ä¹ˆç›´æ¥åœ¨ <code>local.conf</code> åé¢æ·»åŠ </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">HOST_IP=x.x.x.x</div><div class="line">GIT_BASE=https://github.com</div></pre></td></tr></table></figure>
<p>HOST_IPå…·ä½“æ˜¯ä»€ä¹ˆåœ¨ä½ çš„è™šæ‹Ÿæœºä¸Š ifconfig æŸ¥çœ‹ã€‚ç„¶åæ¨èæŠŠ git æºæ¢æˆ github çš„ã€‚<br>è¿™é‡Œä½ å¯ä»¥æ£€æµ‹ä¸€ä¸‹ä½ çš„æºæœ‰æ²¡æœ‰é—®é¢˜ <code>apt-get update</code> æœ‰çš„è¯ç›´æ¥æŠŠæœ‰é—®é¢˜çš„æºåœ¨ <code>/etc/apt/sources.list.d/</code> ç›®å½•ä¸‹ç§»é™¤ï¼Œç§»é™¤å‰å»ºè®®å¤‡ä»½ä¸€ä¸‹ã€‚ç„¶åæ¨è <code>apt-get upgrade</code> ä¸€ä¸‹ï¼ŒPython ç‰ˆæœ¬ä¿æŒé»˜è®¤çš„ 2.7.X å°±å¥½ï¼Œå¦‚æœå‡ºç°ä»€ä¹ˆå’Œ Python 3.4 ä¸åŒ¹é…çš„ Log ç›´æ¥å¿½ç•¥ã€‚å¦‚æœä½ æ¢æˆ 3.4 å¾ˆå¤šåº“ä¼šå‡ºé—®é¢˜ã€‚å¦‚æœä½ æ˜¯ Python 3.Xï¼Œå¯ä»¥æŠŠ <code>/user/bin/</code> ä¸‹çš„ Python2.X é“¾æ¥åˆ°è¯¥ç›®å½•ä¸‹çš„ Python æ–‡ä»¶ã€‚è¿™æ—¶æ‰§è¡Œ <code>python -V</code> å°±èƒ½çœ‹åˆ°ç»“æœäº†ã€‚</p>
<p>ä½†ä½†ä½†æ˜¯ï¼Œä¸Šé¢åªæ˜¯è§£å†³äº†æœ‰å½¢çš„ Bugï¼Œè¿˜æœ‰å°±æ˜¯æ— å½¢çš„ Bugï¼Œä½ å°†é¢ä¸´ç½‘ç»œé—®é¢˜ï¼Œå¦‚æœä½ æƒ³é¡ºç•…ç‚¹å¯ä»¥ç›´æ¥æ›´æ¢æºã€‚<br>ä¿®æ”¹ pip æº</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">mkdir ~/.pip</div><div class="line">vim ~/.pip/pip.conf</div><div class="line"></div><div class="line">å¡«å…¥ï¼š</div><div class="line">[global]</div><div class="line">trusted-host=mirrors.aliyun.com</div><div class="line">index-url=http://mirrors.aliyun.com/pypi/simple</div></pre></td></tr></table></figure>
<p>ä¿®æ”¹ sources.listï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak</div><div class="line">sudo vim /etc/apt/sources.list</div><div class="line"></div><div class="line">å¡«å…¥ï¼š</div><div class="line"># deb cdrom:[Ubuntu 16.04 LTS _Xenial Xerus_ - Release amd64 (20160420.1)]/ xenial main restricted</div><div class="line">deb-src http://archive.ubuntu.com/ubuntu xenial main restricted #Added by software-properties</div><div class="line">deb http://mirrors.aliyun.com/ubuntu/ xenial main restricted</div><div class="line">deb-src http://mirrors.aliyun.com/ubuntu/ xenial main restricted multiverse universe #Added by software-properties</div><div class="line">deb http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted</div><div class="line">deb-src http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted multiverse universe #Added by software-properties</div><div class="line">deb http://mirrors.aliyun.com/ubuntu/ xenial universe</div><div class="line">deb http://mirrors.aliyun.com/ubuntu/ xenial-updates universe</div><div class="line">deb http://mirrors.aliyun.com/ubuntu/ xenial multiverse</div><div class="line">deb http://mirrors.aliyun.com/ubuntu/ xenial-updates multiverse</div><div class="line">deb http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiverse</div><div class="line">deb-src http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiverse #Added by software-properties</div><div class="line">deb http://archive.canonical.com/ubuntu xenial partner</div><div class="line">deb-src http://archive.canonical.com/ubuntu xenial partner</div><div class="line">deb http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted</div><div class="line">deb-src http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted multiverse universe #Added by software-properties</div><div class="line">deb http://mirrors.aliyun.com/ubuntu/ xenial-security universe</div><div class="line">deb http://mirrors.aliyun.com/ubuntu/ xenial-security multiverse</div></pre></td></tr></table></figure>
<p>éƒ½æ”¹æˆ aliyun çš„ã€‚åˆ°è¿™æ—¶å€™å¦‚æœä½ çš„ç½‘ç»œæ²¡ä»€ä¹ˆé—®é¢˜ï¼Œå¯èƒ½ä¼šå‡ºç‚¹ç¯å¢ƒå°é—®é¢˜ï¼Œdkpg å’Œå„ç§åŒ…ç­‰ä¹‹ç±»çš„é—®é¢˜ï¼Œä¸€æœç½‘ä¸ŠåŸºæœ¬éƒ½æœ‰è§£å†³æ–¹æ¡ˆã€‚</p>
<p>ä½†ä½†ä½†æ˜¯ï¼Œå¦‚æœä½ çš„ç½‘é€Ÿä¸‹è½½æŸäº›åŒ…ä¸è¶… 10Kb/s é‚£å°±è¦ç”¨éªšæ“ä½œäº†ã€‚ã€‚ã€‚å› ä¸ºä¼šä¸€ç›´å¡ç€ï¼Œç½‘ä¸€æ–­åˆå¾—é‡æ–°å¼€å§‹ï¼Œå…ˆ unstackï¼Œclean å† stackï¼Œååˆ†ä¸å‹å¥½ã€‚å‡ºç°é—®é¢˜å¤§å¤šæ˜¯åœ¨ä¸‹è½½æŸä¸ª git ä»“åº“å’ŒæŸäº›åŒ…çš„æ—¶å€™ã€‚å°¤å…¶æ˜¯ <code>nova</code> <code>horizon</code> ä¹‹ç±»çš„ï¼Œå¤§å°åˆ°äº† 300+Mã€‚</p>
<p>è¿™é‡Œä»‹ç»ä¸€ä¸ªæ–¹æ³•ï¼š<br>æ€è·¯æ˜¯å…ˆ SSH ä¸Šä½ çš„å›½å¤– VPSï¼Œä¸‹è½½ä½ çš„ git ä»“åº“æˆ–å…¶ä»–æ–‡ä»¶ã€‚ç„¶åå† SCP åˆ°ä½ çš„è™šæ‹Ÿæœºä¸Šã€‚ä¸»è¦æ˜¯è¿™æ ·ä¸ä¼šä¸­æ–­ï¼Œè€Œä¸”æ— å½¢ä¸­å°±å¯ä»¥æ˜¯å¤šçº¿ç¨‹æ“ä½œï¼Œå¼€å‡ ä¸ªç»ˆç«¯ SCP å¥½å‡ ä¸ªæ–‡ä»¶ã€‚<br>çœ‹çœ‹é€Ÿåº¦å¯¹æ¯”æ•ˆæœå§ï¼Œ<br>è™šæ‹Ÿæœºä¸Šä¸‹è½½ï¼š<br><img src="/2017/11/04/deployOpenstackByDevstack/horizon2.png" alt=""><br>VPS ä¸Šä¸‹è½½ï¼š<br><img src="/2017/11/04/deployOpenstackByDevstack/horizon.png" alt=""><br>ä¹‹åè‡ªå·± SCP å°±å¥½äº†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo scp -P 10800 -r root@xx.xx.xx.xx:/fitzeng/horizon /etc/stack/</div></pre></td></tr></table></figure>
<p>-r æ˜¯ cp æ–‡ä»¶å¤¹ï¼Œç„¶åç«¯å£ï¼ŒIP å¡«ä½ è‡ªå·±çš„åé¢è·Ÿç›®å½•ã€‚è¿™é‡Œå¯èƒ½ä¹Ÿæœ‰ç‚¹æ…¢ï¼Œä½†æ˜¯æ¯”ä¹‹å‰çš„å¥½è€Œä¸”ç¨³å®šã€‚</p>
<p><img src="/2017/11/04/deployOpenstackByDevstack/nova.png" alt=""><br><img src="/2017/11/04/deployOpenstackByDevstack/cirros.png" alt=""><br>è¿™ä¸€åˆ‡æ“ä½œéƒ½æºäºå‹å¥½çš„ log æœºåˆ¶ï¼Œçœ‹ä¸Šé¢çš„å›¾ç‰‡æˆ‘ä»¬å¯ä»¥çŸ¥é“ä¸‹è½½åœ°å€å’Œå­˜æ”¾ç›®å½•ï¼Œæ‰€ä»¥ï¼ŒçŸ¥é“è¿™äº›æ‰‹æ®µå°±å¤šäº†èµ·æ¥ã€‚<br>ç½‘é€Ÿå¤Ÿå¿«ä¹Ÿå¯ä»¥ç›´æ¥åœ¨æœ¬åœ° cloneã€‚<br><img src="/2017/11/04/deployOpenstackByDevstack/nova2.png" alt=""></p>
<p>æœ‰äº†è¿™äº›æ“ä½œåŸºæœ¬å°±æ„å‘³ç€ä½ è§£å†³äº†ç½‘ç»œé—®é¢˜ï¼Œå€ŸåŠ© google åŸºæœ¬å¯ä»¥è§£å†³å…¶ä»–åº“å’Œç¯å¢ƒçš„é—®é¢˜ã€‚<br>æˆåŠŸå›¾ä¸Šä¼ ä¸€æ³¢ï¼š<br><img src="/2017/11/04/deployOpenstackByDevstack/finish.png" alt=""></p>
<h2 id="2-Ubuntu-Desktop-ç‰ˆ"><a href="#2-Ubuntu-Desktop-ç‰ˆ" class="headerlink" title="2.Ubuntu Desktop ç‰ˆ"></a>2.Ubuntu Desktop ç‰ˆ</h2><p>åŸºæœ¬æ­¥éª¤æ˜¯å’Œå‰é¢ä¸€è‡´çš„ï¼Œå‡ºçš„é—®é¢˜å¯èƒ½å°±æ˜¯ä½ ä¹‹å‰åœ¨ Ubuntu ä¸Šè£…è¿‡å„ç§è½¯ä»¶(æˆ‘è£…çš„ Sogou è¾“å…¥æ³•ï¼Œé‡Œé¢çš„ fcitx æºå½±å“äº†é€Ÿåº¦ï¼Œç”šè‡³æœ‰æ—¶å€™ç›´æ¥å¡è¿™ä¸åŠ¨)ï¼Œæ›´æ”¹äº†è½¯ä»¶æºæˆ–è€…åšè¿‡å…¶å®ƒçš„å·¥å…·æ›´æ”¹ï¼ŒæŒ‰ç…§å‰é¢çš„é…ç½®äº²æµ‹å¯è¡Œã€‚å¦‚æœä½ ä¹‹å‰åœ¨ Ubuntu Server ç‰ˆä¸Šè£…è¿‡ï¼Œç›´æ¥æŠŠæ–‡ä»¶ SCP è¿‡æ¥ï¼Œå¦‚æœè™šæ‹Ÿæœºä¹‹é—´ä¸èƒ½é€šè®¯ï¼Œå¯ä»¥å…ˆ SCP åˆ°å®¿ä¸»æœºï¼Œå†ä»å®¿ä¸»æœºé€šè¿‡æ–‡ä»¶å…±äº«çš„æ–¹å¼å…±äº«åˆ° Ubuntu Desktopã€‚<br>ç„¶åè¿è¡Œå°±å¯ä»¥äº†ï¼Œæœ‰äº†å‰é¢çš„åŸºç¡€å°±å¾ˆç®€å•äº†ã€‚</p>
<p>é‚£å°±çœ‹ç›´æ¥çœ‹ç»“æœå§ï¼š<br><img src="/2017/11/04/deployOpenstackByDevstack/d1.png" alt=""><br><img src="/2017/11/04/deployOpenstackByDevstack/d2.png" alt=""><br><img src="/2017/11/04/deployOpenstackByDevstack/d3.png" alt=""><br><img src="/2017/11/04/deployOpenstackByDevstack/d4.png" alt=""></p>
<h2 id="3-åè®°"><a href="#3-åè®°" class="headerlink" title="3.åè®°"></a>3.åè®°</h2><p>è¯´å®è¯ï¼Œè¿™ä¸å¤ªç®—æŠ€æœ¯æ–‡ç« ï¼Œçº¯å±ä¸ªäººè®°å½•ã€‚æœ¬æ¥ä¸å¤ªæƒ³å†™ï¼Œä½†æ˜¯æ„Ÿè§‰å›½å†…ç¯å¢ƒå¯¹å¼€å‘è€…æœ‰ç‚¹ä¸å‹å¥½ï¼Œå¦‚æœè¿™ç¯‡æ–‡ç« èƒ½å¯¹åˆå­¦è€…æœ‰éƒ¨åˆ†å¸®åŠ©æˆ‘å°±æ»¡æ„äº†ï¼Œèƒ½å¤Ÿä½¿åˆå­¦è€…ç»§ç»­å­¦ä¹ ä¸‹å»ã€‚ç„¶åè¿™æ˜¯éƒ¨ç½²å®Œä¹‹åå†™çš„ï¼Œéƒ¨ç½²çš„è¿‡ç¨‹è¿œä¸å¦‚å†™çš„è¿™ä¹ˆè½»æ¾ï¼Œä½†æ˜¯æˆ‘ç°åœ¨æœ‰ä¿¡å¿ƒå»è§£å†³éƒ¨ç½²è¿‡ç¨‹ä¸­ç¢°åˆ°çš„é—®é¢˜ï¼Œè¿™æ‰æ˜¯é‡ç‚¹ã€‚å¸Œæœ›ä½ ä¹Ÿæ˜¯ã€‚æ¯ä¸ªäººçš„ç¯å¢ƒéƒ½ä¸ä¸€æ ·ï¼Œå‡ºç°çš„é—®é¢˜ä¹Ÿä¸å¯èƒ½ä¸€æ ·ï¼Œæ‰€ä»¥å¦‚æœä½ ç…§ä¸Šé¢åšäº†è¿˜æ²¡æœ‰è§£å†³å¯ä»¥ç•™è¨€å¤§å®¶ä¸€èµ·è®¨è®ºã€‚</p>
<p>æœ€åï¼š<br>å¤šè°¢é˜…è¯»<br>ç¥å¤§å®¶ä¸€éè¿‡ ^_^</p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;0-å‰è¨€&quot;&gt;&lt;a href=&quot;#0-å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;0.å‰è¨€&quot;&gt;&lt;/a&gt;0.å‰è¨€&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;ä½œä¸ºä¸€ä¸ªæƒ³è¦å…¥é—¨äº‘è®¡ç®—çš„äººæ¥è¯´ï¼Œå¤§å¤šæ•°äººçš„ç¬¬ä¸€æ­¥å°±æ˜¯å­¦ä¹  openstackï¼Œè€Œå­¦ä¹  openstack çš„äººé¢ä¸´çš„ç¬¬ä¸€æ­¥å°±æ˜¯ç¬¬ä¸€ä¸ªâ€˜éš¾é¢˜â€™ï¼Œä½¿ç”¨è‡ªåŠ¨åŒ–éƒ¨ç½²å·¥å…· devstack éƒ¨ç½² openstack ç¯å¢ƒã€‚ç¬¬ä¸€æ¬¡æ¥è§¦è¿™ä¸ªä¸œè¥¿ï¼ŒèŠ±äº†ä¸¤å¤©å¤šæ—¶é—´åœ¨ Ubuntu Server å’Œ Ubuntu Desktop çš„ 16.04 ç‰ˆæœ¬ä¸ŠæˆåŠŸéƒ¨ç½²ã€‚æœ‰å¾ˆå¤šäººè¯´ Desktop ç‰ˆæœ‰å¾ˆå¤šå‘ï¼Œäº²æµ‹é—®é¢˜ç¡®å®æ¯” Server ç‰ˆå¤šï¼Œä½†éƒ½æ˜¯å¯è§£å†³çš„ã€‚å…¶ä¸­æœ€å¯¹åˆå­¦è€…ä¸å‹å¥½çš„å°±æ˜¯ç½‘ç»œé—®é¢˜ï¼Œä¸‹é¢ä¼šä»‹ç»ä¸ºä»€ä¹ˆã€‚æ‰€ä»¥å¦‚æœä½ è‡ªå·±ä¹°äº†å›½å¤–çš„ VPS é‚£å°±å¥½åŠäº†ï¼Œå› ä¸ºæœ‰ä¸ªéªšæ“ä½œè¦ç”¨åˆ°ï¼Œå¦‚æœä½ ç½‘é€Ÿå¥½å¯èƒ½ä½ é‡ä¸åˆ°è¿™äº›é—®é¢˜å°±å¯ä»¥å¿½ç•¥ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢ä¼šåˆ†ä¸¤ä¸ªéƒ¨åˆ†ä»‹ç»ï¼Œéƒ½ä¼šå°† Server å’Œ Desktop ä¸Šçš„éƒ¨ç½²è¿‡ç¨‹æè¿°ä¸€éã€‚&lt;br&gt;æ•™ç¨‹æ¨è &lt;a href=&quot;https://docs.openstack.org/devstack/latest/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å®˜æ–¹çš„ Doc&lt;/a&gt;å’Œ&lt;a href=&quot;https://zhuanlan.zhihu.com/p/28996062&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;é¿å‘æŒ‡å—&lt;/a&gt;&lt;br&gt;æ•™ç¨‹è¿™ä¸ªä¸œè¥¿å¯¹äºåˆå­¦è€…ä¸å®œå¤ªå¤šï¼Œå®¹æ˜“ä¹±ï¼Œåªè¦æœ‰ä¸€ä¸ªæ­£ç¡®çš„æ‰§è¡Œæ¡†æ¶å°±å¥½ã€‚ç¢°åˆ°å…¶ä»– bug ç›´æ¥ Google å°±å¥½ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="devstack" scheme="http://fitzeng.org/tags/devstack/"/>
    
      <category term="openstack" scheme="http://fitzeng.org/tags/openstack/"/>
    
  </entry>
  
  <entry>
    <title>Restart</title>
    <link href="http://fitzeng.org/2017/09/22/restart/"/>
    <id>http://fitzeng.org/2017/09/22/restart/</id>
    <published>2017-09-22T03:27:00.000Z</published>
    <updated>2017-09-23T14:55:58.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="0-å‰è¨€"><a href="#0-å‰è¨€" class="headerlink" title="0. å‰è¨€"></a>0. å‰è¨€</h2><blockquote>
<p>æˆ‘çš„æ±‚èŒç”Ÿæ´»æ˜¯ä»ä»Šå¹´çš„ 04-16 æ‰¾å®ä¹ å¼€å§‹åˆ° 09-22 æ‹¿åˆ°ä¼˜æ‹›(ç§‹æ‹›) Offerç»“æŸï¼Œä¸­é—´å…±ç»å†è¿‡äº†ä¸‰å®¶å…¬å¸é¢è¯•ï¼Œé¢è¯•ç»éªŒä¸è¶³ï¼Œè€Œä¸”æœ€è¿‘çš„é¢è¯•å·²è·ç°åœ¨ä¸¤ä¸ªå¤šæœˆäº†ï¼Œç»†èŠ‚è®°ä¸æ¸…äº†ï¼Œæ‰€ä»¥è¿™ä¸å¤ªç®—æ˜¯é¢ç»ï¼Œåªæ˜¯æˆ‘ä¸ªäººå¯¹æˆ‘è‡ªå·±æ‰¾å·¥ä½œè¿™å°åŠå¹´çš„æ€»ç»“ä»¥åŠæˆ‘å¯¹æ‰¾å·¥ä½œè¿™ä»¶äº‹çš„è®¤è¯†ã€‚é¦–å…ˆè¯´æ˜æˆ‘ä¸æ˜¯å¤§ç¥ï¼Œåªèƒ½ä»å¹³é™å™è¿°æ•´ä¸ªæ‰¾å·¥ä½œçš„è¿‡ç¨‹ï¼Œå¸Œæœ›ä½ èƒ½ä»ä¸­ä½“ä¼šåˆ°ä¸€ç‚¹ä»€ä¹ˆå°±å¾ˆæ»¡æ„äº†ï¼Œåœ¨æ­¤å…ˆç¥å¤§å®¶æ‰¾å·¥ä½œé¡ºåˆ©ï¼</p>
</blockquote>
<a id="more"></a>
<h2 id="1-é¢è¯•è¿‡ç¨‹"><a href="#1-é¢è¯•è¿‡ç¨‹" class="headerlink" title="1. é¢è¯•è¿‡ç¨‹"></a>1. é¢è¯•è¿‡ç¨‹</h2><blockquote>
<p>è‡ªå·±è¦ä»‹ç»è‡ªå·±åœ¨ä¸‰å®¶å…¬å¸çš„é¢è¯•è¿‡ç¨‹ï¼Œä¸æ¶‰åŠé¢è¯•é¢˜ç›®ä»€ä¹ˆçš„ï¼Œçº¯å±å™è¿°æ•´ä¸ªå¿ƒç†è¿‡ç¨‹ã€‚ä¸è¿‡åé¢æˆ‘ä¼šè¡¥å……ä¸€äº›èµ„æ–™å’Œæˆ‘å‚è€ƒçš„ä¸€äº›å…¶ä»–é¢è¯•è€…çš„é¢ç»ã€‚</p>
</blockquote>
<p>ä¸‹é¢æˆ‘æ ¹æ®é‚®ä»¶ç†ä¸€ä¸‹æ—¶é—´çº¿ï¼š</p>
<h4 id="ç¬¬ä¸€å®¶å…¬å¸ï¼ˆè…¾è®¯ï¼‰å®ä¹ -è·ª"><a href="#ç¬¬ä¸€å®¶å…¬å¸ï¼ˆè…¾è®¯ï¼‰å®ä¹ -è·ª" class="headerlink" title="ç¬¬ä¸€å®¶å…¬å¸ï¼ˆè…¾è®¯ï¼‰å®ä¹ -è·ª"></a>ç¬¬ä¸€å®¶å…¬å¸ï¼ˆè…¾è®¯ï¼‰å®ä¹ -è·ª</h4><p><code>ä¸€é¢ï¼š04-16</code><br>å¤§æ¦‚è®°å¿†å°±æ˜¯å•¥éƒ½é—®ï¼Œè¯»è¿‡æˆ‘ä»¥å‰æ–‡ç« çš„éƒ½çŸ¥é“ï¼Œæˆ‘ä»¥å‰æ˜¯å†™ Android çš„ï¼Œä½†æ˜¯ä»–é—®äº† Linuxï¼ŒC/C++ï¼Œæ“ä½œç³»ç»Ÿï¼ŒJVMï¼Œè®¾è®¡æ¨¡å¼ï¼Œç®—æ³•ï¼ŒAndriodï¼Œè¿˜æœ‰ä¸€äº›å°æ™ºåŠ›æµ‹è¯•é¢˜ã€‚ç›®å‰æˆ‘åªèƒ½è®°æ¸…è¿™äº›çŸ¥è¯†ç‚¹ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯ä¸€å¼€å§‹é—®äº†åå¤šåˆ†é’Ÿé¡¹ç›®ï¼Œå†é—®é—® Android åŸºç¡€(ç­”å¾—å¾ˆçƒ‚)ï¼Œå†é—® JVM(ä¹Ÿå¾ˆçƒ‚ğŸ˜­)ï¼Œæ¥ç€å°±ç»™æˆ‘ä¸€å¼ çº¸ä¸Šé¢ä¸¤é“é¢˜æ‰‹å†™ä»£ç ï¼Œé¢è¯•å®˜å°±å–æ°´å»äº†ï¼Œç„¶åæˆ‘æ²¡æ„è¯†åˆ°æœ‰ä¸¤é¢é¢˜ï¼Œåªåšäº†ç¬¬ä¸€é¢çš„ä¸¤é“å‘Šè¯‰é¢è¯•å®˜æˆ‘åšå¥½äº†ï¼Œä»–è¿‡æ¥äº†ï¼Œæˆ‘è·Ÿä»–è®²è§£ä»£ç ï¼ˆå› ä¸ºå­—è¿¹å®åœ¨éš¾çœ‹æ¸…ğŸ˜‚ï¼‰ï¼Œåœ¨ä»–çš„å¼•å¯¼ä¸‹æ…¢æ…¢æŠŠç¬¬äºŒé¢˜è¿›è¡Œä¼˜åŒ–ã€‚æ¥ç€å°±æ˜¯é—®é—®è®¡ç®—æœºåŸºç¡€çš„ä¸€äº›çŸ¥è¯†ã€‚é¢äº†æœ‰å°†è¿‘ä¸€ä¸ªå°æ—¶ï¼Œè¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡é¢è¯•ï¼Œæµäº†ä¸€èº«çš„æ±—ã€‚<br>æˆ‘å¯¹é¢è¯•ç»“æœæ˜¯å¾ˆä¸ä¹è§‚çš„ï¼Œå› ä¸ºæˆ‘æ˜¯åœ¨ 04-1X æ‰çŸ¥é“è¿™æ˜¯å·²ç»æ¥è¿‘å®ä¹ æ‹›è˜å°¾å£°ã€‚åŸºæœ¬ä¸Šå¤§å¤šæ•°å…¬å¸çš„å†…æ¨ä»€ä¹ˆçš„éƒ½å¼„å®Œäº†ï¼Œè€Œæˆ‘ä¹Ÿæ˜¯åçŸ¥åè§‰ï¼Œ04-14 æ™šä¸Šåšç®€å†ï¼Œå› ä¸ºå¬è¯´è…¾è®¯ 04-15 æˆªæ­¢æŠ•é€’å®ä¹ ç®€å†ï¼Œåˆ° 04-15 æ—©ä¸Šï¼Œæˆ‘åšå®Œç®€å†å°±æŠ•äº†ã€‚å¯èƒ½æ˜¯é‡Œé¢æœ‰ä¸€äº›å­¦é•¿å­¦å§å§ï¼Œå½“å¤©ä¸‹åˆå°±æ”¶åˆ°å†…æ¨é€šçŸ¥å¹¶å‘ŠçŸ¥å®Œå–„ç®€å†ï¼Œæ¥ç€æ™šä¸Šå°±æ”¶åˆ°é€šçŸ¥æ˜å¤©å»é¢è¯•ã€‚æ•´ä¸ªæ„Ÿè§‰å¾ˆæƒŠå–œï¼Œä½†æ˜¯å…¶å®åæ¥è·ªäº†ä¹‹åæƒ³æƒ³å…¶å®æ˜¯è‡ªå·±æ²¡æœ‰åšå¥½å‡†å¤‡ï¼Œæ ¹æœ¬ä¸çŸ¥é“å‡†å¤‡å®ä¹ äººå®¶ä»ä¸‰æœˆä»½å°±å¼€å§‹æ‰¾äº†ï¼Œæ‰€ä»¥æœ‰ä¿¡æ¯æ¥æºå¾ˆé‡è¦ã€‚æœ¬æ¥ä»¥ä¸ºä¸€é¢è¦æŒ‚çš„ç»“æœç¬¬äºŒå¤©æ™šä¸Šå°±é€šçŸ¥è¿‡äº†å¹¶ä¸”è¿‡ä¸€å¤©ç¬¬äºŒé¢ã€‚</p>
<p><code>äºŒé¢ï¼š04-18</code><br>è¿™ä¸€é¢å¾ˆå´©ï¼Œåæ¥æ‰çŸ¥é“å¯èƒ½æ˜¯å‹åŠ›é¢ã€‚è¯´å®è¯ï¼Œç¬¬ä¸€é¢èƒ½è¿‡ä¹‹åæˆ‘å·²ç»æ”¾æ¾äº†å¾ˆå¤šã€‚äºŒé¢å†…å®¹å’Œ Android ä¸€æ¯›é’±å…³ç³»éƒ½æ²¡æœ‰ã€‚åŒæ ·ä¸€å¼€å§‹èŠèŠé¡¹ç›®ï¼Œç„¶åæ¡Œå­ä¸Šæœ‰ä¸€å †å¤§æ¦‚åå˜ç±³åšçš„ A4 çº¸ï¼Œæ‹¿ä¸€å¼ ï¼Œå£è¿°ä¸€é“é¢˜ç„¶åå†™ä»£ç ï¼Œè¿™é‡Œæé†’ä¸‹å¤§å®¶å¦‚æœé‡åˆ°è¿™ç§æƒ…å†µï¼Œæœ€å¥½åœ¨åŠ¨ç¬”å‰é—®æ¸…æ¥šé—®é¢˜æ¡ä»¶ï¼Œæ¯”å¦‚æˆ‘ä¸€åŠ¨ç¬”å†™äº†ä¸€ç‚¹ç„¶åé—®ä»–å­—ç¬¦ä¸²æ˜¯ä»¥ä»€ä¹ˆå½¢å¼å­˜å‚¨çš„ï¼Œç„¶åä»–å›ç­”äº† char *ï¼Œæ¥ç€ç»™æˆ‘æ„Ÿè§‰æœ‰ç‚¹ä¸å¤ªèˆ’æœï¼Œæ°”æ°›å¾ˆä¸¥è‚ƒï¼Œä½†æ˜¯æˆ‘åˆé—®äº†ä¸€ä¸ªé—®é¢˜ï¼šæ˜¯å†™ä¼ªä»£ç è¿˜æ˜¯ï¼Ÿç»“æœå´©äº†ï¼Œä»–ç«‹é©¬è¯´ï¼Œéƒ½è¿™æ—¶å€™äº†è¿˜å†™ä»€ä¹ˆä¼ªä»£ç ï¼å¥½ï¼Œæˆ‘é»˜é»˜çš„åˆ’æ‰ï¼Œåˆå†™äº†ä¸€æ®µä»£ç ï¼Œç”±äºæ··åœ¨ä¸€èµ·ï¼Œæˆ‘å°±æŠŠä»£ç åˆæŠ„äº†ä¸€éï¼Œä½†æ˜¯æœ‰äº›è¯­å¥ä¸€å¼€å§‹æŠ„æ¼æ‰€ä»¥å‡ºç°äº†ä¸¤å¥ä»£ç åœ¨ä¸€è¡Œçš„æƒ…å†µã€‚ã€‚ã€‚ä»–çœ‹äº†è¾¹å¹æ°”è¾¹è¯´ï¼šâ€œè¿™äº›çš„ä»€ä¹ˆï¼Œä¹±ä¸ƒå…«ç³Ÿçš„ï¼Œç¼©è¿›XXXXXXXXXâ€ï¼Œç„¶åæˆ‘å¼±å¼±åœ°è¯´è¦ä¸æˆ‘å†æŠ„ä¸€éæŠŠæ ¼å¼è°ƒè°ƒï¼Ÿç»“æœä»–è¯´è¿˜è°ƒä»€ä¹ˆè°ƒï¼Œæµªè´¹æˆ‘æ—¶é—´ï¼ğŸ˜‚ğŸ˜‚ğŸ˜‚ğŸ˜‚ğŸ˜‚ğŸ˜‚æŠŠæˆ‘å“åäº†ï¼Œç„¶åå¼±å¼±çš„ç»™ä»–è®²è§£äº†ä»£ç ï¼Œç”±äºä»£ç å†™çš„è¿˜ä¸é”™ï¼Œè¿™é‡Œä»–æ²¡æªæˆ‘çš„å°è¾«å­ã€‚ç„¶åä»–åˆè¯´ç»™ä½ æ¥ä¸€é“åšå¼ˆé¢˜ï¼Ÿï¼Ÿï¼Ÿæˆ‘é»‘äººé—®å·ï¼Œæˆ‘é¢çš„æ˜¯ Android å—ï¼Ÿå£è¿°å®Œé¢˜ç›®åï¼Œä»–çœ‹åˆ°äº†æˆ‘æœ‰ç‚¹é«˜å…´ï¼Œé—®æˆ‘æ˜¯ä¸æ˜¯çœ‹è¿‡ç±»ä¼¼çš„é¢˜ç›®ï¼Ÿæˆ‘è¯šå®çš„å›ç­”æ˜¯ã€‚ç»“æœä»–è¯´ç»™ä½ å‡ºé“ç®€å•ä¸€ç‚¹çš„é¢˜ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿå¿µå®Œé¢˜ç›®ä¹‹åæˆ‘ä¸€è„¸æ‡µé€¼ï¼Œç»“æœæœ€åæˆ‘å¯¹é¢˜ç›®çš„çœ‹æ³•å’Œé¢è¯•å®˜ä¸ç¬¦ï¼Œç„¶åæŒ‚äº†ã€‚æ€»ç»“å°±æ˜¯ï¼šæŠ±æ­‰ï¼Œæˆ‘ä¸ä¼šæ¼”æˆã€‚ã€‚ã€‚å½“æ—¶æƒ³å¦‚æœæˆ‘ç¨å¾®å†·é™ä¸€ç‚¹ï¼ŒæŠŠåšå¼ˆé¢˜æ‹¿ä¸‹åº”è¯¥è¿™é¢èƒ½è¿‡å§ï¼Œä½†æ˜¯æ²¡æœ‰å¦‚æœã€‚ã€‚ã€‚</p>
<h4 id="ç¬¬äºŒå®¶å…¬å¸ï¼ˆåä¸ºï¼‰1-å®ä¹ -è·ª"><a href="#ç¬¬äºŒå®¶å…¬å¸ï¼ˆåä¸ºï¼‰1-å®ä¹ -è·ª" class="headerlink" title="ç¬¬äºŒå®¶å…¬å¸ï¼ˆåä¸ºï¼‰1. å®ä¹ -è·ª"></a>ç¬¬äºŒå®¶å…¬å¸ï¼ˆåä¸ºï¼‰1. å®ä¹ -è·ª</h4><p><code>æŠ€æœ¯é¢ï¼š05-13</code><br>ç”±äºé¢è¯•å®˜ä¸æ˜¯åš Androidï¼Œç»™æˆ‘æ„Ÿè§‰è¿ Java ç›¸å…³éƒ½ä¸æ˜¯ï¼Œæ‰€ä»¥å…¨ç¨‹åœ¨èŠå¤©ï¼Œä»€ä¹ˆä½ å®¶åœ¨å“ªé‡Œï¼Ÿä¸ºä»€ä¹ˆä¸è¯»ç ”ï¼Ÿä½ èƒ½æ¥å—åŠ ç­å—ï¼Ÿä¹‹ç±»çš„ã€‚ã€‚ã€‚ã€‚å¤§æ¦‚äºŒåå¤šåˆ†é’Ÿï¼Œç»“æŸå¾—å¾ˆè½»æ¾ã€‚</p>
<p><code>ç»¼åˆé¢ï¼š05-13</code><br>ç”±äºæŠ€æœ¯é¢æ²¡é—®æŠ€æœ¯ï¼Œæ‰€ä»¥è¿™é¢å¤§æ¦‚å°±æ˜¯å’Œå‰é¢é—®çš„é—®é¢˜å·®å¤šï¼Œæ—¶é—´ä¹Ÿæ˜¯å·®ä¸å¤šï¼Œæ„Ÿè§‰å¾ˆæ°´ã€‚ã€‚ã€‚</p>
<p>è¡¥å……ï¼šå‰é¢éƒ½æ˜¯åŒä¸€å¤©é¢å®Œï¼Œæ„Ÿè§‰å¾ˆè¯¡å¼‚ï¼Œä¸å¤ªåƒé¢è¯•ã€‚ã€‚ã€‚å›åˆ°å­¦æ ¡åï¼Œè¿‡å‡ å¤©é¢è¯•çŠ¶æ€å°±æ˜¯å½•ç”¨æ’åºä¸­ã€‚ç®—æ˜¯é¢è¯•è¿‡äº†ï¼Œç„¶åä¸€ä¸¤å‘¨è¿‡åæœ‰åŒç­çš„åŒå­¦æ”¶åˆ°å®ä¹  offerï¼Œè€Œæˆ‘æ²¡æ¶ˆæ¯ã€‚ç›´åˆ°å¬è¯´å®ä¹  offer éƒ½å‘å®Œäº†æˆ‘æ‰çŸ¥é“æˆ‘æŒ‚äº†ã€‚æ‰€ä»¥è¯´åä¸ºçš„é¢è¯•é€šè¿‡å’Œ offer è¿˜æœ‰ä¸€æ®µèµ„æºæ± çš„è·ç¦»ã€‚åæ¥ä¸€ä¸ªå­¦é•¿ hr æ¥åˆ°å­¦æ ¡æ‰¾åŒå­¦è°ˆè¯ï¼Œè¿™æ—¶æˆ‘è¢«å‘ŠçŸ¥æŠ€æœ¯é¢ç»™äº†ä¸ª B+ã€‚ã€‚ã€‚è¿™ä¸ªå¯¹æˆ‘åé¢å½±å“æŒºå¤§çš„ï¼Œç„¶åç»¼åˆé¢æ˜¯ OK çš„ã€‚æ‰€ä»¥é¢è¯•æ—¶ç®—è¿‡ï¼Œæœ¬æ¥ä¹Ÿå¯ä»¥ç»™ offer ä½†æ˜¯æ²¡æœ‰å²—ä½ï¼Œåªæ‹›ä¸€ä¸ª Android å®ä¹ çš„ ğŸ™‚ã€‚ä½†æ˜¯è¿™æ—¶å€™æˆ‘è¿˜å¯ä»¥ç”¨è¿™ä¸ªå®‰æ…°è‡ªå·±ï¼Œä¸æ˜¯ä½ å·®ï¼Œæ˜¯å¸‚åœºéœ€æ±‚ï¼Œè¿™æ˜¯æ²¡åŠæ³•çš„äº‹ã€‚åç»­çš„æ˜¯å°±æ˜¯å­¦é•¿è·Ÿæˆ‘è°ˆäº†è°ˆäººç”Ÿè§„åˆ’å•Šï¼Œç„¶åæ¨èæˆ‘å‚åŠ ä¼˜æ‹›ã€‚åé¢å°±æ˜¯ä¼˜æ‹›çš„æ•…äº‹äº†ï¼›</p>
<h4 id="ç¬¬ä¸‰å®¶å…¬å¸ï¼ˆé˜¿é‡Œï¼‰å®ä¹ -è·ª"><a href="#ç¬¬ä¸‰å®¶å…¬å¸ï¼ˆé˜¿é‡Œï¼‰å®ä¹ -è·ª" class="headerlink" title="ç¬¬ä¸‰å®¶å…¬å¸ï¼ˆé˜¿é‡Œï¼‰å®ä¹ -è·ª"></a>ç¬¬ä¸‰å®¶å…¬å¸ï¼ˆé˜¿é‡Œï¼‰å®ä¹ -è·ª</h4><p><code>ä¸€é¢ï¼š05-20</code><br>é˜¿é‡Œæ˜¯åœ¨çº¿é¢è¯•ï¼Œç»™æˆ‘çš„æ„Ÿè§‰æ˜¯é¢è¿‡æœ€éš¾çš„ï¼Œé—®å¾—æˆ‘æ— ä»å›ç­”ï¼Œå› ä¸ºæˆ‘åŸºæœ¬æ²¡æœ‰é¡¹ç›®ç»éªŒï¼Œä»€ä¹ˆè¯´è¯´ä½ åœ¨å¼€å‘ä¸­ç¢°åˆ°å°è±¡æœ€æ·±åˆ»çš„é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿé‡åˆ°ç½‘ä¸Šæ€ä¹ˆä¹ŸæŸ¥ä¸åˆ°ç­”æ¡ˆçš„é—®é¢˜æ€ä¹ˆåŠï¼Ÿè¿˜æœ‰ä½ å¯¹ RNï¼ˆå½“æ—¶åªçŸ¥é“æœ‰ä¸ª RN å¼€å‘ï¼Œå¹¶ä¸æ¸…æ¥šæ˜¯ä»€ä¹ˆï¼‰ å¼€å‘æ€ä¹ˆçœ‹ï¼Ÿåæ­£æˆ‘ç­”ä¸ä¸Šæ¥ï¼Œæ‰€ä»¥ç›´æ¥æ¯™äº†ã€‚åé¢ä»–é—®æˆ‘æœ‰ä»€ä¹ˆé—®é¢˜é—®ä»–ï¼Œæˆ‘é—®ä»–ä»–å¯¹æˆ‘é¢è¯•æ„Ÿè§‰æ€ä¹ˆæ ·ï¼Ÿä»–è¯´æˆ‘åŸºç¡€ä¸è¡Œï¼Œç„¶åæˆ‘åˆé—®äº†è¦æ€ä¹ˆå­¦ä¹ ï¼Ÿä»–è¯´ Java è¦å­¦å¥½ï¼Œåå°„æ³¨è§£ä»€ä¹ˆçš„ã€‚æ€»ä¹‹å°±æ˜¯åŸºç¡€è¦æ‰å®ã€‚ã€‚ã€‚</p>
<h4 id="ç¬¬äºŒå®¶å…¬å¸ï¼ˆåä¸ºï¼‰2-ä¼˜æ‹›-è¿‡"><a href="#ç¬¬äºŒå®¶å…¬å¸ï¼ˆåä¸ºï¼‰2-ä¼˜æ‹›-è¿‡" class="headerlink" title="ç¬¬äºŒå®¶å…¬å¸ï¼ˆåä¸ºï¼‰2. ä¼˜æ‹›-è¿‡"></a>ç¬¬äºŒå®¶å…¬å¸ï¼ˆåä¸ºï¼‰2. ä¼˜æ‹›-è¿‡</h4><p><code>è¡¥æŠ€æœ¯é¢ï¼š07-14</code><br>ç”±äºå‰é¢çš„å®ä¹ é¢è¯•ç»™äº†ä¸ª B+ï¼Œæ‰€ä»¥è¿™æ¬¡è¦è¡¥ä¸€ä¸ªæŠ€æœ¯é¢ã€‚é¢è¯•å®˜ä¹Ÿä¸æ˜¯åš Android çš„ï¼Œä¸è¿‡æ˜¯å’Œ Java ç›¸å…³çš„ï¼Œæ‰€ä»¥åŸºæœ¬å°±æ˜¯é—®æˆ‘ Java äº†ã€‚ä¹Ÿæ˜¯å¼€å§‹èŠèŠé¡¹ç›®å’Œç”Ÿæ´»ï¼Œç„¶åé—®é—® Java å†…å­˜æ³„æ¼ï¼ŒGCï¼Œæ¥ç€è€ƒè€ƒç®—æ³•ï¼Œä¸€é“è¿·å®«çš„é¢˜ç›®ï¼Œè¯´ä¸‹ç”¨æ·±åº¦ä¼˜å…ˆå’Œå¹¿åº¦ä¼˜å…ˆéå†çš„å®ç°æ€æƒ³ï¼Œè¿›è€Œé—®å¦‚æœè¦æ‰¾å‡ºä¸€æ¡æœ€å°‘æ­¥éª¤çš„è·¯èµ°å‡ºè¿·å®«æ€ä¹ˆåŠï¼ŸåŸºæœ¬éƒ½ç­”ä¸Šæ¥äº†ï¼Œæœ€åä»–è¯´æˆ‘é—®ä½ ä¸€ä¸ª Java é—®é¢˜ï¼Œæˆ‘ä»¥ä¸ºä¼šå¾ˆéš¾ã€‚ç»“æœä»–è¯´è¢« final å…³é”®å­—ä¿®é¥°çš„ç±»ä¼šæ€ä¹ˆæ ·ï¼Ÿæˆ‘è¿Ÿç–‘äº†ä¸€ä¸‹ï¼Œè¯´äº†ç­”æ¡ˆã€‚ã€‚ã€‚ç„¶åé¢è¯•å°±ç»“æŸäº†ã€‚ç»™æˆ‘çš„æ„Ÿè§‰åº”è¯¥æ˜¯èƒ½è¿‡çš„ã€‚</p>
<p><code>BOSS é¢ï¼š07-14</code><br>ç­‰äº†å¥½ä¹…ï¼Œæœ€åæ’é˜Ÿæ’ä¸ä¸Šä¸Šåˆçš„äº†ï¼Œç„¶åå‘äº†é¤åˆ¸å»åƒäº†ä¸ªé¥­å›æ¥é¢è¯•ã€‚é¢è¯•è¿‡ç¨‹å’Œå®ä¹ é¢è¯•æ—¶å·®ä¸å¤šï¼Œä½†æ˜¯é‚£ä¸ªé¢è¯•å®˜çš„çº§åˆ«æ„Ÿè§‰æŒºé«˜çš„ï¼Œç™½å¤´å‘ç‰¹åˆ«å¤šï¼Œä¼°è®¡ 50+ å§ï¼Œæœ€ååŠ äº†ä¸ªç¾¤ï¼Œé¢è¯•ç»“æŸäº†ã€‚æ„Ÿè§‰æ²¡ä»€ä¹ˆæ„Ÿè§‰ï¼Œå½“æ—¶é¢è¯•çš„ç ”ç©¶ç”Ÿç‰¹åˆ«å¤šï¼Œæ‰€ä»¥æˆ‘æ„Ÿè§‰å¯èƒ½è¦ GGã€‚</p>
<p>ç­‰äº†ä¸¤ä¸ªå¤šæœˆåï¼Œç­‰åˆ° 09-21 å‘æ¥çš„ç­¾çº¦çŸ­ä¿¡ï¼Œ09-22 ä»¥ç™½èœä»·ç­¾äº†ä¸‰æ–¹ã€‚æ˜¯è‡ªå·±æ»¡æ„çš„åŸå¸‚åŠ ä¸Šæ•´ä¸ªæš‘å‡éƒ½åœ¨å­¦æ ¡ï¼Œ09 æœˆä»½æŠ•äº†åå¤šå®¶å…¬å¸å’Œåšäº† 7-8ä»½ç¬”è¯•é¢˜ï¼Œå¿ƒå¤ªç´¯å®åœ¨æ˜¯ä¸æƒ³ç­‰äº†ã€‚ã€‚ã€‚ç­¾çš„è¿‡ç¨‹ä¸­æœ‰ä¸ªæ›´æ”¹åŸå¸‚çš„å°æ’æ›²ï¼Œhr å¾ˆå¥½ï¼Œå¿™åˆ°æ™šä¸Š 7 ç‚¹å¤šæ‰ç»“æŸï¼Œåœ¨è¿™è¡¨ç¤ºæ„Ÿè°¢ã€‚è¿˜æœ‰ä¸€ä¸ªå°æ’æ›²æ˜¯å½“å¤©æœ‰ä¸€ä¸ªè…¾è®¯çš„é¢è¯•ï¼Œè¿™æ˜¯æˆ‘çš„æ”¶åˆ°çš„ç¬¬ä¸€ä¸ªç§‹æ‹›é¢è¯•ï¼Œç”±äºç­¾äº†åä¸ºçš„ä¸‰æ–¹ï¼Œæ‰€ä»¥ä¹Ÿæ²¡æœ‰å»é¢äº†ï¼Œå‡†ç¡®è¯´ï¼Œå…¶å®æˆ‘æ²¡æœ‰ç§‹æ‹›ï¼Œé™¤äº†æŠ•äº†åå‡ åˆ†ç®€å†å’Œåšäº†å‡ æ¬¡ç¬”è¯•ã€‚</p>
<h2 id="2-é¢è¯•å‡†å¤‡"><a href="#2-é¢è¯•å‡†å¤‡" class="headerlink" title="2. é¢è¯•å‡†å¤‡"></a>2. é¢è¯•å‡†å¤‡</h2><blockquote>
<p>è¿™é‡Œä¸»è¦å™è¿°æˆ‘çš„æš‘å‡å’Œä¹æœˆä¸Šæ—¬è¿™ä¸ªé¢è¯•å‡†å¤‡è¿‡ç¨‹å’Œè‡ªå·±å¯¹é¢æ˜¯å‡†å¤‡çš„çœ‹æ³•ã€‚</p>
</blockquote>
<p>è¯´å®è¯ï¼Œæ²¡æœ‰å®ä¹  offer å¯¹æˆ‘ç®—æ˜¯æœ‰ç‚¹æ‰“å‡»çš„ã€‚æ‰€ä»¥æˆ‘å°±æ‰“ç®—æš‘å‡ä¸å›å®¶å¥½å¥½å¤ä¹ åŸºç¡€çŸ¥è¯†ï¼Œæˆ‘è§‰å¾—å¯¹äºä¸€ä¸ªæœ¬ç§‘ç”Ÿæ¥è¯´ï¼ŒåŸºç¡€æ‰å®æ‰æ˜¯ä½ çš„ä¼˜åŠ¿ï¼Œå¯¹äºè¿™é‡Œå¯èƒ½æ¯ä¸ªäººçœ‹æ³•ä¸ä¸€ï¼Œå¯¹äºæ¯ä¸ªæ–¹å‘å¯èƒ½æœ‰å·®è·å§ï¼Œè¿™é‡Œæˆ‘åªæ˜¯å¹³é™åœ°è¡¨è¾¾æˆ‘çš„è§‚ç‚¹ã€‚</p>
<p>æ‰€ä»¥æˆ‘åŸºæœ¬æ”¾ä¸‹ Android äº†ï¼Œåªæ˜¯æŒ‘çƒ­ç‚¹é¢è¯•é—®é¢˜è¿‡è¿‡ã€‚è¯´ä¸‹æˆ‘åšè¿‡çš„åŠªåŠ›ï¼š</p>
<p>1.<a href="https://juejin.im/post/598454dcf265da3e26095dca" target="_blank" rel="external">é‡æ‹¾æ•°æ®ç»“æ„</a><br>2.<a href="https://juejin.im/post/59a7b8c9f265da24777a07da" target="_blank" rel="external">é‡æ‹¾æ“ä½œç³»ç»Ÿ</a><br>3.<a href="https://juejin.im/post/59ad4cd56fb9a02477075780" target="_blank" rel="external">é‡è¯» JVM</a><br>4.<a href="http://fitzeng.org/2017/07/08/AndroidBlogCollection/">Android Blog Collection</a><br>5.<a href="http://fitzeng.org/2017/09/11/handler/">Handler æœºåˆ¶å†äº†è§£</a></p>
<p>ä»¥ä¸Šæ˜¯ä»¥ Blog å½¢å¼è¿›è¡Œäº†æ€»ç»“çš„ï¼Œè¿˜æœ‰éƒ¨åˆ†ä¹¦ç±æ²¡æœ‰æ€»ç»“çš„ã€‚</p>
<p><img src="/2017/09/22/restart/books.png" alt=""></p>
<p>é‡Œé¢çš„çœ‹äº†æœ‰ 30% å§ï¼Œéƒ½æ˜¯é‡‡å–ä¸é‡è¦çš„ç²—è¯»é‡è¦çš„ç²¾è¯»æ¨¡å¼ã€‚ç”µå­ç‰ˆä¸‹è½½ <a href="http://pan.baidu.com/s/1o7LcZCe" target="_blank" rel="external">é“¾æ¥ : http://pan.baidu.com/s/1o7LcZCe</a> å¯†ç  : 0p0c ã€‚å¸Œæœ›å¤§å®¶æœ‰æ¡ä»¶å»æ”¯æŒçº¸è´¨ä¹¦å§ï¼Œæˆ‘å¯¹çŸ¥è¯†åˆ›é€ è€…è¿˜æ˜¯å¾ˆå°Šé‡çš„ï¼Œå› ä¸ºè‡ªå·±å‘ç°å†™ Blog æ¯ä¸ªç¤¼æ‹œä¸€ç¯‡éƒ½å†™ä¸æ¥ï¼Œä½†æ˜¯å¯¹äºéƒ¨åˆ†å­¦ä¹ è®¡ç®—æœºçš„äººæ¥è¯´ï¼Œä¹¦ç¡®å®æœ‰ç‚¹å¤šï¼Œä¹Ÿè¦èŠ±å¾ˆå¤šé’±ï¼Œæ‰€ä»¥å–èˆä¹‹ä¸‹å°±æ˜¯æœ‰æ¡ä»¶çš„ç°åœ¨æ”¯æŒåŸä½œè€…ï¼Œæ²¡æ¡ä»¶çš„ä»¥åæœ‰æ¡ä»¶äº†å†æ”¯æŒã€‚å¥½åƒåé¢˜äº†ã€‚ã€‚ã€‚</p>
<p>æœŸé—´çœ‹è¿‡ Android å¼€å‘è‰ºæœ¯æ¢ç´¢ï¼ŒAndroid ç¾¤è‹±ä¼ ï¼ŒAndroid è¿›é˜¶ä¹‹å…‰ã€‚ä¹‹å‰è¿˜çœ‹è¿‡ ç¼–ç¨‹ä¹‹ç¾ï¼Œç¼–ç¨‹ç ç‘ï¼Œç¼–ç¨‹ä¹‹æ³•ï¼Œéƒ½æ²¡æœ‰è‡ªå·±æ•²ä»£ç å®ç°ï¼Œæ‰€ä»¥å¤„äºæœ‰æ€è·¯ä½†ä¸èƒ½å†™ä»£ç å®ç°çš„çŠ¶æ€ã€‚ç„¶åå°±æ˜¯ä¸€äº›ä¸“ä¸šè¯¾è¯¾æœ¬äº†ã€‚å¯¹äºè¯»ä¹¦è¿™ä»¶äº‹æˆ‘è§‰å¾—æ²¡æœ‰å¿…è¦ä¸ºä¸€ä¸ªçŸ¥è¯†ç‚¹æ­»ç£•ï¼Œæˆ‘ä¸€èˆ¬å°±æ˜¯å¾€åç¿»ï¼ŒåŸºæœ¬ä¸¤å¤©è·³ç€â€˜çœ‹â€™å®Œä¸€æœ¬ä¹¦ã€‚æ—¶é—´å›ºå®šçš„æƒ…å†µä¸‹å®æ„¿è·³ç€å¤šçœ‹å‡ éï¼Œä¹Ÿä¸è¿½æ±‚ä¸€éä»”ç»†çœ‹å®Œã€‚å› ä¸ºä½ é¢ä¸´çš„ç»“æœå°±æ˜¯è®°ä¸ä½ï¼Œæ²¡æœ‰é‡ç‚¹çš„é‡å¤åˆºæ¿€ä¸‹çŸ¥è¯†ç½‘ç»œå»ºç«‹ä¸èµ·æ¥ã€‚å¾€å¾€é˜…è¯»åˆ°åé¢ï¼Œå‰é¢çš„ç–‘é—®å°±ä¼šè¿åˆƒè€Œè§£ã€‚</p>
<p>ç„¶åè¯´è¯´å²—ä½å§ï¼Œä»¥åæˆ‘å¯èƒ½å°±ä¸ä¼šå†å†™å’Œ Android ç›¸å…³çš„æ–‡ç« äº†ï¼Œç­¾çš„å·¥ä½œæ˜¯äº‘è®¡ç®—æ‰€ä»¥æ‰“ç®—å­¦å­¦ Python å’Œ OpenStack ä¹‹ç±»çš„ï¼Œä»æ–°å¼€å§‹æ¥è§¦ä¸€ä¸ªæ–°çš„é¢†åŸŸã€‚æ‰€ä»¥å¦‚æœä½ ä¸æ˜¯å¯¹ä¸€ä¸ªå²—ä½æŒæœ‰éåšä¸å¯çš„æ€åº¦ï¼Œå…¶å®æˆ‘è§‰å¾—é‚£å°±ä¸è¦å¤ªåœ¨æ„é‚£äº›èŠ±å“¨çš„ä¸œè¥¿ï¼Œæ³¨é‡åŸºç¡€çš„ç§¯ç´¯ã€‚æ¯”å¦‚ä¹‹å‰é¢è¯•æœ‰é—®æˆ‘å­¦è¿‡ä»€ä¹ˆæ¡†æ¶å—ï¼Ÿæˆ‘è¯´æ²¡å­¦è¿‡ï¼Œç„¶åè¿™ä¸ªè¯é¢˜å°±è·³è¿‡äº†ã€‚å½“ç„¶å­¦è¿‡åŠ åˆ†ï¼Œæ²¡å­¦è¿‡æˆ‘è§‰å¾—ä¸å‡åˆ†å§ï¼Œæ¯•ç«Ÿåº”å±Šç”Ÿã€‚ä½†æ˜¯ä¸€ä¸ª Java åŸºç¡€çš„è¯­è¨€ç‰¹æ€§ç­”ä¸ä¸Šæ¥é‚£å°±æœ‰ç‚¹è¯´ä¸è¿‡å»äº†ã€‚è€Œä¸”æ¡†æ¶çš„ç²¾é«“åœ¨è¯»æºç ä¹‹åè½¬åŒ–ä¸ºè‡ªå·±çš„ç†è§£ä»è€Œåº”ç”¨åœ¨è‡ªå·±ä»£ç ä¸­ï¼Œè€Œä¸æ˜¯ä¼šä½¿ç”¨æ¡†æ¶ï¼Œè¿™ç§ä»·å€¼ä¸å¤§ã€‚å¦‚æœä½ æ˜¯å¤§ç¥ï¼ŒåŸºç¡€æ‰å®ï¼Œé‚£è¿™äº›å°±æ˜¯ä½ çš„è¿›é˜¶ï¼Œä½ çš„åŠ åˆ†é¡¹ï¼Œæœ¬è´¨ä¸ä¸€æ ·ã€‚å°±åƒè¯•å·çš„å¿…ç­”é¢˜ç­”å®Œäº†è‚¯å®šæ˜¯å»ç­”é€‰åšé¢˜ï¼Œä½†æ˜¯æœ‰äº›äººè¿å¿…ç­”é¢˜éƒ½æ²¡åšå®Œå°±è·Ÿç€åˆ«äººç¿»å·å­æ˜¯ä¸æ˜¯æœ‰ç‚¹ã€‚ã€‚ã€‚æ€»ä¹‹å°±æ˜¯æ³¨é‡è¯­è¨€æœ¬èº«ï¼Œè€Œä¸æ˜¯è¯­è¨€è¡ç”Ÿå“ã€‚</p>
<p>æ¥ç€è¯´è¯´é¢ç»ï¼Œè¿™æ˜¯å¾ˆå¥½çš„ä¸œè¥¿ï¼Œä½†æ˜¯ä¹Ÿæ˜¯å¾ˆä¸å¥½çš„ä¸œè¥¿ï¼Œçœ‹ä½ çš„è®¤çŸ¥ã€‚æœ‰äººå¯¹é¢ç»çš„æ€åº¦æ˜¯é¢˜åº“ï¼Œè§‰å¾—çœ‹å®Œè®°ç€æˆ‘é¢è¯•å°±èƒ½è¿‡äº†ï¼ŒåŒä¸€ä¸ªé—®é¢˜ï¼Œä¸åŒçš„äººè¯´ç›¸åŒçš„ç­”æ¡ˆé¢è¯•å®˜ä¹Ÿèƒ½çŸ¥é“å“ªä¸ªå‰å®³å“ªä¸ªæ°´ã€‚å¤§å®¶å¯ä»¥è¯•è¯•å¯¹ä¸€ä¸ªè‡ªå·±ä¸ç†è§£çš„æŠ€æœ¯é—®é¢˜å°è¯•è§£é‡Šä¼šæ€æ ·ï¼Ÿä½ ä¸€è¿Ÿç–‘ï¼Œé¢è¯•å®˜å°±ä¼šåé—®ä½ ï¼Œæœ€ååªæœ‰ä¸€ä¸ªå­—å´©ï¼è€Œä¸”é‚£äº›é¢ç»æä¾›çš„ç­”æ¡ˆå¾€å¾€æ˜¯ç¬¦åˆä½œè€…çš„æ€è€ƒæ€è·¯ï¼Œä¸ä¸€å®šå¯¹ä½ é€‚ç”¨ã€‚æ‰€ä»¥æˆ‘å¯¹é¢ç»çš„æ€åº¦æ˜¯ç±»ä¼¼äºè€ƒçº²ï¼Œè‡³äºè€ƒçº²å’Œé¢˜åº“çš„åŒºåˆ«ç•™ç»™è¯»è€…æ€è€ƒå§ã€‚</p>
<p>ç„¶åæˆ‘é¢è¯•å‡†å¤‡è¿‡ç¨‹ä¸­å‚è€ƒçš„å¥½çš„â€˜è€ƒçº²â€™</p>
<ol>
<li><a href="http://www.jianshu.com/p/f661953ba032" target="_blank" rel="external">[å¹²è´§ï¼Œé˜…åè¿›BATä¸æ˜¯æ¢¦] é¢è¯•å¿ƒå¾—ä¸æ€»ç»“â€”BATã€ç½‘æ˜“ã€è˜‘è‡è¡—</a></li>
<li>è‡ªå·±åŠ¨æ‰‹ä¸°è¡£è¶³é£Ÿï¼Œå‰é¢ä¸€ç¯‡æ˜¯æˆ‘è®¤ä¸ºçš„å¥½é¢ç»ï¼Œå¯ä»¥ä½œä¸ºæŸ¥æ‰¾å‚è€ƒã€‚</li>
</ol>
<h2 id="3-æœ€å"><a href="#3-æœ€å" class="headerlink" title="3. æœ€å"></a>3. æœ€å</h2><p>å¦‚æœä½ è§‰å¾—å¯¹ä½ æœ‰å¸®åŠ©å°±ç‚¹ä¸‹èµå§ï¼Œè®©æ›´å¤šçš„äººçœ‹åˆ°ï¼Œå¸Œæœ›èƒ½å¸®åˆ°æ›´å¤šçš„äººã€‚è¿™æ˜¯æˆ‘ç¬¬ä¸€ç¯‡æ±‚èµçš„æ–‡ç« ï¼Œå› ä¸ºç¡®å®æƒ³å’Œå¤§å®¶åˆ†äº«æˆ‘çš„æƒ³æ³•ã€‚è°¢è°¢ã€‚</p>
<p>å†å¦‚æœä½ æœ‰ç›¸åŒæˆ–è€…ä¸åŒçš„æ„è§ï¼Œæ¬¢è¿è¯„è®ºåŒºç•™è¨€å¤§å®¶äº’ç›¸è®¨è®ºå‘€~</p>
<p>ç„¶åå›½é™…æƒ¯ä¾‹ï¼š<a href="http://fitzeng.org/">GitHub </a> &amp;&amp; <a href="https://github.com/mk43" target="_blank" rel="external"> Blog</a> æ¬¢è¿æ¥è§‚å…‰ ^_^</p>
<p>å¤šè°¢é˜…è¯»ï¼</p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;0-å‰è¨€&quot;&gt;&lt;a href=&quot;#0-å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;0. å‰è¨€&quot;&gt;&lt;/a&gt;0. å‰è¨€&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;æˆ‘çš„æ±‚èŒç”Ÿæ´»æ˜¯ä»ä»Šå¹´çš„ 04-16 æ‰¾å®ä¹ å¼€å§‹åˆ° 09-22 æ‹¿åˆ°ä¼˜æ‹›(ç§‹æ‹›) Offerç»“æŸï¼Œä¸­é—´å…±ç»å†è¿‡äº†ä¸‰å®¶å…¬å¸é¢è¯•ï¼Œé¢è¯•ç»éªŒä¸è¶³ï¼Œè€Œä¸”æœ€è¿‘çš„é¢è¯•å·²è·ç°åœ¨ä¸¤ä¸ªå¤šæœˆäº†ï¼Œç»†èŠ‚è®°ä¸æ¸…äº†ï¼Œæ‰€ä»¥è¿™ä¸å¤ªç®—æ˜¯é¢ç»ï¼Œåªæ˜¯æˆ‘ä¸ªäººå¯¹æˆ‘è‡ªå·±æ‰¾å·¥ä½œè¿™å°åŠå¹´çš„æ€»ç»“ä»¥åŠæˆ‘å¯¹æ‰¾å·¥ä½œè¿™ä»¶äº‹çš„è®¤è¯†ã€‚é¦–å…ˆè¯´æ˜æˆ‘ä¸æ˜¯å¤§ç¥ï¼Œåªèƒ½ä»å¹³é™å™è¿°æ•´ä¸ªæ‰¾å·¥ä½œçš„è¿‡ç¨‹ï¼Œå¸Œæœ›ä½ èƒ½ä»ä¸­ä½“ä¼šåˆ°ä¸€ç‚¹ä»€ä¹ˆå°±å¾ˆæ»¡æ„äº†ï¼Œåœ¨æ­¤å…ˆç¥å¤§å®¶æ‰¾å·¥ä½œé¡ºåˆ©ï¼&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="Life" scheme="http://fitzeng.org/tags/Life/"/>
    
      <category term="Job" scheme="http://fitzeng.org/tags/Job/"/>
    
  </entry>
  
  <entry>
    <title>é‡è¯† Android</title>
    <link href="http://fitzeng.org/2017/09/19/reAndroid/"/>
    <id>http://fitzeng.org/2017/09/19/reAndroid/</id>
    <published>2017-09-19T03:27:00.000Z</published>
    <updated>2017-09-19T11:41:51.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>Android åŸºç¡€çŸ¥è¯†æ•´ç†ã€‚</p>
</blockquote>
<a id="more"></a>
<h3 id="1-Activity"><a href="#1-Activity" class="headerlink" title="1. Activity"></a>1. Activity</h3><h4 id="1-1-Activity-ç”Ÿå‘½å‘¨æœŸ"><a href="#1-1-Activity-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="1.1 Activity ç”Ÿå‘½å‘¨æœŸ"></a>1.1 Activity ç”Ÿå‘½å‘¨æœŸ</h4><p>çŠ¶æ€ï¼š<code>running</code> <code>paused</code> <code>stopped</code> <code>killed</code></p>
<p>å¯åŠ¨ï¼šonCreate() -&gt; onStart() -&gt; onResume()</p>
<p>ç‚¹å‡» Home ï¼š-&gt; onPause() -&gt; onStop()</p>
<p>é‡ç°ï¼š-&gt; onRestart() -&gt; onStart() -&gt; onResume()</p>
<p>é€€å‡ºï¼š-&gt; onPause() -&gt; onStop() -&gt; onDestory()</p>
<p>è¿›ç¨‹ä¼˜å…ˆçº§ï¼š<code>å‰å°</code>(å¯äº¤äº’) <code>å¯è§</code>(å¤±å»ç„¦ç‚¹) <code>æœåŠ¡</code> <code>åå°</code>(ä¸å¯è§) <code>ç©º</code>(ç¼“å­˜ç”¨)</p>
<h4 id="1-2-Activity-ä»»åŠ¡æ ˆ"><a href="#1-2-Activity-ä»»åŠ¡æ ˆ" class="headerlink" title="1.2 Activity ä»»åŠ¡æ ˆ"></a>1.2 Activity ä»»åŠ¡æ ˆ</h4><p>standardï¼šæ ‡å‡†æ¨¡å¼(æ¯æ¬¡éƒ½åˆ›å»º)</p>
<p>singleTopï¼šæ ˆé¡¶å¤ç”¨æ¨¡å¼(æ ˆé¡¶æ£€æµ‹)</p>
<p>singleTaskï¼šæ ˆå†…å¤ç”¨æ¨¡å¼(æ ˆå†…æ£€æµ‹)</p>
<p>singleInstanceï¼šå•å®ä¾‹æ¨¡å¼(ç‹¬ç«‹çš„ä»»åŠ¡æ ˆ)</p>
<h4 id="1-3-Activity-å¯åŠ¨æ¨¡å¼"><a href="#1-3-Activity-å¯åŠ¨æ¨¡å¼" class="headerlink" title="1.3 Activity å¯åŠ¨æ¨¡å¼"></a>1.3 Activity å¯åŠ¨æ¨¡å¼</h4><h4 id="1-4-Scheme-è·³è½¬åè®®"><a href="#1-4-Scheme-è·³è½¬åè®®" class="headerlink" title="1.4 Scheme è·³è½¬åè®®"></a>1.4 Scheme è·³è½¬åè®®</h4><h4 id="1-5-å‚è€ƒ"><a href="#1-5-å‚è€ƒ" class="headerlink" title="1.5 å‚è€ƒ"></a>1.5 å‚è€ƒ</h4><h3 id="2-Fragment"><a href="#2-Fragment" class="headerlink" title="2. Fragment"></a>2. Fragment</h3><h4 id="2-1-ç”Ÿå‘½å‘¨æœŸ"><a href="#2-1-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="2.1 ç”Ÿå‘½å‘¨æœŸ"></a>2.1 ç”Ÿå‘½å‘¨æœŸ</h4><p>Create: å‡†å¤‡è§†å›¾</p>
<p><code>onAttach</code>: Fragment ä¸ Activity å…³è”</p>
<p><code>onCreate</code>: åˆ›å»º Fragment å¯¹è±¡</p>
<p><code>onCreateView</code>: åˆ›å»ºè§†å›¾</p>
<p><code>onActivityCreated</code>: Activity å¯¹è±¡åˆ›å»ºå®Œæˆ</p>
<p>Start: åŠ è½½è§†å›¾</p>
<p><code>onStart</code>: Fragment å¯è§</p>
<p>Resume: è·å–ç„¦ç‚¹</p>
<p><code>onResume</code>: Fragment å¯äº¤äº’ </p>
<p>Pause å¤±å»ç„¦ç‚¹</p>
<p><code>onPause</code>: Fragment å¤±å»ç„¦ç‚¹</p>
<p>Stop è§†å›¾ä¸å¯è§</p>
<p><code>onStop</code>: Fragment ä¸å¯è§</p>
<p>Destory é”€æ¯å¯¹è±¡</p>
<p><code>onDestoryView</code>: Fragment è§†å›¾é”€æ¯</p>
<p><code>onDestory</code>: å¯¹è±¡é”€æ¯</p>
<p><code>onDetach</code>: è§£ç»‘ Fragment å¹¶é”€æ¯å¯¹è±¡</p>
<blockquote>
<p>ä»¥ä¸Šä¸ºä¸ªäººç†è§£ï¼Œä¸æ˜¯å®Œæ•´çš„è§†å›¾åŠ è½½è¿‡ç¨‹ï¼Œåªæ˜¯å±äºä¸€ä¸ªç†è§£åˆ†æçš„è¿‡ç¨‹ã€‚</p>
</blockquote>
<h4 id="2-2-Fragment-æ·»åŠ åˆ°-Activity-ä¸­"><a href="#2-2-Fragment-æ·»åŠ åˆ°-Activity-ä¸­" class="headerlink" title="2.2 Fragment æ·»åŠ åˆ° Activity ä¸­"></a>2.2 Fragment æ·»åŠ åˆ° Activity ä¸­</h4><p>é™æ€åŠ è½½ï¼šXML</p>
<p>åŠ¨æ€åŠ è½½ï¼š FragmentManager</p>
<ul>
<li><p>FragmentPagerAdapter(detach)</p>
<blockquote>
<p>é€‚ç”¨äºé¡µé¢è¾ƒå°‘çš„æƒ…å†µï¼Œä¸é”€æ¯ Fragment åªä¸ Activity è„±ç¦»ã€‚</p>
</blockquote>
</li>
<li><p>FragmentStatePagerAdapter(remove)</p>
<blockquote>
<p>é€‚ç”¨äºé¡µé¢è¾ƒå¤šçš„æƒ…å†µï¼Œç›´æ¥ç§»é™¤ Fragmentã€‚</p>
</blockquote>
</li>
</ul>
<h4 id="2-3-Fragment-é€šä¿¡"><a href="#2-3-Fragment-é€šä¿¡" class="headerlink" title="2.3 Fragment é€šä¿¡"></a>2.3 Fragment é€šä¿¡</h4><ol>
<li>Fragment ä¸­è°ƒç”¨ Activity : è°ƒç”¨ getActivity()</li>
<li>Activity ä¸­è°ƒç”¨ Fragment : Fragment å›è°ƒå‡½æ•°</li>
<li>Fragment ä¸­è°ƒç”¨ Fragment : findFragmentById()</li>
</ol>
<h4 id="2-4-å…¸å‹æ–¹æ³•"><a href="#2-4-å…¸å‹æ–¹æ³•" class="headerlink" title="2.4 å…¸å‹æ–¹æ³•"></a>2.4 å…¸å‹æ–¹æ³•</h4><p><code>replace</code>: æ›¿æ¢ Fragment å®ä¾‹ </p>
<p><code>add</code>: æ·»åŠ  Fragment å®ä¾‹ </p>
<p><code>remove</code>: ç§»é™¤ Fragment å®ä¾‹</p>
<h4 id="2-5å‚è€ƒ"><a href="#2-5å‚è€ƒ" class="headerlink" title="2.5å‚è€ƒ"></a>2.5å‚è€ƒ</h4><ol>
<li><a href="http://blog.csdn.net/android_tutor/article/details/5772285" target="_blank" rel="external">Android_Tutor : ä¸¤åˆ†é’Ÿå½»åº•è®©ä½ æ˜ç™½Android Activityç”Ÿå‘½å‘¨æœŸ(å›¾æ–‡)!</a></li>
</ol>
<h3 id="3-Service"><a href="#3-Service" class="headerlink" title="3. Service"></a>3. Service</h3><h4 id="3-1-Service-å’Œ-Thread"><a href="#3-1-Service-å’Œ-Thread" class="headerlink" title="3.1 Service å’Œ Thread"></a>3.1 Service å’Œ Thread</h4><p>Service: ä¾æ‰˜äºæ‰€åœ¨çš„çº¿ç¨‹å¹¶ä¸”åœ¨åå°è¿è¡Œï¼Œä¸å¯åšè€—æ—¶æ“ä½œï¼Œå¦åˆ™ä¼š ANRã€‚<br>Thread: ä¸»è¦æ˜¯å‡ºå¤„ç†è€—æ—¶æ“ä½œã€‚</p>
<h3 id="4-BroadCast-Receiver"><a href="#4-BroadCast-Receiver" class="headerlink" title="4. BroadCast Receiver"></a>4. BroadCast Receiver</h3>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;Android åŸºç¡€çŸ¥è¯†æ•´ç†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="Android" scheme="http://fitzeng.org/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>Handler æœºåˆ¶å†äº†è§£</title>
    <link href="http://fitzeng.org/2017/09/11/handler/"/>
    <id>http://fitzeng.org/2017/09/11/handler/</id>
    <published>2017-09-11T03:27:00.000Z</published>
    <updated>2017-09-12T01:32:21.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>è¿™é‡Œä¸»è¦æ˜¯å…ˆäº†è§£æ•´ä¸ªæ¶ˆæ¯ä¼ é€’çš„è¿‡ç¨‹ï¼ŒçŸ¥é“è¿™æ ·åšçš„å¥½å¤„å’Œå¿…è¦æ€§ã€‚è€Œä¸æ˜¯ç›´æ¥ä»‹ç»é‡Œé¢çš„å‡ ä¸ªå…³é”®ç±»ï¼Œç„¶åä»‹ç»è¿™ä¸ªæœºåˆ¶ï¼Œè¿™æ ·å®¹æ˜“å¤´æ™•ã€‚è€Œä¸”ç½‘ç»œä¸Šå·²ç»æœ‰å¾ˆå¤šè¿™æ ·çš„æ–‡ç« äº†ï¼Œé‚£äº›ä½œè€…æ‰€ç«™çš„é«˜åº¦å¯¹äºæˆ‘è¿™ç§åˆå­¦è€…æ¥è¯´æœ‰ç‚¹é«˜ï¼Œæˆ‘ç†è§£èµ·æ¥æ˜¯æ¯”è¾ƒç¨€é‡Œç³Šæ¶‚çš„ï¼Œæ‰€ä»¥è¿™é‡Œä»ä¸€ä¸ªé—®é¢˜å‡ºå‘ï¼Œä¸€æ­¥ä¸€æ­¥è·Ÿè¸ªä»£ç ï¼Œè¿™é‡Œåªæ˜¯ææ¸…æ¥š handler æ˜¯æ€ä¹ˆè·¨çº¿ç¨‹æ”¶å‘æ¶ˆæ¯çš„ï¼Œå…·ä½“å®ç°ç»†èŠ‚è¿˜æ˜¯å‚è€ƒç½‘ä¸Šçš„é‚£äº›å¤§ç¥çš„ Blog æ¯”è¾ƒæƒå¨ã€‚<br>PS. æœ¬æ¥æ˜¯æƒ³åˆ†ç« èŠ‚ä¹¦å†™ï¼Œè°çŸ¥é“è¿™ä¸€å¥—å†›ä½“æ‹³æ‰“ä¸‹æ¥æ”¶ä¸ä½äº†ï¼Œæ‰€ä»¥ä¸‹é¢åŸºæœ¬æ˜¯ä»¥ä¸€ç§å¾ˆæµç•…çš„è¿‡ç¨‹è§£é‡Šè€Œä¸æ˜¯å¾ˆè·³è·ƒï¼Œç»†å¿ƒçœ‹åº”è¯¥ä¼šå¯¹ç†è§£ Handler æœºåˆ¶æœ‰æ‰€æ”¶è·ã€‚</p>
</blockquote>
<a id="more"></a>
<p>Q1: å‡å¦‚æœ‰ä¸€ä¸ªè€—æ—¶çš„æ•°æ®å¤„ç†ï¼Œè€Œä¸”æ•°æ®å¤„ç†çš„ç»“æœæ˜¯å¯¹ UI æ›´æ–°å½±å“çš„ï¼Œè€Œ Android ä¸­ UI æ›´æ–°ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰€ä»¥è§„å®šåªèƒ½åœ¨ä¸»çº¿ç¨‹ä¸­æ›´æ–°ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬æœ‰ä¸¤ç§é€‰æ‹©ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">ä¸»çº¿ç¨‹ç‰ˆæœ¬ï¼š</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = <span class="string">"MainActivity"</span>;</div><div class="line">    <span class="keyword">private</span> Button btnTest;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.layout_test);</div><div class="line"></div><div class="line">        init();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</div><div class="line">        btnTest = (Button) findViewById(R.id.btn_test);</div><div class="line">        btnTest.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line"></div><div class="line">                <span class="comment">// å‡è£…æ•°æ®å¤„ç†</span></div><div class="line">                <span class="keyword">int</span> i = <span class="number">0</span>;</div><div class="line">                <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</div><div class="line">                    <span class="keyword">try</span> &#123;</div><div class="line">                        Thread.sleep(<span class="number">1000</span>);</div><div class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</div><div class="line">                        e.printStackTrace();</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                </div><div class="line">                <span class="comment">// å‡è£…æ›´æ–° UI</span></div><div class="line">                Log.d(TAG, <span class="string">"Handle itï¼"</span> + i);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç›´æ¥åœ¨ä¸»çº¿ç¨‹ä¸­å¤„ç†æ•°æ®ï¼Œæ¥ç€ç›´æ¥æ ¹æ®å¤„ç†ç»“æœæ›´æ–° UIã€‚æˆ‘æƒ³å¼Šç«¯å¤§å®¶éƒ½çœ‹åˆ°äº†ï¼Œå°åˆ™ UI å¡é¡¿ï¼Œå¤§åˆ™é€ æˆ <a href="http://fitzeng.org/2017/04/07/RecurrentANR/">ANR</a>ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line">å­çº¿ç¨‹ç‰ˆæœ¬ï¼š</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = <span class="string">"MainActivity"</span>;</div><div class="line">    <span class="keyword">private</span> Button btnTest;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.layout_test);</div><div class="line"></div><div class="line">        init();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</div><div class="line">        btnTest = (Button) findViewById(R.id.btn_test);</div><div class="line">        btnTest.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">                <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</div><div class="line">                    <span class="meta">@Override</span></div><div class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">                        <span class="comment">// å‡è£…æ•°æ®å¤„ç†</span></div><div class="line">                        <span class="keyword">int</span> i;</div><div class="line">                        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</div><div class="line">                            <span class="keyword">try</span> &#123;</div><div class="line">                                Thread.sleep(<span class="number">1000</span>);</div><div class="line">                            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</div><div class="line">                                e.printStackTrace();</div><div class="line">                            &#125;</div><div class="line">                        &#125;</div><div class="line">                        <span class="comment">// è¿”å›å¤„ç†ç»“æœ</span></div><div class="line">                        handler.sendEmptyMessage(i);</div><div class="line">                    &#125;</div><div class="line">                &#125;).start();</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    Handler handler = <span class="keyword">new</span> Handler() &#123;</div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleMessage</span><span class="params">(Message msg)</span> </span>&#123;</div><div class="line">            <span class="comment">// å‡è£…æ›´æ–° UI</span></div><div class="line">            Log.d(TAG, <span class="string">"Handle MSG = "</span> + msg.what);</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ˜¯ä¸€ç§å…¸å‹çš„å¤„ç†æ–¹å¼ï¼Œå¼€ä¸€ä¸ªå­çº¿ç¨‹å¤„ç†æ•°æ®ï¼Œé€šè¿‡ Android ä¸­æä¾›çš„ Handler æœºåˆ¶è¿›è¡Œè·¨çº¿ç¨‹é€šè®¯ï¼ŒæŠŠå¤„ç†ç»“æœè¿”å›ç»™ä¸»çº¿ç¨‹ï¼Œè¿›è€Œæ›´æ–° UIã€‚è¿™é‡Œæˆ‘ä»¬å°±æ˜¯æ¢è®¨ Handler æ˜¯å¦‚ä½•æŠŠæ•°æ®å‘é€è¿‡å»çš„ã€‚</p>
<p><img src="/2017/09/11/handler/subThread.png" alt=""></p>
<p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬äº†è§£åˆ°çš„å°±æ˜¯ä¸€ä¸ª Handler çš„é»‘ç›’æœºåˆ¶ï¼Œå­çº¿ç¨‹å‘é€ï¼Œä¸»çº¿ç¨‹æ¥æ”¶ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¸ä»‹ç»ä»€ä¹ˆ <code>ThreadLocal</code>ã€<code>Looper</code> å’Œ <code>MessageQueue</code>ã€‚è€Œæ˜¯ç›´æ¥ä»ä¸Šé¢çš„ä»£ç å¼•å‡ºå®ƒä»¬çš„å­˜åœ¨ï¼Œä»åŸç†äº†è§£å®ƒä»¬å­˜åœ¨çš„å¿…è¦æ€§ï¼Œç„¶ååœ¨è°ˆå®ƒä»¬å†…éƒ¨å­˜åœ¨çš„ç»†èŠ‚ã€‚</p>
<p>ä¸€åˆ‡ç½ªæ¶æºäº <code>handler.sendEmptyMessage();</code>ï¼Œæœ€ç»ˆæ‰¾åˆ°ä»¥ä¸‹å‡½æ•° <code>sendMessageAtTime(Message msg, long uptimeMillis)</code>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">Handler.class</div><div class="line"><span class="comment">/**</span></div><div class="line"> * Enqueue a message into the message queue after all pending messages</div><div class="line"> * before the absolute time (in milliseconds) &lt;var&gt;uptimeMillis&lt;/var&gt;.</div><div class="line"> * &lt;b&gt;The time-base is &#123;<span class="doctag">@link</span> android.os.SystemClock#uptimeMillis&#125;.&lt;/b&gt;</div><div class="line"> * Time spent in deep sleep will add an additional delay to execution.</div><div class="line"> * You will receive it in &#123;<span class="doctag">@link</span> #handleMessage&#125;, in the thread attached</div><div class="line"> * to this handler.</div><div class="line"> * </div><div class="line"> * <span class="doctag">@param</span> uptimeMillis The absolute time at which the message should be</div><div class="line"> *         delivered, using the</div><div class="line"> *         &#123;<span class="doctag">@link</span> android.os.SystemClock#uptimeMillis&#125; time-base.</div><div class="line"> *         </div><div class="line"> * <span class="doctag">@return</span> Returns true if the message was successfully placed in to the </div><div class="line"> *         message queue.  Returns false on failure, usually because the</div><div class="line"> *         looper processing the message queue is exiting.  Note that a</div><div class="line"> *         result of true does not mean the message will be processed -- if</div><div class="line"> *         the looper is quit before the delivery time of the message</div><div class="line"> *         occurs then the message will be dropped.</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">sendMessageAtTime</span><span class="params">(Message msg, <span class="keyword">long</span> uptimeMillis)</span> </span>&#123;</div><div class="line">    MessageQueue queue = mQueue;</div><div class="line">    <span class="keyword">if</span> (queue == <span class="keyword">null</span>) &#123;</div><div class="line">        RuntimeException e = <span class="keyword">new</span> RuntimeException(</div><div class="line">                <span class="keyword">this</span> + <span class="string">" sendMessageAtTime() called with no mQueue"</span>);</div><div class="line">        Log.w(<span class="string">"Looper"</span>, e.getMessage(), e);</div><div class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> enqueueMessage(queue, msg, uptimeMillis);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>MessageQueue</code> å‡ºæ¥äº†ï¼Œæˆ‘ä»¬é¿å…ä¸äº†äº†ã€‚é‡Œé¢ä¸»è¦æ˜¯ <code>Message next()</code> å’Œ <code>enqueueMessage(Message msg, long when)</code> æ–¹æ³•å€¼å¾—ç ”ç©¶ï¼Œä½†æ˜¯ç°åœ¨è¿˜ä¸æ˜¯æ—¶å€™ã€‚</p>
<p>ä» <code>MessageQueue queue = mQueue;</code> ä¸­å¯ä»¥çœ‹å‡ºæˆ‘ä»¬çš„ <code>handler</code> å¯¹è±¡é‡Œé¢åŒ…å«ä¸€ä¸ª mQueue å¯¹è±¡ã€‚è‡³äºé‡Œé¢å­˜çš„ä»€ä¹ˆæ€ä¹ˆåˆå§‹åŒ–çš„ç°åœ¨ä¹Ÿä¸ç”¨å¤ªå…³å¿ƒã€‚å¤§æ¦‚æœ‰ä¸ªæ¦‚å¿µå°±æ˜¯è¿™æ˜¯ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ï¼Œå­˜çš„æ˜¯æ¶ˆæ¯å°±è¡Œï¼Œå…·ä½“å®ç°ç»†èŠ‚åé¢ä¼šæ…¢æ…¢æ°´è½çŸ³å‡ºã€‚<br>åé¢çš„ä»£ç å°±æ˜¯è¯´å¦‚æœ queue ä¸ºç©ºåˆ™æ‰“å° log è¿”å› falseï¼›å¦åˆ™æ‰§è¡Œ <code>enqueueMessage(queue, msg, uptimeMillis);</code> å…¥é˜Ÿã€‚é‚£å°±å¥½ç†è§£äº†ï¼Œhandler å‘é€ä¿¡æ¯å…¶å®æ˜¯ç›´æ¥æŠŠä¿¡æ¯å°è£…è¿›ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Handler.class</div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">enqueueMessage</span><span class="params">(MessageQueue queue, Message msg, <span class="keyword">long</span> uptimeMillis)</span> </span>&#123;</div><div class="line">    msg.target = <span class="keyword">this</span>;</div><div class="line">    <span class="keyword">if</span> (mAsynchronous) &#123;</div><div class="line">        msg.setAsynchronous(<span class="keyword">true</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> queue.enqueueMessage(msg, uptimeMillis);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™é‡Œæ¶‰åŠ Messageï¼Œå…ˆè¯´ä¸‹è¿™ä¸ªç±»çš„ä¸‰ä¸ªæˆå‘˜å˜é‡ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*package*/</span> Handler target;</div><div class="line">    </div><div class="line"><span class="comment">/*package*/</span> Runnable callback;</div><div class="line">    </div><div class="line"><span class="comment">/*package*/</span> Message next;</div></pre></td></tr></table></figure>
<p>æ‰€ä»¥ <code>msg.target = this;</code> æŠŠå½“å‰ handler ä¼ ç»™äº† msgã€‚</p>
<p>ä¸­é—´çš„ if ä»£ç å…ˆå¿½ç•¥ï¼Œå…ˆèµ°ä¸»çº¿ï¼šæ‰§è¡Œäº† <code>MessageQueue</code> çš„ <code>enqueueMessage(msg, uptimeMillis);</code>æ–¹æ³•ã€‚æ¥ç€çœ‹æºç </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line">MessageQueue.class</div><div class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">enqueueMessage</span><span class="params">(Message msg, <span class="keyword">long</span> when)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (msg.target == <span class="keyword">null</span>) &#123;</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Message must have a target."</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (msg.isInUse()) &#123;</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(msg + <span class="string">" This message is already in use."</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">synchronized</span> (<span class="keyword">this</span>) &#123;</div><div class="line">        <span class="keyword">if</span> (mQuitting) &#123;</div><div class="line">            IllegalStateException e = <span class="keyword">new</span> IllegalStateException(</div><div class="line">                    msg.target + <span class="string">" sending message to a Handler on a dead thread"</span>);</div><div class="line">            Log.w(TAG, e.getMessage(), e);</div><div class="line">            msg.recycle();</div><div class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        msg.markInUse();</div><div class="line">        msg.when = when;</div><div class="line">        Message p = mMessages;</div><div class="line">        <span class="keyword">boolean</span> needWake;</div><div class="line">        <span class="keyword">if</span> (p == <span class="keyword">null</span> || when == <span class="number">0</span> || when &lt; p.when) &#123;</div><div class="line">            <span class="comment">// New head, wake up the event queue if blocked.</span></div><div class="line">            msg.next = p;</div><div class="line">            mMessages = msg;</div><div class="line">            needWake = mBlocked;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="comment">// Inserted within the middle of the queue.  Usually we don't have to wake</span></div><div class="line">            <span class="comment">// up the event queue unless there is a barrier at the head of the queue</span></div><div class="line">            <span class="comment">// and the message is the earliest asynchronous message in the queue.</span></div><div class="line">            needWake = mBlocked &amp;&amp; p.target == <span class="keyword">null</span> &amp;&amp; msg.isAsynchronous();</div><div class="line">            Message prev;</div><div class="line">            <span class="keyword">for</span> (;;) &#123;</div><div class="line">                prev = p;</div><div class="line">                p = p.next;</div><div class="line">                <span class="keyword">if</span> (p == <span class="keyword">null</span> || when &lt; p.when) &#123;</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">if</span> (needWake &amp;&amp; p.isAsynchronous()) &#123;</div><div class="line">                    needWake = <span class="keyword">false</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            msg.next = p; <span class="comment">// invariant: p == prev.next</span></div><div class="line">            prev.next = msg;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// We can assume mPtr != 0 because mQuitting is false.</span></div><div class="line">        <span class="keyword">if</span> (needWake) &#123;</div><div class="line">            nativeWake(mPtr);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä»£ç æœ‰ç‚¹é•¿ï¼Œä¸å½±å“ä¸»çº¿çš„å°ç»†èŠ‚å°±ä¸ä»‹ç»äº†ï¼Œé‚£äº›ä¹Ÿå¾ˆå®¹æ˜“çœ‹æ‡‚çš„ï¼Œä½†æ˜¯åŸç†è¿˜æ˜¯å€¼å¾—åˆ†æã€‚<br><code>if (mQuitting)...</code>ï¼Œç›´æ¥çœ‹çœ‹æºç åˆå§‹åŒ–èµ‹å€¼çš„å‡½æ•°æ˜¯åœ¨ <code>void quit(boolean safe)</code> å‡½æ•°é‡Œé¢ï¼Œè¿™é‡ŒçŒœæµ‹å¯èƒ½æ˜¯é€€å‡ºæ¶ˆæ¯è½®è®­ï¼Œæ¶ˆæ¯è½®è®­çš„é€€å‡ºæ–¹å¼ä¹Ÿæ˜¯å€¼å¾—æ·±ç©¶ï¼Œä¸è¿‡è¿™é‡Œä¸å½±å“ä¸»çº¿å°±ä¸çœ‹äº†ã€‚ <code>msg.markInUse(); msg.when = when;</code> æ ‡è®°æ¶ˆæ¯åœ¨ç”¨è€Œä¸”ç»§ç»­å¡«å……  msgï¼Œä¸‹é¢å°±æ˜¯çœ‹æ³¨é‡Šäº†ã€‚æˆ‘ä»¬å‰é¢ä»‹ç»çš„ Message æˆå‘˜å˜é‡ next å°±èµ·ä½œç”¨äº†ï¼ŒæŠŠ msg é“¾åœ¨ä¸€èµ·äº†ã€‚æ‰€ä»¥è¿™é‡Œçš„æ ¸å¿ƒå°±æ˜¯æŠŠ msg ä»¥ä¸€ç§é“¾è¡¨å½¢å¼æ’è¿›å»ã€‚ä¼¼ä¹è¿™ä¸€æ³¢åˆ†æç»“æŸäº†ï¼Œåœ¨è¿™é‡Œåˆ’å¼ å›¾æ€»ç»“ä¸‹ï¼š<br><img src="/2017/09/11/handler/sendMsg.png" alt=""><br>æ¨èè‡ªå·±æ ¹æ®æ‰€è§‚å¯Ÿåˆ°çš„å˜é‡èµ‹å€¼è¿›è¡Œç»˜åˆ¶å›¾ç”»ï¼Œè¿™æ ·å°è±¡æ›´åŠ æ·±åˆ»ã€‚</p>
<p>OKï¼Œæ¶ˆæ¯æ˜¯å­˜è¿›å»äº†ï¼Œè€Œä¸”ä¹Ÿæ˜¯åœ¨ handler æ‰€åœ¨çš„çº¿ç¨‹ä¸­ã€‚é‚£ä¹ˆåˆ°åº•æ€ä¹ˆå–å‡ºä¿¡æ¯å‘¢ï¼Ÿä¹Ÿå°±æ˜¯å‰é¢å°ä¾‹å­</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Handler handler = <span class="keyword">new</span> Handler() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleMessage</span><span class="params">(Message msg)</span> </span>&#123;</div><div class="line">        <span class="comment">// å‡è£…æ›´æ–° UI</span></div><div class="line">        Log.d(TAG, <span class="string">"Handle MSG = "</span> + msg.what);</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p><code>handleMessage()</code> ä»€ä¹ˆæ—¶å€™è°ƒç”¨ï¼Ÿè¿™é‡ŒåŸºæœ¬æ–­äº†çº¿ç´¢ã€‚ä½†æ˜¯å¦‚æœä½ ä¹‹å‰å“ªæ€•çœ‹è¿‡ç±»ä¼¼çš„ä¸€ç¯‡æ–‡ç« åº”è¯¥éƒ½çŸ¥é“å…¶å®åœ¨ Android å¯åŠ¨æ—¶ main å‡½æ•°å°±åšäº†ä¸€äº›æ“ä½œã€‚è¿™äº›æ“ä½œæ˜¯å¿…è¦çš„ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸èƒ½ç›´æ¥åœ¨å­çº¿ç¨‹ä¸­ <code>new Handler();</code>ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">	Trace.traceBegin(Trace.TRACE_TAG_ACTIVITY_MANAGER, <span class="string">"ActivityThreadMain"</span>);</div><div class="line">	SamplingProfilerIntegration.start();</div><div class="line">	</div><div class="line">	<span class="comment">// CloseGuard defaults to true and can be quite spammy.  We</span></div><div class="line">	<span class="comment">// disable it here, but selectively enable it later (via</span></div><div class="line">	<span class="comment">// StrictMode) on debug builds, but using DropBox, not logs.</span></div><div class="line">	CloseGuard.setEnabled(<span class="keyword">false</span>);</div><div class="line">	</div><div class="line">	Environment.initForCurrentUser();</div><div class="line">	</div><div class="line">	<span class="comment">// Set the reporter for event logging in libcore</span></div><div class="line">	EventLogger.setReporter(<span class="keyword">new</span> EventLoggingReporter());</div><div class="line">	</div><div class="line">	<span class="comment">// Make sure TrustedCertificateStore looks in the right place for CA certificates</span></div><div class="line">	<span class="keyword">final</span> File configDir = Environment.getUserConfigDirectory(UserHandle.myUserId());</div><div class="line">	TrustedCertificateStore.setDefaultUserDirectory(configDir);</div><div class="line">	</div><div class="line">	Process.setArgV0(<span class="string">"&lt;pre-initialized&gt;"</span>);</div><div class="line">	</div><div class="line">	Looper.prepareMainLooper(); <span class="comment">// -------1</span></div><div class="line">	</div><div class="line">	ActivityThread thread = <span class="keyword">new</span> ActivityThread();</div><div class="line">	thread.attach(<span class="keyword">false</span>);</div><div class="line">	</div><div class="line">	<span class="keyword">if</span> (sMainThreadHandler == <span class="keyword">null</span>) &#123;</div><div class="line">	    sMainThreadHandler = thread.getHandler(); <span class="comment">// -------2</span></div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="keyword">if</span> (<span class="keyword">false</span>) &#123;</div><div class="line">	    Looper.myLooper().setMessageLogging(<span class="keyword">new</span></div><div class="line">	            LogPrinter(Log.DEBUG, <span class="string">"ActivityThread"</span>));</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="comment">// End of event ActivityThreadMain.</span></div><div class="line">	Trace.traceEnd(Trace.TRACE_TAG_ACTIVITY_MANAGER);</div><div class="line">	Looper.loop(); <span class="comment">// -------3</span></div><div class="line">	</div><div class="line">	<span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"Main thread loop unexpectedly exited"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹å‡ºè¿™é‡Œåœ¨è·å– sMainThreadHandler ä¹‹å‰è¿›è¡Œäº† <code>Looper.prepareMainLooper();</code> æ“ä½œï¼Œä¹‹åè¿›è¡Œäº† <code>Looper.loop();</code> æ“ä½œã€‚</p>
<p>ä¸‹é¢å¼€å§‹åˆ†æï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">Loopr.class</div><div class="line"> <span class="comment">/** Initialize the current thread as a looper.</span></div><div class="line">  * This gives you a chance to create handlers that then reference</div><div class="line">  * this looper, before actually starting the loop. Be sure to call</div><div class="line">  * &#123;<span class="doctag">@link</span> #loop()&#125; after calling this method, and end it by calling</div><div class="line">  * &#123;<span class="doctag">@link</span> #quit()&#125;.</div><div class="line">  */</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">prepare</span><span class="params">()</span> </span>&#123;</div><div class="line">    prepare(<span class="keyword">true</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">prepare</span><span class="params">(<span class="keyword">boolean</span> quitAllowed)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (sThreadLocal.get() != <span class="keyword">null</span>) &#123;</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"Only one Looper may be created per thread"</span>);</div><div class="line">    &#125;</div><div class="line">    sThreadLocal.set(<span class="keyword">new</span> Looper(quitAllowed));</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * Initialize the current thread as a looper, marking it as an</div><div class="line"> * application's main looper. The main looper for your application</div><div class="line"> * is created by the Android environment, so you should never need</div><div class="line"> * to call this function yourself.  See also: &#123;<span class="doctag">@link</span> #prepare()&#125;</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">prepareMainLooper</span><span class="params">()</span> </span>&#123;</div><div class="line">    prepare(<span class="keyword">false</span>);</div><div class="line">    <span class="keyword">synchronized</span> (Looper.class) &#123;</div><div class="line">        <span class="keyword">if</span> (sMainLooper != <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(<span class="string">"The main Looper has already been prepared."</span>);</div><div class="line">        &#125;</div><div class="line">        sMainLooper = myLooper();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * Return the Looper object associated with the current thread.  Returns</div><div class="line"> * null if the calling thread is not associated with a Looper.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="meta">@Nullable</span> <span class="function">Looper <span class="title">myLooper</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> sThreadLocal.get();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å‰ä¸¤ä¸ªæ–¹æ³•æ˜¯åœ¨è‡ªå·±åˆ›å»º Looper çš„æ—¶å€™ç”¨ï¼Œç¬¬ä¸‰ä¸ªæ˜¯ä¸»çº¿ç¨‹è‡ªå·±ç”¨çš„ã€‚ç”±äºè¿™é‡Œæ¶ˆæ¯ä¼ é€’ä»¥ä¸»çº¿ç¨‹ä¸ºçº¿ç´¢ã€‚<code>prepare(false);</code>è¯´æ˜äº†è¿™æ˜¯ä¸»çº¿ç¨‹ï¼Œåœ¨ <code>sThreadLocal.set(new Looper(quitAllowed));</code> ä¸­çš„ <code>quitAllowed</code> ä¸º false åˆ™è¯´æ˜ä¸»çº¿ç¨‹çš„ MessageQueue è½®è®­ä¸èƒ½ quitã€‚è¿™å¥ä»£ç é‡Œè¿˜æœ‰ ThreadLocal çš„ set() æ–¹æ³•ã€‚å…ˆä¸æ·±ç©¶å®ç°ï¼Œå®¹æ˜“æ™•ï¼Œè¿™é‡Œéœ€è¦çŸ¥é“çš„å°±æ˜¯æŠŠä¸€ä¸ª Looper å¯¹è±¡â€œæ”¾è¿›â€äº† ThreadLocalï¼Œæ¢å¥è¯è¯´ï¼Œé€šè¿‡ ThreadLocal å¯ä»¥è·å–ä¸åŒçš„ Looperã€‚<br>æœ€åçš„ <code>sThreadLocal.get();</code> å±•ç¤ºäº† get æ–¹æ³•ã€‚è¯´æ˜åˆ°è¿™æ—¶ Looper å·²ç»å­˜åœ¨å•¦ã€‚<br>ç°åœ¨çœ‹çœ‹ Looper ç±»çš„æˆå‘˜å˜é‡å§ï¼</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Looper.class</div><div class="line"><span class="keyword">static</span> <span class="keyword">final</span> ThreadLocal&lt;Looper&gt; sThreadLocal = <span class="keyword">new</span> ThreadLocal&lt;Looper&gt;();</div><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> Looper sMainLooper;  <span class="comment">// guarded by Looper.class</span></div><div class="line"></div><div class="line"><span class="keyword">final</span> MessageQueue mQueue;</div><div class="line"><span class="keyword">final</span> Thread mThread;</div></pre></td></tr></table></figure>
<p>åœ¨è¿™é‡Œå…ˆä»‹ç»ä¸€ä¸‹ ThreadLocal çš„ä¸Šå¸è§†è§’å§ã€‚ç›´æ¥æºç ï¼Œå¯ä»¥çŒœæµ‹è¿™æ˜¯é€šè¿‡ä¸€ä¸ª <code>ThreadLocalMap</code> çš„å†…éƒ¨ç±»å¯¹çº¿ç¨‹è¿›è¡Œä¸€ç§ mapã€‚ä¼ è¿›æ¥çš„æ³›å‹ T æ­£æ˜¯æˆ‘ä»¬çš„ looperã€‚æ‰€ä»¥ ThreadLocal å¯ä»¥æ ¹æ®å½“å‰çº¿ç¨‹æŸ¥æ‰¾è¯¥çº¿ç¨‹çš„ Looperï¼Œå…·ä½“æ€ä¹ˆæŸ¥æ‰¾æ¨èçœ‹æºç ï¼Œè¿™é‡Œå°±ä¸ä»‹ç»äº†ã€‚<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * Returns the value in the current thread's copy of this</div><div class="line"> * thread-local variable.  If the variable has no value for the</div><div class="line"> * current thread, it is first initialized to the value returned</div><div class="line"> * by an invocation of the &#123;@link #initialValue&#125; method.</div><div class="line"> *</div><div class="line"> * @return the current thread's value of this thread-local</div><div class="line"> */</div><div class="line">public T get() &#123;</div><div class="line">    Thread t = Thread.currentThread();</div><div class="line">    ThreadLocalMap map = getMap(t);</div><div class="line">    if (map != null) &#123;</div><div class="line">        ThreadLocalMap.Entry e = map.getEntry(this);</div><div class="line">        if (e != null)</div><div class="line">            return (T)e.value;</div><div class="line">    &#125;</div><div class="line">    return setInitialValue();</div><div class="line">&#125;</div><div class="line"></div><div class="line"> * Sets the current thread's copy of this thread-local variable</div><div class="line"> * to the specified value.  Most subclasses will have no need to</div><div class="line"> * override this method, relying solely on the &#123;@link #initialValue&#125;</div><div class="line"> * method to set the values of thread-locals.</div><div class="line"> *</div><div class="line"> * @param value the value to be stored in the current thread's copy of</div><div class="line"> *        this thread-local.</div><div class="line"> */</div><div class="line">public void set(T value) &#123;</div><div class="line">    Thread t = Thread.currentThread();</div><div class="line">    ThreadLocalMap map = getMap(t);</div><div class="line">    if (map != null)</div><div class="line">        map.set(this, value);</div><div class="line">    else</div><div class="line">        createMap(t, value);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>åˆ†æåˆ°è¿™é‡Œï¼Œhandler å’Œ looper éƒ½æœ‰äº†ï¼Œä½†æ˜¯æ¶ˆæ¯è¿˜æ˜¯æ²¡æœ‰å–å‡ºæ¥ï¼Ÿ<br>è¿™æ˜¯çœ‹ç¬¬ä¸‰å¥ <code>Looper.loop();</code>ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line">Looper.class</div><div class="line"><span class="comment">/**</span></div><div class="line"> * Run the message queue in this thread. Be sure to call</div><div class="line"> * &#123;<span class="doctag">@link</span> #quit()&#125; to end the loop.</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">final</span> Looper me = myLooper();</div><div class="line">    <span class="keyword">if</span> (me == <span class="keyword">null</span>) &#123;</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"No Looper; Looper.prepare() wasn't called on this thread."</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">final</span> MessageQueue queue = me.mQueue;</div><div class="line"></div><div class="line">    <span class="comment">// Make sure the identity of this thread is that of the local process,</span></div><div class="line">    <span class="comment">// and keep track of what that identity token actually is.</span></div><div class="line">    Binder.clearCallingIdentity();</div><div class="line">    <span class="keyword">final</span> <span class="keyword">long</span> ident = Binder.clearCallingIdentity();</div><div class="line"></div><div class="line">    <span class="keyword">for</span> (;;) &#123;</div><div class="line">        Message msg = queue.next(); <span class="comment">// might block</span></div><div class="line">        <span class="keyword">if</span> (msg == <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="comment">// No message indicates that the message queue is quitting.</span></div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// This must be in a local variable, in case a UI event sets the logger</span></div><div class="line">        <span class="keyword">final</span> Printer logging = me.mLogging;</div><div class="line">        <span class="keyword">if</span> (logging != <span class="keyword">null</span>) &#123;</div><div class="line">            logging.println(<span class="string">"&gt;&gt;&gt;&gt;&gt; Dispatching to "</span> + msg.target + <span class="string">" "</span> +</div><div class="line">                    msg.callback + <span class="string">": "</span> + msg.what);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">final</span> <span class="keyword">long</span> traceTag = me.mTraceTag;</div><div class="line">        <span class="keyword">if</span> (traceTag != <span class="number">0</span> &amp;&amp; Trace.isTagEnabled(traceTag)) &#123;</div><div class="line">            Trace.traceBegin(traceTag, msg.target.getTraceName(msg));</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            msg.target.dispatchMessage(msg);</div><div class="line">        &#125; <span class="keyword">finally</span> &#123;</div><div class="line">            <span class="keyword">if</span> (traceTag != <span class="number">0</span>) &#123;</div><div class="line">                Trace.traceEnd(traceTag);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (logging != <span class="keyword">null</span>) &#123;</div><div class="line">            logging.println(<span class="string">"&lt;&lt;&lt;&lt;&lt; Finished to "</span> + msg.target + <span class="string">" "</span> + msg.callback);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// Make sure that during the course of dispatching the</span></div><div class="line">        <span class="comment">// identity of the thread wasn't corrupted.</span></div><div class="line">        <span class="keyword">final</span> <span class="keyword">long</span> newIdent = Binder.clearCallingIdentity();</div><div class="line">        <span class="keyword">if</span> (ident != newIdent) &#123;</div><div class="line">            Log.wtf(TAG, <span class="string">"Thread identity changed from 0x"</span></div><div class="line">                    + Long.toHexString(ident) + <span class="string">" to 0x"</span></div><div class="line">                    + Long.toHexString(newIdent) + <span class="string">" while dispatching to "</span></div><div class="line">                    + msg.target.getClass().getName() + <span class="string">" "</span></div><div class="line">                    + msg.callback + <span class="string">" what="</span> + msg.what);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        msg.recycleUnchecked();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸€å¼€å§‹ä¹Ÿæ˜¯è·å– Looperï¼Œä½†æ˜¯é‚£ä¹ˆå¤š Looper æ€ä¹ˆçŸ¥é“è¿™æ˜¯å“ªä¸ª Looper å‘¢ï¼Ÿè¿™å…ˆæ”¾ç€å¾…ä¼šé©¬ä¸Šè§£é‡Šã€‚æŠŠ loop() å‡½æ•°ä¸»è¦åŠŸèƒ½ææ‡‚å†è¯´ã€‚<br>æ¥ä¸‹æ¥å°±æ˜¯è·å– Looper ä¸­çš„ MessageQueueäº†ï¼Œç­‰ç­‰ï¼Œè¿™é‡Œæå‡ºä¸€ä¸ªç–‘é—®ï¼Œå‰é¢è¯´äº† Handler ä¸­ä¹Ÿå­˜åœ¨ MessageQueueï¼Œé‚£è¿™ä¹‹é—´å­˜åœ¨ä»€ä¹ˆå…³ç³»å—ï¼Ÿï¼ˆæœ€åä½ ä¼šå‘ç°å…¶å®æ˜¯åŒä¸€ä¸ªï¼‰<br>å…ˆå¾€ä¸‹çœ‹ï¼Œä¸€ä¸ªæ­»å¾ªç¯ï¼Œä¹Ÿå°±æ˜¯è½®è®­æ¶ˆæ¯å–½ï¼Œä¸­é—´æœ‰ä¸€å¥ <code>msg.target.dispatchMessage(msg);</code> è€Œå‰é¢ä»‹ç» msg.target æ˜¯ handler å‹å‚æ•°ã€‚æ‰€ä»¥å’Œ handler è”ç³»ä¸Šäº†ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">Handler.class</div><div class="line"><span class="comment">/**</span></div><div class="line"> * Handle system messages here.</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dispatchMessage</span><span class="params">(Message msg)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (msg.callback != <span class="keyword">null</span>) &#123;</div><div class="line">        handleCallback(msg);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">if</span> (mCallback != <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="keyword">if</span> (mCallback.handleMessage(msg)) &#123;</div><div class="line">                <span class="keyword">return</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        handleMessage(msg);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>é€»è¾‘å¾ˆç®€å•ï¼Œæ€»ä¹‹å°±æ˜¯è°ƒåŠ¨äº†æˆ‘ä»¬é‡å†™çš„ handleMessage() æ–¹æ³•ã€‚</p>
<p>Step 1ï¼š<code>Looper.prepare();</code></p>
<blockquote>
<p>åœ¨ Looper ä¸­æœ‰ä¸€ä¸ªé™æ€å˜é‡ sThreadLocalï¼ŒæŠŠåˆ›å»ºçš„ looper â€œå­˜åœ¨â€ é‡Œé¢ï¼Œåˆ›å»º looper çš„åŒæ—¶åˆ›å»º MessageQueueï¼Œå¹¶ä¸”å’Œå½“å‰çº¿ç¨‹æŒ‚é’©ã€‚</p>
</blockquote>
<p>Step 2ï¼š<code>new Handler();</code> </p>
<blockquote>
<p>é€šè¿‡ä¸Šå¸ ThreadLocalï¼Œå¹¶æ ¹æ®å½“å‰çº¿ç¨‹ï¼Œå¯è·å– looperï¼Œè¿›è€Œè·å– MessageQueueï¼ŒCallbackä¹‹ç±»çš„ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">Handler.class</div><div class="line"><span class="comment">/**</span></div><div class="line"> * Use the &#123;<span class="doctag">@link</span> Looper&#125; for the current thread with the specified callback interface</div><div class="line"> * and set whether the handler should be asynchronous.</div><div class="line"> *</div><div class="line"> * Handlers are synchronous by default unless this constructor is used to make</div><div class="line"> * one that is strictly asynchronous.</div><div class="line"> *</div><div class="line"> * Asynchronous messages represent interrupts or events that do not require global ordering</div><div class="line"> * with respect to synchronous messages.  Asynchronous messages are not subject to</div><div class="line"> * the synchronization barriers introduced by &#123;<span class="doctag">@link</span> MessageQueue#enqueueSyncBarrier(long)&#125;.</div><div class="line"> *</div><div class="line"> * <span class="doctag">@param</span> callback The callback interface in which to handle messages, or null.</div><div class="line"> * <span class="doctag">@param</span> async If true, the handler calls &#123;<span class="doctag">@link</span> Message#setAsynchronous(boolean)&#125; for</div><div class="line"> * each &#123;<span class="doctag">@link</span> Message&#125; that is sent to it or &#123;<span class="doctag">@link</span> Runnable&#125; that is posted to it.</div><div class="line"> *</div><div class="line"> * <span class="doctag">@hide</span></div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">Handler</span><span class="params">(Callback callback, <span class="keyword">boolean</span> async)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (FIND_POTENTIAL_LEAKS) &#123;</div><div class="line">        <span class="keyword">final</span> Class&lt;? extends Handler&gt; klass = getClass();</div><div class="line">        <span class="keyword">if</span> ((klass.isAnonymousClass() || klass.isMemberClass() || klass.isLocalClass()) &amp;&amp;</div><div class="line">                (klass.getModifiers() &amp; Modifier.STATIC) == <span class="number">0</span>) &#123;</div><div class="line">            Log.w(TAG, <span class="string">"The following Handler class should be static or leaks might occur: "</span> +</div><div class="line">                klass.getCanonicalName());</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    mLooper = Looper.myLooper();</div><div class="line">    <span class="keyword">if</span> (mLooper == <span class="keyword">null</span>) &#123;</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(</div><div class="line">            <span class="string">"Can't create handler inside thread that has not called Looper.prepare()"</span>);</div><div class="line">    &#125;</div><div class="line">    mQueue = mLooper.mQueue; <span class="comment">// å‰é¢çš„ä¸¤ä¸ª MessageQueue è”ç³»èµ·æ¥äº†ï¼Œç–‘é—®å·²è§£ç­”ã€‚</span></div><div class="line">    mCallback = callback;</div><div class="line">    mAsynchronous = async;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</blockquote>
<p>è¿™ä¸ªå‡½æ•°å¯ä»¥è¯´æ˜åœ¨ new Handler() ä¹‹å‰è¯¥çº¿ç¨‹å¿…éœ€æœ‰ looperï¼Œæ‰€ä»¥è¦åœ¨è¿™ä¹‹å‰è°ƒç”¨ <code>Looper.prepare();</code>ã€‚</p>
<p>Step 3ï¼š<code>Looper.loop();</code></p>
<blockquote>
<p>è¿›è¡Œæ¶ˆæ¯å¾ªç¯ã€‚</p>
</blockquote>
<p>åŸºæœ¬åˆ°è¿™é‡Œæ•´ä¸ªè¿‡ç¨‹åº”è¯¥æ˜¯æ¸…æ¥šäº†ï¼Œè¿™é‡Œæˆ‘ç”»ä¸‹æˆ‘çš„ç†è§£ã€‚<br><img src="/2017/09/11/handler/threadLocal.png" alt=""></p>
<p>é‚£ä¹ˆæˆ‘ä»¬ç°åœ¨æ¥çœ‹ä¸€ä¸‹ handler æ˜¯æ€ä¹ˆå‡†ç¡®å‘é€ä¿¡æ¯å’Œå¤„ç†ä¿¡æ¯çš„ã€‚æ³¨æ„åœ¨ handler å‘é€ä¿¡æ¯ä¹‹å‰ï¼Œ1ã€2ã€3 æ­¥å·²ç»å®Œæˆã€‚æ‰€ä»¥è¯¥è·å–çš„çº¿ç¨‹å·²ç»è·å–ï¼Œç›´æ¥å¾€è¯¥çº¿ç¨‹æ‰€åœ¨çš„ MessageQueue é‡Œé¢å¡ä¿¡æ¯å°±è¡Œäº†ï¼Œåæ­£è¯¥ä¿¡æ¯ä¼šåœ¨è¯¥ handler æ‰€åœ¨çº¿ç¨‹çš„ looper ä¸­å¾ªç¯ï¼Œæœ€ç»ˆä¼šé€šè¿‡æ¶ˆæ¯çš„ target å‚æ•°è°ƒç”¨ dispatchMessage()ï¼Œè€Œåœ¨ dispatchMessage() ä¸­ä¼šè°ƒç”¨æˆ‘ä»¬é‡å†™çš„ handleMessage() å‡½æ•°ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;è¿™é‡Œä¸»è¦æ˜¯å…ˆäº†è§£æ•´ä¸ªæ¶ˆæ¯ä¼ é€’çš„è¿‡ç¨‹ï¼ŒçŸ¥é“è¿™æ ·åšçš„å¥½å¤„å’Œå¿…è¦æ€§ã€‚è€Œä¸æ˜¯ç›´æ¥ä»‹ç»é‡Œé¢çš„å‡ ä¸ªå…³é”®ç±»ï¼Œç„¶åä»‹ç»è¿™ä¸ªæœºåˆ¶ï¼Œè¿™æ ·å®¹æ˜“å¤´æ™•ã€‚è€Œä¸”ç½‘ç»œä¸Šå·²ç»æœ‰å¾ˆå¤šè¿™æ ·çš„æ–‡ç« äº†ï¼Œé‚£äº›ä½œè€…æ‰€ç«™çš„é«˜åº¦å¯¹äºæˆ‘è¿™ç§åˆå­¦è€…æ¥è¯´æœ‰ç‚¹é«˜ï¼Œæˆ‘ç†è§£èµ·æ¥æ˜¯æ¯”è¾ƒç¨€é‡Œç³Šæ¶‚çš„ï¼Œæ‰€ä»¥è¿™é‡Œä»ä¸€ä¸ªé—®é¢˜å‡ºå‘ï¼Œä¸€æ­¥ä¸€æ­¥è·Ÿè¸ªä»£ç ï¼Œè¿™é‡Œåªæ˜¯ææ¸…æ¥š handler æ˜¯æ€ä¹ˆè·¨çº¿ç¨‹æ”¶å‘æ¶ˆæ¯çš„ï¼Œå…·ä½“å®ç°ç»†èŠ‚è¿˜æ˜¯å‚è€ƒç½‘ä¸Šçš„é‚£äº›å¤§ç¥çš„ Blog æ¯”è¾ƒæƒå¨ã€‚&lt;br&gt;PS. æœ¬æ¥æ˜¯æƒ³åˆ†ç« èŠ‚ä¹¦å†™ï¼Œè°çŸ¥é“è¿™ä¸€å¥—å†›ä½“æ‹³æ‰“ä¸‹æ¥æ”¶ä¸ä½äº†ï¼Œæ‰€ä»¥ä¸‹é¢åŸºæœ¬æ˜¯ä»¥ä¸€ç§å¾ˆæµç•…çš„è¿‡ç¨‹è§£é‡Šè€Œä¸æ˜¯å¾ˆè·³è·ƒï¼Œç»†å¿ƒçœ‹åº”è¯¥ä¼šå¯¹ç†è§£ Handler æœºåˆ¶æœ‰æ‰€æ”¶è·ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="Android" scheme="http://fitzeng.org/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>ä¸€ä¸ªç¨‹åºå‘˜ä½¿ç”¨ PPT çš„å°æŠ€å·§</title>
    <link href="http://fitzeng.org/2017/09/06/pptAndDev/"/>
    <id>http://fitzeng.org/2017/09/06/pptAndDev/</id>
    <published>2017-09-06T03:27:00.000Z</published>
    <updated>2017-09-06T06:02:41.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å‰æ®µæ—¶é—´ï¼Œæˆ‘å†™äº†ä¸€ç¯‡<a href="https://juejin.im/post/59ad4cd56fb9a02477075780" target="_blank" rel="external">ã€Šé‡è¯» JVMã€‹</a>ï¼Œ<br>åœ¨æ–‡ç« ä¸‹æœ‰äººè¯„è®ºé‡Œé¢çš„å›¾æ˜¯æ€ä¹ˆåšçš„ï¼Œä¸‹é¢æ˜¯æˆ‘ç»™çš„å›å¤ï¼š<br><img src="/2017/09/06/pptAndDev/comment.png" alt=""><br>ç„¶åæƒ³åˆ°è‡ªå·±åœ¨é˜…è¯»å…¶ä»–å¤§ç¥äº›çš„ Blog æ—¶ï¼Œä¸‹é¢ä¹Ÿæœ‰ä¸€æ‰¹äººåœ¨é—®ä½œå›¾å·¥å…·ä»€ä¹ˆçš„ã€‚ç„¶åæˆ‘å°±æƒ³æŠŠè‡ªå·±çš„å°æŠ€å·§åˆ†äº«å‡ºæ¥ï¼Œå¦‚æœ‰é›·åŒï¼Œçº¯å±å·§åˆã€‚</p>
<a id="more"></a>
<h2 id="WHY-IS-PPT"><a href="#WHY-IS-PPT" class="headerlink" title="WHY IS PPT"></a>WHY IS PPT</h2><p>ä½œä¸ºä¸€ä¸ªæœ‰ç‚¹è½»å¾®æ´ç™–çš„ç¨‹åºå‘˜ï¼Œè£…çš„è½¯ä»¶ç›¸åŒåŠŸèƒ½çš„åŸºæœ¬ä¸ä¼šè¶…è¿‡ä¸¤ä¸ªã€‚æ‰€ä»¥ä¸æƒ³ä¸ºå†™ Blog ç”»å›¾è€Œå†è£…ä¸€ä¸ªè½¯ä»¶ï¼Œå†è¯´å¹¶ä¸æ˜¯æ¯ç¯‡ Blog éƒ½è¦ç”»å›¾ï¼Œä½†æ˜¯è¦ç”»å›¾çš„ Blog ä¸€ç”»å°±æ˜¯åå‡ å¼ ï¼Œæ•´ç†èµ·æ¥å¾ˆä¸æ–¹ä¾¿ã€‚æ‰€ä»¥æˆ‘æƒ³åˆ°äº† PPTï¼Œåˆ†é¡µå­˜å‚¨ã€‚å…¶å®åœ¨è¿™ä¹‹å‰æˆ‘ç”¨ PPT çš„å¾ˆå¤§ä¸€åŸå› æ˜¯å†™ç®€å†ï¼Œä¹‹å‰ç®€å†æ˜¯ç”¨ Word åšçš„ï¼Œè‹¦ä¸å ªè¨€ï¼Œè€Œä¸”ç‰ˆæœ¬ä¿å­˜å¾ˆæ¶å¿ƒã€‚ã€‚ã€‚æ–‡ä»¶ä¹±çš„å¾ˆï¼Œæ‰€ä»¥æƒ³åˆ°ç”¨ PPTï¼Œæ²¡æƒ³åˆ°ç‰¹åˆ«å¥½ç”¨ã€‚ä¸‹é¢å¼€å§‹ä»‹ç»ä¸€ä¸‹æˆ‘çš„å®æ“ã€‚</p>
<h2 id="å®æ“"><a href="#å®æ“" class="headerlink" title="å®æ“"></a>å®æ“</h2><h3 id="ç®€å†ç¯‡"><a href="#ç®€å†ç¯‡" class="headerlink" title="ç®€å†ç¯‡"></a>ç®€å†ç¯‡</h3><ul>
<li>ç¬¬ä¸€æ­¥ï¼šåˆ›å»º A4 å¤§å°çš„å¹»ç¯ç‰‡</li>
</ul>
<p><img src="/2017/09/06/pptAndDev/resumeA4.png" alt=""></p>
<ul>
<li>ç¬¬äºŒæ­¥ï¼šè®¾è®¡ç®€å†</li>
</ul>
<p><img src="/2017/09/06/pptAndDev/draw.png" alt=""><br>è¿™é‡Œå°±æ˜¯åˆ©ç”¨æ’å…¥å½¢çŠ¶è‡ªå·±è®¾è®¡äº†ï¼ŒåŸºæœ¬å¤Ÿæ—¥å¸¸ä½¿ç”¨ï¼Œæˆ‘ä¹Ÿä¸æ˜¯ä»€ä¹ˆ PPT é«˜æ‰‹ï¼Œå¦‚æœä½ ä¼šä½¿ç”¨åŠ¨ç”»é‚£æ•ˆæœä¼°è®¡æ›´åŠ æƒŠäººã€‚</p>
<ul>
<li>ç¬¬ä¸‰æ­¥ï¼šç‰ˆæœ¬æ§åˆ¶</li>
</ul>
<p><img src="/2017/09/06/pptAndDev/version.png" alt=""></p>
<p>åˆ©ç”¨æ³¨é‡Šï¼</p>
<ul>
<li>ç¬¬å››æ­¥ï¼šå¯¼å‡º PDF</li>
</ul>
<p>ç›´æ¥å¦å­˜ä¸ºPDF å°±å¯ä»¥äº†ï¼Œå¾ˆç®€å•å°±ä¸æˆªå›¾äº†ã€‚</p>
<h3 id="ç®¡ç†å›¾ç‰‡ç¯‡"><a href="#ç®¡ç†å›¾ç‰‡ç¯‡" class="headerlink" title="ç®¡ç†å›¾ç‰‡ç¯‡"></a>ç®¡ç†å›¾ç‰‡ç¯‡</h3><p>åŸºæœ¬æœ‰äº†ç»˜åˆ¶ç®€å†çš„åŸºç¡€ï¼Œé‚£ä¹ˆè¿™ä¸ªä¸åœ¨è¯ä¸‹ï¼Œå‰©ä¸‹çš„å°±æ˜¯è‡ªå·±çš„ç»˜åˆ¶æ°´å¹³é«˜ä½äº†ã€‚</p>
<p>è§£é‡Šä¸€ä¸‹å¦‚ä½•å¯¼å‡ºå›¾ç‰‡ï¼šç›´æ¥ å…¨é€‰ -&gt; å³é”® -&gt; å¦å­˜ä¸ºå›¾ç‰‡â€¦<br><img src="/2017/09/06/pptAndDev/imageStore.png" alt=""></p>
<p>æ³¨æ„è¿™é‡Œçš„ PNG å¦‚æœæ²¡æœ‰èƒŒæ™¯å›¾ç¤ºé€æ˜çš„ï¼Œæ‰€ä»¥ç»˜åˆ¶å›¾ç‰‡å‰å¯ä»¥è‡ªå·±åŠ ä¸€å±‚èƒŒæ™¯ç”»å¸ƒã€‚</p>
<h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><p>è¿™ç¯‡æ–‡ç« æœ‰ç‚¹æ°´ï¼Œä¸è¿‡å¦‚æœå¯¹å¤§å®¶èƒ½æœ‰å¸®åŠ©å°±çŸ¥è¶³äº†ã€‚</p>
<p>å¦‚æœä½ çœ‹åˆ°è¿™ &amp;&amp; å¦‚æœä½ æ˜¯ä¸€ä¸ªç¨‹åºå‘˜ï¼Œé‚£ä¹ˆæŒ‰ç…§å›½é™…æƒ¯ä¾‹ï¼Œæ¨èä¸€ä¸‹è‡ªå·±çš„<a href="https://github.com/mk43" target="_blank" rel="external"> GitHub </a> &amp;&amp; <a href="http://fitzeng.org/"> Blog </a> é‡Œé¢è¿˜æ˜¯æœ‰ä¸€äº›å¹²è´§å€¼å¾—å¤§å®¶å‘ç°çš„ã€‚</p>
<p>å¤šè°¢é˜…è¯» ^_^</p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;å‰æ®µæ—¶é—´ï¼Œæˆ‘å†™äº†ä¸€ç¯‡&lt;a href=&quot;https://juejin.im/post/59ad4cd56fb9a02477075780&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ã€Šé‡è¯» JVMã€‹&lt;/a&gt;ï¼Œ&lt;br&gt;åœ¨æ–‡ç« ä¸‹æœ‰äººè¯„è®ºé‡Œé¢çš„å›¾æ˜¯æ€ä¹ˆåšçš„ï¼Œä¸‹é¢æ˜¯æˆ‘ç»™çš„å›å¤ï¼š&lt;br&gt;&lt;img src=&quot;/2017/09/06/pptAndDev/comment.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;ç„¶åæƒ³åˆ°è‡ªå·±åœ¨é˜…è¯»å…¶ä»–å¤§ç¥äº›çš„ Blog æ—¶ï¼Œä¸‹é¢ä¹Ÿæœ‰ä¸€æ‰¹äººåœ¨é—®ä½œå›¾å·¥å…·ä»€ä¹ˆçš„ã€‚ç„¶åæˆ‘å°±æƒ³æŠŠè‡ªå·±çš„å°æŠ€å·§åˆ†äº«å‡ºæ¥ï¼Œå¦‚æœ‰é›·åŒï¼Œçº¯å±å·§åˆã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="Tips" scheme="http://fitzeng.org/tags/Tips/"/>
    
      <category term="ppt" scheme="http://fitzeng.org/tags/ppt/"/>
    
  </entry>
  
  <entry>
    <title>é‡è¯» JVM</title>
    <link href="http://fitzeng.org/2017/09/02/reJVM/"/>
    <id>http://fitzeng.org/2017/09/02/reJVM/</id>
    <published>2017-09-01T16:00:00.000Z</published>
    <updated>2017-09-04T12:46:51.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>ç§‹æ‹›å¼€å§‹äº†ï¼Œå‰é¢ç”±äºåšåˆ«çš„äº‹è€½è¯¯äº†åŠä¸ªæœˆï¼Œä»¥å‰å­¦çš„ä¸œè¥¿ä¸ç”¨å°±å¾ˆå®¹æ˜“å¿˜è®°ã€‚æ‰€ä»¥ï¼Œè¿™æ¬¡é‡æ–°é˜…è¯»ã€Šæ·±å…¥ç†è§£ JVM è™šæ‹Ÿæœºã€‹æ—¶ï¼Œæƒ³åšä¸€ä¸ªè®°å½•ã€‚å°†ç¢ç‰‡çš„çŸ¥è¯†æ•´åˆï¼Œæ–¹ä¾¿è‡ªå·±ä»¥åé˜…è¯»ï¼ŒåŒæ—¶ä¹Ÿå’Œå¤§å®¶ä¸€èµ·åˆ†äº«ã€‚å†…å®¹ä¸­ä¼šæ·»åŠ æˆ‘è‡ªå·±çš„ç†è§£ï¼Œå…¶ä¸­å¦‚æœæœ‰é”™è¯¯ï¼Œæ¬¢è¿å¤§å®¶æŒ‡æ­£ã€‚</p>
<p>ç›¸å…³é˜…è¯»:<br><a href="http://fitzeng.org/2017/08/02/reDS/">1. é‡æ‹¾æ•°æ®ç»“æ„</a><br><a href="http://fitzeng.org/2017/08/07/reOS/">2. é‡æ‹¾æ“ä½œç³»ç»Ÿ</a><br><a href="http://fitzeng.org/2017/08/31/reCN/">3. é‡æ‹¾è®¡ç®—æœºç½‘ç»œ(æœªå®Œæˆ)ï¼‰</a><br>æ³¨æ„ï¼šä»¥ä¸Šå†…å®¹ä¼šæŒç»­æ›´æ–°ï¼Œæ¬¢è¿å¤§å®¶å…³æ³¨<a href="https://github.com/mk43" target="_blank" rel="external"> GitHub </a> &amp;&amp; <a href="http://fitzeng.org/"> Blog </a> </p>
</blockquote>
<a id="more"></a>
<h2 id="1-Java-å†…å­˜åŒºåŸŸä¸å†…å­˜æº¢å‡ºå¼‚å¸¸"><a href="#1-Java-å†…å­˜åŒºåŸŸä¸å†…å­˜æº¢å‡ºå¼‚å¸¸" class="headerlink" title="1. Java å†…å­˜åŒºåŸŸä¸å†…å­˜æº¢å‡ºå¼‚å¸¸"></a>1. Java å†…å­˜åŒºåŸŸä¸å†…å­˜æº¢å‡ºå¼‚å¸¸</h2><h3 id="1-1-è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ"><a href="#1-1-è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ" class="headerlink" title="1.1 è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ"></a>1.1 è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ</h3><blockquote>
<p>æ ¹æ®ã€ŠJava è™šæ‹Ÿæœºè§„èŒƒ(Java SE 7 ç‰ˆ)ã€‹è§„å®šï¼ŒJava è™šæ‹Ÿæœºæ‰€ç®¡ç†çš„å†…å­˜å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
</blockquote>
<p><img src="/2017/09/02/reJVM/jvmRuntimeDataArea.png" alt=""></p>
<h4 id="1-1-1-ç¨‹åºè®¡æ•°å™¨"><a href="#1-1-1-ç¨‹åºè®¡æ•°å™¨" class="headerlink" title="1.1.1 ç¨‹åºè®¡æ•°å™¨"></a>1.1.1 ç¨‹åºè®¡æ•°å™¨</h4><blockquote>
<p>å†…å­˜ç©ºé—´å°ï¼Œçº¿ç¨‹ç§æœ‰ã€‚å­—èŠ‚ç è§£é‡Šå™¨å·¥ä½œæ˜¯å°±æ˜¯é€šè¿‡æ”¹å˜è¿™ä¸ªè®¡æ•°å™¨çš„å€¼æ¥é€‰å–ä¸‹ä¸€æ¡éœ€è¦æ‰§è¡ŒæŒ‡ä»¤çš„å­—èŠ‚ç æŒ‡ä»¤ï¼Œåˆ†æ”¯ã€å¾ªç¯ã€è·³è½¬ã€å¼‚å¸¸å¤„ç†ã€çº¿ç¨‹æ¢å¤ç­‰åŸºç¡€åŠŸèƒ½éƒ½éœ€è¦ä¾èµ–è®¡æ•°å™¨å®Œæˆ</p>
</blockquote>
<p>å¦‚æœçº¿ç¨‹æ­£åœ¨æ‰§è¡Œä¸€ä¸ª Java æ–¹æ³•ï¼Œè¿™ä¸ªè®¡æ•°å™¨è®°å½•çš„æ˜¯æ­£åœ¨æ‰§è¡Œçš„è™šæ‹Ÿæœºå­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ï¼›å¦‚æœæ­£åœ¨æ‰§è¡Œçš„æ˜¯ Native æ–¹æ³•ï¼Œè¿™ä¸ªè®¡æ•°å™¨çš„å€¼åˆ™ä¸º (Undefined)ã€‚æ­¤å†…å­˜åŒºåŸŸæ˜¯å”¯ä¸€ä¸€ä¸ªåœ¨ Java è™šæ‹Ÿæœºè§„èŒƒä¸­æ²¡æœ‰è§„å®šä»»ä½• OutOfMemoryError æƒ…å†µçš„åŒºåŸŸã€‚</p>
<h4 id="1-1-2-Java-è™šæ‹Ÿæœºæ ˆ"><a href="#1-1-2-Java-è™šæ‹Ÿæœºæ ˆ" class="headerlink" title="1.1.2 Java è™šæ‹Ÿæœºæ ˆ"></a>1.1.2 Java è™šæ‹Ÿæœºæ ˆ</h4><blockquote>
<p>çº¿ç¨‹ç§æœ‰ï¼Œç”Ÿå‘½å‘¨æœŸå’Œçº¿ç¨‹ä¸€è‡´ã€‚æè¿°çš„æ˜¯ Java æ–¹æ³•æ‰§è¡Œçš„å†…å­˜æ¨¡å‹ï¼šæ¯ä¸ªæ–¹æ³•åœ¨æ‰§è¡Œæ—¶éƒ½ä¼šåºŠåˆ›å»ºä¸€ä¸ªæ ˆå¸§(Stack Frame)ç”¨äºå­˜å‚¨<code>å±€éƒ¨å˜é‡è¡¨</code>ã€<code>æ“ä½œæ•°æ ˆ</code>ã€<code>åŠ¨æ€é“¾æ¥</code>ã€<code>æ–¹æ³•å‡ºå£</code>ç­‰ä¿¡æ¯ã€‚æ¯ä¸€ä¸ªæ–¹æ³•ä»è°ƒç”¨ç›´è‡³æ‰§è¡Œç»“æŸï¼Œå°±å¯¹åº”ç€ä¸€ä¸ªæ ˆå¸§ä»è™šæ‹Ÿæœºæ ˆä¸­å…¥æ ˆåˆ°å‡ºæ ˆçš„è¿‡ç¨‹ã€‚</p>
</blockquote>
<p>å±€éƒ¨å˜é‡è¡¨ï¼šå­˜æ”¾äº†ç¼–è¯‘æœŸå¯çŸ¥çš„å„ç§åŸºæœ¬ç±»å‹(booleanã€byteã€charã€shortã€intã€floatã€longã€double)ã€å¯¹è±¡å¼•ç”¨(reference ç±»å‹)å’Œ returnAddress ç±»å‹(æŒ‡å‘äº†ä¸€æ¡å­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€)</p>
<p>StackOverflowErrorï¼šçº¿ç¨‹è¯·æ±‚çš„æ ˆæ·±åº¦å¤§äºè™šæ‹Ÿæœºæ‰€å…è®¸çš„æ·±åº¦ã€‚<br>OutOfMemoryErrorï¼šå¦‚æœè™šæ‹Ÿæœºæ ˆå¯ä»¥åŠ¨æ€æ‰©å±•ï¼Œè€Œæ‰©å±•æ—¶æ— æ³•ç”³è¯·åˆ°è¶³å¤Ÿçš„å†…å­˜ã€‚</p>
<h4 id="1-1-3-æœ¬åœ°æ–¹æ³•æ ˆ"><a href="#1-1-3-æœ¬åœ°æ–¹æ³•æ ˆ" class="headerlink" title="1.1.3 æœ¬åœ°æ–¹æ³•æ ˆ"></a>1.1.3 æœ¬åœ°æ–¹æ³•æ ˆ</h4><blockquote>
<p>åŒºåˆ«äº Java è™šæ‹Ÿæœºæ ˆçš„æ˜¯ï¼ŒJava è™šæ‹Ÿæœºæ ˆä¸ºè™šæ‹Ÿæœºæ‰§è¡Œ Java æ–¹æ³•(ä¹Ÿå°±æ˜¯å­—èŠ‚ç )æœåŠ¡ï¼Œè€Œæœ¬åœ°æ–¹æ³•æ ˆåˆ™ä¸ºè™šæ‹Ÿæœºä½¿ç”¨åˆ°çš„ Native æ–¹æ³•æœåŠ¡ã€‚ä¹Ÿä¼šæœ‰ StackOverflowError å’Œ OutOfMemoryError å¼‚å¸¸ã€‚</p>
</blockquote>
<h4 id="1-1-4-Java-å †"><a href="#1-1-4-Java-å †" class="headerlink" title="1.1.4 Java å †"></a>1.1.4 Java å †</h4><blockquote>
<p>å¯¹äºç»å¤§å¤šæ•°åº”ç”¨æ¥è¯´ï¼Œè¿™å—åŒºåŸŸæ˜¯ JVM æ‰€ç®¡ç†çš„å†…å­˜ä¸­æœ€å¤§çš„ä¸€å—ã€‚çº¿ç¨‹å…±äº«ï¼Œä¸»è¦æ˜¯å­˜æ”¾å¯¹è±¡å®ä¾‹å’Œæ•°ç»„ã€‚å†…éƒ¨ä¼šåˆ’åˆ†å‡ºå¤šä¸ªçº¿ç¨‹ç§æœ‰çš„åˆ†é…ç¼“å†²åŒº(Thread Local Allocation Buffer, TLAB)ã€‚å¯ä»¥ä½äºç‰©ç†ä¸Šä¸è¿ç»­çš„ç©ºé—´ï¼Œä½†æ˜¯é€»è¾‘ä¸Šè¦è¿ç»­ã€‚</p>
</blockquote>
<p>OutOfMemoryErrorï¼šå¦‚æœå †ä¸­æ²¡æœ‰å†…å­˜å®Œæˆå®ä¾‹åˆ†é…ï¼Œå¹¶ä¸”å †ä¹Ÿæ— æ³•å†æ‰©å±•æ—¶ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸ã€‚</p>
<h4 id="1-1-5-æ–¹æ³•åŒº"><a href="#1-1-5-æ–¹æ³•åŒº" class="headerlink" title="1.1.5 æ–¹æ³•åŒº"></a>1.1.5 æ–¹æ³•åŒº</h4><blockquote>
<p>å±äºå…±äº«å†…å­˜åŒºåŸŸï¼Œå­˜å‚¨å·²è¢«è™šæ‹ŸæœºåŠ è½½çš„ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ç­‰æ•°æ®ã€‚</p>
</blockquote>
<p>ç°åœ¨ç”¨ä¸€å¼ å›¾æ¥ä»‹ç»æ¯ä¸ªåŒºåŸŸå­˜å‚¨çš„å†…å®¹ã€‚</p>
<p><img src="/2017/09/02/reJVM/jvmcontent.png" alt=""></p>
<h4 id="1-1-6-è¿è¡Œæ—¶å¸¸é‡æ± "><a href="#1-1-6-è¿è¡Œæ—¶å¸¸é‡æ± " class="headerlink" title="1.1.6 è¿è¡Œæ—¶å¸¸é‡æ± "></a>1.1.6 è¿è¡Œæ—¶å¸¸é‡æ± </h4><blockquote>
<p>å±äºæ–¹æ³•åŒºä¸€éƒ¨åˆ†ï¼Œç”¨äºå­˜æ”¾ç¼–è¯‘æœŸç”Ÿæˆçš„å„ç§å­—é¢é‡å’Œç¬¦å·å¼•ç”¨ã€‚ç¼–è¯‘å™¨å’Œè¿è¡ŒæœŸ(String çš„ intern() )éƒ½å¯ä»¥å°†å¸¸é‡æ”¾å…¥æ± ä¸­ã€‚å†…å­˜æœ‰é™ï¼Œæ— æ³•ç”³è¯·æ—¶æŠ›å‡º OutOfMemoryErrorã€‚</p>
</blockquote>
<h4 id="1-1-7-ç›´æ¥å†…å­˜"><a href="#1-1-7-ç›´æ¥å†…å­˜" class="headerlink" title="1.1.7 ç›´æ¥å†…å­˜"></a>1.1.7 ç›´æ¥å†…å­˜</h4><blockquote>
<p>éè™šæ‹Ÿæœºè¿è¡Œæ—¶æ•°æ®åŒºçš„éƒ¨åˆ†</p>
</blockquote>
<p>åœ¨ JDK 1.4 ä¸­æ–°åŠ å…¥ NIO (New Input/Output) ç±»ï¼Œå¼•å…¥äº†ä¸€ç§åŸºäºé€šé“(Channel)å’Œç¼“å­˜(Buffer)çš„ I/O æ–¹å¼ï¼Œå®ƒå¯ä»¥ä½¿ç”¨ Native å‡½æ•°åº“ç›´æ¥åˆ†é…å †å¤–å†…å­˜ï¼Œç„¶åé€šè¿‡ä¸€ä¸ªå­˜å‚¨åœ¨ Java å †ä¸­çš„ DirectByteBuffer å¯¹è±¡ä½œä¸ºè¿™å—å†…å­˜çš„å¼•ç”¨è¿›è¡Œæ“ä½œã€‚å¯ä»¥é¿å…åœ¨ Java å †å’Œ Native å †ä¸­æ¥å›çš„æ•°æ®è€—æ—¶æ“ä½œã€‚<br>OutOfMemoryErrorï¼šä¼šå—åˆ°æœ¬æœºå†…å­˜é™åˆ¶ï¼Œå¦‚æœå†…å­˜åŒºåŸŸæ€»å’Œå¤§äºç‰©ç†å†…å­˜é™åˆ¶ä»è€Œå¯¼è‡´åŠ¨æ€æ‰©å±•æ—¶å‡ºç°è¯¥å¼‚å¸¸ã€‚</p>
<h3 id="1-2-HotSpot-è™šæ‹Ÿæœºå¯¹è±¡æ¢ç§˜"><a href="#1-2-HotSpot-è™šæ‹Ÿæœºå¯¹è±¡æ¢ç§˜" class="headerlink" title="1.2 HotSpot è™šæ‹Ÿæœºå¯¹è±¡æ¢ç§˜"></a>1.2 HotSpot è™šæ‹Ÿæœºå¯¹è±¡æ¢ç§˜</h3><blockquote>
<p>ä¸»è¦ä»‹ç»æ•°æ®æ˜¯å¦‚ä½•åˆ›å»ºã€å¦‚ä½•å¸ƒå±€ä»¥åŠå¦‚ä½•è®¿é—®çš„ã€‚</p>
</blockquote>
<h4 id="1-2-1-å¯¹è±¡çš„åˆ›å»º"><a href="#1-2-1-å¯¹è±¡çš„åˆ›å»º" class="headerlink" title="1.2.1 å¯¹è±¡çš„åˆ›å»º"></a>1.2.1 å¯¹è±¡çš„åˆ›å»º</h4><blockquote>
<p>åˆ›å»ºè¿‡ç¨‹æ¯”è¾ƒå¤æ‚ï¼Œå»ºè®®çœ‹ä¹¦äº†è§£ï¼Œè¿™é‡Œæä¾›ä¸ªäººçš„æ€»ç»“ã€‚</p>
</blockquote>
<p>é‡åˆ° new æŒ‡ä»¤æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥è¿™ä¸ªæŒ‡ä»¤çš„å‚æ•°æ˜¯å¦èƒ½åœ¨å¸¸é‡æ± ä¸­å®šä½åˆ°ä¸€ä¸ªç±»çš„ç¬¦å·å¼•ç”¨ï¼Œå¹¶ä¸”æ£€æŸ¥è¿™ä¸ªç¬¦å·å¼•ç”¨ä»£è¡¨çš„ç±»æ˜¯å¦å·²ç»è¢«åŠ è½½ã€è§£æå’Œåˆå§‹åŒ–è¿‡ã€‚å¦‚æœæ²¡æœ‰ï¼Œæ‰§è¡Œç›¸åº”çš„ç±»åŠ è½½ã€‚<br><br>ç±»åŠ è½½æ£€æŸ¥é€šè¿‡ä¹‹åï¼Œä¸ºæ–°å¯¹è±¡åˆ†é…å†…å­˜(å†…å­˜å¤§å°åœ¨ç±»åŠ è½½å®Œæˆåä¾¿å¯ç¡®è®¤)ã€‚åœ¨å †çš„ç©ºé—²å†…å­˜ä¸­åˆ’åˆ†ä¸€å—åŒºåŸŸ(â€˜æŒ‡é’ˆç¢°æ’-å†…å­˜è§„æ•´â€™æˆ–â€˜ç©ºé—²åˆ—è¡¨-å†…å­˜äº¤é”™â€™çš„åˆ†é…æ–¹å¼)ã€‚<br><br>å‰é¢è®²çš„æ¯ä¸ªçº¿ç¨‹åœ¨å †ä¸­éƒ½ä¼šæœ‰ç§æœ‰çš„åˆ†é…ç¼“å†²åŒº(TLAB)ï¼Œè¿™æ ·å¯ä»¥å¾ˆå¤§ç¨‹åº¦é¿å…åœ¨å¹¶å‘æƒ…å†µä¸‹é¢‘ç¹åˆ›å»ºå¯¹è±¡é€ æˆçš„çº¿ç¨‹ä¸å®‰å…¨ã€‚<br><br>å†…å­˜ç©ºé—´åˆ†é…å®Œæˆåä¼šåˆå§‹åŒ–ä¸º 0(ä¸åŒ…æ‹¬å¯¹è±¡å¤´)ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å¡«å……å¯¹è±¡å¤´ï¼ŒæŠŠå¯¹è±¡æ˜¯å“ªä¸ªç±»çš„å®ä¾‹ã€å¦‚ä½•æ‰èƒ½æ‰¾åˆ°ç±»çš„å…ƒæ•°æ®ä¿¡æ¯ã€å¯¹è±¡çš„å“ˆå¸Œç ã€å¯¹è±¡çš„ GC åˆ†ä»£å¹´é¾„ç­‰ä¿¡æ¯å­˜å…¥å¯¹è±¡å¤´ã€‚<br><br>æ‰§è¡Œ new æŒ‡ä»¤åæ‰§è¡Œ init æ–¹æ³•åæ‰ç®—ä¸€ä»½çœŸæ­£å¯ç”¨çš„å¯¹è±¡åˆ›å»ºå®Œæˆã€‚<br></p>
<h4 id="1-2-2-å¯¹è±¡çš„å†…å­˜å¸ƒå±€"><a href="#1-2-2-å¯¹è±¡çš„å†…å­˜å¸ƒå±€" class="headerlink" title="1.2.2 å¯¹è±¡çš„å†…å­˜å¸ƒå±€"></a>1.2.2 å¯¹è±¡çš„å†…å­˜å¸ƒå±€</h4><blockquote>
<p>åœ¨ HotSpot è™šæ‹Ÿæœºä¸­ï¼Œåˆ†ä¸º 3 å—åŒºåŸŸï¼š<code>å¯¹è±¡å¤´(Header)</code>ã€<code>å®ä¾‹æ•°æ®(Instance Data)</code>å’Œ<code>å¯¹é½å¡«å……(Padding)</code></p>
</blockquote>
<p><code>å¯¹è±¡å¤´(Header)</code>ï¼šåŒ…å«ä¸¤éƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ†ç”¨äºå­˜å‚¨å¯¹è±¡è‡ªèº«çš„è¿è¡Œæ—¶æ•°æ®ï¼Œå¦‚å“ˆå¸Œç ã€GC åˆ†ä»£å¹´é¾„ã€é”çŠ¶æ€æ ‡å¿—ã€çº¿ç¨‹æŒæœ‰çš„é”ã€åå‘çº¿ç¨‹ IDã€åå‘æ—¶é—´æˆ³ç­‰ï¼Œ32 ä½è™šæ‹Ÿæœºå  32 bitï¼Œ64 ä½è™šæ‹Ÿæœºå  64 bitã€‚å®˜æ–¹ç§°ä¸º â€˜Mark Wordâ€™ã€‚ç¬¬äºŒéƒ¨åˆ†æ˜¯ç±»å‹æŒ‡é’ˆï¼Œå³å¯¹è±¡æŒ‡å‘å®ƒçš„ç±»çš„å…ƒæ•°æ®æŒ‡é’ˆï¼Œè™šæ‹Ÿæœºé€šè¿‡è¿™ä¸ªæŒ‡é’ˆç¡®å®šè¿™ä¸ªå¯¹è±¡æ˜¯å“ªä¸ªç±»çš„å®ä¾‹ã€‚å¦å¤–ï¼Œå¦‚æœæ˜¯ Java æ•°ç»„ï¼Œå¯¹è±¡å¤´ä¸­è¿˜å¿…é¡»æœ‰ä¸€å—ç”¨äºè®°å½•æ•°ç»„é•¿åº¦çš„æ•°æ®ï¼Œå› ä¸ºæ™®é€šå¯¹è±¡å¯ä»¥é€šè¿‡ Java å¯¹è±¡å…ƒæ•°æ®ç¡®å®šå¤§å°ï¼Œè€Œæ•°ç»„å¯¹è±¡ä¸å¯ä»¥ã€‚<br><br><code>å®ä¾‹æ•°æ®(Instance Data)</code>ï¼šç¨‹åºä»£ç ä¸­æ‰€å®šä¹‰çš„å„ç§ç±»å‹çš„å­—æ®µå†…å®¹(åŒ…å«çˆ¶ç±»ç»§æ‰¿ä¸‹æ¥çš„å’Œå­ç±»ä¸­å®šä¹‰çš„)ã€‚<br><br><code>å¯¹é½å¡«å……(Padding)</code>ï¼šä¸æ˜¯å¿…ç„¶éœ€è¦ï¼Œä¸»è¦æ˜¯å ä½ï¼Œä¿è¯å¯¹è±¡å¤§å°æ˜¯æŸä¸ªå­—èŠ‚çš„æ•´æ•°å€ã€‚<br></p>
<h4 id="1-2-3-å¯¹è±¡çš„è®¿é—®å®šä½"><a href="#1-2-3-å¯¹è±¡çš„è®¿é—®å®šä½" class="headerlink" title="1.2.3 å¯¹è±¡çš„è®¿é—®å®šä½"></a>1.2.3 å¯¹è±¡çš„è®¿é—®å®šä½</h4><blockquote>
<p>ä½¿ç”¨å¯¹è±¡æ—¶ï¼Œé€šè¿‡æ ˆä¸Šçš„ reference æ•°æ®æ¥æ“ä½œå †ä¸Šçš„å…·ä½“å¯¹è±¡ã€‚</p>
</blockquote>
<h5 id="é€šè¿‡å¥æŸ„è®¿é—®"><a href="#é€šè¿‡å¥æŸ„è®¿é—®" class="headerlink" title="é€šè¿‡å¥æŸ„è®¿é—®"></a>é€šè¿‡å¥æŸ„è®¿é—®</h5><blockquote>
<p>Java å †ä¸­ä¼šåˆ†é…ä¸€å—å†…å­˜ä½œä¸ºå¥æŸ„æ± ã€‚reference å­˜å‚¨çš„æ˜¯å¥æŸ„åœ°å€ã€‚è¯¦æƒ…è§å›¾ã€‚</p>
</blockquote>
<p><img src="/2017/09/02/reJVM/jubing.png" alt=""></p>
<h5 id="ä½¿ç”¨ç›´æ¥æŒ‡é’ˆè®¿é—®"><a href="#ä½¿ç”¨ç›´æ¥æŒ‡é’ˆè®¿é—®" class="headerlink" title="ä½¿ç”¨ç›´æ¥æŒ‡é’ˆè®¿é—®"></a>ä½¿ç”¨ç›´æ¥æŒ‡é’ˆè®¿é—®</h5><blockquote>
<p>reference ä¸­ç›´æ¥å­˜å‚¨å¯¹è±¡åœ°å€</p>
</blockquote>
<p><img src="/2017/09/02/reJVM/directpointer.png" alt=""></p>
<p>æ¯”è¾ƒï¼šä½¿ç”¨å¥æŸ„çš„æœ€å¤§å¥½å¤„æ˜¯ reference ä¸­å­˜å‚¨çš„æ˜¯ç¨³å®šçš„å¥æŸ„åœ°å€ï¼Œåœ¨å¯¹è±¡ç§»åŠ¨(GC)æ˜¯åªæ”¹å˜å®ä¾‹æ•°æ®æŒ‡é’ˆåœ°å€ï¼Œreference è‡ªèº«ä¸éœ€è¦ä¿®æ”¹ã€‚ç›´æ¥æŒ‡é’ˆè®¿é—®çš„æœ€å¤§å¥½å¤„æ˜¯é€Ÿåº¦å¿«ï¼ŒèŠ‚çœäº†ä¸€æ¬¡æŒ‡é’ˆå®šä½çš„æ—¶é—´å¼€é”€ã€‚å¦‚æœæ˜¯å¯¹è±¡é¢‘ç¹ GC é‚£ä¹ˆå¥æŸ„æ–¹æ³•å¥½ï¼Œå¦‚æœæ˜¯å¯¹è±¡é¢‘ç¹è®¿é—®åˆ™ç›´æ¥æŒ‡é’ˆè®¿é—®å¥½ã€‚</p>
<h3 id="1-3-å®æˆ˜"><a href="#1-3-å®æˆ˜" class="headerlink" title="1.3 å®æˆ˜"></a>1.3 å®æˆ˜</h3><blockquote>
<p>// å¾…å¡«</p>
</blockquote>
<h2 id="2-åƒåœ¾å›æ”¶å™¨ä¸å†…å­˜åˆ†é…ç­–ç•¥"><a href="#2-åƒåœ¾å›æ”¶å™¨ä¸å†…å­˜åˆ†é…ç­–ç•¥" class="headerlink" title="2. åƒåœ¾å›æ”¶å™¨ä¸å†…å­˜åˆ†é…ç­–ç•¥"></a>2. åƒåœ¾å›æ”¶å™¨ä¸å†…å­˜åˆ†é…ç­–ç•¥</h2><h3 id="2-1-æ¦‚è¿°"><a href="#2-1-æ¦‚è¿°" class="headerlink" title="2.1 æ¦‚è¿°"></a>2.1 æ¦‚è¿°</h3><blockquote>
<p>ç¨‹åºè®¡æ•°å™¨ã€è™šæ‹Ÿæœºæ ˆã€æœ¬åœ°æ–¹æ³•æ ˆ 3 ä¸ªåŒºåŸŸéšçº¿ç¨‹ç”Ÿç­(å› ä¸ºæ˜¯çº¿ç¨‹ç§æœ‰)ï¼Œæ ˆä¸­çš„æ ˆå¸§éšç€æ–¹æ³•çš„è¿›å…¥å’Œé€€å‡ºè€Œæœ‰æ¡ä¸ç´Šåœ°æ‰§è¡Œç€å‡ºæ ˆå’Œå…¥æ ˆæ“ä½œã€‚è€Œ Java å †å’Œæ–¹æ³•åŒºåˆ™ä¸ä¸€æ ·ï¼Œä¸€ä¸ªæ¥å£ä¸­çš„å¤šä¸ªå®ç°ç±»éœ€è¦çš„å†…å­˜å¯èƒ½ä¸ä¸€æ ·ï¼Œä¸€ä¸ªæ–¹æ³•ä¸­çš„å¤šä¸ªåˆ†æ”¯éœ€è¦çš„å†…å­˜ä¹Ÿå¯èƒ½ä¸ä¸€æ ·ï¼Œæˆ‘ä»¬åªæœ‰åœ¨ç¨‹åºå¤„äºè¿è¡ŒæœŸæ‰çŸ¥é“é‚£äº›å¯¹è±¡ä¼šåˆ›å»ºï¼Œè¿™éƒ¨åˆ†å†…å­˜çš„åˆ†é…å’Œå›æ”¶éƒ½æ˜¯åŠ¨æ€çš„ï¼Œåƒåœ¾å›æ”¶æœŸæ‰€å…³æ³¨çš„å°±æ˜¯è¿™éƒ¨åˆ†å†…å­˜ã€‚</p>
</blockquote>
<h3 id="2-2-å¯¹è±¡å·²æ­»å—ï¼Ÿ"><a href="#2-2-å¯¹è±¡å·²æ­»å—ï¼Ÿ" class="headerlink" title="2.2 å¯¹è±¡å·²æ­»å—ï¼Ÿ"></a>2.2 å¯¹è±¡å·²æ­»å—ï¼Ÿ</h3><blockquote>
<p>åœ¨è¿›è¡Œå†…å­˜å›æ”¶ä¹‹å‰è¦åšçš„äº‹æƒ…å°±æ˜¯åˆ¤æ–­é‚£äº›å¯¹è±¡æ˜¯â€˜æ­»â€™çš„ï¼Œå“ªäº›æ˜¯â€˜æ´»â€™çš„ã€‚</p>
</blockquote>
<h4 id="2-2-1-å¼•ç”¨è®¡æ•°æ³•"><a href="#2-2-1-å¼•ç”¨è®¡æ•°æ³•" class="headerlink" title="2.2.1 å¼•ç”¨è®¡æ•°æ³•"></a>2.2.1 å¼•ç”¨è®¡æ•°æ³•</h4><blockquote>
<p>ç»™å¯¹è±¡æ·»åŠ ä¸€ä¸ªå¼•ç”¨è®¡æ•°å™¨ã€‚ä½†æ˜¯éš¾ä»¥è§£å†³å¾ªç¯å¼•ç”¨é—®é¢˜ã€‚</p>
</blockquote>
<p><img src="/2017/09/02/reJVM/referenceCount.png" alt=""><br><br>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œå¦‚æœä¸ä¸‹å°å¿ƒç›´æ¥æŠŠ Obj1-reference å’Œ Obj2-reference ç½® nullã€‚åˆ™åœ¨ Java å †å½“ä¸­çš„ä¸¤å—å†…å­˜ä¾ç„¶ä¿æŒç€äº’ç›¸å¼•ç”¨æ— æ³•å›æ”¶ã€‚</p>
<h4 id="2-2-2-å¯è¾¾æ€§åˆ†ææ³•"><a href="#2-2-2-å¯è¾¾æ€§åˆ†ææ³•" class="headerlink" title="2.2.2 å¯è¾¾æ€§åˆ†ææ³•"></a>2.2.2 å¯è¾¾æ€§åˆ†ææ³•</h4><blockquote>
<p>é€šè¿‡ä¸€ç³»åˆ—çš„ â€˜GC Rootsâ€™ çš„å¯¹è±¡ä½œä¸ºèµ·å§‹ç‚¹ï¼Œä»è¿™äº›èŠ‚ç‚¹å‡ºå‘æ‰€èµ°è¿‡çš„è·¯å¾„ç§°ä¸ºå¼•ç”¨é“¾ã€‚å½“ä¸€ä¸ªå¯¹è±¡åˆ° GC Roots æ²¡æœ‰ä»»ä½•å¼•ç”¨é“¾ç›¸è¿çš„æ—¶å€™è¯´æ˜å¯¹è±¡ä¸å¯ç”¨ã€‚</p>
</blockquote>
<p><img src="/2017/09/02/reJVM/gcTree.png" alt=""></p>
<p>å¯ä½œä¸º GC Roots çš„å¯¹è±¡ï¼š<br></p>
<ul>
<li>è™šæ‹Ÿæœºæ ˆ(æ ˆå¸§ä¸­çš„æœ¬åœ°å˜é‡è¡¨)ä¸­å¼•ç”¨çš„å¯¹è±¡</li>
<li>æ–¹æ³•åŒºä¸­ç±»é™æ€å±æ€§å¼•ç”¨çš„å¯¹è±¡</li>
<li>æ–¹æ³•åŒºä¸­å¸¸é‡å¼•ç”¨çš„å¯¹è±¡</li>
<li>æœ¬åœ°æ–¹æ³•æ ˆä¸­ JNI(å³ä¸€èˆ¬è¯´çš„ Native æ–¹æ³•) å¼•ç”¨çš„å¯¹è±¡</li>
</ul>
<h4 id="2-2-3-å†è°ˆå¼•ç”¨"><a href="#2-2-3-å†è°ˆå¼•ç”¨" class="headerlink" title="2.2.3 å†è°ˆå¼•ç”¨"></a>2.2.3 å†è°ˆå¼•ç”¨</h4><blockquote>
<p>å‰é¢çš„ä¸¤ç§æ–¹å¼åˆ¤æ–­å­˜æ´»æ—¶éƒ½ä¸â€˜å¼•ç”¨â€™æœ‰å…³ã€‚ä½†æ˜¯ JDK 1.2 ä¹‹åï¼Œå¼•ç”¨æ¦‚å¿µè¿›è¡Œäº†æ‰©å……ï¼Œä¸‹é¢å…·ä½“ä»‹ç»ã€‚</p>
</blockquote>
<p>ä¸‹é¢å››ç§å¼•ç”¨å¼ºåº¦ä¸€æ¬¡é€æ¸å‡å¼±<br></p>
<h5 id="å¼ºå¼•ç”¨"><a href="#å¼ºå¼•ç”¨" class="headerlink" title="å¼ºå¼•ç”¨"></a>å¼ºå¼•ç”¨</h5><blockquote>
<p>ç±»ä¼¼äº <code>Object obj = new Object();</code> åˆ›å»ºçš„ï¼Œåªè¦å¼ºå¼•ç”¨åœ¨å°±ä¸å›æ”¶ã€‚ </p>
</blockquote>
<h5 id="è½¯å¼•ç”¨"><a href="#è½¯å¼•ç”¨" class="headerlink" title="è½¯å¼•ç”¨"></a>è½¯å¼•ç”¨</h5><blockquote>
<p>SoftReference ç±»å®ç°è½¯å¼•ç”¨ã€‚åœ¨ç³»ç»Ÿè¦å‘ç”Ÿå†…å­˜æº¢å‡ºå¼‚å¸¸ä¹‹å‰ï¼Œå°†ä¼šæŠŠè¿™äº›å¯¹è±¡åˆ—è¿›å›æ”¶èŒƒå›´ä¹‹ä¸­è¿›è¡ŒäºŒæ¬¡å›æ”¶ã€‚</p>
</blockquote>
<h5 id="å¼±å¼•ç”¨"><a href="#å¼±å¼•ç”¨" class="headerlink" title="å¼±å¼•ç”¨"></a>å¼±å¼•ç”¨</h5><blockquote>
<p>WeakReference ç±»å®ç°å¼±å¼•ç”¨ã€‚å¯¹è±¡åªèƒ½ç”Ÿå­˜åˆ°ä¸‹ä¸€æ¬¡åƒåœ¾æ”¶é›†ä¹‹å‰ã€‚åœ¨åƒåœ¾æ”¶é›†å™¨å·¥ä½œæ—¶ï¼Œæ— è®ºå†…å­˜æ˜¯å¦è¶³å¤Ÿéƒ½ä¼šå›æ”¶æ‰åªè¢«å¼±å¼•ç”¨å…³è”çš„å¯¹è±¡ã€‚</p>
</blockquote>
<h5 id="è™šå¼•ç”¨"><a href="#è™šå¼•ç”¨" class="headerlink" title="è™šå¼•ç”¨"></a>è™šå¼•ç”¨</h5><blockquote>
<p>PhantomReference ç±»å®ç°è™šå¼•ç”¨ã€‚æ— æ³•é€šè¿‡è™šå¼•ç”¨è·å–ä¸€ä¸ªå¯¹è±¡çš„å®ä¾‹ï¼Œä¸ºä¸€ä¸ªå¯¹è±¡è®¾ç½®è™šå¼•ç”¨å…³è”çš„å”¯ä¸€ç›®çš„å°±æ˜¯èƒ½åœ¨è¿™ä¸ªå¯¹è±¡è¢«æ”¶é›†å™¨å›æ”¶æ—¶æ”¶åˆ°ä¸€ä¸ªç³»ç»Ÿé€šçŸ¥ã€‚</p>
</blockquote>
<h4 id="2-2-4-ç”Ÿå­˜è¿˜æ˜¯æ­»äº¡"><a href="#2-2-4-ç”Ÿå­˜è¿˜æ˜¯æ­»äº¡" class="headerlink" title="2.2.4 ç”Ÿå­˜è¿˜æ˜¯æ­»äº¡"></a>2.2.4 ç”Ÿå­˜è¿˜æ˜¯æ­»äº¡</h4><blockquote>
<p>å³ä½¿åœ¨å¯è¾¾æ€§åˆ†æç®—æ³•ä¸­ä¸å¯è¾¾çš„å¯¹è±¡ï¼Œä¹Ÿå¹¶éæ˜¯â€œfacebookâ€çš„ï¼Œè¿™æ—¶å€™å®ƒä»¬æš‚æ—¶å‡ºäºâ€œç¼“åˆ‘â€é˜¶æ®µï¼Œä¸€ä¸ªå¯¹è±¡çš„çœŸæ­£æ­»äº¡è‡³å°‘è¦ç»å†ä¸¤æ¬¡æ ‡è®°è¿‡ç¨‹ï¼šå¦‚æœå¯¹è±¡åœ¨è¿›è¡Œä¸­å¯è¾¾æ€§åˆ†æåå‘ç°æ²¡æœ‰ä¸ GC Roots ç›¸è¿æ¥çš„å¼•ç”¨é“¾ï¼Œé‚£ä»–å°†ä¼šè¢«ç¬¬ä¸€æ¬¡æ ‡è®°å¹¶ä¸”è¿›è¡Œä¸€æ¬¡ç­›é€‰ï¼Œç­›é€‰æ¡ä»¶æ˜¯æ­¤å¯¹è±¡æ˜¯å¦æœ‰å¿…è¦æ‰§è¡Œ finalize() æ–¹æ³•ã€‚å½“å¯¹è±¡æ²¡æœ‰è¦†ç›– finalize() æ–¹æ³•ï¼Œæˆ–è€… finalize() æ–¹æ³•å·²ç»è¢«è™šæ‹Ÿæœºè°ƒç”¨è¿‡ï¼Œè™šæ‹Ÿæœºå°†è¿™ä¸¤ç§æƒ…å†µéƒ½è§†ä¸ºâ€œæ²¡æœ‰å¿…è¦æ‰§è¡Œâ€ã€‚<br><br>å¦‚æœè¿™ä¸ªå¯¹è±¡è¢«åˆ¤å®šä¸ºæœ‰å¿…è¦æ‰§è¡Œ finalize() æ–¹æ³•ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡ç«Ÿä¼šæ”¾ç½®åœ¨ä¸€ä¸ªå«åš F-Queue çš„é˜Ÿåˆ—ä¸­ï¼Œå¹¶åœ¨ç¨åç”±ä¸€ä¸ªç”±è™šæ‹Ÿæœºè‡ªåŠ¨å»ºç«‹çš„ã€ä½ä¼˜å…ˆçº§çš„ Finalizer çº¿ç¨‹å»æ‰§è¡Œå®ƒã€‚è¿™é‡Œæ‰€è°“çš„â€œæ‰§è¡Œâ€æ˜¯æŒ‡è™šæ‹Ÿæœºä¼šå‡ºå‘è¿™ä¸ªæ–¹æ³•ï¼Œå¹¶ä¸æ‰¿è¯ºæˆ–ç­‰å¾…ä»–è¿è¡Œç»“æŸã€‚finalize() æ–¹æ³•æ˜¯å¯¹è±¡é€ƒè„±æ­»äº¡å‘½è¿çš„æœ€åä¸€æ¬¡æœºä¼šï¼Œç¨å GC å°†å¯¹ F-Queue ä¸­çš„å¯¹è±¡è¿›è¡Œç¬¬äºŒæ¬¡å°è§„æ¨¡çš„æ ‡è®°ï¼Œå¦‚æœå¯¹è±¡è¦åœ¨ finalize() ä¸­æˆåŠŸæ‹¯æ•‘è‡ªå·± â€”â€” åªè¦é‡æ–°ä¸å¼•ç”¨é“¾ä¸Šçš„ä»»ä½•ä¸€ä¸ªå¯¹è±¡ç®€å†å…³è”å³å¯ã€‚<br><br>finalize() æ–¹æ³•åªä¼šè¢«ç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨ä¸€æ¬¡ã€‚</p>
</blockquote>
<h4 id="2-2-5-å›æ”¶æ–¹æ³•åŒº"><a href="#2-2-5-å›æ”¶æ–¹æ³•åŒº" class="headerlink" title="2.2.5 å›æ”¶æ–¹æ³•åŒº"></a>2.2.5 å›æ”¶æ–¹æ³•åŒº</h4><blockquote>
<p>åœ¨å †ä¸­ï¼Œå°¤å…¶æ˜¯åœ¨æ–°ç”Ÿä»£ä¸­ï¼Œä¸€æ¬¡åƒåœ¾å›æ”¶ä¸€èˆ¬å¯ä»¥å›æ”¶ 70% ~ 95% çš„ç©ºé—´ï¼Œè€Œæ°¸ä¹…ä»£çš„åƒåœ¾æ”¶é›†æ•ˆç‡è¿œä½äºæ­¤ã€‚<br><br>æ°¸ä¹…ä»£åƒåœ¾å›æ”¶ä¸»è¦ä¸¤éƒ¨åˆ†å†…å®¹ï¼šåºŸå¼ƒçš„å¸¸é‡å’Œæ— ç”¨çš„ç±»ã€‚</p>
</blockquote>
<p>åˆ¤æ–­åºŸå¼ƒå¸¸é‡ï¼šä¸€èˆ¬æ˜¯åˆ¤æ–­æ²¡æœ‰è¯¥å¸¸é‡çš„å¼•ç”¨ã€‚<br><br>åˆ¤æ–­æ— ç”¨çš„ç±»ï¼šè¦ä»¥ä¸‹ä¸‰ä¸ªæ¡ä»¶éƒ½æ»¡è¶³ <br></p>
<ul>
<li>è¯¥ç±»æ‰€æœ‰çš„å®ä¾‹éƒ½å·²ç»å›æ”¶ï¼Œä¹Ÿå°±æ˜¯ Java å †ä¸­ä¸å­˜åœ¨è¯¥ç±»çš„ä»»ä½•å®ä¾‹</li>
<li>åŠ è½½è¯¥ç±»çš„ ClassLoader å·²ç»è¢«å›æ”¶</li>
<li>è¯¥ç±»å¯¹åº”çš„ java.lang.Class å¯¹è±¡æ²¡æœ‰ä»»ä½•åœ°æ–¹å‘—å¼•ç”¨ï¼Œæ— æ³•åœ¨ä»»ä½•åœ°æ–¹é€šè¿‡åå°„è®¿é—®è¯¥ç±»çš„æ–¹æ³•</li>
</ul>
<h3 id="2-3-åƒåœ¾å›æ”¶ç®—æ³•"><a href="#2-3-åƒåœ¾å›æ”¶ç®—æ³•" class="headerlink" title="2.3 åƒåœ¾å›æ”¶ç®—æ³•"></a>2.3 åƒåœ¾å›æ”¶ç®—æ³•</h3><blockquote>
<p>ä»…æä¾›æ€è·¯</p>
</blockquote>
<h4 id="2-3-1-æ ‡è®°-â€”â€”-æ¸…é™¤ç®—æ³•"><a href="#2-3-1-æ ‡è®°-â€”â€”-æ¸…é™¤ç®—æ³•" class="headerlink" title="2.3.1 æ ‡è®° â€”â€” æ¸…é™¤ç®—æ³•"></a>2.3.1 æ ‡è®° â€”â€” æ¸…é™¤ç®—æ³•</h4><blockquote>
<p>ç›´æ¥æ ‡è®°æ¸…é™¤å°±å¯ã€‚</p>
</blockquote>
<p>ä¸¤ä¸ªä¸è¶³ï¼š</p>
<ul>
<li>æ•ˆç‡ä¸é«˜</li>
<li>ç©ºé—´ä¼šäº§ç”Ÿå¤§é‡ç¢ç‰‡</li>
</ul>
<h4 id="2-3-2-å¤åˆ¶ç®—æ³•"><a href="#2-3-2-å¤åˆ¶ç®—æ³•" class="headerlink" title="2.3.2 å¤åˆ¶ç®—æ³•"></a>2.3.2 å¤åˆ¶ç®—æ³•</h4><blockquote>
<p>æŠŠç©ºé—´åˆ†æˆä¸¤å—ï¼Œæ¯æ¬¡åªå¯¹å…¶ä¸­ä¸€å—è¿›è¡Œ GCã€‚å½“è¿™å—å†…å­˜ä½¿ç”¨å®Œæ—¶ï¼Œå°±å°†è¿˜å­˜æ´»çš„å¯¹è±¡å¤åˆ¶åˆ°å¦ä¸€å—ä¸Šé¢ã€‚</p>
</blockquote>
<p>è§£å†³å‰ä¸€ç§æ–¹æ³•çš„ä¸è¶³ï¼Œä½†æ˜¯ä¼šé€ æˆç©ºé—´åˆ©ç”¨ç‡ä½ä¸‹ã€‚å› ä¸ºå¤§å¤šæ•°æ–°ç”Ÿä»£å¯¹è±¡éƒ½ä¸ä¼šç†¬è¿‡ç¬¬ä¸€æ¬¡ GCã€‚æ‰€ä»¥æ²¡å¿…è¦ 1 : 1 åˆ’åˆ†ç©ºé—´ã€‚å¯ä»¥åˆ†ä¸€å—è¾ƒå¤§çš„ Eden ç©ºé—´å’Œä¸¤å—è¾ƒå°çš„ Survivor ç©ºé—´ï¼Œæ¯æ¬¡ä½¿ç”¨ Eden ç©ºé—´å’Œå…¶ä¸­ä¸€å— Survivorã€‚å½“å›æ”¶æ—¶ï¼Œå°† Eden å’Œ Survivor ä¸­è¿˜å­˜æ´»çš„å¯¹è±¡ä¸€æ¬¡æ€§å¤åˆ¶åˆ°å¦ä¸€å— Survivor ä¸Šï¼Œæœ€åæ¸…ç† Eden å’Œ Survivor ç©ºé—´ã€‚å¤§å°æ¯”ä¾‹ä¸€èˆ¬æ˜¯ 8 : 1 : 1ï¼Œæ¯æ¬¡æµªè´¹ 10% çš„ Survivor ç©ºé—´ã€‚ä½†æ˜¯è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯å¦‚æœå­˜æ´»çš„å¤§äº 10% æ€ä¹ˆåŠï¼Ÿè¿™é‡Œé‡‡ç”¨ä¸€ç§åˆ†é…æ‹…ä¿ç­–ç•¥ï¼šå¤šå‡ºæ¥çš„å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£ã€‚</p>
<h4 id="2-3-3-æ ‡è®°-æ•´ç†ç®—æ³•"><a href="#2-3-3-æ ‡è®°-æ•´ç†ç®—æ³•" class="headerlink" title="2.3.3 æ ‡è®°-æ•´ç†ç®—æ³•"></a>2.3.3 æ ‡è®°-æ•´ç†ç®—æ³•</h4><blockquote>
<p>ä¸åŒäºé’ˆå¯¹æ–°ç”Ÿä»£çš„å¤åˆ¶ç®—æ³•ï¼Œé’ˆå¯¹è€å¹´ä»£çš„ç‰¹ç‚¹ï¼Œåˆ›å»ºè¯¥ç®—æ³•ã€‚ä¸»è¦æ˜¯æŠŠå­˜æ´»å¯¹è±¡ç§»åˆ°å†…å­˜çš„ä¸€ç«¯ã€‚</p>
</blockquote>
<h4 id="2-3-4-åˆ†ä»£å›æ”¶"><a href="#2-3-4-åˆ†ä»£å›æ”¶" class="headerlink" title="2.3.4 åˆ†ä»£å›æ”¶"></a>2.3.4 åˆ†ä»£å›æ”¶</h4><blockquote>
<p>æ ¹æ®å­˜æ´»å¯¹è±¡åˆ’åˆ†å‡ å—å†…å­˜åŒºï¼Œä¸€èˆ¬æ˜¯åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€å¹´ä»£ã€‚ç„¶åæ ¹æ®å„ä¸ªå¹´ä»£çš„ç‰¹ç‚¹åˆ¶å®šç›¸åº”çš„å›æ”¶ç®—æ³•ã€‚</p>
</blockquote>
<h5 id="æ–°ç”Ÿä»£"><a href="#æ–°ç”Ÿä»£" class="headerlink" title="æ–°ç”Ÿä»£"></a>æ–°ç”Ÿä»£</h5><blockquote>
<p>æ¯æ¬¡åƒåœ¾å›æ”¶éƒ½æœ‰å¤§é‡å¯¹è±¡æ­»å»ï¼Œåªæœ‰å°‘é‡å­˜æ´»ï¼Œé€‰ç”¨å¤åˆ¶ç®—æ³•æ¯”è¾ƒåˆç†ã€‚</p>
</blockquote>
<h5 id="è€å¹´ä»£"><a href="#è€å¹´ä»£" class="headerlink" title="è€å¹´ä»£"></a>è€å¹´ä»£</h5><blockquote>
<p>è€å¹´ä»£ä¸­å¯¹è±¡å­˜æ´»ç‡è¾ƒé«˜ã€æ²¡æœ‰é¢å¤–çš„ç©ºé—´åˆ†é…å¯¹å®ƒè¿›è¡Œæ‹…ä¿ã€‚æ‰€ä»¥å¿…é¡»ä½¿ç”¨ <code>æ ‡è®° â€”â€” æ¸…é™¤</code> æˆ–è€… <code>æ ‡è®° â€”â€” æ•´ç†</code> ç®—æ³•å›æ”¶ã€‚</p>
</blockquote>
<h3 id="2-4-HotSpot-çš„ç®—æ³•å®ç°"><a href="#2-4-HotSpot-çš„ç®—æ³•å®ç°" class="headerlink" title="2.4 HotSpot çš„ç®—æ³•å®ç°"></a>2.4 HotSpot çš„ç®—æ³•å®ç°</h3><blockquote>
<p>// å¾…å¡«</p>
</blockquote>
<h3 id="2-5-åƒåœ¾å›æ”¶å™¨"><a href="#2-5-åƒåœ¾å›æ”¶å™¨" class="headerlink" title="2.5 åƒåœ¾å›æ”¶å™¨"></a>2.5 åƒåœ¾å›æ”¶å™¨</h3><blockquote>
<p>æ”¶é›†ç®—æ³•æ˜¯å†…å­˜å›æ”¶çš„ç†è®ºï¼Œè€Œåƒåœ¾å›æ”¶å™¨æ˜¯å†…å­˜å›æ”¶çš„å®è·µã€‚</p>
</blockquote>
<p><img src="/2017/09/02/reJVM/hotspotGCDevice.png" alt=""><br><br>è¯´æ˜ï¼šå¦‚æœä¸¤ä¸ªæ”¶é›†å™¨ä¹‹é—´å­˜åœ¨è¿çº¿è¯´æ˜ä»–ä»¬ä¹‹é—´å¯ä»¥æ­é…ä½¿ç”¨ã€‚</p>
<h4 id="2-5-1-Serial-æ”¶é›†å™¨"><a href="#2-5-1-Serial-æ”¶é›†å™¨" class="headerlink" title="2.5.1 Serial æ”¶é›†å™¨"></a>2.5.1 Serial æ”¶é›†å™¨</h4><blockquote>
<p>è¿™æ˜¯ä¸€ä¸ªå•çº¿ç¨‹æ”¶é›†å™¨ã€‚æ„å‘³ç€å®ƒåªä¼šä½¿ç”¨ä¸€ä¸ª CPU æˆ–ä¸€æ¡æ”¶é›†çº¿ç¨‹å»å®Œæˆæ”¶é›†å·¥ä½œï¼Œå¹¶ä¸”åœ¨è¿›è¡Œåƒåœ¾å›æ”¶æ—¶å¿…é¡»æš‚åœå…¶å®ƒæ‰€æœ‰çš„å·¥ä½œçº¿ç¨‹ç›´åˆ°æ”¶é›†ç»“æŸã€‚</p>
</blockquote>
<p><img src="/2017/09/02/reJVM/serial.png" alt=""></p>
<h4 id="2-5-2-ParNew-æ”¶é›†å™¨"><a href="#2-5-2-ParNew-æ”¶é›†å™¨" class="headerlink" title="2.5.2 ParNew æ”¶é›†å™¨"></a>2.5.2 ParNew æ”¶é›†å™¨</h4><blockquote>
<p>å¯ä»¥è®¤ä¸ºæ˜¯ Serial æ”¶é›†å™¨çš„å¤šçº¿ç¨‹ç‰ˆæœ¬ã€‚</p>
</blockquote>
<p><img src="/2017/09/02/reJVM/parnew.png" alt=""></p>
<h5 id="å¹¶è¡Œï¼šParallel"><a href="#å¹¶è¡Œï¼šParallel" class="headerlink" title="å¹¶è¡Œï¼šParallel"></a>å¹¶è¡Œï¼šParallel</h5><blockquote>
<p>æŒ‡å¤šæ¡åƒåœ¾æ”¶é›†çº¿ç¨‹å¹¶è¡Œå·¥ä½œï¼Œæ­¤æ—¶ç”¨æˆ·çº¿ç¨‹å¤„äºç­‰å¾…çŠ¶æ€</p>
</blockquote>
<h5 id="å¹¶å‘ï¼šConcurrent"><a href="#å¹¶å‘ï¼šConcurrent" class="headerlink" title="å¹¶å‘ï¼šConcurrent"></a>å¹¶å‘ï¼šConcurrent</h5><blockquote>
<p>æŒ‡ç”¨æˆ·çº¿ç¨‹å’Œåƒåœ¾å›æ”¶çº¿ç¨‹åŒæ—¶æ‰§è¡Œ(ä¸ä¸€å®šæ˜¯å¹¶è¡Œï¼Œæœ‰å¯èƒ½æ˜¯äº¤å‰æ‰§è¡Œ)ï¼Œç”¨æˆ·è¿›ç¨‹åœ¨è¿è¡Œï¼Œè€Œåƒåœ¾å›æ”¶çº¿ç¨‹åœ¨å¦ä¸€ä¸ª CPU ä¸Šè¿è¡Œã€‚</p>
</blockquote>
<h4 id="2-5-3-Parallel-Scavenge-æ”¶é›†å™¨"><a href="#2-5-3-Parallel-Scavenge-æ”¶é›†å™¨" class="headerlink" title="2.5.3 Parallel Scavenge æ”¶é›†å™¨"></a>2.5.3 Parallel Scavenge æ”¶é›†å™¨</h4><blockquote>
<p>è¿™æ˜¯ä¸€ä¸ªæ–°ç”Ÿä»£æ”¶é›†å™¨ï¼Œä¹Ÿæ˜¯ä½¿ç”¨å¤åˆ¶ç®—æ³•å®ç°ï¼ŒåŒæ—¶ä¹Ÿæ˜¯å¹¶è¡Œçš„å¤šçº¿ç¨‹æ”¶é›†å™¨ã€‚</p>
</blockquote>
<p>CMS ç­‰æ”¶é›†å™¨çš„å…³æ³¨ç‚¹æ˜¯å°½å¯èƒ½åœ°ç¼©çŸ­åƒåœ¾æ”¶é›†æ—¶ç”¨æˆ·çº¿ç¨‹æ‰€åœé¡¿çš„æ—¶é—´ï¼Œè€Œ Parallel Scavenge æ”¶é›†å™¨çš„ç›®çš„æ˜¯è¾¾åˆ°ä¸€ä¸ªå¯æ§åˆ¶çš„ååé‡(Throughput = è¿è¡Œç”¨æˆ·ä»£ç æ—¶é—´ / (è¿è¡Œç”¨æˆ·ä»£ç æ—¶é—´ + åƒåœ¾æ”¶é›†æ—¶é—´))ã€‚<br><br>ä½œä¸ºä¸€ä¸ªååé‡ä¼˜å…ˆçš„æ”¶é›†å™¨ï¼Œè™šæ‹Ÿæœºä¼šæ ¹æ®å½“å‰ç³»ç»Ÿçš„è¿è¡Œæƒ…å†µæ”¶é›†æ€§èƒ½ç›‘æ§ä¿¡æ¯ï¼ŒåŠ¨æ€è°ƒæ•´åœé¡¿æ—¶é—´ã€‚è¿™å°±æ˜¯ GC çš„è‡ªé€‚åº”è°ƒæ•´ç­–ç•¥(GC Ergonomics)ã€‚</p>
<h4 id="2-5-4-Serial-Old-æ”¶é›†å™¨"><a href="#2-5-4-Serial-Old-æ”¶é›†å™¨" class="headerlink" title="2.5.4 Serial Old æ”¶é›†å™¨"></a>2.5.4 Serial Old æ”¶é›†å™¨</h4><blockquote>
<p>æ”¶é›†å™¨çš„è€å¹´ä»£ç‰ˆæœ¬ï¼Œå•çº¿ç¨‹ï¼Œä½¿ç”¨ <code>æ ‡è®° â€”â€” æ•´ç†</code>ã€‚</p>
</blockquote>
<p><img src="/2017/09/02/reJVM/serial.png" alt=""></p>
<h4 id="2-5-5-Parallel-Old-æ”¶é›†å™¨"><a href="#2-5-5-Parallel-Old-æ”¶é›†å™¨" class="headerlink" title="2.5.5 Parallel Old æ”¶é›†å™¨"></a>2.5.5 Parallel Old æ”¶é›†å™¨</h4><blockquote>
<p>Parallel Old æ˜¯ Parallel Scavenge æ”¶é›†å™¨çš„è€å¹´ä»£ç‰ˆæœ¬ã€‚å¤šçº¿ç¨‹ï¼Œä½¿ç”¨ <code>æ ‡è®° â€”â€” æ•´ç†</code></p>
</blockquote>
<p><img src="/2017/09/02/reJVM/parallelOld.png" alt=""></p>
<h4 id="2-5-6-CMS-æ”¶é›†å™¨"><a href="#2-5-6-CMS-æ”¶é›†å™¨" class="headerlink" title="2.5.6 CMS æ”¶é›†å™¨"></a>2.5.6 CMS æ”¶é›†å™¨</h4><blockquote>
<p>CMS (Concurrent Mark Sweep) æ”¶é›†å™¨æ˜¯ä¸€ç§ä»¥è·å–æœ€çŸ­å›æ”¶åœé¡¿æ—¶é—´ä¸ºç›®æ ‡çš„æ”¶é›†å™¨ã€‚åŸºäº <code>æ ‡è®° â€”â€” æ¸…é™¤</code> ç®—æ³•å®ç°ã€‚</p>
</blockquote>
<p>è¿ä½œæ­¥éª¤: <br></p>
<ol>
<li>åˆå§‹æ ‡è®°(CMS initial mark)ï¼šæ ‡è®° GC Roots èƒ½ç›´æ¥å…³è”åˆ°çš„å¯¹è±¡</li>
<li>å¹¶å‘æ ‡è®°(CMS concurrent mark)ï¼šè¿›è¡Œ GC Roots Tracing</li>
<li>é‡æ–°æ ‡è®°(CMS remark)ï¼šä¿®æ­£å¹¶å‘æ ‡è®°æœŸé—´çš„å˜åŠ¨éƒ¨åˆ†</li>
<li>å¹¶å‘æ¸…é™¤(CMS concurrent sweep)</li>
</ol>
<p><img src="/2017/09/02/reJVM/concurrentMarkSweep.png" alt=""></p>
<p>ç¼ºç‚¹ï¼šå¯¹ CPU èµ„æºæ•æ„Ÿã€æ— æ³•æ”¶é›†æµ®åŠ¨åƒåœ¾ã€<code>æ ‡è®° â€”â€” æ¸…é™¤</code> ç®—æ³•å¸¦æ¥çš„ç©ºé—´ç¢ç‰‡</p>
<h4 id="2-5-7-G1-æ”¶é›†å™¨"><a href="#2-5-7-G1-æ”¶é›†å™¨" class="headerlink" title="2.5.7 G1 æ”¶é›†å™¨"></a>2.5.7 G1 æ”¶é›†å™¨</h4><blockquote>
<p>é¢å‘æœåŠ¡ç«¯çš„åƒåœ¾å›æ”¶å™¨ã€‚</p>
</blockquote>
<p>ä¼˜ç‚¹ï¼šå¹¶è¡Œä¸å¹¶å‘ã€åˆ†ä»£æ”¶é›†ã€ç©ºé—´æ•´åˆã€å¯é¢„æµ‹åœé¡¿ã€‚</p>
<p>è¿ä½œæ­¥éª¤: <br></p>
<ol>
<li>åˆå§‹æ ‡è®°(Initial Marking)</li>
<li>å¹¶å‘æ ‡è®°(Concurrent Marking)</li>
<li>æœ€ç»ˆæ ‡è®°(Final Marking)</li>
<li>ç­›é€‰å›æ”¶(Live Data Counting and Evacuation)</li>
</ol>
<p><img src="/2017/09/02/reJVM/G1.png" alt=""></p>
<h3 id="2-6-å†…å­˜åˆ†é…ä¸å›æ”¶ç­–ç•¥"><a href="#2-6-å†…å­˜åˆ†é…ä¸å›æ”¶ç­–ç•¥" class="headerlink" title="2.6 å†…å­˜åˆ†é…ä¸å›æ”¶ç­–ç•¥"></a>2.6 å†…å­˜åˆ†é…ä¸å›æ”¶ç­–ç•¥</h3><h4 id="2-6-1-å¯¹è±¡ä¼˜å…ˆåœ¨-Eden-åˆ†é…"><a href="#2-6-1-å¯¹è±¡ä¼˜å…ˆåœ¨-Eden-åˆ†é…" class="headerlink" title="2.6.1 å¯¹è±¡ä¼˜å…ˆåœ¨ Eden åˆ†é…"></a>2.6.1 å¯¹è±¡ä¼˜å…ˆåœ¨ Eden åˆ†é…</h4><blockquote>
<p>å¯¹è±¡ä¸»è¦åˆ†é…åœ¨æ–°ç”Ÿä»£çš„ Eden åŒºä¸Šï¼Œå¦‚æœå¯åŠ¨äº†æœ¬åœ°çº¿ç¨‹åˆ†é…ç¼“å†²åŒºï¼Œå°†çº¿ç¨‹ä¼˜å…ˆåœ¨ (TLAB) ä¸Šåˆ†é…ã€‚å°‘æ•°æƒ…å†µä¼šç›´æ¥åˆ†é…åœ¨è€å¹´ä»£ä¸­ã€‚</p>
</blockquote>
<p>ä¸€èˆ¬æ¥è¯´ Java å †çš„å†…å­˜æ¨¡å‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><br><img src="/2017/09/02/reJVM/heapModel.png" alt=""></p>
<h5 id="æ–°ç”Ÿä»£-GC-Minor-GC"><a href="#æ–°ç”Ÿä»£-GC-Minor-GC" class="headerlink" title="æ–°ç”Ÿä»£ GC (Minor GC)"></a>æ–°ç”Ÿä»£ GC (Minor GC)</h5><blockquote>
<p>å‘ç”Ÿåœ¨æ–°ç”Ÿä»£çš„åƒåœ¾å›æ”¶åŠ¨ä½œï¼Œé¢‘ç¹ï¼Œé€Ÿåº¦å¿«ã€‚</p>
</blockquote>
<h5 id="è€å¹´ä»£-GC-Major-GC-Full-GC"><a href="#è€å¹´ä»£-GC-Major-GC-Full-GC" class="headerlink" title="è€å¹´ä»£ GC (Major GC / Full GC)"></a>è€å¹´ä»£ GC (Major GC / Full GC)</h5><blockquote>
<p>å‘ç”Ÿåœ¨è€å¹´ä»£çš„åƒåœ¾å›æ”¶åŠ¨ä½œï¼Œå‡ºç°äº† Major GC ç»å¸¸ä¼šä¼´éšè‡³å°‘ä¸€æ¬¡ Minor GC(éç»å¯¹)ã€‚Major GC çš„é€Ÿåº¦ä¸€èˆ¬ä¼šæ¯” Minor GC æ…¢åå€ä»¥ä¸Šã€‚</p>
</blockquote>
<h4 id="2-6-2-å¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£"><a href="#2-6-2-å¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£" class="headerlink" title="2.6.2 å¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£"></a>2.6.2 å¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£</h4><h4 id="2-6-3-é•¿æœŸå­˜æ´»çš„å¯¹è±¡å°†è¿›å…¥è€å¹´ä»£"><a href="#2-6-3-é•¿æœŸå­˜æ´»çš„å¯¹è±¡å°†è¿›å…¥è€å¹´ä»£" class="headerlink" title="2.6.3 é•¿æœŸå­˜æ´»çš„å¯¹è±¡å°†è¿›å…¥è€å¹´ä»£"></a>2.6.3 é•¿æœŸå­˜æ´»çš„å¯¹è±¡å°†è¿›å…¥è€å¹´ä»£</h4><h4 id="2-6-4-åŠ¨æ€å¯¹è±¡å¹´é¾„åˆ¤å®š"><a href="#2-6-4-åŠ¨æ€å¯¹è±¡å¹´é¾„åˆ¤å®š" class="headerlink" title="2.6.4 åŠ¨æ€å¯¹è±¡å¹´é¾„åˆ¤å®š"></a>2.6.4 åŠ¨æ€å¯¹è±¡å¹´é¾„åˆ¤å®š</h4><h4 id="2-6-5-ç©ºé—´åˆ†é…æ‹…ä¿"><a href="#2-6-5-ç©ºé—´åˆ†é…æ‹…ä¿" class="headerlink" title="2.6.5 ç©ºé—´åˆ†é…æ‹…ä¿"></a>2.6.5 ç©ºé—´åˆ†é…æ‹…ä¿</h4><h2 id="3-Java-å†…å­˜æ¨¡å‹ä¸çº¿ç¨‹"><a href="#3-Java-å†…å­˜æ¨¡å‹ä¸çº¿ç¨‹" class="headerlink" title="3. Java å†…å­˜æ¨¡å‹ä¸çº¿ç¨‹"></a>3. Java å†…å­˜æ¨¡å‹ä¸çº¿ç¨‹</h2><p><img src="/2017/09/02/reJVM/cpuCacheMemory.png" alt=""></p>
<h3 id="3-1-Java-å†…å­˜æ¨¡å‹"><a href="#3-1-Java-å†…å­˜æ¨¡å‹" class="headerlink" title="3.1 Java å†…å­˜æ¨¡å‹"></a>3.1 Java å†…å­˜æ¨¡å‹</h3><blockquote>
<p>å±è”½æ‰å„ç§ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿçš„å†…å­˜è®¿é—®å·®å¼‚ã€‚</p>
</blockquote>
<p><img src="/2017/09/02/reJVM/threadMemory.png" alt=""></p>
<h4 id="3-1-1-ä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜ä¹‹é—´çš„äº¤äº’"><a href="#3-1-1-ä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜ä¹‹é—´çš„äº¤äº’" class="headerlink" title="3.1.1 ä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜ä¹‹é—´çš„äº¤äº’"></a>3.1.1 ä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜ä¹‹é—´çš„äº¤äº’</h4><table>
<thead>
<tr>
<th style="text-align:center">æ“ä½œ</th>
<th style="text-align:center">ä½œç”¨å¯¹è±¡</th>
<th style="text-align:center">è§£é‡Š</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">lock</td>
<td style="text-align:center">ä¸»å†…å­˜</td>
<td style="text-align:center">æŠŠä¸€ä¸ªå˜é‡æ ‡è¯†ä¸ºä¸€æ¡çº¿ç¨‹ç‹¬å çš„çŠ¶æ€</td>
</tr>
<tr>
<td style="text-align:center">unlock</td>
<td style="text-align:center">ä¸»å†…å­˜</td>
<td style="text-align:center">æŠŠä¸€ä¸ªå¤„äºé”å®šçŠ¶æ€çš„å˜é‡é‡Šæ”¾å‡ºæ¥ï¼Œé‡Šæ”¾åæ‰å¯è¢«å…¶ä»–çº¿ç¨‹é”å®š</td>
</tr>
<tr>
<td style="text-align:center">read</td>
<td style="text-align:center">ä¸»å†…å­˜</td>
<td style="text-align:center">æŠŠä¸€ä¸ªå˜é‡çš„å€¼ä»ä¸»å†…å­˜ä¼ è¾“åˆ°çº¿ç¨‹å·¥ä½œå†…å­˜ä¸­ï¼Œä»¥ä¾¿ load æ“ä½œä½¿ç”¨</td>
</tr>
<tr>
<td style="text-align:center">load</td>
<td style="text-align:center">å·¥ä½œå†…å­˜</td>
<td style="text-align:center">æŠŠ read æ“ä½œä»ä¸»å†…å­˜ä¸­å¾—åˆ°çš„å˜é‡å€¼æ”¾å…¥å·¥ä½œå†…å­˜ä¸­</td>
</tr>
<tr>
<td style="text-align:center">use</td>
<td style="text-align:center">å·¥ä½œå†…å­˜</td>
<td style="text-align:center">æŠŠå·¥ä½œå†…å­˜ä¸­ä¸€ä¸ªå˜é‡çš„å€¼ä¼ é€’ç»™æ‰§è¡Œå¼•æ“ï¼Œ<br> æ¯å½“è™šæ‹Ÿæœºé‡åˆ°ä¸€ä¸ªéœ€è¦ä½¿ç”¨åˆ°å˜é‡å€¼çš„å­—èŠ‚ç æŒ‡ä»¤æ—¶å°†ä¼šæ‰§è¡Œè¿™ä¸ªæ“ä½œ</td>
</tr>
<tr>
<td style="text-align:center">assign</td>
<td style="text-align:center">å·¥ä½œå†…å­˜</td>
<td style="text-align:center">æŠŠä¸€ä¸ªä»æ‰§è¡Œå¼•æ“æ¥æ”¶åˆ°çš„å€¼èµ‹æ¥æ”¶åˆ°çš„å€¼èµ‹ç»™å·¥ä½œå†…å­˜çš„å˜é‡ï¼Œ<br> æ¯å½“è™šæ‹Ÿæœºé‡åˆ°ä¸€ä¸ªç»™å˜é‡èµ‹å€¼çš„å­—èŠ‚ç æŒ‡ä»¤æ—¶æ‰§è¡Œè¿™ä¸ªæ“ä½œ</td>
</tr>
<tr>
<td style="text-align:center">store</td>
<td style="text-align:center">å·¥ä½œå†…å­˜</td>
<td style="text-align:center">æŠŠå·¥ä½œå†…å­˜ä¸­çš„ä¸€ä¸ªå˜é‡çš„å€¼ä¼ é€åˆ°ä¸»å†…å­˜ä¸­ï¼Œä»¥ä¾¿ write æ“ä½œ</td>
</tr>
<tr>
<td style="text-align:center">write</td>
<td style="text-align:center">å·¥ä½œå†…å­˜</td>
<td style="text-align:center">æŠŠ store æ“ä½œä»å·¥ä½œå†…å­˜ä¸­å¾—åˆ°çš„å˜é‡çš„å€¼æ”¾å…¥ä¸»å†…å­˜çš„å˜é‡ä¸­</td>
</tr>
</tbody>
</table>
<h4 id="3-1-2-å¯¹äº-volatile-å‹å˜é‡çš„ç‰¹æ®Šè§„åˆ™"><a href="#3-1-2-å¯¹äº-volatile-å‹å˜é‡çš„ç‰¹æ®Šè§„åˆ™" class="headerlink" title="3.1.2 å¯¹äº volatile å‹å˜é‡çš„ç‰¹æ®Šè§„åˆ™"></a>3.1.2 å¯¹äº volatile å‹å˜é‡çš„ç‰¹æ®Šè§„åˆ™</h4><blockquote>
<p>å…³é”®å­— volatile æ˜¯ Java è™šæ‹Ÿæœºæä¾›çš„æœ€è½»é‡çº§çš„åŒæ­¥æœºåˆ¶ã€‚</p>
</blockquote>
<p>ä¸€ä¸ªå˜é‡è¢«å®šä¹‰ä¸º volatile çš„ç‰¹æ€§ï¼š<br></p>
<ol>
<li>ä¿è¯æ­¤å˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹çš„å¯è§æ€§ã€‚ä½†æ˜¯æ“ä½œå¹¶éåŸå­æ“ä½œï¼Œå¹¶å‘æƒ…å†µä¸‹ä¸å®‰å…¨ã€‚<br></li>
</ol>
<blockquote>
<p>å¦‚æœä¸ç¬¦åˆ <code>è¿ç®—ç»“æœå¹¶ä¸ä¾èµ–å˜é‡å½“å‰å€¼ï¼Œæˆ–è€…èƒ½å¤Ÿç¡®ä¿åªæœ‰å•ä¸€çš„çº¿ç¨‹ä¿®æ”¹å˜é‡çš„å€¼</code> å’Œ <code>å˜é‡ä¸éœ€è¦ä¸å…¶ä»–çš„çŠ¶æ€å˜é‡å…±åŒå‚ä¸ä¸å˜çº¦æŸ</code> å°±è¦é€šè¿‡åŠ é”(ä½¿ç”¨ synchronize æˆ– java.util.concurrent ä¸­çš„åŸå­ç±»)æ¥ä¿è¯åŸå­æ€§ã€‚</p>
</blockquote>
<ol>
<li>ç¦æ­¢æŒ‡ä»¤é‡æ’åºä¼˜åŒ–ã€‚</li>
</ol>
<blockquote>
<p>é€šè¿‡æ’å…¥å†…å­˜å±éšœä¿è¯ä¸€è‡´æ€§ã€‚</p>
</blockquote>
<h4 id="3-1-3-å¯¹äº-long-å’Œ-double-å‹å˜é‡çš„ç‰¹æ®Šè§„åˆ™"><a href="#3-1-3-å¯¹äº-long-å’Œ-double-å‹å˜é‡çš„ç‰¹æ®Šè§„åˆ™" class="headerlink" title="3.1.3 å¯¹äº long å’Œ double å‹å˜é‡çš„ç‰¹æ®Šè§„åˆ™"></a>3.1.3 å¯¹äº long å’Œ double å‹å˜é‡çš„ç‰¹æ®Šè§„åˆ™</h4><blockquote>
<p>Java è¦æ±‚å¯¹äºä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜ä¹‹é—´çš„å…«ä¸ªæ“ä½œéƒ½æ˜¯åŸå­æ€§çš„ï¼Œä½†æ˜¯å¯¹äº 64 ä½çš„æ•°æ®ç±»å‹ï¼Œæœ‰ä¸€æ¡å®½æ¾çš„è§„å®šï¼šå…è®¸è™šæ‹Ÿæœºå°†æ²¡æœ‰è¢« volatile ä¿®é¥°çš„ 64 ä½æ•°æ®çš„è¯»å†™æ“ä½œåˆ’åˆ†ä¸ºä¸¤æ¬¡ 32 ä½çš„æ“ä½œæ¥è¿›è¡Œï¼Œå³å…è®¸è™šæ‹Ÿæœºå®ç°é€‰æ‹©å¯ä»¥ä¸ä¿è¯ 64 ä½æ•°æ®ç±»å‹çš„ loadã€storeã€read å’Œ write è¿™ 4 ä¸ªæ“ä½œçš„åŸå­æ€§ã€‚è¿™å°±æ˜¯ long å’Œ double çš„éåŸå­æ€§åå®šã€‚</p>
</blockquote>
<h4 id="3-1-4-åŸå­æ€§ã€å¯è§æ€§ä¸æœ‰åºæ€§"><a href="#3-1-4-åŸå­æ€§ã€å¯è§æ€§ä¸æœ‰åºæ€§" class="headerlink" title="3.1.4 åŸå­æ€§ã€å¯è§æ€§ä¸æœ‰åºæ€§"></a>3.1.4 åŸå­æ€§ã€å¯è§æ€§ä¸æœ‰åºæ€§</h4><blockquote>
<p>å›é¡¾ä¸‹å¹¶å‘ä¸‹åº”è¯¥æ³¨æ„æ“ä½œçš„é‚£äº›ç‰¹æ€§æ˜¯ä»€ä¹ˆï¼ŒåŒæ—¶åŠ æ·±ç†è§£ã€‚</p>
</blockquote>
<ul>
<li>åŸå­æ€§(Atomicity)</li>
</ul>
<blockquote>
<p>ç”± Java å†…å­˜æ¨¡å‹æ¥ç›´æ¥ä¿è¯çš„åŸå­æ€§å˜é‡æ“ä½œåŒ…æ‹¬ readã€loadã€assignã€useã€store å’Œ writeã€‚å¤§è‡´å¯ä»¥è®¤ä¸ºåŸºæœ¬æ•°æ®ç±»å‹çš„æ“ä½œæ˜¯åŸå­æ€§çš„ã€‚åŒæ—¶ lock å’Œ unlock å¯ä»¥ä¿è¯æ›´å¤§èŒƒå›´æ“ä½œçš„åŸå­æ€§ã€‚è€Œ synchronize åŒæ­¥å—æ“ä½œçš„åŸå­æ€§æ˜¯ç”¨æ›´é«˜å±‚æ¬¡çš„å­—èŠ‚ç æŒ‡ä»¤ monitorenter å’Œ monitorexit æ¥éšå¼æ“ä½œçš„ã€‚</p>
</blockquote>
<ul>
<li>å¯è§æ€§(Visibility)</li>
</ul>
<blockquote>
<p>æ˜¯æŒ‡å½“ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†å…±äº«å˜é‡çš„å€¼ï¼Œå…¶ä»–çº¿ç¨‹ä¹Ÿèƒ½å¤Ÿç«‹å³å¾—çŸ¥è¿™ä¸ªé€šçŸ¥ã€‚ä¸»è¦æ“ä½œç»†èŠ‚å°±æ˜¯ä¿®æ”¹å€¼åå°†å€¼åŒæ­¥è‡³ä¸»å†…å­˜(volatile å€¼ä½¿ç”¨å‰éƒ½ä¼šä»ä¸»å†…å­˜åˆ·æ–°)ï¼Œé™¤äº† volatile è¿˜æœ‰ synchronize å’Œ final å¯ä»¥ä¿è¯å¯è§æ€§ã€‚åŒæ­¥å—çš„å¯è§æ€§æ˜¯ç”±â€œå¯¹ä¸€ä¸ªå˜é‡æ‰§è¡Œ unlock æ“ä½œä¹‹å‰ï¼Œå¿…é¡»å…ˆæŠŠæ­¤å˜é‡åŒæ­¥ä¼šä¸»å†…å­˜ä¸­( storeã€write æ“ä½œ)â€è¿™æ¡è§„åˆ™è·å¾—ã€‚è€Œ final å¯è§æ€§æ˜¯æŒ‡ï¼šè¢« final ä¿®é¥°çš„å­—æ®µåœ¨æ„é€ å™¨ä¸­ä¸€æ—¦å®Œæˆï¼Œå¹¶ä¸”æ„é€ å™¨æ²¡æœ‰æŠŠ â€œthisâ€ çš„å¼•ç”¨ä¼ é€’å‡ºå»( this å¼•ç”¨é€ƒé€¸æ˜¯ä¸€ä»¶å¾ˆå±é™©çš„äº‹æƒ…ï¼Œå…¶ä»–çº¿ç¨‹æœ‰å¯èƒ½é€šè¿‡è¿™ä¸ªå¼•ç”¨è®¿é—®åˆ°â€œåˆå§‹åŒ–äº†ä¸€åŠâ€çš„å¯¹è±¡)ï¼Œé‚£åœ¨å…¶ä»–çº¿ç¨‹ä¸­å°±èƒ½çœ‹è§ final å­—æ®µçš„å€¼ã€‚</p>
</blockquote>
<ul>
<li>æœ‰åºæ€§(Ordering)</li>
</ul>
<blockquote>
<p>å¦‚æœåœ¨è¢«çº¿ç¨‹å†…è§‚å¯Ÿï¼Œæ‰€æœ‰æ“ä½œéƒ½æ˜¯æœ‰åºçš„ï¼›å¦‚æœåœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­è§‚å¯Ÿå¦ä¸€ä¸ªçº¿ç¨‹ï¼Œæ‰€æœ‰æ“ä½œéƒ½æ˜¯æ— åºçš„ã€‚å‰åŠå¥æŒ‡â€œçº¿ç¨‹å†…è¡¨ç°ä¸ºä¸²è¡Œçš„è¯­ä¹‰â€ï¼ŒååŠå¥æ˜¯æŒ‡â€œæŒ‡ä»¤é‡æ’â€ç°è±¡å’Œâ€œå·¥ä½œå†…å­˜ä¸ä¸»å†…å­˜åŒæ­¥å»¶è¿Ÿâ€ç°è±¡ã€‚Java è¯­è¨€é€šè¿‡ volatile å’Œ synchronize ä¸¤ä¸ªå…³é”®å­—æ¥ä¿è¯çº¿ç¨‹ä¹‹é—´æ“ä½œçš„æœ‰åºæ€§ã€‚volatile è‡ªèº«å°±ç¦æ­¢æŒ‡ä»¤é‡æ’ï¼Œè€Œ synchronize åˆ™æ˜¯ç”±â€œä¸€ä¸ªå˜é‡åœ¨åŒä¸€æ—¶åˆ»æŒ‡å…è®¸ä¸€æ¡çº¿ç¨‹å¯¹å…¶è¿›è¡Œ lock æ“ä½œâ€è¿™æ¡è§„åˆ™è·å¾—ï¼Œè¿™æ¡è§„åˆ™å†³å®šäº†æŒæœ‰åŒä¸€ä¸ªé”çš„ä¸¤ä¸ªåŒæ­¥å—åªèƒ½ä¸²è¡Œçš„è¿›å…¥ã€‚</p>
</blockquote>
<h4 id="3-1-5-å…ˆè¡Œå‘ç”ŸåŸåˆ™"><a href="#3-1-5-å…ˆè¡Œå‘ç”ŸåŸåˆ™" class="headerlink" title="3.1.5 å…ˆè¡Œå‘ç”ŸåŸåˆ™"></a>3.1.5 å…ˆè¡Œå‘ç”ŸåŸåˆ™</h4><blockquote>
<p>ä¹Ÿå°±æ˜¯ happens-before åŸåˆ™ã€‚è¿™ä¸ªåŸåˆ™æ˜¯åˆ¤æ–­æ•°æ®æ˜¯å¦å­˜åœ¨ç«äº‰ã€çº¿ç¨‹æ˜¯å¦å®‰å…¨çš„ä¸»è¦ä¾æ®ã€‚å…ˆè¡Œå‘ç”Ÿæ˜¯ Java å†…å­˜æ¨¡å‹ä¸­å®šä¹‰çš„ä¸¤é¡¹æ“ä½œä¹‹é—´çš„ååºå…³ç³»ã€‚</p>
</blockquote>
<p>å¤©ç„¶çš„å…ˆè¡Œå‘ç”Ÿå…³ç³»</p>
<table>
<thead>
<tr>
<th style="text-align:center">è§„åˆ™</th>
<th style="text-align:center">è§£é‡Š</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">ç¨‹åºæ¬¡åºè§„åˆ™</td>
<td style="text-align:center">åœ¨ä¸€ä¸ªçº¿ç¨‹å†…ï¼Œä»£ç æŒ‰ç…§ä¹¦å†™çš„æ§åˆ¶æµé¡ºåºæ‰§è¡Œ</td>
</tr>
<tr>
<td style="text-align:center">ç®¡ç¨‹é”å®šè§„åˆ™</td>
<td style="text-align:center">ä¸€ä¸ª unlock æ“ä½œå…ˆè¡Œå‘ç”Ÿäºåé¢å¯¹åŒä¸€ä¸ªé”çš„ lock æ“ä½œ</td>
</tr>
<tr>
<td style="text-align:center">volatile å˜é‡è§„åˆ™</td>
<td style="text-align:center">volatile å˜é‡çš„å†™æ“ä½œå…ˆè¡Œå‘ç”Ÿäºåé¢å¯¹è¿™ä¸ªå˜é‡çš„è¯»æ“ä½œ</td>
</tr>
<tr>
<td style="text-align:center">çº¿ç¨‹å¯åŠ¨è§„åˆ™</td>
<td style="text-align:center">Thread å¯¹è±¡çš„ start() æ–¹æ³•å…ˆè¡Œå‘ç”Ÿäºæ­¤çº¿ç¨‹çš„æ¯ä¸€ä¸ªåŠ¨ä½œ</td>
</tr>
<tr>
<td style="text-align:center">çº¿ç¨‹ç»ˆæ­¢è§„åˆ™</td>
<td style="text-align:center">çº¿ç¨‹ä¸­æ‰€æœ‰çš„æ“ä½œéƒ½å…ˆè¡Œå‘ç”Ÿäºå¯¹æ­¤çº¿ç¨‹çš„ç»ˆæ­¢æ£€æµ‹<br>(é€šè¿‡ Thread.join() æ–¹æ³•ç»“æŸã€ Thread.isAlive() çš„è¿”å›å€¼æ£€æµ‹)</td>
</tr>
<tr>
<td style="text-align:center">çº¿ç¨‹ä¸­æ–­è§„åˆ™</td>
<td style="text-align:center">å¯¹çº¿ç¨‹ interrupt() æ–¹æ³•è°ƒç”¨ä¼˜å…ˆå‘ç”Ÿäºè¢«ä¸­æ–­çº¿ç¨‹çš„ä»£ç æ£€æµ‹åˆ°ä¸­æ–­äº‹ä»¶çš„å‘ç”Ÿ <br> (é€šè¿‡ Thread.interrupted() æ–¹æ³•æ£€æµ‹)</td>
</tr>
<tr>
<td style="text-align:center">å¯¹è±¡ç»ˆç»“è§„åˆ™</td>
<td style="text-align:center">ä¸€ä¸ªå¯¹è±¡çš„åˆå§‹åŒ–å®Œæˆ(æ„é€ å‡½æ•°æ‰§è¡Œç»“æŸ)å…ˆè¡Œå‘ç”Ÿäºå®ƒçš„ finalize() æ–¹æ³•çš„å¼€å§‹</td>
</tr>
<tr>
<td style="text-align:center">ä¼ é€’æ€§</td>
<td style="text-align:center">å¦‚æœæ“ä½œ A å…ˆäº æ“ä½œ B å‘ç”Ÿï¼Œæ“ä½œ B å…ˆäº æ“ä½œ C å‘ç”Ÿï¼Œé‚£ä¹ˆæ“ä½œ A å…ˆäº æ“ä½œ C</td>
</tr>
</tbody>
</table>
<h3 id="3-2-Java-ä¸çº¿ç¨‹"><a href="#3-2-Java-ä¸çº¿ç¨‹" class="headerlink" title="3.2 Java ä¸çº¿ç¨‹"></a>3.2 Java ä¸çº¿ç¨‹</h3><h4 id="3-2-1-çº¿ç¨‹çš„å®ç°"><a href="#3-2-1-çº¿ç¨‹çš„å®ç°" class="headerlink" title="3.2.1 çº¿ç¨‹çš„å®ç°"></a>3.2.1 çº¿ç¨‹çš„å®ç°</h4><h5 id="ä½¿ç”¨å†…æ ¸çº¿ç¨‹å®ç°"><a href="#ä½¿ç”¨å†…æ ¸çº¿ç¨‹å®ç°" class="headerlink" title="ä½¿ç”¨å†…æ ¸çº¿ç¨‹å®ç°"></a>ä½¿ç”¨å†…æ ¸çº¿ç¨‹å®ç°</h5><blockquote>
<p>ç›´æ¥ç”±æ“ä½œç³»ç»Ÿå†…æ ¸æ”¯æŒçš„çº¿ç¨‹ï¼Œè¿™ç§çº¿ç¨‹ç”±å†…æ ¸å®Œæˆåˆ‡æ¢ã€‚ç¨‹åºä¸€èˆ¬ä¸ä¼šç›´æ¥å»ä½¿ç”¨å†…æ ¸çº¿ç¨‹ï¼Œè€Œæ˜¯å»ä½¿ç”¨å†…æ ¸çº¿ç¨‹çš„ä¸€ç§é«˜çº§æ¥å£ â€”â€” è½»é‡çº§è¿›ç¨‹(LWP)ï¼Œè½»é‡çº§è¿›ç¨‹å°±æ˜¯æˆ‘ä»¬é€šå¸¸æ„ä¹‰ä¸Šæ‰€è®²çš„çº¿ç¨‹ï¼Œæ¯ä¸ªè½»é‡çº§è¿›ç¨‹éƒ½æœ‰ä¸€ä¸ªå†…æ ¸çº§çº¿ç¨‹æ”¯æŒã€‚</p>
</blockquote>
<p><img src="/2017/09/02/reJVM/klt.png" alt=""></p>
<h5 id="ä½¿ç”¨ç”¨æˆ·çº¿ç¨‹å®ç°"><a href="#ä½¿ç”¨ç”¨æˆ·çº¿ç¨‹å®ç°" class="headerlink" title="ä½¿ç”¨ç”¨æˆ·çº¿ç¨‹å®ç°"></a>ä½¿ç”¨ç”¨æˆ·çº¿ç¨‹å®ç°</h5><blockquote>
<p>å¹¿ä¹‰ä¸Šæ¥è¯´ï¼Œåªè¦ä¸æ˜¯å†…æ ¸çº¿ç¨‹å°±å¯ä»¥è®¤ä¸ºæ˜¯ç”¨æˆ·çº¿ç¨‹ï¼Œå› æ­¤å¯ä»¥è®¤ä¸ºè½»é‡çº§è¿›ç¨‹ä¹Ÿå±äºç”¨æˆ·çº¿ç¨‹ã€‚ç‹­ä¹‰ä¸Šè¯´æ˜¯å®Œå…¨å»ºç«‹åœ¨ç”¨æˆ·ç©ºé—´çš„çº¿ç¨‹åº“ä¸Šçš„å¹¶ä¸”å†…æ ¸ç³»ç»Ÿä¸å¯æ„ŸçŸ¥çš„ã€‚</p>
</blockquote>
<p><img src="/2017/09/02/reJVM/ut.png" alt=""></p>
<h5 id="ä½¿ç”¨ç”¨æˆ·çº¿ç¨‹å¤¹åŠ è½»é‡çº§è¿›ç¨‹æ··åˆå®ç°"><a href="#ä½¿ç”¨ç”¨æˆ·çº¿ç¨‹å¤¹åŠ è½»é‡çº§è¿›ç¨‹æ··åˆå®ç°" class="headerlink" title="ä½¿ç”¨ç”¨æˆ·çº¿ç¨‹å¤¹åŠ è½»é‡çº§è¿›ç¨‹æ··åˆå®ç°"></a>ä½¿ç”¨ç”¨æˆ·çº¿ç¨‹å¤¹åŠ è½»é‡çº§è¿›ç¨‹æ··åˆå®ç°</h5><blockquote>
<p>ç›´æ¥çœ‹å›¾</p>
</blockquote>
<p><img src="/2017/09/02/reJVM/kltAndut.png" alt=""></p>
<h5 id="Java-çº¿ç¨‹å®ç°"><a href="#Java-çº¿ç¨‹å®ç°" class="headerlink" title="Java çº¿ç¨‹å®ç°"></a>Java çº¿ç¨‹å®ç°</h5><blockquote>
<p>å¹³å°ä¸åŒå®ç°æ–¹å¼ä¸åŒï¼Œå¯ä»¥è®¤ä¸ºæ˜¯ä¸€æ¡ Java çº¿ç¨‹æ˜ å°„åˆ°ä¸€æ¡è½»é‡çº§è¿›ç¨‹ã€‚</p>
</blockquote>
<h4 id="3-2-2-Java-çº¿ç¨‹è°ƒåº¦"><a href="#3-2-2-Java-çº¿ç¨‹è°ƒåº¦" class="headerlink" title="3.2.2 Java çº¿ç¨‹è°ƒåº¦"></a>3.2.2 Java çº¿ç¨‹è°ƒåº¦</h4><h5 id="ååŒå¼çº¿ç¨‹è°ƒåº¦"><a href="#ååŒå¼çº¿ç¨‹è°ƒåº¦" class="headerlink" title="ååŒå¼çº¿ç¨‹è°ƒåº¦"></a>ååŒå¼çº¿ç¨‹è°ƒåº¦</h5><blockquote>
<p>çº¿ç¨‹æ‰§è¡Œæ—¶é—´ç”±çº¿ç¨‹è‡ªèº«æ§åˆ¶ï¼Œå®ç°ç®€å•ï¼Œåˆ‡æ¢çº¿ç¨‹è‡ªå·±å¯çŸ¥ï¼Œæ‰€ä»¥åŸºæœ¬æ²¡æœ‰çº¿ç¨‹åŒæ­¥é—®é¢˜ã€‚åå¤„æ˜¯æ‰§è¡Œæ—¶é—´ä¸å¯æ§ï¼Œå®¹æ˜“é˜»å¡ã€‚</p>
</blockquote>
<h5 id="æŠ¢å å¼çº¿ç¨‹è°ƒåº¦"><a href="#æŠ¢å å¼çº¿ç¨‹è°ƒåº¦" class="headerlink" title="æŠ¢å å¼çº¿ç¨‹è°ƒåº¦"></a>æŠ¢å å¼çº¿ç¨‹è°ƒåº¦</h5><blockquote>
<p>æ¯ä¸ªçº¿ç¨‹ç”±ç³»ç»Ÿæ¥åˆ†é…æ‰§è¡Œæ—¶é—´ã€‚</p>
</blockquote>
<h4 id="3-2-3-çŠ¶æ€è½¬æ¢"><a href="#3-2-3-çŠ¶æ€è½¬æ¢" class="headerlink" title="3.2.3 çŠ¶æ€è½¬æ¢"></a>3.2.3 çŠ¶æ€è½¬æ¢</h4><p>äº”ç§çŠ¶æ€ï¼š</p>
<ul>
<li>æ–°å»º(new)</li>
</ul>
<blockquote>
<p>åˆ›å»ºåå°šæœªå¯åŠ¨çš„çº¿ç¨‹ã€‚</p>
</blockquote>
<ul>
<li>è¿è¡Œ(Runable)</li>
</ul>
<blockquote>
<p>Runable åŒ…æ‹¬äº†æ“ä½œç³»ç»Ÿçº¿ç¨‹çŠ¶æ€ä¸­çš„ Running å’Œ Readyï¼Œä¹Ÿå°±æ˜¯å‡ºäºæ­¤çŠ¶æ€çš„çº¿ç¨‹æœ‰å¯èƒ½æ­£åœ¨æ‰§è¡Œï¼Œä¹Ÿæœ‰å¯èƒ½æ­£åœ¨ç­‰å¾… CPU ä¸ºä»–åˆ†é…æ—¶é—´ã€‚</p>
</blockquote>
<ul>
<li>æ— é™æœŸç­‰å¾…(Waiting)</li>
</ul>
<blockquote>
<p>å‡ºäºè¿™ç§çŠ¶æ€çš„çº¿ç¨‹ä¸ä¼šè¢« CPU åˆ†é…æ—¶é—´ï¼Œå®ƒä»¬è¦ç­‰å…¶ä»–çº¿ç¨‹æ˜¾ç¤ºçš„å”¤é†’ã€‚</p>
</blockquote>
<p>ä»¥ä¸‹æ–¹æ³•ä¼šç„¶çº¿ç¨‹è¿›å…¥æ— é™æœŸç­‰å¾…çŠ¶æ€ï¼š<br>1.æ²¡æœ‰è®¾ç½® Timeout å‚æ•°çš„ Object.wait() æ–¹æ³•ã€‚<br>2.æ²¡æœ‰è®¾ç½® Timeout å‚æ•°çš„ Thread.join() æ–¹æ³•ã€‚<br>3.LookSupport.park() æ–¹æ³•ã€‚</p>
<ul>
<li>é™æœŸç­‰å¾…(Timed Waiting)</li>
</ul>
<blockquote>
<p>å¤„äºè¿™ç§çŠ¶æ€çš„çº¿ç¨‹ä¹Ÿä¸ä¼šåˆ†é…æ—¶é—´ï¼Œä¸è¿‡æ— éœ€ç­‰å¾…é…å…¶ä»–çº¿ç¨‹æ˜¾ç¤ºåœ°å”¤é†’ï¼Œåœ¨ä¸€å®šæ—¶é—´åä»–ä»¬ä¼šç”±ç³»ç»Ÿè‡ªåŠ¨å”¤é†’ã€‚</p>
</blockquote>
<p>ä»¥ä¸‹æ–¹æ³•ä¼šè®©çº¿ç¨‹è¿›å…¥é™æœŸç­‰å¾…çŠ¶æ€ï¼š<br>1.Thread.sleep() æ–¹æ³•ã€‚<br>2.è®¾ç½®äº† Timeout å‚æ•°çš„ Object.wait() æ–¹æ³•ã€‚<br>3.è®¾ç½®äº† Timeout å‚æ•°çš„ Thread.join() æ–¹æ³•ã€‚<br>4.LockSupport.parkNanos() æ–¹æ³•ã€‚<br>5.LockSupport.parkUntil() æ–¹æ³•ã€‚</p>
<ul>
<li>é˜»å¡(Blocked)</li>
</ul>
<blockquote>
<p>çº¿ç¨‹è¢«é˜»å¡äº†ï¼Œâ€œé˜»å¡çŠ¶æ€â€å’Œâ€œç­‰å¾…çŠ¶æ€â€çš„åŒºåˆ«æ˜¯ï¼šâ€œé˜»å¡çŠ¶æ€â€åœ¨ç­‰å¾…ç€è·å–ä¸€ä¸ªæ’ä»–é”ï¼Œè¿™ä¸ªæ—¶é—´å°†åœ¨å¦å¤–ä¸€ä¸ªçº¿ç¨‹æ”¾å¼ƒè¿™ä¸ªé”çš„æ—¶å€™å‘ç”Ÿï¼›è€Œâ€œç­‰å¾…çŠ¶æ€â€åˆ™æ˜¯åœ¨ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œæˆ–è€…å”¤é†’åŠ¨ä½œçš„å‘ç”Ÿã€‚åœ¨ç¨‹åºç­‰å¾…è¿›å…¥åŒæ­¥åŒºåŸŸçš„æ—¶å€™ï¼Œçº¿ç¨‹å°†è¿›å…¥è¿™ç§çŠ¶æ€ã€‚</p>
</blockquote>
<ul>
<li>ç»“æŸ(Terminated)</li>
</ul>
<blockquote>
<p>å·²ç»ˆæ­¢çº¿ç¨‹çš„çº¿ç¨‹çŠ¶æ€ã€‚</p>
</blockquote>
<p><img src="/2017/09/02/reJVM/threadTranslate.png" alt=""></p>
<h2 id="4-çº¿ç¨‹å®‰å…¨ä¸é”ä¼˜åŒ–"><a href="#4-çº¿ç¨‹å®‰å…¨ä¸é”ä¼˜åŒ–" class="headerlink" title="4. çº¿ç¨‹å®‰å…¨ä¸é”ä¼˜åŒ–"></a>4. çº¿ç¨‹å®‰å…¨ä¸é”ä¼˜åŒ–</h2><blockquote>
<p>// å¾…å¡«</p>
</blockquote>
<h2 id="5-ç±»æ–‡ä»¶ç»“æ„"><a href="#5-ç±»æ–‡ä»¶ç»“æ„" class="headerlink" title="5. ç±»æ–‡ä»¶ç»“æ„"></a>5. ç±»æ–‡ä»¶ç»“æ„</h2><blockquote>
<p>// å¾…å¡«</p>
</blockquote>
<p>æœ‰ç‚¹æ‡’äº†ã€‚ã€‚ã€‚å…ˆè´´å‡ ä¸ªç½‘å€å§ã€‚</p>
<p><a href="https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html" target="_blank" rel="external">1. Officialï¼šThe class File Format</a><br><a href="http://blog.csdn.net/luanlouis/article/details/39892027" target="_blank" rel="external">2.äº¦å±±: ã€ŠJavaè™šæ‹ŸæœºåŸç†å›¾è§£ã€‹ 1.1ã€classæ–‡ä»¶åŸºæœ¬ç»„ç»‡ç»“æ„</a></p>
<h2 id="6-è™šæ‹Ÿæœºç±»åŠ è½½æœºåˆ¶"><a href="#6-è™šæ‹Ÿæœºç±»åŠ è½½æœºåˆ¶" class="headerlink" title="6. è™šæ‹Ÿæœºç±»åŠ è½½æœºåˆ¶"></a>6. è™šæ‹Ÿæœºç±»åŠ è½½æœºåˆ¶</h2><blockquote>
<p>è™šæ‹ŸæœºæŠŠæè¿°ç±»çš„æ•°æ®ä» Class æ–‡ä»¶åŠ è½½åˆ°å†…å­˜ï¼Œå¹¶å¯¹æ•°æ®è¿›è¡Œæ ¡éªŒã€è£…æ¢è§£æå’Œåˆå§‹åŒ–ï¼Œæœ€ç»ˆå½¢æˆå¯ä»¥è¢«è™šæ‹Ÿæœºç›´æ¥ä½¿ç”¨çš„ Java ç±»å‹ã€‚</p>
</blockquote>
<p>åœ¨ Java è¯­è¨€ä¸­ï¼Œç±»å‹çš„åŠ è½½ã€è¿æ¥å’Œåˆå§‹åŒ–è¿‡ç¨‹éƒ½æ˜¯åœ¨ç¨‹åºè¿è¡ŒæœŸé—´å®Œæˆçš„ã€‚</p>
<h3 id="6-1-ç±»åŠ è½½æ—¶æœº"><a href="#6-1-ç±»åŠ è½½æ—¶æœº" class="headerlink" title="6.1 ç±»åŠ è½½æ—¶æœº"></a>6.1 ç±»åŠ è½½æ—¶æœº</h3><h4 id="ç±»çš„ç”Ÿå‘½å‘¨æœŸ-7-ä¸ªé˜¶æ®µ"><a href="#ç±»çš„ç”Ÿå‘½å‘¨æœŸ-7-ä¸ªé˜¶æ®µ" class="headerlink" title="ç±»çš„ç”Ÿå‘½å‘¨æœŸ( 7 ä¸ªé˜¶æ®µ)"></a>ç±»çš„ç”Ÿå‘½å‘¨æœŸ( 7 ä¸ªé˜¶æ®µ)</h4><p><img src="/2017/09/02/reJVM/classLifeCircle.png" alt=""></p>
<p>å…¶ä¸­åŠ è½½ã€éªŒè¯ã€å‡†å¤‡ã€åˆå§‹åŒ–å’Œå¸è½½è¿™äº”ä¸ªé˜¶æ®µçš„é¡ºåºæ˜¯ç¡®å®šçš„ã€‚è§£æé˜¶æ®µå¯ä»¥åœ¨åˆå§‹åŒ–ä¹‹åå†å¼€å§‹(è¿è¡Œæ—¶ç»‘å®šæˆ–åŠ¨æ€ç»‘å®šæˆ–æ™šæœŸç»‘å®š)ã€‚</p>
<p>ä»¥ä¸‹äº”ç§æƒ…å†µå¿…é¡»å¯¹ç±»è¿›è¡Œåˆå§‹åŒ–(è€ŒåŠ è½½ã€éªŒè¯ã€å‡†å¤‡è‡ªç„¶éœ€è¦åœ¨æ­¤ä¹‹å‰å®Œæˆ)ï¼š</p>
<ol>
<li>é‡åˆ° newã€getstaticã€putstatic æˆ– invokestatic è¿™ 4 æ¡å­—èŠ‚ç æŒ‡ä»¤æ—¶æ²¡åˆå§‹åŒ–è§¦å‘åˆå§‹åŒ–ã€‚ä½¿ç”¨åœºæ™¯ï¼šä½¿ç”¨ new å…³é”®å­—å®ä¾‹åŒ–å¯¹è±¡ã€è¯»å–ä¸€ä¸ªç±»çš„é™æ€å­—æ®µ(è¢« final ä¿®é¥°ã€å·²åœ¨ç¼–è¯‘æœŸæŠŠç»“æœæ”¾å…¥å¸¸é‡æ± çš„é™æ€å­—æ®µé™¤å¤–)ã€è°ƒç”¨ä¸€ä¸ªç±»çš„é™æ€æ–¹æ³•ã€‚</li>
<li>ä½¿ç”¨ java.lang.reflect åŒ…çš„æ–¹æ³•å¯¹ç±»è¿›è¡Œåå°„è°ƒç”¨çš„æ—¶å€™ã€‚</li>
<li>å½“åˆå§‹åŒ–ä¸€ä¸ªç±»çš„æ—¶å€™ï¼Œå¦‚æœå‘ç°å…¶çˆ¶ç±»è¿˜æ²¡æœ‰è¿›è¡Œåˆå§‹åŒ–ï¼Œåˆ™éœ€å…ˆè§¦å‘å…¶çˆ¶ç±»çš„åˆå§‹åŒ–ã€‚</li>
<li>å½“è™šæ‹Ÿæœºå¯åŠ¨æ—¶ï¼Œç”¨æˆ·éœ€æŒ‡å®šä¸€ä¸ªè¦åŠ è½½çš„ä¸»ç±»(åŒ…å« main() æ–¹æ³•çš„é‚£ä¸ªç±»)ï¼Œè™šæ‹Ÿæœºä¼šå…ˆåˆå§‹åŒ–è¿™ä¸ªä¸»ç±»ã€‚ </li>
<li>å½“ä½¿ç”¨ JDK 1.7 çš„åŠ¨æ€è¯­è¨€æ”¯æŒæ—¶ï¼Œå¦‚æœä¸€ä¸ª java.lang.invoke.MethodHandle å®ä¾‹æœ€åçš„è§£æç»“æœ REF_getStaticã€REF_putStaticã€REF_invokeStatic çš„æ–¹æ³•å¥æŸ„ï¼Œå¹¶ä¸”è¿™ä¸ªæ–¹æ³•å¥æŸ„æ‰€å¯¹åº”çš„ç±»æ²¡æœ‰è¿›è¡Œè¿‡åˆå§‹åŒ–ï¼Œåˆ™éœ€å…ˆè§¦å‘å…¶åˆå§‹åŒ–ã€‚</li>
</ol>
<p>å‰é¢çš„äº”ç§æ–¹å¼æ˜¯å¯¹ä¸€ä¸ªç±»çš„ä¸»åŠ¨å¼•ç”¨ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œæ‰€æœ‰å¼•ç”¨ç±»çš„æ–¹æ³•éƒ½ä¸ä¼šè§¦å‘åˆå§‹åŒ–ï¼Œä½³ä½œè¢«åŠ¨å¼•ç”¨ã€‚ä¸¾å‡ ä¸ªä¾‹å­~</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SuperClass</span> </span>&#123;</div><div class="line">	<span class="keyword">static</span> &#123;</div><div class="line">		System.out.println(<span class="string">"SuperClass init!"</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> value = <span class="number">1127</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SubClass</span> <span class="keyword">extends</span> <span class="title">SuperClass</span> </span>&#123;</div><div class="line">	<span class="keyword">static</span> &#123;</div><div class="line">		System.out.println(<span class="string">"SubClass init!"</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConstClass</span> </span>&#123;</div><div class="line">	<span class="keyword">static</span> &#123;</div><div class="line">		System.out.println(<span class="string">"ConstClass init!"</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String HELLOWORLD = <span class="string">"hello world!"</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NotInitialization</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		System.out.println(SubClass.value);</div><div class="line">		<span class="comment">/**</span></div><div class="line">		 *  output : SuperClass init!</div><div class="line">		 * </div><div class="line">		 * é€šè¿‡å­ç±»å¼•ç”¨çˆ¶ç±»çš„é™æ€å¯¹è±¡ä¸ä¼šå¯¼è‡´å­ç±»çš„åˆå§‹åŒ–</div><div class="line">		 * åªæœ‰ç›´æ¥å®šä¹‰è¿™ä¸ªå­—æ®µçš„ç±»æ‰ä¼šè¢«åˆå§‹åŒ–</div><div class="line">		 */</div><div class="line">		 </div><div class="line">		SuperClass[] sca = <span class="keyword">new</span> SuperClass[<span class="number">10</span>];</div><div class="line">		<span class="comment">/**</span></div><div class="line">		 *  output : </div><div class="line">		 * </div><div class="line">		 * é€šè¿‡æ•°ç»„å®šä¹‰æ¥å¼•ç”¨ç±»ä¸ä¼šè§¦å‘æ­¤ç±»çš„åˆå§‹åŒ–</div><div class="line">		 * è™šæ‹Ÿæœºåœ¨è¿è¡Œæ—¶åŠ¨æ€åˆ›å»ºäº†ä¸€ä¸ªæ•°ç»„ç±»</div><div class="line">		 */</div><div class="line">		 </div><div class="line">		System.out.println(ConstClass.HELLOWORLD);</div><div class="line">		<span class="comment">/**</span></div><div class="line">		 *  output : </div><div class="line">		 * </div><div class="line">		 * å¸¸é‡åœ¨ç¼–è¯‘é˜¶æ®µä¼šå­˜å…¥è°ƒç”¨ç±»çš„å¸¸é‡æ± å½“ä¸­ï¼Œæœ¬è´¨ä¸Šå¹¶æ²¡æœ‰ç›´æ¥å¼•ç”¨åˆ°å®šä¹‰ç±»å¸¸é‡çš„ç±»ï¼Œ</div><div class="line">		 * å› æ­¤ä¸ä¼šè§¦å‘å®šä¹‰å¸¸é‡çš„ç±»çš„åˆå§‹åŒ–ã€‚</div><div class="line">		 * â€œhello worldâ€ åœ¨ç¼–è¯‘æœŸå¸¸é‡ä¼ æ’­ä¼˜åŒ–æ—¶å·²ç»å­˜å‚¨åˆ° NotInitialization å¸¸é‡æ± ä¸­äº†ã€‚</div><div class="line">		 */</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="6-2-ç±»çš„åŠ è½½è¿‡ç¨‹"><a href="#6-2-ç±»çš„åŠ è½½è¿‡ç¨‹" class="headerlink" title="6.2 ç±»çš„åŠ è½½è¿‡ç¨‹"></a>6.2 ç±»çš„åŠ è½½è¿‡ç¨‹</h4><h5 id="6-2-1-åŠ è½½"><a href="#6-2-1-åŠ è½½" class="headerlink" title="6.2.1 åŠ è½½"></a>6.2.1 åŠ è½½</h5><ol>
<li>é€šè¿‡ä¸€ä¸ªç±»çš„å…¨é™å®šåæ¥è·å–å®šä¹‰æ¬¡ç±»çš„äºŒè¿›åˆ¶æµ(ZIP åŒ…ã€ç½‘ç»œã€è¿ç®—ç”Ÿæˆã€JSP ç”Ÿæˆã€æ•°æ®åº“è¯»å–)ã€‚</li>
<li>å°†è¿™ä¸ªå­—èŠ‚æµæ‰€ä»£è¡¨çš„é™æ€å­˜å‚¨ç»“æ„è½¬åŒ–ä¸ºæ–¹æ³•åŒºçš„è¿è¡Œæ—¶æ•°æ®ç»“æ„ã€‚</li>
<li>åœ¨å†…å­˜ä¸­ç”Ÿæˆä¸€ä¸ªä»£è¡¨è¿™ä¸ªç±»çš„ java.lang.Class å¯¹è±¡ï¼Œä½œä¸ºæ–¹æ³•å»è¿™ä¸ªç±»çš„å„ç§æ•°æ®çš„è®¿é—®å…¥å£ã€‚</li>
</ol>
<p>æ•°ç»„ç±»çš„ç‰¹æ®Šæ€§ï¼šæ•°ç»„ç±»æœ¬èº«ä¸é€šè¿‡ç±»åŠ è½½å™¨åˆ›å»ºï¼Œå®ƒæ˜¯ç”± Java è™šæ‹Ÿæœºç›´æ¥åˆ›å»ºçš„ã€‚ä½†æ•°ç»„ç±»ä¸ç±»åŠ è½½å™¨ä»ç„¶æœ‰å¾ˆå¯†åˆ‡çš„å…³ç³»ï¼Œå› ä¸ºæ•°ç»„ç±»çš„å…ƒç´ ç±»å‹æœ€ç»ˆæ˜¯è¦é ç±»åŠ è½½å™¨å»åˆ›å»ºçš„ï¼Œæ•°ç»„åˆ›å»ºè¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>å¦‚æœæ•°ç»„çš„ç»„ä»¶ç±»å‹æ˜¯å¼•ç”¨ç±»å‹ï¼Œé‚£å°±é€’å½’é‡‡ç”¨ç±»åŠ è½½åŠ è½½ã€‚</li>
<li>å¦‚æœæ•°ç»„çš„ç»„ä»¶ç±»å‹ä¸æ˜¯å¼•ç”¨ç±»å‹ï¼ŒJava è™šæ‹Ÿæœºä¼šæŠŠæ•°ç»„æ ‡è®°ä¸ºå¼•å¯¼ç±»åŠ è½½å™¨å…³è”ã€‚</li>
<li>æ•°ç»„ç±»çš„å¯è§æ€§ä¸ä»–çš„ç»„ä»¶ç±»å‹çš„å¯è§æ€§ä¸€è‡´ï¼Œå¦‚æœç»„ä»¶ç±»å‹ä¸æ˜¯å¼•ç”¨ç±»å‹ï¼Œé‚£æ•°ç»„ç±»çš„å¯è§æ€§å°†é»˜è®¤ä¸º publicã€‚</li>
</ol>
<p>å†…å­˜ä¸­å®ä¾‹çš„ java.lang.Class å¯¹è±¡å­˜åœ¨æ–¹æ³•åŒºä¸­ã€‚ä½œä¸ºç¨‹åºè®¿é—®æ–¹æ³•åŒºä¸­è¿™äº›ç±»å‹æ•°æ®çš„å¤–éƒ¨æ¥å£ã€‚<br>åŠ è½½é˜¶æ®µä¸è¿æ¥é˜¶æ®µçš„éƒ¨åˆ†å†…å®¹æ˜¯äº¤å‰è¿›è¡Œçš„ï¼Œä½†æ˜¯å¼€å§‹æ—¶é—´ä¿æŒå…ˆåé¡ºåºã€‚</p>
<h5 id="6-2-2-éªŒè¯"><a href="#6-2-2-éªŒè¯" class="headerlink" title="6.2.2 éªŒè¯"></a>6.2.2 éªŒè¯</h5><blockquote>
<p>æ˜¯è¿æ¥çš„ç¬¬ä¸€æ­¥ï¼Œç¡®ä¿ Class æ–‡ä»¶çš„å­—èŠ‚æµä¸­åŒ…å«çš„ä¿¡æ¯ç¬¦åˆå½“å‰è™šæ‹Ÿæœºè¦æ±‚ã€‚</p>
</blockquote>
<h5 id="æ–‡ä»¶æ ¼å¼éªŒè¯"><a href="#æ–‡ä»¶æ ¼å¼éªŒè¯" class="headerlink" title="æ–‡ä»¶æ ¼å¼éªŒè¯"></a>æ–‡ä»¶æ ¼å¼éªŒè¯</h5><ol>
<li>æ˜¯å¦ä»¥é­”æ•° 0xCAFEBABE å¼€å¤´</li>
<li>ä¸»ã€æ¬¡ç‰ˆæœ¬å·æ˜¯å¦åœ¨å½“å‰è™šæ‹Ÿæœºå¤„ç†èŒƒå›´ä¹‹å†…</li>
<li>å¸¸é‡æ± çš„å¸¸é‡æ˜¯å¦æœ‰ä¸è¢«æ”¯æŒå¸¸é‡çš„ç±»å‹ï¼ˆæ£€æŸ¥å¸¸é‡ tag æ ‡å¿—ï¼‰</li>
<li>æŒ‡å‘å¸¸é‡çš„å„ç§ç´¢å¼•å€¼ä¸­æ˜¯å¦æœ‰æŒ‡å‘ä¸å­˜åœ¨çš„å¸¸é‡æˆ–ä¸ç¬¦åˆç±»å‹çš„å¸¸é‡</li>
<li>CONSTANT_Utf8_info å‹çš„å¸¸é‡ä¸­æ˜¯å¦æœ‰ä¸ç¬¦åˆ UTF8 ç¼–ç çš„æ•°æ®</li>
<li>Class æ–‡ä»¶ä¸­å„ä¸ªéƒ¨åˆ†é›†æ–‡ä»¶æœ¬èº«æ˜¯å¦æœ‰è¢«åˆ é™¤çš„é™„åŠ çš„å…¶ä»–ä¿¡æ¯</li>
<li>â€¦â€¦</li>
</ol>
<p>åªæœ‰é€šè¿‡è¿™ä¸ªé˜¶æ®µçš„éªŒè¯åï¼Œå­—èŠ‚æµæ‰ä¼šè¿›å…¥å†…å­˜çš„æ–¹æ³•åŒºè¿›è¡Œå­˜å‚¨ï¼Œæ‰€ä»¥åé¢ 3 ä¸ªéªŒè¯é˜¶æ®µå…¨éƒ¨æ˜¯åŸºäºæ–¹æ³•åŒºçš„å­˜å‚¨ç»“æ„è¿›è¡Œçš„ï¼Œä¸å†ç›´æ¥æ“ä½œå­—èŠ‚æµã€‚</p>
<h5 id="å…ƒæ•°æ®éªŒè¯"><a href="#å…ƒæ•°æ®éªŒè¯" class="headerlink" title="å…ƒæ•°æ®éªŒè¯"></a>å…ƒæ•°æ®éªŒè¯</h5><ol>
<li>è¿™ä¸ªç±»æ˜¯å¦æœ‰çˆ¶ç±»ï¼ˆé™¤ java.lang.Object ä¹‹å¤–ï¼‰</li>
<li>è¿™ä¸ªç±»çš„çˆ¶ç±»æ˜¯å¦ç»§æ‰¿äº†ä¸å…è®¸è¢«ç»§æ‰¿çš„ç±»ï¼ˆfinal ä¿®é¥°çš„ç±»ï¼‰</li>
<li>å¦‚æœè¿™ä¸ªç±»ä¸æ˜¯æŠ½è±¡ç±»ï¼Œæ˜¯å¦å®ç°äº†å…¶çˆ¶ç±»æˆ–æ¥å£ä¹‹ä¸­è¦æ±‚å®ç°çš„æ‰€æœ‰æ–¹æ³•</li>
<li>ç±»ä¸­çš„å­—æ®µã€æ–¹æ³•æ˜¯å¦ä¸çˆ¶ç±»äº§ç”ŸçŸ›ç›¾ï¼ˆè¦†ç›–çˆ¶ç±» final å­—æ®µã€å‡ºç°ä¸ç¬¦åˆè§„èŒƒçš„é‡è½½ï¼‰</li>
</ol>
<p>è¿™ä¸€é˜¶æ®µä¸»è¦æ˜¯å¯¹ç±»çš„å…ƒæ•°æ®ä¿¡æ¯è¿›è¡Œè¯­ä¹‰æ ¡éªŒï¼Œä¿è¯ä¸å­˜åœ¨ä¸ç¬¦åˆ Java è¯­è¨€è§„èŒƒçš„å…ƒæ•°æ®ä¿¡æ¯ã€‚</p>
<h5 id="å­—èŠ‚ç éªŒè¯"><a href="#å­—èŠ‚ç éªŒè¯" class="headerlink" title="å­—èŠ‚ç éªŒè¯"></a>å­—èŠ‚ç éªŒè¯</h5><ol>
<li>ä¿è¯ä»»æ„æ—¶åˆ»æ“ä½œæ•°æ ˆçš„æ•°æ®ç±»å‹ä¸æŒ‡ä»¤ä»£ç åºåˆ—éƒ½é¥é…åˆå·¥ä½œï¼ˆä¸ä¼šå‡ºç°æŒ‰ç…§ long ç±»å‹è¯»ä¸€ä¸ª int å‹æ•°æ®ï¼‰</li>
<li>ä¿è¯è·³è½¬æŒ‡ä»¤ä¸ä¼šè·³è½¬åˆ°æ–¹æ³•ä½“ä»¥å¤–çš„å­—èŠ‚ç æŒ‡ä»¤ä¸Š</li>
<li>ä¿è¯æ–¹æ³•ä½“ä¸­çš„ç±»å‹è½¬æ¢æ˜¯æœ‰æ•ˆçš„ï¼ˆå­ç±»å¯¹è±¡èµ‹å€¼ç»™çˆ¶ç±»æ•°æ®ç±»å‹æ˜¯å®‰å…¨çš„ï¼Œåè¿‡æ¥ä¸åˆæ³•çš„ï¼‰</li>
<li>â€¦â€¦</li>
</ol>
<p>è¿™æ˜¯æ•´ä¸ªéªŒè¯è¿‡ç¨‹ä¸­æœ€å¤æ‚çš„ä¸€ä¸ªé˜¶æ®µï¼Œä¸»è¦ç›®çš„æ˜¯é€šè¿‡æ•°æ®æµå’Œæ§åˆ¶æµåˆ†æï¼Œç¡®å®šç¨‹åºè¯­ä¹‰æ˜¯åˆæ³•çš„ã€ç¬¦åˆé€»è¾‘çš„ã€‚è¿™ä¸ªé˜¶æ®µå¯¹ç±»çš„æ–¹æ³•ä½“è¿›è¡Œæ ¡éªŒåˆ†æï¼Œä¿è¯æ ¡éªŒç±»çš„æ–¹æ³•åœ¨è¿è¡Œæ—¶ä¸ä¼šåšå‡ºå±å®³è™šæ‹Ÿæœºå®‰å…¨çš„äº‹ä»¶ã€‚</p>
<h5 id="ç¬¦å·å¼•ç”¨éªŒè¯"><a href="#ç¬¦å·å¼•ç”¨éªŒè¯" class="headerlink" title="ç¬¦å·å¼•ç”¨éªŒè¯"></a>ç¬¦å·å¼•ç”¨éªŒè¯</h5><ol>
<li>ç¬¦å·å¼•ç”¨ä¸­é€šè¿‡å­—ç¬¦åˆ›æè¿°çš„å…¨é™å®šåæ˜¯å¦èƒ½æ‰¾åˆ°å¯¹åº”çš„ç±»</li>
<li>åœ¨æŒ‡å®šç±»ä¸­æ˜¯å¦å­˜åœ¨ç¬¦æ–¹æ³•çš„å­—æ®µæè¿°ç¬¦ä»¥åŠç®€å•åç§°æ‰€æè¿°çš„æ–¹æ³•å’Œå­—æ®µ</li>
<li>ç¬¦å·å¼•ç”¨ä¸­çš„ç±»ã€å­—æ®µã€æ–¹æ³•çš„è®¿é—®æ€§ï¼ˆprivateã€protectedã€publicã€defaultï¼‰æ˜¯å¦å¯è¢«å½“å‰ç±»è®¿é—®</li>
<li>â€¦â€¦</li>
</ol>
<p>æœ€åä¸€ä¸ªé˜¶æ®µçš„æ ¡éªŒå‘ç”Ÿåœ¨è¿…ç–¾å°†ç¬¦å·å¼•ç”¨è½¬åŒ–ä¸ºç›´æ¥å¼•ç”¨çš„æ—¶å€™ï¼Œè¿™ä¸ªè½¬åŒ–åŠ¨ä½œå°†åœ¨è¿æ¥çš„ç¬¬ä¸‰é˜¶æ®µâ€”â€”è§£æé˜¶æ®µä¸­å‘ç”Ÿã€‚ç¬¦å·å¼•ç”¨éªŒè¯å¯ä»¥çœ‹åšæ˜¯å¯¹ç±»è‡ªèº«ä»¥å¤–ï¼ˆå¸¸é‡æ± ä¸­çš„å„ç§ç¬¦å·å¼•ç”¨ï¼‰çš„ä¿¡æ¯è¿›è¡ŒåŒ¹é…æ€§æ ¡éªŒï¼Œè¿˜æœ‰ä»¥ä¸ŠæåŠçš„å†…å®¹ã€‚<br>ç¬¦å·å¼•ç”¨çš„ç›®çš„æ˜¯ç¡®ä¿è§£æåŠ¨ä½œèƒ½æ­£å¸¸æ‰§è¡Œï¼Œå¦‚æœæ— æ³•é€šè¿‡ç¬¦å·å¼•ç”¨éªŒè¯å°†æŠ›å‡ºä¸€ä¸ª java.lang.IncompatibleClass.ChangeError å¼‚å¸¸çš„å­ç±»ã€‚å¦‚ java.lang.IllegalAccessErrorã€java.lang.NoSuchFieldErrorã€java.lang.NoSuchMethodError ç­‰ã€‚</p>
<h5 id="6-2-3-å‡†å¤‡"><a href="#6-2-3-å‡†å¤‡" class="headerlink" title="6.2.3 å‡†å¤‡"></a>6.2.3 å‡†å¤‡</h5><blockquote>
<p>è¿™ä¸ªé˜¶æ®µæ­£å¼ä¸ºç±»åˆ†é…å†…å­˜å¹¶è®¾ç½®ç±»å˜é‡åˆå§‹å€¼ï¼Œå†…å­˜åœ¨æ–¹æ³•å»ä¸­åˆ†é…(å« static ä¿®é¥°çš„å˜é‡ä¸å«å®ä¾‹å˜é‡)ã€‚</p>
</blockquote>
<p><code>public static int value = 1127;</code><br>è¿™å¥ä»£ç åœ¨åˆå§‹å€¼è®¾ç½®ä¹‹åä¸º 0ï¼Œå› ä¸ºè¿™æ—¶å€™å°šæœªå¼€å§‹æ‰§è¡Œä»»ä½• Java æ–¹æ³•ã€‚è€ŒæŠŠ value èµ‹å€¼ä¸º 1127 çš„ putstatic æŒ‡ä»¤æ˜¯ç¨‹åºè¢«ç¼–è¯‘åï¼Œå­˜æ”¾äº clinit() æ–¹æ³•ä¸­ï¼Œæ‰€ä»¥åˆå§‹åŒ–é˜¶æ®µæ‰ä¼šå¯¹ value è¿›è¡Œèµ‹å€¼ã€‚</p>
<p>åŸºæœ¬æ•°æ®ç±»å‹çš„é›¶å€¼</p>
<table>
<thead>
<tr>
<th style="text-align:center">æ•°æ®ç±»å‹</th>
<th style="text-align:center">é›¶å€¼</th>
<th style="text-align:center">æ•°æ®ç±»å‹</th>
<th style="text-align:center">é›¶å€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">int</td>
<td style="text-align:center">0</td>
<td style="text-align:center">boolean</td>
<td style="text-align:center">false</td>
</tr>
<tr>
<td style="text-align:center">long</td>
<td style="text-align:center">0L</td>
<td style="text-align:center">float</td>
<td style="text-align:center">0.0f</td>
</tr>
<tr>
<td style="text-align:center">short</td>
<td style="text-align:center">(short) 0</td>
<td style="text-align:center">double</td>
<td style="text-align:center">0.0d</td>
</tr>
<tr>
<td style="text-align:center">char</td>
<td style="text-align:center">â€˜\u0000â€™</td>
<td style="text-align:center">reference</td>
<td style="text-align:center">null</td>
</tr>
<tr>
<td style="text-align:center">byte</td>
<td style="text-align:center">(byte) 0</td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<p>ç‰¹æ®Šæƒ…å†µï¼šå¦‚æœç±»å­—æ®µçš„å­—æ®µå±æ€§è¡¨ä¸­å­˜åœ¨ ConstantValue å±æ€§ï¼Œåœ¨å‡†å¤‡é˜¶æ®µè™šæ‹Ÿæœºå°±ä¼šæ ¹æ® ConstantValue çš„è®¾ç½®å°† value èµ‹å€¼ä¸º 1127ã€‚</p>
<h5 id="6-2-4-è§£æ"><a href="#6-2-4-è§£æ" class="headerlink" title="6.2.4 è§£æ"></a>6.2.4 è§£æ</h5><blockquote>
<p>è¿™ä¸ªé˜¶æ®µæ˜¯è™šæ‹Ÿæœºå°†å¸¸é‡æ± å†…çš„ç¬¦å·å¼•ç”¨æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨çš„è¿‡ç¨‹ã€‚</p>
</blockquote>
<ol>
<li>ç¬¦å·å¼•ç”¨<br>ç¬¦å·å¼•ç”¨ä»¥ä¸€ç»„ç¬¦å·æ¥æè¿°æ‰€å¼•ç”¨çš„ç›®æ ‡ï¼Œç¬¦å·å¯ä»¥ä½¿ä»»ä½•å½¢å¼çš„å­—é¢é‡ã€‚</li>
<li>ç›´æ¥å¼•ç”¨<br>ç›´æ¥å¼•ç”¨å¯ä»¥ä½¿ç›´æ¥æŒ‡å‘ç›®æ ‡çš„æŒ‡é’ˆã€ç›¸å¯¹åç§»é‡æˆ–æ˜¯ä¸€ä¸ªèƒ½é—´æ¥å®šä½åˆ°ç›®æ ‡çš„å¥æŸ„ã€‚ç›´æ¥å¼•ç”¨å’Œè¿…ç–¾çš„å†…å­˜å¸ƒå±€å®ç°æœ‰å…³</li>
</ol>
<p>è§£æåŠ¨ä½œä¸»è¦é’ˆå¯¹ç±»æˆ–æ¥å£ã€å­—æ®µã€ç±»æ–¹æ³•ã€æ¥å£æ–¹æ³•ã€æ–¹æ³•ç±»å‹ã€æ–¹æ³•å¥æŸ„å’Œè°ƒç”¨ç‚¹é™å®šç¬¦ 7 ç±»ç¬¦å·å¼•ç”¨è¿›è¡Œï¼Œåˆ†åˆ«å¯¹åº”äºå¸¸é‡æ± çš„ 7 ä¸­å¸¸é‡ç±»å‹ã€‚</p>
<h5 id="6-2-5-åˆå§‹åŒ–"><a href="#6-2-5-åˆå§‹åŒ–" class="headerlink" title="6.2.5 åˆå§‹åŒ–"></a>6.2.5 åˆå§‹åŒ–</h5><blockquote>
<p>å‰é¢è¿‡ç¨‹éƒ½æ˜¯ä»¥è™šæ‹Ÿæœºä¸»å¯¼ï¼Œè€Œåˆå§‹åŒ–é˜¶æ®µå¼€å§‹æ‰§è¡Œç±»ä¸­çš„ Java ä»£ç ã€‚</p>
</blockquote>
<h4 id="6-3-ç±»åŠ è½½å™¨"><a href="#6-3-ç±»åŠ è½½å™¨" class="headerlink" title="6.3 ç±»åŠ è½½å™¨"></a>6.3 ç±»åŠ è½½å™¨</h4><blockquote>
<p>é€šè¿‡ä¸€ä¸ªç±»çš„å…¨é™å®šåæ¥è·å–æè¿°æ­¤ç±»çš„äºŒè¿›åˆ¶å­—èŠ‚æµã€‚</p>
</blockquote>
<h5 id="6-3-1-åŒäº²å§”æ´¾æ¨¡å‹"><a href="#6-3-1-åŒäº²å§”æ´¾æ¨¡å‹" class="headerlink" title="6.3.1 åŒäº²å§”æ´¾æ¨¡å‹"></a>6.3.1 åŒäº²å§”æ´¾æ¨¡å‹</h5><blockquote>
<p>ä» Java è™šæ‹Ÿæœºè§’åº¦è®²ï¼Œåªå­˜åœ¨ä¸¤ç§ç±»åŠ è½½å™¨ï¼šä¸€ç§æ˜¯å¯åŠ¨ç±»åŠ è½½å™¨ï¼ˆC++ å®ç°ï¼Œæ˜¯è™šæ‹Ÿæœºçš„ä¸€éƒ¨åˆ†ï¼‰ï¼›å¦ä¸€ç§æ˜¯å…¶ä»–æ‰€æœ‰ç±»çš„åŠ è½½å™¨ï¼ˆJava å®ç°ï¼Œç‹¬ç«‹äºè™šæ‹Ÿæœºå¤–éƒ¨ä¸”å…¨ç»§æ‰¿è‡ª java.lang.ClassLoaderï¼‰</p>
</blockquote>
<ol>
<li><p>å¯åŠ¨ç±»åŠ è½½å™¨<br>åŠ è½½ lib ä¸‹æˆ–è¢« -Xbootclasspath è·¯å¾„ä¸‹çš„ç±»</p>
</li>
<li><p>æ‰©å±•ç±»åŠ è½½å™¨<br>åŠ è½½ lib/ext æˆ–è€…è¢« java.ext.dirs ç³»ç»Ÿå˜é‡æ‰€æŒ‡å®šçš„è·¯å¾„ä¸‹çš„ç±»</p>
</li>
<li><p>å¼•ç”¨ç¨‹åºç±»åŠ è½½å™¨<br>ClassLoaderè´Ÿè´£ï¼ŒåŠ è½½ç”¨æˆ·è·¯å¾„ä¸Šæ‰€æŒ‡å®šçš„ç±»åº“ã€‚</p>
</li>
</ol>
<p><img src="/2017/09/02/reJVM/classLoader.png" alt=""><br>é™¤é¡¶å±‚å¯åŠ¨ç±»åŠ è½½å™¨ä¹‹å¤–ï¼Œå…¶ä»–éƒ½æœ‰è‡ªå·±çš„çˆ¶ç±»åŠ è½½å™¨ã€‚<br>å·¥ä½œè¿‡ç¨‹ï¼šå¦‚æœä¸€ä¸ªç±»åŠ è½½å™¨æ”¶åˆ°ä¸€ä¸ªç±»åŠ è½½çš„è¯·æ±‚ï¼Œå®ƒé¦–å…ˆä¸ä¼šè‡ªå·±åŠ è½½ï¼Œè€Œæ˜¯æŠŠè¿™ä¸ªè¯·æ±‚å§”æ´¾ç»™çˆ¶ç±»åŠ è½½å™¨ã€‚åªæœ‰çˆ¶ç±»æ— æ³•å®Œæˆæ—¶å­ç±»æ‰ä¼šå°è¯•åŠ è½½ã€‚</p>
<h5 id="6-3-2-ç ´ååŒäº²å§”æ´¾æ¨¡å‹"><a href="#6-3-2-ç ´ååŒäº²å§”æ´¾æ¨¡å‹" class="headerlink" title="6.3.2 ç ´ååŒäº²å§”æ´¾æ¨¡å‹"></a>6.3.2 ç ´ååŒäº²å§”æ´¾æ¨¡å‹</h5><blockquote>
<p>keywordï¼šçº¿ç¨‹ä¸Šä¸‹æ–‡åŠ è½½å™¨(Thread Context ClassLoader)</p>
</blockquote>
<h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><blockquote>
<p>å‰é¢ä¸¤æ¬¡ç²—ç•¥çš„é˜…è¯»ï¼Œèƒ½ç†è§£å†…å®¹ï¼Œä½†æ˜¯å¾ˆéš¾è®°ä½ç»†èŠ‚ã€‚æ¯æ¯ç¢°åˆ°ä¸ä¼šçš„çŸ¥è¯†ç‚¹å°±ä¸Šç½‘æŸ¥ï¼Œæ‰€ä»¥çŸ¥è¯†ç‚¹å¤ªç¢ç‰‡è„‘å­é‡Œæ²¡æœ‰ä½“ç³»ä¸ä»…æ›´ä¸å®¹æ˜“è®°ä½ï¼Œè€Œä¸”æ›´åŠ å®¹æ˜“æ··ä¹±ã€‚ä½†æ˜¯é€šè¿‡è¿™ç§æ–¹å¼è®°å½•å‘ç°è‡ªå·±æ¸…æ™°äº†å¾ˆå¤šï¼Œå°±ç®—ä»¥åå¿˜è®°ï¼ŒçŸ¥è¯†å†æ¬¡æ¡èµ·çš„æˆæœ¬ä¹Ÿä½äº†å¾ˆå¤šã€‚</p>
<p>è¿™æ¬¡è¿˜æœ‰ä¸€äº›ç« èŠ‚è™½ç„¶é˜…è¯»äº†ï¼Œä½†æ˜¯è¿˜æœªå®Œæˆè®°å½•ã€‚ç­‰è‡ªå·±ç†è§£æ·±åˆ»æœ‰ç©ºé—²äº†å°±å†æ¬¡è®°å½•ä¸‹æ¥ï¼Œè¿™é‡Œçš„å†…å®¹å‡å‡ºè‡ªå‘¨å¿—æ˜è€å¸ˆçš„ã€Šæ·±å…¥ç†è§£ Java è™šæ‹Ÿæœºã€‹ï¼Œæœ‰å…´è¶£çš„å¯ä»¥å…¥æ‰‹çº¸è´¨ç‰ˆã€‚</p>
<p>å¤šè°¢é˜…è¯»</p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;ç§‹æ‹›å¼€å§‹äº†ï¼Œå‰é¢ç”±äºåšåˆ«çš„äº‹è€½è¯¯äº†åŠä¸ªæœˆï¼Œä»¥å‰å­¦çš„ä¸œè¥¿ä¸ç”¨å°±å¾ˆå®¹æ˜“å¿˜è®°ã€‚æ‰€ä»¥ï¼Œè¿™æ¬¡é‡æ–°é˜…è¯»ã€Šæ·±å…¥ç†è§£ JVM è™šæ‹Ÿæœºã€‹æ—¶ï¼Œæƒ³åšä¸€ä¸ªè®°å½•ã€‚å°†ç¢ç‰‡çš„çŸ¥è¯†æ•´åˆï¼Œæ–¹ä¾¿è‡ªå·±ä»¥åé˜…è¯»ï¼ŒåŒæ—¶ä¹Ÿå’Œå¤§å®¶ä¸€èµ·åˆ†äº«ã€‚å†…å®¹ä¸­ä¼šæ·»åŠ æˆ‘è‡ªå·±çš„ç†è§£ï¼Œå…¶ä¸­å¦‚æœæœ‰é”™è¯¯ï¼Œæ¬¢è¿å¤§å®¶æŒ‡æ­£ã€‚&lt;/p&gt;
&lt;p&gt;ç›¸å…³é˜…è¯»:&lt;br&gt;&lt;a href=&quot;http://fitzeng.org/2017/08/02/reDS/&quot;&gt;1. é‡æ‹¾æ•°æ®ç»“æ„&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://fitzeng.org/2017/08/07/reOS/&quot;&gt;2. é‡æ‹¾æ“ä½œç³»ç»Ÿ&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://fitzeng.org/2017/08/31/reCN/&quot;&gt;3. é‡æ‹¾è®¡ç®—æœºç½‘ç»œ(æœªå®Œæˆ)ï¼‰&lt;/a&gt;&lt;br&gt;æ³¨æ„ï¼šä»¥ä¸Šå†…å®¹ä¼šæŒç»­æ›´æ–°ï¼Œæ¬¢è¿å¤§å®¶å…³æ³¨&lt;a href=&quot;https://github.com/mk43&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt; GitHub &lt;/a&gt; &amp;amp;&amp;amp; &lt;a href=&quot;http://fitzeng.org/&quot;&gt; Blog &lt;/a&gt; &lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="Java" scheme="http://fitzeng.org/tags/Java/"/>
    
      <category term="JVM" scheme="http://fitzeng.org/tags/JVM/"/>
    
  </entry>
  
  <entry>
    <title>é‡æ‹¾è®¡ç®—æœºç½‘ç»œ</title>
    <link href="http://fitzeng.org/2017/08/31/reCN/"/>
    <id>http://fitzeng.org/2017/08/31/reCN/</id>
    <published>2017-08-30T16:00:00.000Z</published>
    <updated>2017-09-02T02:00:18.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>ä¸»è¦æ˜¯æŠŠåœ¨é‡è¯» ã€Šè®¡ç®—æœºç½‘ç»œã€‹ å’Œ ã€Šæ•°æ®é€šè®¯ä¸ç½‘ç»œã€‹ä¸­è§‰å¾—æœ‰ä»·å€¼çš„ä¸œè¥¿è®°å½•ä¸‹æ¥ã€‚</p>
</blockquote>
<a id="more"></a>
<h2 id="1-è®¡ç®—æœºç½‘ç»œåŸºç¡€æ¦‚å¿µ"><a href="#1-è®¡ç®—æœºç½‘ç»œåŸºç¡€æ¦‚å¿µ" class="headerlink" title="1. è®¡ç®—æœºç½‘ç»œåŸºç¡€æ¦‚å¿µ"></a>1. è®¡ç®—æœºç½‘ç»œåŸºç¡€æ¦‚å¿µ</h2><blockquote>
<p>ä¸€äº›äº’ç›¸è¿æ¥çš„ã€è‡ªæ²»çš„è®¡ç®—æœºçš„é›†åˆã€‚</p>
</blockquote>
<h3 id="1-1-ç½‘ç»œåˆ†ç±»"><a href="#1-1-ç½‘ç»œåˆ†ç±»" class="headerlink" title="1.1 ç½‘ç»œåˆ†ç±»"></a>1.1 ç½‘ç»œåˆ†ç±»</h3><h4 id="ä¸åŒä½œç”¨èŒƒå›´çš„ç½‘ç»œ"><a href="#ä¸åŒä½œç”¨èŒƒå›´çš„ç½‘ç»œ" class="headerlink" title="ä¸åŒä½œç”¨èŒƒå›´çš„ç½‘ç»œ"></a>ä¸åŒä½œç”¨èŒƒå›´çš„ç½‘ç»œ</h4><ol>
<li>å¹¿åŸŸç½‘ WAN (Wide Area Network)</li>
<li>åŸåŸŸç½‘ MAN (Metropolitan Area Network)</li>
<li>å±€åŸŸç½‘ LAN (Local Area Network)</li>
<li>ä¸ªäººåŒºåŸŸç½‘ PAN (Personal Area Network)</li>
</ol>
<h4 id="ä¸åŒä½¿ç”¨è€…çš„ç½‘ç»œ"><a href="#ä¸åŒä½¿ç”¨è€…çš„ç½‘ç»œ" class="headerlink" title="ä¸åŒä½¿ç”¨è€…çš„ç½‘ç»œ"></a>ä¸åŒä½¿ç”¨è€…çš„ç½‘ç»œ</h4><ol>
<li>å…¬ç”¨ç½‘ (public network)</li>
<li>ä¸“ç”¨ç½‘ (private network)</li>
</ol>
<h4 id="ç”¨æ¥æŠŠç”¨æˆ·æ¥å…¥åˆ°å› ç‰¹ç½‘çš„ç½‘ç»œ"><a href="#ç”¨æ¥æŠŠç”¨æˆ·æ¥å…¥åˆ°å› ç‰¹ç½‘çš„ç½‘ç»œ" class="headerlink" title="ç”¨æ¥æŠŠç”¨æˆ·æ¥å…¥åˆ°å› ç‰¹ç½‘çš„ç½‘ç»œ"></a>ç”¨æ¥æŠŠç”¨æˆ·æ¥å…¥åˆ°å› ç‰¹ç½‘çš„ç½‘ç»œ</h4><ol>
<li>æ¥å…¥ç½‘ AN (Access Network)</li>
</ol>
<h3 id="1-2-è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½æŒ‡æ ‡"><a href="#1-2-è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½æŒ‡æ ‡" class="headerlink" title="1.2 è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½æŒ‡æ ‡"></a>1.2 è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½æŒ‡æ ‡</h3><h4 id="é€Ÿç‡-bit-s"><a href="#é€Ÿç‡-bit-s" class="headerlink" title="é€Ÿç‡ (bit/s)"></a>é€Ÿç‡ (bit/s)</h4><h4 id="å¸¦å®½"><a href="#å¸¦å®½" class="headerlink" title="å¸¦å®½"></a>å¸¦å®½</h4><ol>
<li>ä¿¡å·å…·æœ‰çš„é¢‘å¸¦å®½åº¦ (xxxHZ)</li>
<li>åœ¨è®¡ç®—æœºç½‘ç»œä¸­ï¼Œä»æ¥è¡¨ç¤ºé€šè®¯çº¿è·¯æ‰€èƒ½ä¼ é€æ•°æ®çš„èƒ½åŠ›ã€‚å› æ­¤ç½‘ç»œä¸­çš„å¸¦å®½è¡¨ç¤ºåœ¨å•ä½æ—¶é—´å†…ongoing ç½‘ç»œä¸­çš„æŸä¸€ç‚¹åˆ°å¦ä¸€ç‚¹æ‰€èƒ½é€šè¿‡çš„<code>æœ€é«˜æ•°æ®ç‡</code>ã€‚å•ä½æ˜¯æ¯”ç‰¹æ¯ç§’(b/s)</li>
</ol>
<h4 id="ååé‡"><a href="#ååé‡" class="headerlink" title="ååé‡"></a>ååé‡</h4><blockquote>
<p>å•ä½æ—¶é—´é€šè¿‡æŸä¸ªç½‘ç»œ(æˆ–ä¿¡é“ã€æ¥å£)çš„æ•°æ®é‡</p>
</blockquote>
<h4 id="æ—¶å»¶"><a href="#æ—¶å»¶" class="headerlink" title="æ—¶å»¶"></a>æ—¶å»¶</h4><blockquote>
<p>æ•°æ®ä»ç½‘ç»œçš„ä¸€ç«¯å‘é€åˆ°å¦ä¸€ç«¯æ‰€éœ€çš„æ—¶é—´</p>
</blockquote>
<p><code>æ€»å»¶æ—¶ = å‘é€æ—¶å»¶ + ä¼ æ’­æ—¶å»¶ + å¤„ç†æ—¶å»¶ + æ’é˜Ÿæ—¶å»¶</code></p>
<p>å‘é€æ—¶å»¶(ä¼ è¾“æ—¶å»¶)</p>
<blockquote>
<p>å‘é€æ•°æ®å¸§çš„æ—¶é—´</p>
</blockquote>
<p><code>å‘é€æ—¶å»¶ = æ•°æ®å¸§é•¿åº¦(b) / ä¿¡é“å¸¦å®½(b/s)</code></p>
<p>ä¼ æ’­æ—¶å»¶</p>
<blockquote>
<p>ç”µç£æ³¢åœ¨ä¿¡é“ä¸­ä¼ æ’­ä¸€å®šè·ç¦»èŠ±è´¹çš„æ—¶é—´</p>
</blockquote>
<p><code>ä¼ æ’­æ—¶å»¶ = ä¿¡é“é•¿åº¦(m) / ç”µç£æ³¢åœ¨ä¿¡é“ä¸Šçš„ä¼ æ’­é€Ÿç‡(m/s)</code></p>
<p>å¤„ç†æ—¶å»¶</p>
<blockquote>
<p>ä¸»æœºæˆ–è·¯ç”±å™¨åœ¨æ”¶åˆ°åˆ†ç»„æ—¶è¦èŠ±è´¹ä¸€å®šæ—¶é—´å¤„ç†ã€‚</p>
</blockquote>
<p>æ’é˜Ÿæ—¶å»¶</p>
<blockquote>
<p>åœ¨è·¯ç”±å™¨ä¸­è¾“å…¥é˜Ÿåˆ—ä¸­æ’é˜Ÿç­‰å¾…çš„æ—¶é—´</p>
</blockquote>
<h4 id="æ—¶å»¶å¸¦å®½ç§¯"><a href="#æ—¶å»¶å¸¦å®½ç§¯" class="headerlink" title="æ—¶å»¶å¸¦å®½ç§¯"></a>æ—¶å»¶å¸¦å®½ç§¯</h4><blockquote>
<p>ä»¥æ¯”ç‰¹ä¸ºå•ä½çš„é“¾è·¯é•¿åº¦(å¯ä»¥ç†è§£ä¸º <code>ä½“ç§¯ = æˆªé¢ * é•¿åº¦</code>)</p>
</blockquote>
<p><code>æ—¶å»¶å¸¦å®½ç§¯ = ä¼ æ’­æ—¶å»¶ * å¸¦å®½</code></p>
<h4 id="å¾€è¿”æ—¶é—´-RTT-Round-Trip-Time"><a href="#å¾€è¿”æ—¶é—´-RTT-Round-Trip-Time" class="headerlink" title="å¾€è¿”æ—¶é—´ RTT (Round-Trip Time)"></a>å¾€è¿”æ—¶é—´ RTT (Round-Trip Time)</h4><blockquote>
<p>ä»å‘é€æ–¹å‘é€æ•°æ®å¼€å§‹åˆ°å‘é€æ–¹æ¥æ”¶åˆ°æ¥è‡ªæ¥æ”¶æ–¹çš„ç¡®è®¤æ€»å…±ç»å†çš„æ—¶é—´ã€‚</p>
</blockquote>
<h4 id="åˆ©ç”¨ç‡"><a href="#åˆ©ç”¨ç‡" class="headerlink" title="åˆ©ç”¨ç‡"></a>åˆ©ç”¨ç‡</h4><p>ä¿¡é“åˆ©ç”¨ç‡</p>
<blockquote>
<p>æŸä¿¡é“æœ‰ç™¾åˆ†ä¹‹å‡ çš„æ—¶é—´æ˜¯è¢«åˆ©ç”¨çš„</p>
</blockquote>
<p>ç½‘ç»œåˆ©ç”¨ç‡</p>
<blockquote>
<p>D0 : ç½‘ç»œç©ºé—²æ—¶çš„æ—¶å»¶ D : å½“å‰ç½‘ç»œçš„æ—¶å»¶ U : åˆ©ç”¨ç‡</p>
</blockquote>
<p><code>D = D0 / (1 - U)</code></p>
<h3 id="1-3-è®¡ç®—æœºç½‘ç»œçš„ä½“ç³»ç»“æ„"><a href="#1-3-è®¡ç®—æœºç½‘ç»œçš„ä½“ç³»ç»“æ„" class="headerlink" title="1.3 è®¡ç®—æœºç½‘ç»œçš„ä½“ç³»ç»“æ„"></a>1.3 è®¡ç®—æœºç½‘ç»œçš„ä½“ç³»ç»“æ„</h3><blockquote>
<p>æ¯å±‚çš„å…·ä½“ä»‹ç»åé¢ç« èŠ‚ç»™å‡º</p>
</blockquote>
<p><img src="/2017/08/31/reCN/osi7.png" alt=""></p>
<h2 id="2-ç‰©ç†å±‚"><a href="#2-ç‰©ç†å±‚" class="headerlink" title="2. ç‰©ç†å±‚"></a>2. ç‰©ç†å±‚</h2>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;ä¸»è¦æ˜¯æŠŠåœ¨é‡è¯» ã€Šè®¡ç®—æœºç½‘ç»œã€‹ å’Œ ã€Šæ•°æ®é€šè®¯ä¸ç½‘ç»œã€‹ä¸­è§‰å¾—æœ‰ä»·å€¼çš„ä¸œè¥¿è®°å½•ä¸‹æ¥ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="è®¡ç®—æœºç½‘ç»œ" scheme="http://fitzeng.org/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    
  </entry>
  
</feed>
